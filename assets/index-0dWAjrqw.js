(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $c={exports:{}},$o={},Wc={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function E_(){if(cp)return xe;cp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function D(x){return x===null||typeof x!="object"?null:(x=N&&x[N]||x["@@iterator"],typeof x=="function"?x:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,Y={};function b(x,W,fe){this.props=x,this.context=W,this.refs=Y,this.updater=fe||$}b.prototype.isReactComponent={},b.prototype.setState=function(x,W){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,W,"setState")},b.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Pe(){}Pe.prototype=b.prototype;function ve(x,W,fe){this.props=x,this.context=W,this.refs=Y,this.updater=fe||$}var we=ve.prototype=new Pe;we.constructor=ve,Z(we,b.prototype),we.isPureReactComponent=!0;var Ne=Array.isArray,it=Object.prototype.hasOwnProperty,Le={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function w(x,W,fe){var Re,Ie={},De=null,je=null;if(W!=null)for(Re in W.ref!==void 0&&(je=W.ref),W.key!==void 0&&(De=""+W.key),W)it.call(W,Re)&&!k.hasOwnProperty(Re)&&(Ie[Re]=W[Re]);var ze=arguments.length-2;if(ze===1)Ie.children=fe;else if(1<ze){for(var Ke=Array(ze),pt=0;pt<ze;pt++)Ke[pt]=arguments[pt+2];Ie.children=Ke}if(x&&x.defaultProps)for(Re in ze=x.defaultProps,ze)Ie[Re]===void 0&&(Ie[Re]=ze[Re]);return{$$typeof:i,type:x,key:De,ref:je,props:Ie,_owner:Le.current}}function A(x,W){return{$$typeof:i,type:x.type,key:W,ref:x.ref,props:x.props,_owner:x._owner}}function C(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function V(x){var W={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(fe){return W[fe]})}var O=/\/+/g;function I(x,W){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):W.toString(36)}function et(x,W,fe,Re,Ie){var De=typeof x;(De==="undefined"||De==="boolean")&&(x=null);var je=!1;if(x===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(x.$$typeof){case i:case e:je=!0}}if(je)return je=x,Ie=Ie(je),x=Re===""?"."+I(je,0):Re,Ne(Ie)?(fe="",x!=null&&(fe=x.replace(O,"$&/")+"/"),et(Ie,W,fe,"",function(pt){return pt})):Ie!=null&&(C(Ie)&&(Ie=A(Ie,fe+(!Ie.key||je&&je.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+x)),W.push(Ie)),1;if(je=0,Re=Re===""?".":Re+":",Ne(x))for(var ze=0;ze<x.length;ze++){De=x[ze];var Ke=Re+I(De,ze);je+=et(De,W,fe,Ke,Ie)}else if(Ke=D(x),typeof Ke=="function")for(x=Ke.call(x),ze=0;!(De=x.next()).done;)De=De.value,Ke=Re+I(De,ze++),je+=et(De,W,fe,Ke,Ie);else if(De==="object")throw W=String(x),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return je}function ut(x,W,fe){if(x==null)return x;var Re=[],Ie=0;return et(x,Re,"","",function(De){return W.call(fe,De,Ie++)}),Re}function ct(x){if(x._status===-1){var W=x._result;W=W(),W.then(function(fe){(x._status===0||x._status===-1)&&(x._status=1,x._result=fe)},function(fe){(x._status===0||x._status===-1)&&(x._status=2,x._result=fe)}),x._status===-1&&(x._status=0,x._result=W)}if(x._status===1)return x._result.default;throw x._result}var be={current:null},ie={transition:null},de={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ie,ReactCurrentOwner:Le};function J(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:ut,forEach:function(x,W,fe){ut(x,function(){W.apply(this,arguments)},fe)},count:function(x){var W=0;return ut(x,function(){W++}),W},toArray:function(x){return ut(x,function(W){return W})||[]},only:function(x){if(!C(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},xe.Component=b,xe.Fragment=n,xe.Profiler=a,xe.PureComponent=ve,xe.StrictMode=s,xe.Suspense=_,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,xe.act=J,xe.cloneElement=function(x,W,fe){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var Re=Z({},x.props),Ie=x.key,De=x.ref,je=x._owner;if(W!=null){if(W.ref!==void 0&&(De=W.ref,je=Le.current),W.key!==void 0&&(Ie=""+W.key),x.type&&x.type.defaultProps)var ze=x.type.defaultProps;for(Ke in W)it.call(W,Ke)&&!k.hasOwnProperty(Ke)&&(Re[Ke]=W[Ke]===void 0&&ze!==void 0?ze[Ke]:W[Ke])}var Ke=arguments.length-2;if(Ke===1)Re.children=fe;else if(1<Ke){ze=Array(Ke);for(var pt=0;pt<Ke;pt++)ze[pt]=arguments[pt+2];Re.children=ze}return{$$typeof:i,type:x.type,key:Ie,ref:De,props:Re,_owner:je}},xe.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},xe.createElement=w,xe.createFactory=function(x){var W=w.bind(null,x);return W.type=x,W},xe.createRef=function(){return{current:null}},xe.forwardRef=function(x){return{$$typeof:g,render:x}},xe.isValidElement=C,xe.lazy=function(x){return{$$typeof:S,_payload:{_status:-1,_result:x},_init:ct}},xe.memo=function(x,W){return{$$typeof:v,type:x,compare:W===void 0?null:W}},xe.startTransition=function(x){var W=ie.transition;ie.transition={};try{x()}finally{ie.transition=W}},xe.unstable_act=J,xe.useCallback=function(x,W){return be.current.useCallback(x,W)},xe.useContext=function(x){return be.current.useContext(x)},xe.useDebugValue=function(){},xe.useDeferredValue=function(x){return be.current.useDeferredValue(x)},xe.useEffect=function(x,W){return be.current.useEffect(x,W)},xe.useId=function(){return be.current.useId()},xe.useImperativeHandle=function(x,W,fe){return be.current.useImperativeHandle(x,W,fe)},xe.useInsertionEffect=function(x,W){return be.current.useInsertionEffect(x,W)},xe.useLayoutEffect=function(x,W){return be.current.useLayoutEffect(x,W)},xe.useMemo=function(x,W){return be.current.useMemo(x,W)},xe.useReducer=function(x,W,fe){return be.current.useReducer(x,W,fe)},xe.useRef=function(x){return be.current.useRef(x)},xe.useState=function(x){return be.current.useState(x)},xe.useSyncExternalStore=function(x,W,fe){return be.current.useSyncExternalStore(x,W,fe)},xe.useTransition=function(){return be.current.useTransition()},xe.version="18.3.1",xe}var hp;function Sh(){return hp||(hp=1,Wc.exports=E_()),Wc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function w_(){if(fp)return $o;fp=1;var i=Sh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,_,v){var S,N={},D=null,$=null;v!==void 0&&(D=""+v),_.key!==void 0&&(D=""+_.key),_.ref!==void 0&&($=_.ref);for(S in _)s.call(_,S)&&!c.hasOwnProperty(S)&&(N[S]=_[S]);if(g&&g.defaultProps)for(S in _=g.defaultProps,_)N[S]===void 0&&(N[S]=_[S]);return{$$typeof:e,type:g,key:D,ref:$,props:N,_owner:a.current}}return $o.Fragment=n,$o.jsx=f,$o.jsxs=f,$o}var dp;function T_(){return dp||(dp=1,$c.exports=w_()),$c.exports}var se=T_(),He=Sh();const I_=Rm(He);var Cl={},Hc={exports:{}},on={},qc={exports:{}},Qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function S_(){return pp||(pp=1,function(i){function e(ie,de){var J=ie.length;ie.push(de);e:for(;0<J;){var x=J-1>>>1,W=ie[x];if(0<a(W,de))ie[x]=de,ie[J]=W,J=x;else break e}}function n(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var de=ie[0],J=ie.pop();if(J!==de){ie[0]=J;e:for(var x=0,W=ie.length,fe=W>>>1;x<fe;){var Re=2*(x+1)-1,Ie=ie[Re],De=Re+1,je=ie[De];if(0>a(Ie,J))De<W&&0>a(je,Ie)?(ie[x]=je,ie[De]=J,x=De):(ie[x]=Ie,ie[Re]=J,x=Re);else if(De<W&&0>a(je,J))ie[x]=je,ie[De]=J,x=De;else break e}}return de}function a(ie,de){var J=ie.sortIndex-de.sortIndex;return J!==0?J:ie.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var _=[],v=[],S=1,N=null,D=3,$=!1,Z=!1,Y=!1,b=typeof setTimeout=="function"?setTimeout:null,Pe=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function we(ie){for(var de=n(v);de!==null;){if(de.callback===null)s(v);else if(de.startTime<=ie)s(v),de.sortIndex=de.expirationTime,e(_,de);else break;de=n(v)}}function Ne(ie){if(Y=!1,we(ie),!Z)if(n(_)!==null)Z=!0,ct(it);else{var de=n(v);de!==null&&be(Ne,de.startTime-ie)}}function it(ie,de){Z=!1,Y&&(Y=!1,Pe(w),w=-1),$=!0;var J=D;try{for(we(de),N=n(_);N!==null&&(!(N.expirationTime>de)||ie&&!V());){var x=N.callback;if(typeof x=="function"){N.callback=null,D=N.priorityLevel;var W=x(N.expirationTime<=de);de=i.unstable_now(),typeof W=="function"?N.callback=W:N===n(_)&&s(_),we(de)}else s(_);N=n(_)}if(N!==null)var fe=!0;else{var Re=n(v);Re!==null&&be(Ne,Re.startTime-de),fe=!1}return fe}finally{N=null,D=J,$=!1}}var Le=!1,k=null,w=-1,A=5,C=-1;function V(){return!(i.unstable_now()-C<A)}function O(){if(k!==null){var ie=i.unstable_now();C=ie;var de=!0;try{de=k(!0,ie)}finally{de?I():(Le=!1,k=null)}}else Le=!1}var I;if(typeof ve=="function")I=function(){ve(O)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,ut=et.port2;et.port1.onmessage=O,I=function(){ut.postMessage(null)}}else I=function(){b(O,0)};function ct(ie){k=ie,Le||(Le=!0,I())}function be(ie,de){w=b(function(){ie(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_continueExecution=function(){Z||$||(Z=!0,ct(it))},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(ie){switch(D){case 1:case 2:case 3:var de=3;break;default:de=D}var J=D;D=de;try{return ie()}finally{D=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ie,de){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var J=D;D=ie;try{return de()}finally{D=J}},i.unstable_scheduleCallback=function(ie,de,J){var x=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?x+J:x):J=x,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,ie={id:S++,callback:de,priorityLevel:ie,startTime:J,expirationTime:W,sortIndex:-1},J>x?(ie.sortIndex=J,e(v,ie),n(_)===null&&ie===n(v)&&(Y?(Pe(w),w=-1):Y=!0,be(Ne,J-x))):(ie.sortIndex=W,e(_,ie),Z||$||(Z=!0,ct(it))),ie},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(ie){var de=D;return function(){var J=D;D=de;try{return ie.apply(this,arguments)}finally{D=J}}}}(Qc)),Qc}var mp;function A_(){return mp||(mp=1,qc.exports=S_()),qc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function C_(){if(gp)return on;gp=1;var i=Sh(),e=A_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function D(t){return _.call(N,t)?!0:_.call(S,t)?!1:v.test(t)?N[t]=!0:(S[t]=!0,!1)}function $(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z(t,r,o,u){if(r===null||typeof r>"u"||$(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Y(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new Y(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];b[r]=new Y(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new Y(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new Y(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new Y(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new Y(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new Y(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new Y(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new Y(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pe=/[\-:]([a-z])/g;function ve(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Pe,ve);b[r]=new Y(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Pe,ve);b[r]=new Y(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Pe,ve);b[r]=new Y(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new Y(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new Y(t,1,!1,t.toLowerCase(),null,!0,!0)});function we(t,r,o,u){var h=b.hasOwnProperty(r)?b[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Z(r,o,h,u)&&(o=null),u||h===null?D(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ne=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,it=Symbol.for("react.element"),Le=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),V=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),ct=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ie=Symbol.iterator;function de(t){return t===null||typeof t!="object"?null:(t=ie&&t[ie]||t["@@iterator"],typeof t=="function"?t:null)}var J=Object.assign,x;function W(t){if(x===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);x=r&&r[1]||""}return`
`+x+t}var fe=!1;function Re(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,T=p.length-1;1<=y&&0<=T&&h[y]!==p[T];)T--;for(;1<=y&&0<=T;y--,T--)if(h[y]!==p[T]){if(y!==1||T!==1)do if(y--,T--,0>T||h[y]!==p[T]){var P=`
`+h[y].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=y&&0<=T);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?W(t):""}function Ie(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Re(t.type,!1),t;case 11:return t=Re(t.type.render,!1),t;case 1:return t=Re(t.type,!0),t;default:return""}}function De(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case Le:return"Portal";case A:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case et:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ut:return r=t.displayName||null,r!==null?r:De(t.type)||"Memo";case ct:r=t._payload,t=t._init;try{return De(t(r))}catch{}}return null}function je(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ze(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ke(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=Ke(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Cn(t){t._valueTracker||(t._valueTracker=pt(t))}function j(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Ke(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function B(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ee(t,r){var o=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function te(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=ze(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function re(t,r){r=r.checked,r!=null&&we(t,"checked",r,!1)}function me(t,r){re(t,r);var o=ze(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ve(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ve(t,r.type,ze(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Se(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ve(t,r,o){(r!=="number"||B(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var vt=Array.isArray;function Et(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+ze(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function mt(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pn(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(vt(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:ze(o)}}function Hn(t,r){var o=ze(r.value),u=ze(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Ys(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function wt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?wt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ur,Js=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ur.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Pr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ci.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ui[r]=ui[t]})});function Zs(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ui.hasOwnProperty(t)&&ui[t]?(""+r).trim():r+"px"}function eo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Zs(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var to=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function no(t,r){if(r){if(to[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ro(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function qi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qi=null,mn=null,qn=null;function Ki(t){if(t=Ro(t)){if(typeof Qi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=ja(r),Qi(t.stateNode,t.type,r))}}function Qn(t){mn?qn?qn.push(t):qn=[t]:mn=t}function io(){if(mn){var t=mn,r=qn;if(qn=mn=null,Ki(t),r)for(t=0;t<r.length;t++)Ki(r[t])}}function fi(t,r){return t(r)}function so(){}var cr=!1;function oo(t,r,o){if(cr)return t(r,o);cr=!0;try{return fi(t,r,o)}finally{cr=!1,(mn!==null||qn!==null)&&(so(),io())}}function ht(t,r){var o=t.stateNode;if(o===null)return null;var u=ja(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Gi=!1;if(g)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{Gi=!1}function di(t,r,o,u,h,p,y,T,P){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(Q){this.onError(Q)}}var pi=!1,Xi=null,kn=!1,ao=null,yu={onError:function(t){pi=!0,Xi=t}};function Yi(t,r,o,u,h,p,y,T,P){pi=!1,Xi=null,di.apply(yu,arguments)}function fa(t,r,o,u,h,p,y,T,P){if(Yi.apply(this,arguments),pi){if(pi){var U=Xi;pi=!1,Xi=null}else throw Error(n(198));kn||(kn=!0,ao=U)}}function Nn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function mi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Vn(t){if(Nn(t)!==t)throw Error(n(188))}function da(t){var r=t.alternate;if(!r){if(r=Nn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Vn(h),t;if(p===u)return Vn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,T=h.child;T;){if(T===o){y=!0,o=h,u=p;break}if(T===u){y=!0,u=h,o=p;break}T=T.sibling}if(!y){for(T=p.child;T;){if(T===o){y=!0,o=p,u=h;break}if(T===u){y=!0,u=p,o=h;break}T=T.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function lo(t){return t=da(t),t!==null?Ji(t):null}function Ji(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Ji(t);if(r!==null)return r;t=t.sibling}return null}var Zi=e.unstable_scheduleCallback,uo=e.unstable_cancelCallback,pa=e.unstable_shouldYield,_u=e.unstable_requestPaint,Xe=e.unstable_now,ma=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,Rr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,co=e.unstable_LowPriority,ga=e.unstable_IdlePriority,yi=null,ln=null;function ya(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:va,ho=Math.log,_a=Math.LN2;function va(t){return t>>>=0,t===0?32:31-(ho(t)/_a|0)|0}var es=64,ts=4194304;function kr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var T=y&~h;T!==0?u=kr(T):(p&=y,p!==0&&(u=kr(p)))}else y=o&~h,y!==0?u=kr(y):p!==0&&(u=kr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Kt(r),h=1<<o,u|=t[o],r&=~h;return u}function vu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Kt(p),T=1<<y,P=h[y];P===-1?((T&o)===0||(T&u)!==0)&&(h[y]=vu(T,r)):P<=r&&(t.expiredLanes|=T),p&=~T}}function un(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=es;return es<<=1,(es&4194240)===0&&(es=64),t}function Nr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Vr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Kt(r),t[r]=o}function Ge(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Kt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function xr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Kt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Fe=0;function Dr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ea,ns,wa,Ta,Ia,fo=!1,Kn=[],Ot=null,xn=null,Dn=null,Or=new Map,yn=new Map,Gn=[],Eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sa(t,r){switch(t){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Or.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(r.pointerId)}}function Jt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ro(r),r!==null&&ns(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function wu(t,r,o,u,h){switch(r){case"focusin":return Ot=Jt(Ot,t,r,o,u,h),!0;case"dragenter":return xn=Jt(xn,t,r,o,u,h),!0;case"mouseover":return Dn=Jt(Dn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Or.set(p,Jt(Or.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,yn.set(p,Jt(yn.get(p)||null,t,r,o,u,h)),!0}return!1}function Aa(t){var r=Si(t.target);if(r!==null){var o=Nn(r);if(o!==null){if(r=o.tag,r===13){if(r=mi(o),r!==null){t.blockedOn=r,Ia(t.priority,function(){wa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=rs(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);hi=u,o.target.dispatchEvent(u),hi=null}else return r=Ro(o),r!==null&&ns(r),t.blockedOn=o,!1;r.shift()}return!0}function Ei(t,r,o){fr(t)&&o.delete(r)}function Ca(){fo=!1,Ot!==null&&fr(Ot)&&(Ot=null),xn!==null&&fr(xn)&&(xn=null),Dn!==null&&fr(Dn)&&(Dn=null),Or.forEach(Ei),yn.forEach(Ei)}function On(t,r){t.blockedOn===r&&(t.blockedOn=null,fo||(fo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ca)))}function Fn(t){function r(h){return On(h,t)}if(0<Kn.length){On(Kn[0],t);for(var o=1;o<Kn.length;o++){var u=Kn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Ot!==null&&On(Ot,t),xn!==null&&On(xn,t),Dn!==null&&On(Dn,t),Or.forEach(r),yn.forEach(r),o=0;o<Gn.length;o++)u=Gn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Gn.length&&(o=Gn[0],o.blockedOn===null);)Aa(o),o.blockedOn===null&&Gn.shift()}var dr=Ne.ReactCurrentBatchConfig,Fr=!0;function tt(t,r,o,u){var h=Fe,p=dr.transition;dr.transition=null;try{Fe=1,po(t,r,o,u)}finally{Fe=h,dr.transition=p}}function Tu(t,r,o,u){var h=Fe,p=dr.transition;dr.transition=null;try{Fe=4,po(t,r,o,u)}finally{Fe=h,dr.transition=p}}function po(t,r,o,u){if(Fr){var h=rs(t,r,o,u);if(h===null)Du(t,r,u,wi,o),Sa(t,u);else if(wu(h,t,r,o,u))u.stopPropagation();else if(Sa(t,u),r&4&&-1<Eu.indexOf(t)){for(;h!==null;){var p=Ro(h);if(p!==null&&Ea(p),p=rs(t,r,o,u),p===null&&Du(t,r,u,wi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Du(t,r,u,null,o)}}var wi=null;function rs(t,r,o,u){if(wi=null,t=qi(u),t=Si(t),t!==null)if(r=Nn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=mi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return wi=t,null}function mo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ma()){case gi:return 1;case Rr:return 4;case gn:case co:return 16;case ga:return 536870912;default:return 16}default:return 16}}var cn=null,is=null,Zt=null;function go(){if(Zt)return Zt;var t,r=is,o=r.length,u,h="value"in cn?cn.value:cn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return Zt=h.slice(t,1<u?1-u:void 0)}function ss(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Xn(){return!0}function yo(){return!1}function Ft(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xn:yo,this.isPropagationStopped=yo,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),r}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=Ft(Ln),Yn=J({},Ln,{view:0,detail:0}),Iu=Ft(Yn),as,pr,Lr,Ti=J({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(as=t.screenX-Lr.screenX,pr=t.screenY-Lr.screenY):pr=as=0,Lr=t),as)},movementY:function(t){return"movementY"in t?t.movementY:pr}}),ls=Ft(Ti),_o=J({},Ti,{dataTransfer:0}),Pa=Ft(_o),us=J({},Yn,{relatedTarget:0}),cs=Ft(us),Ra=J({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Ft(Ra),ka=J({},Ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Na=Ft(ka),Va=J({},Ln,{data:0}),vo=Ft(Va),hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Da(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=xa[t])?!!r[t]:!1}function Jn(){return Da}var l=J({},Yn,{key:function(t){if(t.key){var r=hs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(t){return t.type==="keypress"?ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Ft(l),m=J({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ft(m),F=J({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn}),z=Ft(F),ne=J({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Ft(ne),It=J({},Ti,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Ft(It),kt=[9,13,27,32],gt=g&&"CompositionEvent"in window,_n=null;g&&"documentMode"in document&&(_n=document.documentMode);var hn=g&&"TextEvent"in window&&!_n,Ii=g&&(!gt||_n&&8<_n&&11>=_n),fs=" ",rf=!1;function sf(t,r){switch(t){case"keyup":return kt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function yy(t,r){switch(t){case"compositionend":return of(r);case"keypress":return r.which!==32?null:(rf=!0,fs);case"textInput":return t=r.data,t===fs&&rf?null:t;default:return null}}function _y(t,r){if(ds)return t==="compositionend"||!gt&&sf(t,r)?(t=go(),Zt=is=cn=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ii&&r.locale!=="ko"?null:r.data;default:return null}}var vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!vy[t.type]:r==="textarea"}function lf(t,r,o,u){Qn(u),r=Ba(r,"onChange"),0<r.length&&(o=new os("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Eo=null,wo=null;function Ey(t){Cf(t,0)}function Oa(t){var r=_s(t);if(j(r))return t}function wy(t,r){if(t==="change")return r}var uf=!1;if(g){var Su;if(g){var Au="oninput"in document;if(!Au){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Au=typeof cf.oninput=="function"}Su=Au}else Su=!1;uf=Su&&(!document.documentMode||9<document.documentMode)}function hf(){Eo&&(Eo.detachEvent("onpropertychange",ff),wo=Eo=null)}function ff(t){if(t.propertyName==="value"&&Oa(wo)){var r=[];lf(r,wo,t,qi(t)),oo(Ey,r)}}function Ty(t,r,o){t==="focusin"?(hf(),Eo=r,wo=o,Eo.attachEvent("onpropertychange",ff)):t==="focusout"&&hf()}function Iy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(wo)}function Sy(t,r){if(t==="click")return Oa(r)}function Ay(t,r){if(t==="input"||t==="change")return Oa(r)}function Cy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Mn=typeof Object.is=="function"?Object.is:Cy;function To(t,r){if(Mn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!_.call(r,h)||!Mn(t[h],r[h]))return!1}return!0}function df(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pf(t,r){var o=df(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=df(o)}}function mf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?mf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function gf(){for(var t=window,r=B();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=B(t.document)}return r}function Cu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Py(t){var r=gf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&mf(o.ownerDocument.documentElement,o)){if(u!==null&&Cu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=pf(o,p);var y=pf(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ry=g&&"documentMode"in document&&11>=document.documentMode,ps=null,Pu=null,Io=null,Ru=!1;function yf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ru||ps==null||ps!==B(u)||(u=ps,"selectionStart"in u&&Cu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Io&&To(Io,u)||(Io=u,u=Ba(Pu,"onSelect"),0<u.length&&(r=new os("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ps)))}function Fa(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ms={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},ku={},_f={};g&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function La(t){if(ku[t])return ku[t];if(!ms[t])return t;var r=ms[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in _f)return ku[t]=r[o];return t}var vf=La("animationend"),Ef=La("animationiteration"),wf=La("animationstart"),Tf=La("transitionend"),If=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,r){If.set(t,r),c(r,[t])}for(var Nu=0;Nu<Sf.length;Nu++){var Vu=Sf[Nu],ky=Vu.toLowerCase(),Ny=Vu[0].toUpperCase()+Vu.slice(1);Mr(ky,"on"+Ny)}Mr(vf,"onAnimationEnd"),Mr(Ef,"onAnimationIteration"),Mr(wf,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Tf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Af(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,fa(u,r,void 0,t),t.currentTarget=null}function Cf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var T=u[y],P=T.instance,U=T.currentTarget;if(T=T.listener,P!==p&&h.isPropagationStopped())break e;Af(h,T,U),p=P}else for(y=0;y<u.length;y++){if(T=u[y],P=T.instance,U=T.currentTarget,T=T.listener,P!==p&&h.isPropagationStopped())break e;Af(h,T,U),p=P}}}if(kn)throw t=ao,kn=!1,ao=null,t}function Je(t,r){var o=r[Uu];o===void 0&&(o=r[Uu]=new Set);var u=t+"__bubble";o.has(u)||(Pf(r,t,2,!1),o.add(u))}function xu(t,r,o){var u=0;r&&(u|=4),Pf(o,t,u,r)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Ma]){t[Ma]=!0,s.forEach(function(o){o!=="selectionchange"&&(Vy.has(o)||xu(o,!1,t),xu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ma]||(r[Ma]=!0,xu("selectionchange",!1,r))}}function Pf(t,r,o,u){switch(mo(r)){case 1:var h=tt;break;case 4:h=Tu;break;default:h=po}o=h.bind(null,r,o,t),h=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Du(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var P=y.tag;if((P===3||P===4)&&(P=y.stateNode.containerInfo,P===h||P.nodeType===8&&P.parentNode===h))return;y=y.return}for(;T!==null;){if(y=Si(T),y===null)return;if(P=y.tag,P===5||P===6){u=p=y;continue e}T=T.parentNode}}u=u.return}oo(function(){var U=p,Q=qi(o),G=[];e:{var q=If.get(t);if(q!==void 0){var oe=os,ue=t;switch(t){case"keypress":if(ss(o)===0)break e;case"keydown":case"keyup":oe=d;break;case"focusin":ue="focus",oe=cs;break;case"focusout":ue="blur",oe=cs;break;case"beforeblur":case"afterblur":oe=cs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=z;break;case vf:case Ef:case wf:oe=mr;break;case Tf:oe=Qe;break;case"scroll":oe=Iu;break;case"wheel":oe=Me;break;case"copy":case"cut":case"paste":oe=Na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=E}var ce=(r&4)!==0,ft=!ce&&t==="scroll",L=ce?q!==null?q+"Capture":null:q;ce=[];for(var R=U,M;R!==null;){M=R;var X=M.stateNode;if(M.tag===5&&X!==null&&(M=X,L!==null&&(X=ht(R,L),X!=null&&ce.push(Co(R,X,M)))),ft)break;R=R.return}0<ce.length&&(q=new oe(q,ue,null,o,Q),G.push({event:q,listeners:ce}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",q&&o!==hi&&(ue=o.relatedTarget||o.fromElement)&&(Si(ue)||ue[gr]))break e;if((oe||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,oe?(ue=o.relatedTarget||o.toElement,oe=U,ue=ue?Si(ue):null,ue!==null&&(ft=Nn(ue),ue!==ft||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=U),oe!==ue)){if(ce=ls,X="onMouseLeave",L="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ce=E,X="onPointerLeave",L="onPointerEnter",R="pointer"),ft=oe==null?q:_s(oe),M=ue==null?q:_s(ue),q=new ce(X,R+"leave",oe,o,Q),q.target=ft,q.relatedTarget=M,X=null,Si(Q)===U&&(ce=new ce(L,R+"enter",ue,o,Q),ce.target=M,ce.relatedTarget=ft,X=ce),ft=X,oe&&ue)t:{for(ce=oe,L=ue,R=0,M=ce;M;M=gs(M))R++;for(M=0,X=L;X;X=gs(X))M++;for(;0<R-M;)ce=gs(ce),R--;for(;0<M-R;)L=gs(L),M--;for(;R--;){if(ce===L||L!==null&&ce===L.alternate)break t;ce=gs(ce),L=gs(L)}ce=null}else ce=null;oe!==null&&Rf(G,q,oe,ce,!1),ue!==null&&ft!==null&&Rf(G,ft,ue,ce,!0)}}e:{if(q=U?_s(U):window,oe=q.nodeName&&q.nodeName.toLowerCase(),oe==="select"||oe==="input"&&q.type==="file")var he=wy;else if(af(q))if(uf)he=Ay;else{he=Iy;var ge=Ty}else(oe=q.nodeName)&&oe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(he=Sy);if(he&&(he=he(t,U))){lf(G,he,o,Q);break e}ge&&ge(t,q,U),t==="focusout"&&(ge=q._wrapperState)&&ge.controlled&&q.type==="number"&&Ve(q,"number",q.value)}switch(ge=U?_s(U):window,t){case"focusin":(af(ge)||ge.contentEditable==="true")&&(ps=ge,Pu=U,Io=null);break;case"focusout":Io=Pu=ps=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,yf(G,o,Q);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":yf(G,o,Q)}var ye;if(gt)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ds?sf(t,o)&&(Te="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(Ii&&o.locale!=="ko"&&(ds||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ds&&(ye=go()):(cn=Q,is="value"in cn?cn.value:cn.textContent,ds=!0)),ge=Ba(U,Te),0<ge.length&&(Te=new vo(Te,t,null,o,Q),G.push({event:Te,listeners:ge}),ye?Te.data=ye:(ye=of(o),ye!==null&&(Te.data=ye)))),(ye=hn?yy(t,o):_y(t,o))&&(U=Ba(U,"onBeforeInput"),0<U.length&&(Q=new vo("onBeforeInput","beforeinput",null,o,Q),G.push({event:Q,listeners:U}),Q.data=ye))}Cf(G,r)})}function Co(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ba(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ht(t,o),p!=null&&u.unshift(Co(t,p,h)),p=ht(t,r),p!=null&&u.push(Co(t,p,h))),t=t.return}return u}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var T=o,P=T.alternate,U=T.stateNode;if(P!==null&&P===u)break;T.tag===5&&U!==null&&(T=U,h?(P=ht(o,p),P!=null&&y.unshift(Co(o,P,T))):h||(P=ht(o,p),P!=null&&y.push(Co(o,P,T)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var xy=/\r\n?/g,Dy=/\u0000|\uFFFD/g;function kf(t){return(typeof t=="string"?t:""+t).replace(xy,`
`).replace(Dy,"")}function Ua(t,r,o){if(r=kf(r),kf(t)!==r&&o)throw Error(n(425))}function ba(){}var Ou=null,Fu=null;function Lu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,Oy=typeof clearTimeout=="function"?clearTimeout:void 0,Nf=typeof Promise=="function"?Promise:void 0,Fy=typeof queueMicrotask=="function"?queueMicrotask:typeof Nf<"u"?function(t){return Nf.resolve(null).then(t).catch(Ly)}:Mu;function Ly(t){setTimeout(function(){throw t})}function Bu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Fn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Fn(r)}function Br(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Vf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ys,Po="__reactProps$"+ys,gr="__reactContainer$"+ys,Uu="__reactEvents$"+ys,My="__reactListeners$"+ys,By="__reactHandles$"+ys;function Si(t){var r=t[Zn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[gr]||o[Zn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Vf(t);t!==null;){if(o=t[Zn])return o;t=Vf(t)}return r}t=o,o=t.parentNode}return null}function Ro(t){return t=t[Zn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ja(t){return t[Po]||null}var bu=[],vs=-1;function Ur(t){return{current:t}}function Ze(t){0>vs||(t.current=bu[vs],bu[vs]=null,vs--)}function Ye(t,r){vs++,bu[vs]=t.current,t.current=r}var br={},jt=Ur(br),en=Ur(!1),Ai=br;function Es(t,r){var o=t.type.contextTypes;if(!o)return br;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function tn(t){return t=t.childContextTypes,t!=null}function za(){Ze(en),Ze(jt)}function xf(t,r,o){if(jt.current!==br)throw Error(n(168));Ye(jt,r),Ye(en,o)}function Df(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,je(t)||"Unknown",h));return J({},o,u)}function $a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Ai=jt.current,Ye(jt,t),Ye(en,en.current),!0}function Of(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Df(t,r,Ai),u.__reactInternalMemoizedMergedChildContext=t,Ze(en),Ze(jt),Ye(jt,t)):Ze(en),Ye(en,o)}var yr=null,Wa=!1,ju=!1;function Ff(t){yr===null?yr=[t]:yr.push(t)}function Uy(t){Wa=!0,Ff(t)}function jr(){if(!ju&&yr!==null){ju=!0;var t=0,r=Fe;try{var o=yr;for(Fe=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}yr=null,Wa=!1}catch(h){throw yr!==null&&(yr=yr.slice(t+1)),Zi(gi,jr),h}finally{Fe=r,ju=!1}}return null}var ws=[],Ts=0,Ha=null,qa=0,vn=[],En=0,Ci=null,_r=1,vr="";function Pi(t,r){ws[Ts++]=qa,ws[Ts++]=Ha,Ha=t,qa=r}function Lf(t,r,o){vn[En++]=_r,vn[En++]=vr,vn[En++]=Ci,Ci=t;var u=_r;t=vr;var h=32-Kt(u)-1;u&=~(1<<h),o+=1;var p=32-Kt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,_r=1<<32-Kt(r)+h|o<<h|u,vr=p+t}else _r=1<<p|o<<h|u,vr=t}function zu(t){t.return!==null&&(Pi(t,1),Lf(t,1,0))}function $u(t){for(;t===Ha;)Ha=ws[--Ts],ws[Ts]=null,qa=ws[--Ts],ws[Ts]=null;for(;t===Ci;)Ci=vn[--En],vn[En]=null,vr=vn[--En],vn[En]=null,_r=vn[--En],vn[En]=null}var fn=null,dn=null,nt=!1,Bn=null;function Mf(t,r){var o=Sn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Bf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,fn=t,dn=Br(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,fn=t,dn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ci!==null?{id:_r,overflow:vr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Sn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,fn=t,dn=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(nt){var r=dn;if(r){var o=r;if(!Bf(t,r)){if(Wu(t))throw Error(n(418));r=Br(o.nextSibling);var u=fn;r&&Bf(t,r)?Mf(u,o):(t.flags=t.flags&-4097|2,nt=!1,fn=t)}}else{if(Wu(t))throw Error(n(418));t.flags=t.flags&-4097|2,nt=!1,fn=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Qa(t){if(t!==fn)return!1;if(!nt)return Uf(t),nt=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Lu(t.type,t.memoizedProps)),r&&(r=dn)){if(Wu(t))throw bf(),Error(n(418));for(;r;)Mf(t,r),r=Br(r.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){dn=Br(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}dn=null}}else dn=fn?Br(t.stateNode.nextSibling):null;return!0}function bf(){for(var t=dn;t;)t=Br(t.nextSibling)}function Is(){dn=fn=null,nt=!1}function qu(t){Bn===null?Bn=[t]:Bn.push(t)}var by=Ne.ReactCurrentBatchConfig;function ko(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var T=h.refs;y===null?delete T[p]:T[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ka(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function jf(t){var r=t._init;return r(t._payload)}function zf(t){function r(L,R){if(t){var M=L.deletions;M===null?(L.deletions=[R],L.flags|=16):M.push(R)}}function o(L,R){if(!t)return null;for(;R!==null;)r(L,R),R=R.sibling;return null}function u(L,R){for(L=new Map;R!==null;)R.key!==null?L.set(R.key,R):L.set(R.index,R),R=R.sibling;return L}function h(L,R){return L=Gr(L,R),L.index=0,L.sibling=null,L}function p(L,R,M){return L.index=M,t?(M=L.alternate,M!==null?(M=M.index,M<R?(L.flags|=2,R):M):(L.flags|=2,R)):(L.flags|=1048576,R)}function y(L){return t&&L.alternate===null&&(L.flags|=2),L}function T(L,R,M,X){return R===null||R.tag!==6?(R=Mc(M,L.mode,X),R.return=L,R):(R=h(R,M),R.return=L,R)}function P(L,R,M,X){var he=M.type;return he===k?Q(L,R,M.props.children,X,M.key):R!==null&&(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ct&&jf(he)===R.type)?(X=h(R,M.props),X.ref=ko(L,R,M),X.return=L,X):(X=_l(M.type,M.key,M.props,null,L.mode,X),X.ref=ko(L,R,M),X.return=L,X)}function U(L,R,M,X){return R===null||R.tag!==4||R.stateNode.containerInfo!==M.containerInfo||R.stateNode.implementation!==M.implementation?(R=Bc(M,L.mode,X),R.return=L,R):(R=h(R,M.children||[]),R.return=L,R)}function Q(L,R,M,X,he){return R===null||R.tag!==7?(R=Fi(M,L.mode,X,he),R.return=L,R):(R=h(R,M),R.return=L,R)}function G(L,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Mc(""+R,L.mode,M),R.return=L,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case it:return M=_l(R.type,R.key,R.props,null,L.mode,M),M.ref=ko(L,null,R),M.return=L,M;case Le:return R=Bc(R,L.mode,M),R.return=L,R;case ct:var X=R._init;return G(L,X(R._payload),M)}if(vt(R)||de(R))return R=Fi(R,L.mode,M,null),R.return=L,R;Ka(L,R)}return null}function q(L,R,M,X){var he=R!==null?R.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return he!==null?null:T(L,R,""+M,X);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case it:return M.key===he?P(L,R,M,X):null;case Le:return M.key===he?U(L,R,M,X):null;case ct:return he=M._init,q(L,R,he(M._payload),X)}if(vt(M)||de(M))return he!==null?null:Q(L,R,M,X,null);Ka(L,M)}return null}function oe(L,R,M,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(M)||null,T(R,L,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case it:return L=L.get(X.key===null?M:X.key)||null,P(R,L,X,he);case Le:return L=L.get(X.key===null?M:X.key)||null,U(R,L,X,he);case ct:var ge=X._init;return oe(L,R,M,ge(X._payload),he)}if(vt(X)||de(X))return L=L.get(M)||null,Q(R,L,X,he,null);Ka(R,X)}return null}function ue(L,R,M,X){for(var he=null,ge=null,ye=R,Te=R=0,xt=null;ye!==null&&Te<M.length;Te++){ye.index>Te?(xt=ye,ye=null):xt=ye.sibling;var We=q(L,ye,M[Te],X);if(We===null){ye===null&&(ye=xt);break}t&&ye&&We.alternate===null&&r(L,ye),R=p(We,R,Te),ge===null?he=We:ge.sibling=We,ge=We,ye=xt}if(Te===M.length)return o(L,ye),nt&&Pi(L,Te),he;if(ye===null){for(;Te<M.length;Te++)ye=G(L,M[Te],X),ye!==null&&(R=p(ye,R,Te),ge===null?he=ye:ge.sibling=ye,ge=ye);return nt&&Pi(L,Te),he}for(ye=u(L,ye);Te<M.length;Te++)xt=oe(ye,L,Te,M[Te],X),xt!==null&&(t&&xt.alternate!==null&&ye.delete(xt.key===null?Te:xt.key),R=p(xt,R,Te),ge===null?he=xt:ge.sibling=xt,ge=xt);return t&&ye.forEach(function(Xr){return r(L,Xr)}),nt&&Pi(L,Te),he}function ce(L,R,M,X){var he=de(M);if(typeof he!="function")throw Error(n(150));if(M=he.call(M),M==null)throw Error(n(151));for(var ge=he=null,ye=R,Te=R=0,xt=null,We=M.next();ye!==null&&!We.done;Te++,We=M.next()){ye.index>Te?(xt=ye,ye=null):xt=ye.sibling;var Xr=q(L,ye,We.value,X);if(Xr===null){ye===null&&(ye=xt);break}t&&ye&&Xr.alternate===null&&r(L,ye),R=p(Xr,R,Te),ge===null?he=Xr:ge.sibling=Xr,ge=Xr,ye=xt}if(We.done)return o(L,ye),nt&&Pi(L,Te),he;if(ye===null){for(;!We.done;Te++,We=M.next())We=G(L,We.value,X),We!==null&&(R=p(We,R,Te),ge===null?he=We:ge.sibling=We,ge=We);return nt&&Pi(L,Te),he}for(ye=u(L,ye);!We.done;Te++,We=M.next())We=oe(ye,L,Te,We.value,X),We!==null&&(t&&We.alternate!==null&&ye.delete(We.key===null?Te:We.key),R=p(We,R,Te),ge===null?he=We:ge.sibling=We,ge=We);return t&&ye.forEach(function(v_){return r(L,v_)}),nt&&Pi(L,Te),he}function ft(L,R,M,X){if(typeof M=="object"&&M!==null&&M.type===k&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case it:e:{for(var he=M.key,ge=R;ge!==null;){if(ge.key===he){if(he=M.type,he===k){if(ge.tag===7){o(L,ge.sibling),R=h(ge,M.props.children),R.return=L,L=R;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ct&&jf(he)===ge.type){o(L,ge.sibling),R=h(ge,M.props),R.ref=ko(L,ge,M),R.return=L,L=R;break e}o(L,ge);break}else r(L,ge);ge=ge.sibling}M.type===k?(R=Fi(M.props.children,L.mode,X,M.key),R.return=L,L=R):(X=_l(M.type,M.key,M.props,null,L.mode,X),X.ref=ko(L,R,M),X.return=L,L=X)}return y(L);case Le:e:{for(ge=M.key;R!==null;){if(R.key===ge)if(R.tag===4&&R.stateNode.containerInfo===M.containerInfo&&R.stateNode.implementation===M.implementation){o(L,R.sibling),R=h(R,M.children||[]),R.return=L,L=R;break e}else{o(L,R);break}else r(L,R);R=R.sibling}R=Bc(M,L.mode,X),R.return=L,L=R}return y(L);case ct:return ge=M._init,ft(L,R,ge(M._payload),X)}if(vt(M))return ue(L,R,M,X);if(de(M))return ce(L,R,M,X);Ka(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,R!==null&&R.tag===6?(o(L,R.sibling),R=h(R,M),R.return=L,L=R):(o(L,R),R=Mc(M,L.mode,X),R.return=L,L=R),y(L)):o(L,R)}return ft}var Ss=zf(!0),$f=zf(!1),Ga=Ur(null),Xa=null,As=null,Qu=null;function Ku(){Qu=As=Xa=null}function Gu(t){var r=Ga.current;Ze(Ga),t._currentValue=r}function Xu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Cs(t,r){Xa=t,Qu=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(nn=!0),t.firstContext=null)}function wn(t){var r=t._currentValue;if(Qu!==t)if(t={context:t,memoizedValue:r,next:null},As===null){if(Xa===null)throw Error(n(308));As=t,Xa.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return r}var Ri=null;function Yu(t){Ri===null?Ri=[t]:Ri.push(t)}function Wf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Yu(r)):(o.next=h.next,h.next=o),r.interleaved=o,Er(t,u)}function Er(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var zr=!1;function Ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function $r(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,Er(t,o)}return h=u.interleaved,h===null?(r.next=r,Yu(u)):(r.next=h.next,h.next=r),u.interleaved=r,Er(t,o)}function Ya(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,xr(t,o)}}function qf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Ja(t,r,o,u){var h=t.updateQueue;zr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var P=T,U=P.next;P.next=null,y===null?p=U:y.next=U,y=P;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==y&&(T===null?Q.firstBaseUpdate=U:T.next=U,Q.lastBaseUpdate=P))}if(p!==null){var G=h.baseState;y=0,Q=U=P=null,T=p;do{var q=T.lane,oe=T.eventTime;if((u&q)===q){Q!==null&&(Q=Q.next={eventTime:oe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ue=t,ce=T;switch(q=r,oe=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){G=ue.call(oe,G,q);break e}G=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,q=typeof ue=="function"?ue.call(oe,G,q):ue,q==null)break e;G=J({},G,q);break e;case 2:zr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else oe={eventTime:oe,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(U=Q=oe,P=G):Q=Q.next=oe,y|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(Q===null&&(P=G),h.baseState=P,h.firstBaseUpdate=U,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Vi|=y,t.lanes=y,t.memoizedState=G}}function Qf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var No={},er=Ur(No),Vo=Ur(No),xo=Ur(No);function ki(t){if(t===No)throw Error(n(174));return t}function Zu(t,r){switch(Ye(xo,r),Ye(Vo,t),Ye(er,No),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Tt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Tt(r,t)}Ze(er),Ye(er,r)}function Ps(){Ze(er),Ze(Vo),Ze(xo)}function Kf(t){ki(xo.current);var r=ki(er.current),o=Tt(r,t.type);r!==o&&(Ye(Vo,t),Ye(er,o))}function ec(t){Vo.current===t&&(Ze(er),Ze(Vo))}var st=Ur(0);function Za(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var tc=[];function nc(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var el=Ne.ReactCurrentDispatcher,rc=Ne.ReactCurrentBatchConfig,Ni=0,ot=null,St=null,Nt=null,tl=!1,Do=!1,Oo=0,jy=0;function zt(){throw Error(n(321))}function ic(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Mn(t[o],r[o]))return!1;return!0}function sc(t,r,o,u,h,p){if(Ni=p,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,el.current=t===null||t.memoizedState===null?Hy:qy,t=o(u,h),Do){p=0;do{if(Do=!1,Oo=0,25<=p)throw Error(n(301));p+=1,Nt=St=null,r.updateQueue=null,el.current=Qy,t=o(u,h)}while(Do)}if(el.current=il,r=St!==null&&St.next!==null,Ni=0,Nt=St=ot=null,tl=!1,r)throw Error(n(300));return t}function oc(){var t=Oo!==0;return Oo=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ot.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Tn(){if(St===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var r=Nt===null?ot.memoizedState:Nt.next;if(r!==null)Nt=r,St=t;else{if(t===null)throw Error(n(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?ot.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Fo(t,r){return typeof r=="function"?r(t):r}function ac(t){var r=Tn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=St,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=y=null,P=null,U=p;do{var Q=U.lane;if((Ni&Q)===Q)P!==null&&(P=P.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var G={lane:Q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};P===null?(T=P=G,y=u):P=P.next=G,ot.lanes|=Q,Vi|=Q}U=U.next}while(U!==null&&U!==p);P===null?y=u:P.next=T,Mn(u,r.memoizedState)||(nn=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=P,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,ot.lanes|=p,Vi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function lc(t){var r=Tn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Mn(p,r.memoizedState)||(nn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Gf(){}function Xf(t,r){var o=ot,u=Tn(),h=r(),p=!Mn(u.memoizedState,h);if(p&&(u.memoizedState=h,nn=!0),u=u.queue,uc(Zf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Nt!==null&&Nt.memoizedState.tag&1){if(o.flags|=2048,Lo(9,Jf.bind(null,o,u,h,r),void 0,null),Vt===null)throw Error(n(349));(Ni&30)!==0||Yf(o,r,h)}return h}function Yf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Jf(t,r,o,u){r.value=o,r.getSnapshot=u,ed(r)&&td(t)}function Zf(t,r,o){return o(function(){ed(r)&&td(t)})}function ed(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Mn(t,o)}catch{return!0}}function td(t){var r=Er(t,1);r!==null&&zn(r,t,1,-1)}function nd(t){var r=tr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:t},r.queue=t,t=t.dispatch=Wy.bind(null,ot,t),[r.memoizedState,t]}function Lo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function rd(){return Tn().memoizedState}function nl(t,r,o,u){var h=tr();ot.flags|=t,h.memoizedState=Lo(1|r,o,void 0,u===void 0?null:u)}function rl(t,r,o,u){var h=Tn();u=u===void 0?null:u;var p=void 0;if(St!==null){var y=St.memoizedState;if(p=y.destroy,u!==null&&ic(u,y.deps)){h.memoizedState=Lo(r,o,p,u);return}}ot.flags|=t,h.memoizedState=Lo(1|r,o,p,u)}function id(t,r){return nl(8390656,8,t,r)}function uc(t,r){return rl(2048,8,t,r)}function sd(t,r){return rl(4,2,t,r)}function od(t,r){return rl(4,4,t,r)}function ad(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ld(t,r,o){return o=o!=null?o.concat([t]):null,rl(4,4,ad.bind(null,r,t),o)}function cc(){}function ud(t,r){var o=Tn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function cd(t,r){var o=Tn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function hd(t,r,o){return(Ni&21)===0?(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=o):(Mn(o,r)||(o=vi(),ot.lanes|=o,Vi|=o,t.baseState=!0),r)}function zy(t,r){var o=Fe;Fe=o!==0&&4>o?o:4,t(!0);var u=rc.transition;rc.transition={};try{t(!1),r()}finally{Fe=o,rc.transition=u}}function fd(){return Tn().memoizedState}function $y(t,r,o){var u=Qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},dd(t))pd(r,o);else if(o=Wf(t,r,o,u),o!==null){var h=Yt();zn(o,t,u,h),md(o,r,u)}}function Wy(t,r,o){var u=Qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(dd(t))pd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,T=p(y,o);if(h.hasEagerState=!0,h.eagerState=T,Mn(T,y)){var P=r.interleaved;P===null?(h.next=h,Yu(r)):(h.next=P.next,P.next=h),r.interleaved=h;return}}catch{}finally{}o=Wf(t,r,h,u),o!==null&&(h=Yt(),zn(o,t,u,h),md(o,r,u))}}function dd(t){var r=t.alternate;return t===ot||r!==null&&r===ot}function pd(t,r){Do=tl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function md(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,xr(t,o)}}var il={readContext:wn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Hy={readContext:wn,useCallback:function(t,r){return tr().memoizedState=[t,r===void 0?null:r],t},useContext:wn,useEffect:id,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,nl(4194308,4,ad.bind(null,r,t),o)},useLayoutEffect:function(t,r){return nl(4194308,4,t,r)},useInsertionEffect:function(t,r){return nl(4,2,t,r)},useMemo:function(t,r){var o=tr();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=tr();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=$y.bind(null,ot,t),[u.memoizedState,t]},useRef:function(t){var r=tr();return t={current:t},r.memoizedState=t},useState:nd,useDebugValue:cc,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=nd(!1),r=t[0];return t=zy.bind(null,t[1]),tr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=ot,h=tr();if(nt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Vt===null)throw Error(n(349));(Ni&30)!==0||Yf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,id(Zf.bind(null,u,p,t),[t]),u.flags|=2048,Lo(9,Jf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=tr(),r=Vt.identifierPrefix;if(nt){var o=vr,u=_r;o=(u&~(1<<32-Kt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Oo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=jy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},qy={readContext:wn,useCallback:ud,useContext:wn,useEffect:uc,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:ac,useRef:rd,useState:function(){return ac(Fo)},useDebugValue:cc,useDeferredValue:function(t){var r=Tn();return hd(r,St.memoizedState,t)},useTransition:function(){var t=ac(Fo)[0],r=Tn().memoizedState;return[t,r]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:fd,unstable_isNewReconciler:!1},Qy={readContext:wn,useCallback:ud,useContext:wn,useEffect:uc,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:lc,useRef:rd,useState:function(){return lc(Fo)},useDebugValue:cc,useDeferredValue:function(t){var r=Tn();return St===null?r.memoizedState=t:hd(r,St.memoizedState,t)},useTransition:function(){var t=lc(Fo)[0],r=Tn().memoizedState;return[t,r]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:fd,unstable_isNewReconciler:!1};function Un(t,r){if(t&&t.defaultProps){r=J({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function hc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:J({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var sl={isMounted:function(t){return(t=t._reactInternals)?Nn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Yt(),h=Qr(t),p=wr(u,h);p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&(zn(r,t,h,u),Ya(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Yt(),h=Qr(t),p=wr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&(zn(r,t,h,u),Ya(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Yt(),u=Qr(t),h=wr(o,u);h.tag=2,r!=null&&(h.callback=r),r=$r(t,h,u),r!==null&&(zn(r,t,u,o),Ya(r,t,u))}};function gd(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!To(o,u)||!To(h,p):!0}function yd(t,r,o){var u=!1,h=br,p=r.contextType;return typeof p=="object"&&p!==null?p=wn(p):(h=tn(r)?Ai:jt.current,u=r.contextTypes,p=(u=u!=null)?Es(t,h):br),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=sl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function _d(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&sl.enqueueReplaceState(r,r.state,null)}function fc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Ju(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=wn(p):(p=tn(r)?Ai:jt.current,h.context=Es(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(hc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&sl.enqueueReplaceState(h,h.state,null),Ja(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,r){try{var o="",u=r;do o+=Ie(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function dc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function pc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Ky=typeof WeakMap=="function"?WeakMap:Map;function vd(t,r,o){o=wr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){fl||(fl=!0,kc=u),pc(t,r)},o}function Ed(t,r,o){o=wr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){pc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){pc(t,r),typeof u!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function wd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Ky;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=l_.bind(null,t,r,o),r.then(t,t))}function Td(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Id(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=wr(-1,1),r.tag=2,$r(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Gy=Ne.ReactCurrentOwner,nn=!1;function Xt(t,r,o,u){r.child=t===null?$f(r,null,o,u):Ss(r,t.child,o,u)}function Sd(t,r,o,u,h){o=o.render;var p=r.ref;return Cs(r,h),u=sc(t,r,o,u,p,h),o=oc(),t!==null&&!nn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Tr(t,r,h)):(nt&&o&&zu(r),r.flags|=1,Xt(t,r,u,h),r.child)}function Ad(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Lc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Cd(t,r,p,u,h)):(t=_l(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:To,o(y,u)&&t.ref===r.ref)return Tr(t,r,h)}return r.flags|=1,t=Gr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Cd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(To(p,u)&&t.ref===r.ref)if(nn=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(nn=!0);else return r.lanes=t.lanes,Tr(t,r,h)}return mc(t,r,o,u,h)}function Pd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ns,pn),pn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ye(Ns,pn),pn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Ye(Ns,pn),pn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,Ye(Ns,pn),pn|=u;return Xt(t,r,h,o),r.child}function Rd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function mc(t,r,o,u,h){var p=tn(o)?Ai:jt.current;return p=Es(r,p),Cs(r,h),o=sc(t,r,o,u,p,h),u=oc(),t!==null&&!nn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Tr(t,r,h)):(nt&&u&&zu(r),r.flags|=1,Xt(t,r,o,h),r.child)}function kd(t,r,o,u,h){if(tn(o)){var p=!0;$a(r)}else p=!1;if(Cs(r,h),r.stateNode===null)al(t,r),yd(r,o,u),fc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,T=r.memoizedProps;y.props=T;var P=y.context,U=o.contextType;typeof U=="object"&&U!==null?U=wn(U):(U=tn(o)?Ai:jt.current,U=Es(r,U));var Q=o.getDerivedStateFromProps,G=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function";G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==u||P!==U)&&_d(r,y,u,U),zr=!1;var q=r.memoizedState;y.state=q,Ja(r,u,y,h),P=r.memoizedState,T!==u||q!==P||en.current||zr?(typeof Q=="function"&&(hc(r,o,Q,u),P=r.memoizedState),(T=zr||gd(r,o,T,u,q,P,U))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),y.props=u,y.state=P,y.context=U,u=T):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Hf(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:Un(r.type,T),y.props=U,G=r.pendingProps,q=y.context,P=o.contextType,typeof P=="object"&&P!==null?P=wn(P):(P=tn(o)?Ai:jt.current,P=Es(r,P));var oe=o.getDerivedStateFromProps;(Q=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==G||q!==P)&&_d(r,y,u,P),zr=!1,q=r.memoizedState,y.state=q,Ja(r,u,y,h);var ue=r.memoizedState;T!==G||q!==ue||en.current||zr?(typeof oe=="function"&&(hc(r,o,oe,u),ue=r.memoizedState),(U=zr||gd(r,o,U,u,q,ue,P)||!1)?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ue,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ue,P)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),y.props=u,y.state=ue,y.context=P,u=U):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return gc(t,r,o,u,p,h)}function gc(t,r,o,u,h,p){Rd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Of(r,o,!1),Tr(t,r,p);u=r.stateNode,Gy.current=r;var T=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=Ss(r,t.child,null,p),r.child=Ss(r,null,T,p)):Xt(t,r,T,p),r.memoizedState=u.state,h&&Of(r,o,!0),r.child}function Nd(t){var r=t.stateNode;r.pendingContext?xf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&xf(t,r.context,!1),Zu(t,r.containerInfo)}function Vd(t,r,o,u,h){return Is(),qu(h),r.flags|=256,Xt(t,r,o,u),r.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function xd(t,r,o){var u=r.pendingProps,h=st.current,p=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Ye(st,h&1),t===null)return Hu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=vl(y,u,0,null),t=Fi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=_c(o),r.memoizedState=yc,t):vc(r,y));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return Xy(t,r,y,u,T,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,T=h.sibling;var P={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=P,r.deletions=null):(u=Gr(h,P),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Gr(T,p):(p=Fi(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?_c(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=yc,u}return p=t.child,t=p.sibling,u=Gr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function vc(t,r){return r=vl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ol(t,r,o,u){return u!==null&&qu(u),Ss(r,t.child,null,o),t=vc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Xy(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=dc(Error(n(422))),ol(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=vl({mode:"visible",children:u.children},h,0,null),p=Fi(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&Ss(r,t.child,null,y),r.child.memoizedState=_c(y),r.memoizedState=yc,p);if((r.mode&1)===0)return ol(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=dc(p,u,void 0),ol(t,r,y,u)}if(T=(y&t.childLanes)!==0,nn||T){if(u=Vt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Er(t,h),zn(u,t,h,-1))}return Fc(),u=dc(Error(n(421))),ol(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=u_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,dn=Br(h.nextSibling),fn=r,nt=!0,Bn=null,t!==null&&(vn[En++]=_r,vn[En++]=vr,vn[En++]=Ci,_r=t.id,vr=t.overflow,Ci=r),r=vc(r,u.children),r.flags|=4096,r)}function Dd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Xu(t.return,r,o)}function Ec(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Od(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Xt(t,r,u.children,o),u=st.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,o,r);else if(t.tag===19)Dd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ye(st,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Za(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Ec(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Za(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Ec(r,!0,o,null,p);break;case"together":Ec(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function al(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Tr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Vi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Gr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Gr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Yy(t,r,o){switch(r.tag){case 3:Nd(r),Is();break;case 5:Kf(r);break;case 1:tn(r.type)&&$a(r);break;case 4:Zu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Ye(Ga,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Ye(st,st.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?xd(t,r,o):(Ye(st,st.current&1),t=Tr(t,r,o),t!==null?t.sibling:null);Ye(st,st.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Od(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ye(st,st.current),u)break;return null;case 22:case 23:return r.lanes=0,Pd(t,r,o)}return Tr(t,r,o)}var Fd,wc,Ld,Md;Fd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},wc=function(){},Ld=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,ki(er.current);var p=null;switch(o){case"input":h=ee(t,h),u=ee(t,u),p=[];break;case"select":h=J({},h,{value:void 0}),u=J({},u,{value:void 0}),p=[];break;case"textarea":h=mt(t,h),u=mt(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ba)}no(o,u);var y;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var T=h[U];for(y in T)T.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var P=u[U];if(T=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&P!==T&&(P!=null||T!=null))if(U==="style")if(T){for(y in T)!T.hasOwnProperty(y)||P&&P.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in P)P.hasOwnProperty(y)&&T[y]!==P[y]&&(o||(o={}),o[y]=P[y])}else o||(p||(p=[]),p.push(U,o)),o=P;else U==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(p=p||[]).push(U,P)):U==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(U,""+P):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(P!=null&&U==="onScroll"&&Je("scroll",t),p||T===P||(p=[])):(p=p||[]).push(U,P))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Md=function(t,r,o,u){o!==u&&(r.flags|=4)};function Mo(t,r){if(!nt)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function $t(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Jy(t,r,o){var u=r.pendingProps;switch($u(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return tn(r.type)&&za(),$t(r),null;case 3:return u=r.stateNode,Ps(),Ze(en),Ze(jt),nc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Qa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Bn!==null&&(xc(Bn),Bn=null))),wc(t,r),$t(r),null;case 5:ec(r);var h=ki(xo.current);if(o=r.type,t!==null&&r.stateNode!=null)Ld(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return $t(r),null}if(t=ki(er.current),Qa(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Zn]=r,u[Po]=p,t=(r.mode&1)!==0,o){case"dialog":Je("cancel",u),Je("close",u);break;case"iframe":case"object":case"embed":Je("load",u);break;case"video":case"audio":for(h=0;h<So.length;h++)Je(So[h],u);break;case"source":Je("error",u);break;case"img":case"image":case"link":Je("error",u),Je("load",u);break;case"details":Je("toggle",u);break;case"input":te(u,p),Je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Je("invalid",u);break;case"textarea":Pn(u,p),Je("invalid",u)}no(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var T=p[y];y==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(y)&&T!=null&&y==="onScroll"&&Je("scroll",u)}switch(o){case"input":Cn(u),Se(u,p,!0);break;case"textarea":Cn(u),Ys(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ba)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[Zn]=r,t[Po]=u,Fd(t,r,!1,!1),r.stateNode=t;e:{switch(y=ro(o,u),o){case"dialog":Je("cancel",t),Je("close",t),h=u;break;case"iframe":case"object":case"embed":Je("load",t),h=u;break;case"video":case"audio":for(h=0;h<So.length;h++)Je(So[h],t);h=u;break;case"source":Je("error",t),h=u;break;case"img":case"image":case"link":Je("error",t),Je("load",t),h=u;break;case"details":Je("toggle",t),h=u;break;case"input":te(t,u),h=ee(t,u),Je("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=J({},u,{value:void 0}),Je("invalid",t);break;case"textarea":Pn(t,u),h=mt(t,u),Je("invalid",t);break;default:h=u}no(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var P=T[p];p==="style"?eo(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Js(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Pr(t,P):typeof P=="number"&&Pr(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Je("scroll",t):P!=null&&we(t,p,P,y))}switch(o){case"input":Cn(t),Se(t,u,!1);break;case"textarea":Cn(t),Ys(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ze(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Et(t,!!u.multiple,p,!1):u.defaultValue!=null&&Et(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ba)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return $t(r),null;case 6:if(t&&r.stateNode!=null)Md(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=ki(xo.current),ki(er.current),Qa(r)){if(u=r.stateNode,o=r.memoizedProps,u[Zn]=r,(p=u.nodeValue!==o)&&(t=fn,t!==null))switch(t.tag){case 3:Ua(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Zn]=r,r.stateNode=u}return $t(r),null;case 13:if(Ze(st),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&dn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)bf(),Is(),r.flags|=98560,p=!1;else if(p=Qa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zn]=r}else Is(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),p=!1}else Bn!==null&&(xc(Bn),Bn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(st.current&1)!==0?At===0&&(At=3):Fc())),r.updateQueue!==null&&(r.flags|=4),$t(r),null);case 4:return Ps(),wc(t,r),t===null&&Ao(r.stateNode.containerInfo),$t(r),null;case 10:return Gu(r.type._context),$t(r),null;case 17:return tn(r.type)&&za(),$t(r),null;case 19:if(Ze(st),p=r.memoizedState,p===null)return $t(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Mo(p,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=Za(t),y!==null){for(r.flags|=128,Mo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Ye(st,st.current&1|2),r.child}t=t.sibling}p.tail!==null&&Xe()>Vs&&(r.flags|=128,u=!0,Mo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Za(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Mo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!nt)return $t(r),null}else 2*Xe()-p.renderingStartTime>Vs&&o!==1073741824&&(r.flags|=128,u=!0,Mo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Xe(),r.sibling=null,o=st.current,Ye(st,u?o&1|2:o&1),r):($t(r),null);case 22:case 23:return Oc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(pn&1073741824)!==0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Zy(t,r){switch($u(r),r.tag){case 1:return tn(r.type)&&za(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ps(),Ze(en),Ze(jt),nc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ec(r),null;case 13:if(Ze(st),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Is()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ze(st),null;case 4:return Ps(),null;case 10:return Gu(r.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var ll=!1,Wt=!1,e_=typeof WeakSet=="function"?WeakSet:Set,le=null;function ks(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){lt(t,r,u)}else o.current=null}function Tc(t,r,o){try{o()}catch(u){lt(t,r,u)}}var Bd=!1;function t_(t,r){if(Ou=Fr,t=gf(),Cu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,T=-1,P=-1,U=0,Q=0,G=t,q=null;t:for(;;){for(var oe;G!==o||h!==0&&G.nodeType!==3||(T=y+h),G!==p||u!==0&&G.nodeType!==3||(P=y+u),G.nodeType===3&&(y+=G.nodeValue.length),(oe=G.firstChild)!==null;)q=G,G=oe;for(;;){if(G===t)break t;if(q===o&&++U===h&&(T=y),q===p&&++Q===u&&(P=y),(oe=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=oe}o=T===-1||P===-1?null:{start:T,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Fu={focusedElem:t,selectionRange:o},Fr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ft=ue.memoizedState,L=r.stateNode,R=L.getSnapshotBeforeUpdate(r.elementType===r.type?ce:Un(r.type,ce),ft);L.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){lt(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=Bd,Bd=!1,ue}function Bo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Tc(r,o,p)}h=h.next}while(h!==u)}}function ul(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Ic(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Ud(t){var r=t.alternate;r!==null&&(t.alternate=null,Ud(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Zn],delete r[Po],delete r[Uu],delete r[My],delete r[By])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bd(t){return t.tag===5||t.tag===3||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ba));else if(u!==4&&(t=t.child,t!==null))for(Sc(t,r,o),t=t.sibling;t!==null;)Sc(t,r,o),t=t.sibling}function Ac(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Ac(t,r,o),t=t.sibling;t!==null;)Ac(t,r,o),t=t.sibling}var Lt=null,bn=!1;function Wr(t,r,o){for(o=o.child;o!==null;)zd(t,r,o),o=o.sibling}function zd(t,r,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(yi,o)}catch{}switch(o.tag){case 5:Wt||ks(o,r);case 6:var u=Lt,h=bn;Lt=null,Wr(t,r,o),Lt=u,bn=h,Lt!==null&&(bn?(t=Lt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Lt.removeChild(o.stateNode));break;case 18:Lt!==null&&(bn?(t=Lt,o=o.stateNode,t.nodeType===8?Bu(t.parentNode,o):t.nodeType===1&&Bu(t,o),Fn(t)):Bu(Lt,o.stateNode));break;case 4:u=Lt,h=bn,Lt=o.stateNode.containerInfo,bn=!0,Wr(t,r,o),Lt=u,bn=h;break;case 0:case 11:case 14:case 15:if(!Wt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&Tc(o,r,y),h=h.next}while(h!==u)}Wr(t,r,o);break;case 1:if(!Wt&&(ks(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){lt(o,r,T)}Wr(t,r,o);break;case 21:Wr(t,r,o);break;case 22:o.mode&1?(Wt=(u=Wt)||o.memoizedState!==null,Wr(t,r,o),Wt=u):Wr(t,r,o);break;default:Wr(t,r,o)}}function $d(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new e_),r.forEach(function(u){var h=c_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function jn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,T=y;e:for(;T!==null;){switch(T.tag){case 5:Lt=T.stateNode,bn=!1;break e;case 3:Lt=T.stateNode.containerInfo,bn=!0;break e;case 4:Lt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(Lt===null)throw Error(n(160));zd(p,y,h),Lt=null,bn=!1;var P=h.alternate;P!==null&&(P.return=null),h.return=null}catch(U){lt(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wd(r,t),r=r.sibling}function Wd(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(r,t),nr(t),u&4){try{Bo(3,t,t.return),ul(3,t)}catch(ce){lt(t,t.return,ce)}try{Bo(5,t,t.return)}catch(ce){lt(t,t.return,ce)}}break;case 1:jn(r,t),nr(t),u&512&&o!==null&&ks(o,o.return);break;case 5:if(jn(r,t),nr(t),u&512&&o!==null&&ks(o,o.return),t.flags&32){var h=t.stateNode;try{Pr(h,"")}catch(ce){lt(t,t.return,ce)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,T=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&re(h,p),ro(T,y);var U=ro(T,p);for(y=0;y<P.length;y+=2){var Q=P[y],G=P[y+1];Q==="style"?eo(h,G):Q==="dangerouslySetInnerHTML"?Js(h,G):Q==="children"?Pr(h,G):we(h,Q,G,U)}switch(T){case"input":me(h,p);break;case"textarea":Hn(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?Et(h,!!p.multiple,oe,!1):q!==!!p.multiple&&(p.defaultValue!=null?Et(h,!!p.multiple,p.defaultValue,!0):Et(h,!!p.multiple,p.multiple?[]:"",!1))}h[Po]=p}catch(ce){lt(t,t.return,ce)}}break;case 6:if(jn(r,t),nr(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ce){lt(t,t.return,ce)}}break;case 3:if(jn(r,t),nr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fn(r.containerInfo)}catch(ce){lt(t,t.return,ce)}break;case 4:jn(r,t),nr(t);break;case 13:jn(r,t),nr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Rc=Xe())),u&4&&$d(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Wt=(U=Wt)||Q,jn(r,t),Wt=U):jn(r,t),nr(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!Q&&(t.mode&1)!==0)for(le=t,Q=t.child;Q!==null;){for(G=le=Q;le!==null;){switch(q=le,oe=q.child,q.tag){case 0:case 11:case 14:case 15:Bo(4,q,q.return);break;case 1:ks(q,q.return);var ue=q.stateNode;if(typeof ue.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){lt(u,o,ce)}}break;case 5:ks(q,q.return);break;case 22:if(q.memoizedState!==null){Qd(G);continue}}oe!==null?(oe.return=q,le=oe):Qd(G)}Q=Q.sibling}e:for(Q=null,G=t;;){if(G.tag===5){if(Q===null){Q=G;try{h=G.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=G.stateNode,P=G.memoizedProps.style,y=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=Zs("display",y))}catch(ce){lt(t,t.return,ce)}}}else if(G.tag===6){if(Q===null)try{G.stateNode.nodeValue=U?"":G.memoizedProps}catch(ce){lt(t,t.return,ce)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;Q===G&&(Q=null),G=G.return}Q===G&&(Q=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:jn(r,t),nr(t),u&4&&$d(t);break;case 21:break;default:jn(r,t),nr(t)}}function nr(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(bd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Pr(h,""),u.flags&=-33);var p=jd(t);Ac(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,T=jd(t);Sc(t,T,y);break;default:throw Error(n(161))}}catch(P){lt(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function n_(t,r,o){le=t,Hd(t)}function Hd(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||ll;if(!y){var T=h.alternate,P=T!==null&&T.memoizedState!==null||Wt;T=ll;var U=Wt;if(ll=y,(Wt=P)&&!U)for(le=h;le!==null;)y=le,P=y.child,y.tag===22&&y.memoizedState!==null?Kd(h):P!==null?(P.return=y,le=P):Kd(h);for(;p!==null;)le=p,Hd(p),p=p.sibling;le=h,ll=T,Wt=U}qd(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,le=p):qd(t)}}function qd(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Wt||ul(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Wt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Un(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Qf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Qf(r,y,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var Q=U.memoizedState;if(Q!==null){var G=Q.dehydrated;G!==null&&Fn(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Wt||r.flags&512&&Ic(r)}catch(q){lt(r,r.return,q)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function Qd(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Kd(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{ul(4,r)}catch(P){lt(r,o,P)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(P){lt(r,h,P)}}var p=r.return;try{Ic(r)}catch(P){lt(r,p,P)}break;case 5:var y=r.return;try{Ic(r)}catch(P){lt(r,y,P)}}}catch(P){lt(r,r.return,P)}if(r===t){le=null;break}var T=r.sibling;if(T!==null){T.return=r.return,le=T;break}le=r.return}}var r_=Math.ceil,cl=Ne.ReactCurrentDispatcher,Cc=Ne.ReactCurrentOwner,In=Ne.ReactCurrentBatchConfig,$e=0,Vt=null,yt=null,Mt=0,pn=0,Ns=Ur(0),At=0,Uo=null,Vi=0,hl=0,Pc=0,bo=null,rn=null,Rc=0,Vs=1/0,Ir=null,fl=!1,kc=null,Hr=null,dl=!1,qr=null,pl=0,jo=0,Nc=null,ml=-1,gl=0;function Yt(){return($e&6)!==0?Xe():ml!==-1?ml:ml=Xe()}function Qr(t){return(t.mode&1)===0?1:($e&2)!==0&&Mt!==0?Mt&-Mt:by.transition!==null?(gl===0&&(gl=vi()),gl):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:mo(t.type)),t)}function zn(t,r,o,u){if(50<jo)throw jo=0,Nc=null,Error(n(185));Vr(t,o,u),(($e&2)===0||t!==Vt)&&(t===Vt&&(($e&2)===0&&(hl|=o),At===4&&Kr(t,Mt)),sn(t,u),o===1&&$e===0&&(r.mode&1)===0&&(Vs=Xe()+500,Wa&&jr()))}function sn(t,r){var o=t.callbackNode;hr(t,r);var u=_i(t,t===Vt?Mt:0);if(u===0)o!==null&&uo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&uo(o),r===1)t.tag===0?Uy(Xd.bind(null,t)):Ff(Xd.bind(null,t)),Fy(function(){($e&6)===0&&jr()}),o=null;else{switch(Dr(u)){case 1:o=gi;break;case 4:o=Rr;break;case 16:o=gn;break;case 536870912:o=ga;break;default:o=gn}o=ip(o,Gd.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Gd(t,r){if(ml=-1,gl=0,($e&6)!==0)throw Error(n(327));var o=t.callbackNode;if(xs()&&t.callbackNode!==o)return null;var u=_i(t,t===Vt?Mt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=yl(t,u);else{r=u;var h=$e;$e|=2;var p=Jd();(Vt!==t||Mt!==r)&&(Ir=null,Vs=Xe()+500,Di(t,r));do try{o_();break}catch(T){Yd(t,T)}while(!0);Ku(),cl.current=p,$e=h,yt!==null?r=0:(Vt=null,Mt=0,r=At)}if(r!==0){if(r===2&&(h=un(t),h!==0&&(u=h,r=Vc(t,h))),r===1)throw o=Uo,Di(t,0),Kr(t,u),sn(t,Xe()),o;if(r===6)Kr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!i_(h)&&(r=yl(t,u),r===2&&(p=un(t),p!==0&&(u=p,r=Vc(t,p))),r===1))throw o=Uo,Di(t,0),Kr(t,u),sn(t,Xe()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Oi(t,rn,Ir);break;case 3:if(Kr(t,u),(u&130023424)===u&&(r=Rc+500-Xe(),10<r)){if(_i(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Yt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Mu(Oi.bind(null,t,rn,Ir),r);break}Oi(t,rn,Ir);break;case 4:if(Kr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-Kt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=Xe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*r_(u/1960))-u,10<u){t.timeoutHandle=Mu(Oi.bind(null,t,rn,Ir),u);break}Oi(t,rn,Ir);break;case 5:Oi(t,rn,Ir);break;default:throw Error(n(329))}}}return sn(t,Xe()),t.callbackNode===o?Gd.bind(null,t):null}function Vc(t,r){var o=bo;return t.current.memoizedState.isDehydrated&&(Di(t,r).flags|=256),t=yl(t,r),t!==2&&(r=rn,rn=o,r!==null&&xc(r)),t}function xc(t){rn===null?rn=t:rn.push.apply(rn,t)}function i_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Mn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(t,r){for(r&=~Pc,r&=~hl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Kt(r),u=1<<o;t[o]=-1,r&=~u}}function Xd(t){if(($e&6)!==0)throw Error(n(327));xs();var r=_i(t,0);if((r&1)===0)return sn(t,Xe()),null;var o=yl(t,r);if(t.tag!==0&&o===2){var u=un(t);u!==0&&(r=u,o=Vc(t,u))}if(o===1)throw o=Uo,Di(t,0),Kr(t,r),sn(t,Xe()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Oi(t,rn,Ir),sn(t,Xe()),null}function Dc(t,r){var o=$e;$e|=1;try{return t(r)}finally{$e=o,$e===0&&(Vs=Xe()+500,Wa&&jr())}}function xi(t){qr!==null&&qr.tag===0&&($e&6)===0&&xs();var r=$e;$e|=1;var o=In.transition,u=Fe;try{if(In.transition=null,Fe=1,t)return t()}finally{Fe=u,In.transition=o,$e=r,($e&6)===0&&jr()}}function Oc(){pn=Ns.current,Ze(Ns)}function Di(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Oy(o)),yt!==null)for(o=yt.return;o!==null;){var u=o;switch($u(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&za();break;case 3:Ps(),Ze(en),Ze(jt),nc();break;case 5:ec(u);break;case 4:Ps();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:Gu(u.type._context);break;case 22:case 23:Oc()}o=o.return}if(Vt=t,yt=t=Gr(t.current,null),Mt=pn=r,At=0,Uo=null,Pc=hl=Vi=0,rn=bo=null,Ri!==null){for(r=0;r<Ri.length;r++)if(o=Ri[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Ri=null}return t}function Yd(t,r){do{var o=yt;try{if(Ku(),el.current=il,tl){for(var u=ot.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}tl=!1}if(Ni=0,Nt=St=ot=null,Do=!1,Oo=0,Cc.current=null,o===null||o.return===null){At=1,Uo=r,yt=null;break}e:{var p=t,y=o.return,T=o,P=r;if(r=Mt,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var U=P,Q=T,G=Q.tag;if((Q.mode&1)===0&&(G===0||G===11||G===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var oe=Td(y);if(oe!==null){oe.flags&=-257,Id(oe,y,T,p,r),oe.mode&1&&wd(p,U,r),r=oe,P=U;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(P),r.updateQueue=ce}else ue.add(P);break e}else{if((r&1)===0){wd(p,U,r),Fc();break e}P=Error(n(426))}}else if(nt&&T.mode&1){var ft=Td(y);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Id(ft,y,T,p,r),qu(Rs(P,T));break e}}p=P=Rs(P,T),At!==4&&(At=2),bo===null?bo=[p]:bo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=vd(p,P,r);qf(p,L);break e;case 1:T=P;var R=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Hr===null||!Hr.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=Ed(p,T,r);qf(p,X);break e}}p=p.return}while(p!==null)}ep(o)}catch(he){r=he,yt===o&&o!==null&&(yt=o=o.return);continue}break}while(!0)}function Jd(){var t=cl.current;return cl.current=il,t===null?il:t}function Fc(){(At===0||At===3||At===2)&&(At=4),Vt===null||(Vi&268435455)===0&&(hl&268435455)===0||Kr(Vt,Mt)}function yl(t,r){var o=$e;$e|=2;var u=Jd();(Vt!==t||Mt!==r)&&(Ir=null,Di(t,r));do try{s_();break}catch(h){Yd(t,h)}while(!0);if(Ku(),$e=o,cl.current=u,yt!==null)throw Error(n(261));return Vt=null,Mt=0,At}function s_(){for(;yt!==null;)Zd(yt)}function o_(){for(;yt!==null&&!pa();)Zd(yt)}function Zd(t){var r=rp(t.alternate,t,pn);t.memoizedProps=t.pendingProps,r===null?ep(t):yt=r,Cc.current=null}function ep(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Jy(o,r,pn),o!==null){yt=o;return}}else{if(o=Zy(o,r),o!==null){o.flags&=32767,yt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,yt=null;return}}if(r=r.sibling,r!==null){yt=r;return}yt=r=t}while(r!==null);At===0&&(At=5)}function Oi(t,r,o){var u=Fe,h=In.transition;try{In.transition=null,Fe=1,a_(t,r,o,u)}finally{In.transition=h,Fe=u}return null}function a_(t,r,o,u){do xs();while(qr!==null);if(($e&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Ge(t,p),t===Vt&&(yt=Vt=null,Mt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||dl||(dl=!0,ip(gn,function(){return xs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=In.transition,In.transition=null;var y=Fe;Fe=1;var T=$e;$e|=4,Cc.current=null,t_(t,o),Wd(o,t),Py(Fu),Fr=!!Ou,Fu=Ou=null,t.current=o,n_(o),_u(),$e=T,Fe=y,In.transition=p}else t.current=o;if(dl&&(dl=!1,qr=t,pl=h),p=t.pendingLanes,p===0&&(Hr=null),ya(o.stateNode),sn(t,Xe()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(fl)throw fl=!1,t=kc,kc=null,t;return(pl&1)!==0&&t.tag!==0&&xs(),p=t.pendingLanes,(p&1)!==0?t===Nc?jo++:(jo=0,Nc=t):jo=0,jr(),null}function xs(){if(qr!==null){var t=Dr(pl),r=In.transition,o=Fe;try{if(In.transition=null,Fe=16>t?16:t,qr===null)var u=!1;else{if(t=qr,qr=null,pl=0,($e&6)!==0)throw Error(n(331));var h=$e;for($e|=4,le=t.current;le!==null;){var p=le,y=p.child;if((le.flags&16)!==0){var T=p.deletions;if(T!==null){for(var P=0;P<T.length;P++){var U=T[P];for(le=U;le!==null;){var Q=le;switch(Q.tag){case 0:case 11:case 15:Bo(8,Q,p)}var G=Q.child;if(G!==null)G.return=Q,le=G;else for(;le!==null;){Q=le;var q=Q.sibling,oe=Q.return;if(Ud(Q),Q===U){le=null;break}if(q!==null){q.return=oe,le=q;break}le=oe}}}var ue=p.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ft=ce.sibling;ce.sibling=null,ce=ft}while(ce!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,le=y;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Bo(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,le=L;break e}le=p.return}}var R=t.current;for(le=R;le!==null;){y=le;var M=y.child;if((y.subtreeFlags&2064)!==0&&M!==null)M.return=y,le=M;else e:for(y=R;le!==null;){if(T=le,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ul(9,T)}}catch(he){lt(T,T.return,he)}if(T===y){le=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,le=X;break e}le=T.return}}if($e=h,jr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(yi,t)}catch{}u=!0}return u}finally{Fe=o,In.transition=r}}return!1}function tp(t,r,o){r=Rs(o,r),r=vd(t,r,1),t=$r(t,r,1),r=Yt(),t!==null&&(Vr(t,1,r),sn(t,r))}function lt(t,r,o){if(t.tag===3)tp(t,t,o);else for(;r!==null;){if(r.tag===3){tp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hr===null||!Hr.has(u))){t=Rs(o,t),t=Ed(r,t,1),r=$r(r,t,1),t=Yt(),r!==null&&(Vr(r,1,t),sn(r,t));break}}r=r.return}}function l_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Yt(),t.pingedLanes|=t.suspendedLanes&o,Vt===t&&(Mt&o)===o&&(At===4||At===3&&(Mt&130023424)===Mt&&500>Xe()-Rc?Di(t,0):Pc|=o),sn(t,r)}function np(t,r){r===0&&((t.mode&1)===0?r=1:(r=ts,ts<<=1,(ts&130023424)===0&&(ts=4194304)));var o=Yt();t=Er(t,r),t!==null&&(Vr(t,r,o),sn(t,o))}function u_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),np(t,o)}function c_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),np(t,o)}var rp;rp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||en.current)nn=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return nn=!1,Yy(t,r,o);nn=(t.flags&131072)!==0}else nn=!1,nt&&(r.flags&1048576)!==0&&Lf(r,qa,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;al(t,r),t=r.pendingProps;var h=Es(r,jt.current);Cs(r,o),h=sc(null,r,u,t,h,o);var p=oc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,tn(u)?(p=!0,$a(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ju(r),h.updater=sl,r.stateNode=h,h._reactInternals=r,fc(r,u,t,o),r=gc(null,r,u,!0,p,o)):(r.tag=0,nt&&p&&zu(r),Xt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(al(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=f_(u),t=Un(u,t),h){case 0:r=mc(null,r,u,t,o);break e;case 1:r=kd(null,r,u,t,o);break e;case 11:r=Sd(null,r,u,t,o);break e;case 14:r=Ad(null,r,u,Un(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Un(u,h),mc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Un(u,h),kd(t,r,u,h,o);case 3:e:{if(Nd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Hf(t,r),Ja(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Rs(Error(n(423)),r),r=Vd(t,r,u,o,h);break e}else if(u!==h){h=Rs(Error(n(424)),r),r=Vd(t,r,u,o,h);break e}else for(dn=Br(r.stateNode.containerInfo.firstChild),fn=r,nt=!0,Bn=null,o=$f(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Is(),u===h){r=Tr(t,r,o);break e}Xt(t,r,u,o)}r=r.child}return r;case 5:return Kf(r),t===null&&Hu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Lu(u,h)?y=null:p!==null&&Lu(u,p)&&(r.flags|=32),Rd(t,r),Xt(t,r,y,o),r.child;case 6:return t===null&&Hu(r),null;case 13:return xd(t,r,o);case 4:return Zu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Ss(r,null,u,o):Xt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Un(u,h),Sd(t,r,u,h,o);case 7:return Xt(t,r,r.pendingProps,o),r.child;case 8:return Xt(t,r,r.pendingProps.children,o),r.child;case 12:return Xt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,Ye(Ga,u._currentValue),u._currentValue=y,p!==null)if(Mn(p.value,y)){if(p.children===h.children&&!en.current){r=Tr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){y=p.child;for(var P=T.firstContext;P!==null;){if(P.context===u){if(p.tag===1){P=wr(-1,o&-o),P.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var Q=U.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),U.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),Xu(p.return,o,r),T.lanes|=o;break}P=P.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,T=y.alternate,T!==null&&(T.lanes|=o),Xu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Xt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Cs(r,o),h=wn(h),u=u(h),r.flags|=1,Xt(t,r,u,o),r.child;case 14:return u=r.type,h=Un(u,r.pendingProps),h=Un(u.type,h),Ad(t,r,u,h,o);case 15:return Cd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Un(u,h),al(t,r),r.tag=1,tn(u)?(t=!0,$a(r)):t=!1,Cs(r,o),yd(r,u,h),fc(r,u,h,o),gc(null,r,u,!0,t,o);case 19:return Od(t,r,o);case 22:return Pd(t,r,o)}throw Error(n(156,r.tag))};function ip(t,r){return Zi(t,r)}function h_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,r,o,u){return new h_(t,r,o,u)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f_(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===ut)return 14}return 2}function Gr(t,r){var o=t.alternate;return o===null?(o=Sn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function _l(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")Lc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case k:return Fi(o.children,h,p,r);case w:y=8,h|=8;break;case A:return t=Sn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case I:return t=Sn(13,o,r,h),t.elementType=I,t.lanes=p,t;case et:return t=Sn(19,o,r,h),t.elementType=et,t.lanes=p,t;case be:return vl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:y=10;break e;case V:y=9;break e;case O:y=11;break e;case ut:y=14;break e;case ct:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=Sn(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Fi(t,r,o,u){return t=Sn(7,t,u,r),t.lanes=o,t}function vl(t,r,o,u){return t=Sn(22,t,u,r),t.elementType=be,t.lanes=o,t.stateNode={isHidden:!1},t}function Mc(t,r,o){return t=Sn(6,t,null,r),t.lanes=o,t}function Bc(t,r,o){return r=Sn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function d_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nr(0),this.expirationTimes=Nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Uc(t,r,o,u,h,p,y,T,P){return t=new d_(t,r,o,T,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Sn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ju(p),t}function p_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function sp(t){if(!t)return br;t=t._reactInternals;e:{if(Nn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(tn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(tn(o))return Df(t,o,r)}return r}function op(t,r,o,u,h,p,y,T,P){return t=Uc(o,u,!0,t,h,p,y,T,P),t.context=sp(null),o=t.current,u=Yt(),h=Qr(o),p=wr(u,h),p.callback=r??null,$r(o,p,h),t.current.lanes=h,Vr(t,h,u),sn(t,u),t}function El(t,r,o,u){var h=r.current,p=Yt(),y=Qr(h);return o=sp(o),r.context===null?r.context=o:r.pendingContext=o,r=wr(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=$r(h,r,y),t!==null&&(zn(t,h,y,p),Ya(t,h,y)),y}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ap(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function bc(t,r){ap(t,r),(t=t.alternate)&&ap(t,r)}function m_(){return null}var lp=typeof reportError=="function"?reportError:function(t){console.error(t)};function jc(t){this._internalRoot=t}Tl.prototype.render=jc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));El(t,r,null,null)},Tl.prototype.unmount=jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;xi(function(){El(null,t,null,null)}),r[gr]=null}};function Tl(t){this._internalRoot=t}Tl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ta();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Gn.length&&r!==0&&r<Gn[o].priority;o++);Gn.splice(o,0,t),o===0&&Aa(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function up(){}function g_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=wl(y);p.call(U)}}var y=op(r,u,t,0,null,!1,!1,"",up);return t._reactRootContainer=y,t[gr]=y.current,Ao(t.nodeType===8?t.parentNode:t),xi(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var U=wl(P);T.call(U)}}var P=Uc(t,0,!1,null,null,!1,!1,"",up);return t._reactRootContainer=P,t[gr]=P.current,Ao(t.nodeType===8?t.parentNode:t),xi(function(){El(r,P,o,u)}),P}function Sl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var T=h;h=function(){var P=wl(y);T.call(P)}}El(r,y,t,h)}else y=g_(o,r,t,h,u);return wl(y)}Ea=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=kr(r.pendingLanes);o!==0&&(xr(r,o|1),sn(r,Xe()),($e&6)===0&&(Vs=Xe()+500,jr()))}break;case 13:xi(function(){var u=Er(t,1);if(u!==null){var h=Yt();zn(u,t,1,h)}}),bc(t,1)}},ns=function(t){if(t.tag===13){var r=Er(t,134217728);if(r!==null){var o=Yt();zn(r,t,134217728,o)}bc(t,134217728)}},wa=function(t){if(t.tag===13){var r=Qr(t),o=Er(t,r);if(o!==null){var u=Yt();zn(o,t,r,u)}bc(t,r)}},Ta=function(){return Fe},Ia=function(t,r){var o=Fe;try{return Fe=t,r()}finally{Fe=o}},Qi=function(t,r,o){switch(r){case"input":if(me(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=ja(u);if(!h)throw Error(n(90));j(u),me(u,h)}}}break;case"textarea":Hn(t,o);break;case"select":r=o.value,r!=null&&Et(t,!!o.multiple,r,!1)}},fi=Dc,so=xi;var y_={usingClientEntryPoint:!1,Events:[Ro,_s,ja,Qn,io,Dc]},zo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},__={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lo(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||m_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{yi=Al.inject(__),ln=Al}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y_,on.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(r))throw Error(n(200));return p_(t,r,null,o)},on.createRoot=function(t,r){if(!zc(t))throw Error(n(299));var o=!1,u="",h=lp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Uc(t,1,!1,null,null,o,!1,u,h),t[gr]=r.current,Ao(t.nodeType===8?t.parentNode:t),new jc(r)},on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=lo(r),t=t===null?null:t.stateNode,t},on.flushSync=function(t){return xi(t)},on.hydrate=function(t,r,o){if(!Il(r))throw Error(n(200));return Sl(null,t,r,!0,o)},on.hydrateRoot=function(t,r,o){if(!zc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=lp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=op(r,null,t,1,o??null,h,!1,p,y),t[gr]=r.current,Ao(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Tl(r)},on.render=function(t,r,o){if(!Il(r))throw Error(n(200));return Sl(null,t,r,!1,o)},on.unmountComponentAtNode=function(t){if(!Il(t))throw Error(n(40));return t._reactRootContainer?(xi(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1},on.unstable_batchedUpdates=Dc,on.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Il(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Sl(t,r,o,!1,u)},on.version="18.3.1-next-f1338f8080-20240426",on}var yp;function P_(){if(yp)return Hc.exports;yp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hc.exports=C_(),Hc.exports}var _p;function R_(){if(_p)return Cl;_p=1;var i=P_();return Cl.createRoot=i.createRoot,Cl.hydrateRoot=i.hydrateRoot,Cl}var k_=R_();const N_=Rm(k_),V_=()=>{};var vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},x_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],g=i[n++],_=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Nm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,g=f?i[a+1]:0,_=a+2<i.length,v=_?i[a+2]:0,S=c>>2,N=(c&3)<<4|g>>4;let D=(g&15)<<2|v>>6,$=v&63;_||($=64,f||(D=64)),s.push(n[S],n[N],n[D],n[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(km(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):x_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],g=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const N=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||g==null||v==null||N==null)throw new D_;const D=c<<2|g>>4;if(s.push(D),v!==64){const $=g<<4&240|v>>2;if(s.push($),N!==64){const Z=v<<6&192|N;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class D_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O_=function(i){const e=km(i);return Nm.encodeByteArray(e,!0)},bl=function(i){return O_(i).replace(/\./g,"")},F_=function(i){try{return Nm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=()=>L_().__FIREBASE_DEFAULTS__,B_=()=>{if(typeof process>"u"||typeof vp>"u")return;const i=vp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},U_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&F_(i[1]);return e&&JSON.parse(e)},Ah=()=>{try{return V_()||M_()||B_()||U_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},b_=i=>{var e,n;return(n=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},j_=i=>{const e=b_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Vm=()=>{var i;return(i=Ah())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(i){return i.endsWith(".cloudworkstations.dev")}async function $_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[bl(JSON.stringify(n)),bl(JSON.stringify(f)),""].join(".")}const Qo={};function H_(){const i={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?i.emulator.push(e):i.prod.push(e);return i}function q_(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ep=!1;function Q_(i,e){if(typeof window>"u"||typeof document>"u"||!Ch(window.location.host)||Qo[i]===e||Qo[i]||Ep)return;Qo[i]=e;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=H_().prod.length>0;function f(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function _(D,$){D.setAttribute("width","24"),D.setAttribute("id",$),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Ep=!0,f()},D}function S(D,$){D.setAttribute("id",$),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function N(){const D=q_(s),$=n("text"),Z=document.getElementById($)||document.createElement("span"),Y=n("learnmore"),b=document.getElementById(Y)||document.createElement("a"),Pe=n("preprendIcon"),ve=document.getElementById(Pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const we=D.element;g(we),S(b,Y);const Ne=v();_(ve,Pe),we.append(ve,Z,b,Ne),document.body.appendChild(we)}c?(Z.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G_(){var i;const e=(i=Ah())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X_(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y_(){try{return typeof indexedDB=="object"}catch{return!1}}function J_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="FirebaseError";class qs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Z_,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xm.prototype.create)}}class xm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?ev(c,s):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new qs(a,g,s)}}function ev(i,e){return i.replace(tv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tv=/\{\$([^}]+)}/g;function jl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(wp(c)&&wp(f)){if(!jl(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function wp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(i){return i&&i._delegate?i._delegate:i}class Zo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new z_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iv(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rv(i){return i===Mi?void 0:i}function iv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const ov={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},av=Ue.INFO,lv={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},uv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=lv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=av,this._logHandler=uv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ov[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const cv=(i,e)=>e.some(n=>i instanceof n);let Tp,Ip;function hv(){return Tp||(Tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fv(){return Ip||(Ip=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Om=new WeakMap,rh=new WeakMap,Fm=new WeakMap,Kc=new WeakMap,Ph=new WeakMap;function dv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Jr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Om.set(n,i)}).catch(()=>{}),Ph.set(e,i),e}function pv(i){if(rh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});rh.set(i,e)}let ih={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Fm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mv(i){ih=i(ih)}function gv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Gc(this),e,...n);return Fm.set(s,e.sort?e.sort():[e]),Jr(s)}:fv().includes(i)?function(...e){return i.apply(Gc(this),e),Jr(Om.get(this))}:function(...e){return Jr(i.apply(Gc(this),e))}}function yv(i){return typeof i=="function"?gv(i):(i instanceof IDBTransaction&&pv(i),cv(i,hv())?new Proxy(i,ih):i)}function Jr(i){if(i instanceof IDBRequest)return dv(i);if(Kc.has(i))return Kc.get(i);const e=yv(i);return e!==i&&(Kc.set(i,e),Ph.set(e,i)),e}const Gc=i=>Ph.get(i);function _v(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),g=Jr(f);return s&&f.addEventListener("upgradeneeded",_=>{s(Jr(f.result),_.oldVersion,_.newVersion,Jr(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),a&&_.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const vv=["get","getKey","getAll","getAllKeys","count"],Ev=["put","add","delete","clear"],Xc=new Map;function Sp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Ev.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||vv.includes(n)))return;const c=async function(f,...g){const _=this.transaction(f,a?"readwrite":"readonly");let v=_.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),a&&_.done]))[0]};return Xc.set(e,c),c}mv(i=>({...i,get:(e,n,s)=>Sp(e,n)||i.get(e,n,s),has:(e,n)=>!!Sp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Tv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sh="@firebase/app",Ap="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Dm("@firebase/app"),Iv="@firebase/app-compat",Sv="@firebase/analytics-compat",Av="@firebase/analytics",Cv="@firebase/app-check-compat",Pv="@firebase/app-check",Rv="@firebase/auth",kv="@firebase/auth-compat",Nv="@firebase/database",Vv="@firebase/data-connect",xv="@firebase/database-compat",Dv="@firebase/functions",Ov="@firebase/functions-compat",Fv="@firebase/installations",Lv="@firebase/installations-compat",Mv="@firebase/messaging",Bv="@firebase/messaging-compat",Uv="@firebase/performance",bv="@firebase/performance-compat",jv="@firebase/remote-config",zv="@firebase/remote-config-compat",$v="@firebase/storage",Wv="@firebase/storage-compat",Hv="@firebase/firestore",qv="@firebase/ai",Qv="@firebase/firestore-compat",Kv="firebase",Gv="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="[DEFAULT]",Xv={[sh]:"fire-core",[Iv]:"fire-core-compat",[Av]:"fire-analytics",[Sv]:"fire-analytics-compat",[Pv]:"fire-app-check",[Cv]:"fire-app-check-compat",[Rv]:"fire-auth",[kv]:"fire-auth-compat",[Nv]:"fire-rtdb",[Vv]:"fire-data-connect",[xv]:"fire-rtdb-compat",[Dv]:"fire-fn",[Ov]:"fire-fn-compat",[Fv]:"fire-iid",[Lv]:"fire-iid-compat",[Mv]:"fire-fcm",[Bv]:"fire-fcm-compat",[Uv]:"fire-perf",[bv]:"fire-perf-compat",[jv]:"fire-rc",[zv]:"fire-rc-compat",[$v]:"fire-gcs",[Wv]:"fire-gcs-compat",[Hv]:"fire-fst",[Qv]:"fire-fst-compat",[qv]:"fire-vertex","fire-js":"fire-js",[Kv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Map,Yv=new Map,ah=new Map;function Cp(i,e){try{i.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $l(i){const e=i.name;if(ah.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;ah.set(e,i);for(const n of zl.values())Cp(n,i);for(const n of Yv.values())Cp(n,i);return!0}function Jv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Zv(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new xm("app","Firebase",e0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=Gv;function Lm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:oh,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Zr.create("bad-app-name",{appName:String(a)});if(n||(n=Vm()),!n)throw Zr.create("no-options");const c=zl.get(a);if(c){if(jl(n,c.options)&&jl(s,c.config))return c;throw Zr.create("duplicate-app",{appName:a})}const f=new sv(a);for(const _ of ah.values())f.addComponent(_);const g=new t0(n,s,f);return zl.set(a,g),g}function r0(i=oh){const e=zl.get(i);if(!e&&i===oh&&Vm())return Lm();if(!e)throw Zr.create("no-app",{appName:i});return e}function Ms(i,e,n){var s;let a=(s=Xv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(g.join(" "));return}$l(new Zo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebase-heartbeat-database",s0=1,ea="firebase-heartbeat-store";let Yc=null;function Mm(){return Yc||(Yc=_v(i0,s0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(i=>{throw Zr.create("idb-open",{originalErrorMessage:i.message})})),Yc}async function o0(i){try{const n=(await Mm()).transaction(ea),s=await n.objectStore(ea).get(Bm(i));return await n.done,s}catch(e){if(e instanceof qs)Sr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function Pp(i,e){try{const s=(await Mm()).transaction(ea,"readwrite");await s.objectStore(ea).put(e,Bm(i)),await s.done}catch(n){if(n instanceof qs)Sr.warn(n.message);else{const s=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(s.message)}}}function Bm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=1024,l0=30;class u0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Rp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>l0){const f=f0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Sr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rp(),{heartbeatsToSend:s,unsentEntries:a}=c0(this._heartbeatsCache.heartbeats),c=bl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Sr.warn(n),""}}}function Rp(){return new Date().toISOString().substring(0,10)}function c0(i,e=a0){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),kp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),kp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class h0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y_()?J_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Pp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Pp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function kp(i){return bl(JSON.stringify({version:2,heartbeats:i})).length}function f0(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(i){$l(new Zo("platform-logger",e=>new wv(e),"PRIVATE")),$l(new Zo("heartbeat",e=>new u0(e),"PRIVATE")),Ms(sh,Ap,i),Ms(sh,Ap,"esm2017"),Ms("fire-js","")}d0("");var p0="firebase",m0="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(p0,m0,"app");var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,Um;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function A(){}A.prototype=w.prototype,k.D=w.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(C,V,O){for(var I=Array(arguments.length-2),et=2;et<arguments.length;et++)I[et-2]=arguments[et];return w.prototype[V].apply(C,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)C[V]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(V=0;16>V;++V)C[V]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=k.g[0],A=k.g[1],V=k.g[2];var O=k.g[3],I=w+(O^A&(V^O))+C[0]+3614090360&4294967295;w=A+(I<<7&4294967295|I>>>25),I=O+(V^w&(A^V))+C[1]+3905402710&4294967295,O=w+(I<<12&4294967295|I>>>20),I=V+(A^O&(w^A))+C[2]+606105819&4294967295,V=O+(I<<17&4294967295|I>>>15),I=A+(w^V&(O^w))+C[3]+3250441966&4294967295,A=V+(I<<22&4294967295|I>>>10),I=w+(O^A&(V^O))+C[4]+4118548399&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(V^w&(A^V))+C[5]+1200080426&4294967295,O=w+(I<<12&4294967295|I>>>20),I=V+(A^O&(w^A))+C[6]+2821735955&4294967295,V=O+(I<<17&4294967295|I>>>15),I=A+(w^V&(O^w))+C[7]+4249261313&4294967295,A=V+(I<<22&4294967295|I>>>10),I=w+(O^A&(V^O))+C[8]+1770035416&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(V^w&(A^V))+C[9]+2336552879&4294967295,O=w+(I<<12&4294967295|I>>>20),I=V+(A^O&(w^A))+C[10]+4294925233&4294967295,V=O+(I<<17&4294967295|I>>>15),I=A+(w^V&(O^w))+C[11]+2304563134&4294967295,A=V+(I<<22&4294967295|I>>>10),I=w+(O^A&(V^O))+C[12]+1804603682&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(V^w&(A^V))+C[13]+4254626195&4294967295,O=w+(I<<12&4294967295|I>>>20),I=V+(A^O&(w^A))+C[14]+2792965006&4294967295,V=O+(I<<17&4294967295|I>>>15),I=A+(w^V&(O^w))+C[15]+1236535329&4294967295,A=V+(I<<22&4294967295|I>>>10),I=w+(V^O&(A^V))+C[1]+4129170786&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^V&(w^A))+C[6]+3225465664&4294967295,O=w+(I<<9&4294967295|I>>>23),I=V+(w^A&(O^w))+C[11]+643717713&4294967295,V=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(V^O))+C[0]+3921069994&4294967295,A=V+(I<<20&4294967295|I>>>12),I=w+(V^O&(A^V))+C[5]+3593408605&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^V&(w^A))+C[10]+38016083&4294967295,O=w+(I<<9&4294967295|I>>>23),I=V+(w^A&(O^w))+C[15]+3634488961&4294967295,V=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(V^O))+C[4]+3889429448&4294967295,A=V+(I<<20&4294967295|I>>>12),I=w+(V^O&(A^V))+C[9]+568446438&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^V&(w^A))+C[14]+3275163606&4294967295,O=w+(I<<9&4294967295|I>>>23),I=V+(w^A&(O^w))+C[3]+4107603335&4294967295,V=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(V^O))+C[8]+1163531501&4294967295,A=V+(I<<20&4294967295|I>>>12),I=w+(V^O&(A^V))+C[13]+2850285829&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^V&(w^A))+C[2]+4243563512&4294967295,O=w+(I<<9&4294967295|I>>>23),I=V+(w^A&(O^w))+C[7]+1735328473&4294967295,V=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(V^O))+C[12]+2368359562&4294967295,A=V+(I<<20&4294967295|I>>>12),I=w+(A^V^O)+C[5]+4294588738&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^V)+C[8]+2272392833&4294967295,O=w+(I<<11&4294967295|I>>>21),I=V+(O^w^A)+C[11]+1839030562&4294967295,V=O+(I<<16&4294967295|I>>>16),I=A+(V^O^w)+C[14]+4259657740&4294967295,A=V+(I<<23&4294967295|I>>>9),I=w+(A^V^O)+C[1]+2763975236&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^V)+C[4]+1272893353&4294967295,O=w+(I<<11&4294967295|I>>>21),I=V+(O^w^A)+C[7]+4139469664&4294967295,V=O+(I<<16&4294967295|I>>>16),I=A+(V^O^w)+C[10]+3200236656&4294967295,A=V+(I<<23&4294967295|I>>>9),I=w+(A^V^O)+C[13]+681279174&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^V)+C[0]+3936430074&4294967295,O=w+(I<<11&4294967295|I>>>21),I=V+(O^w^A)+C[3]+3572445317&4294967295,V=O+(I<<16&4294967295|I>>>16),I=A+(V^O^w)+C[6]+76029189&4294967295,A=V+(I<<23&4294967295|I>>>9),I=w+(A^V^O)+C[9]+3654602809&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^V)+C[12]+3873151461&4294967295,O=w+(I<<11&4294967295|I>>>21),I=V+(O^w^A)+C[15]+530742520&4294967295,V=O+(I<<16&4294967295|I>>>16),I=A+(V^O^w)+C[2]+3299628645&4294967295,A=V+(I<<23&4294967295|I>>>9),I=w+(V^(A|~O))+C[0]+4096336452&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~V))+C[7]+1126891415&4294967295,O=w+(I<<10&4294967295|I>>>22),I=V+(w^(O|~A))+C[14]+2878612391&4294967295,V=O+(I<<15&4294967295|I>>>17),I=A+(O^(V|~w))+C[5]+4237533241&4294967295,A=V+(I<<21&4294967295|I>>>11),I=w+(V^(A|~O))+C[12]+1700485571&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~V))+C[3]+2399980690&4294967295,O=w+(I<<10&4294967295|I>>>22),I=V+(w^(O|~A))+C[10]+4293915773&4294967295,V=O+(I<<15&4294967295|I>>>17),I=A+(O^(V|~w))+C[1]+2240044497&4294967295,A=V+(I<<21&4294967295|I>>>11),I=w+(V^(A|~O))+C[8]+1873313359&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~V))+C[15]+4264355552&4294967295,O=w+(I<<10&4294967295|I>>>22),I=V+(w^(O|~A))+C[6]+2734768916&4294967295,V=O+(I<<15&4294967295|I>>>17),I=A+(O^(V|~w))+C[13]+1309151649&4294967295,A=V+(I<<21&4294967295|I>>>11),I=w+(V^(A|~O))+C[4]+4149444226&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~V))+C[11]+3174756917&4294967295,O=w+(I<<10&4294967295|I>>>22),I=V+(w^(O|~A))+C[2]+718787259&4294967295,V=O+(I<<15&4294967295|I>>>17),I=A+(O^(V|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var A=w-this.blockSize,C=this.B,V=this.h,O=0;O<w;){if(V==0)for(;O<=A;)a(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<w;)if(C[V++]=k.charCodeAt(O++),V==this.blockSize){a(this,C),V=0;break}}else for(;O<w;)if(C[V++]=k[O++],V==this.blockSize){a(this,C),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var A=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=A&255,A/=256;for(this.u(k),k=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)k[A++]=this.g[w]>>>C&255;return k};function c(k,w){var A=g;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=w(k)}function f(k,w){this.h=w;for(var A=[],C=!0,V=k.length-1;0<=V;V--){var O=k[V]|0;C&&O==w||(A[V]=O,C=!1)}this.g=A}var g={};function _(k){return-128<=k&&128>k?c(k,function(w){return new f([w|0],0>w?-1:0)}):new f([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return N;if(0>k)return b(v(-k));for(var w=[],A=1,C=0;k>=A;C++)w[C]=k/A|0,A*=4294967296;return new f(w,0)}function S(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return b(S(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(w,8)),C=N,V=0;V<k.length;V+=8){var O=Math.min(8,k.length-V),I=parseInt(k.substring(V,V+O),w);8>O?(O=v(Math.pow(w,O)),C=C.j(O).add(v(I))):(C=C.j(A),C=C.add(v(I)))}return C}var N=_(0),D=_(1),$=_(16777216);i=f.prototype,i.m=function(){if(Y(this))return-b(this).m();for(var k=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(Z(this))return"0";if(Y(this))return"-"+b(this).toString(k);for(var w=v(Math.pow(k,6)),A=this,C="";;){var V=Ne(A,w).g;A=Pe(A,V.j(w));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=V,Z(A))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function Z(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function Y(k){return k.h==-1}i.l=function(k){return k=Pe(this,k),Y(k)?-1:Z(k)?0:1};function b(k){for(var w=k.g.length,A=[],C=0;C<w;C++)A[C]=~k.g[C];return new f(A,~k.h).add(D)}i.abs=function(){return Y(this)?b(this):this},i.add=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0,V=0;V<=w;V++){var O=C+(this.i(V)&65535)+(k.i(V)&65535),I=(O>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);C=I>>>16,O&=65535,I&=65535,A[V]=I<<16|O}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Pe(k,w){return k.add(b(w))}i.j=function(k){if(Z(this)||Z(k))return N;if(Y(this))return Y(k)?b(this).j(b(k)):b(b(this).j(k));if(Y(k))return b(this.j(b(k)));if(0>this.l($)&&0>k.l($))return v(this.m()*k.m());for(var w=this.g.length+k.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var V=0;V<k.g.length;V++){var O=this.i(C)>>>16,I=this.i(C)&65535,et=k.i(V)>>>16,ut=k.i(V)&65535;A[2*C+2*V]+=I*ut,ve(A,2*C+2*V),A[2*C+2*V+1]+=O*ut,ve(A,2*C+2*V+1),A[2*C+2*V+1]+=I*et,ve(A,2*C+2*V+1),A[2*C+2*V+2]+=O*et,ve(A,2*C+2*V+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new f(A,0)};function ve(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function we(k,w){this.g=k,this.h=w}function Ne(k,w){if(Z(w))throw Error("division by zero");if(Z(k))return new we(N,N);if(Y(k))return w=Ne(b(k),w),new we(b(w.g),b(w.h));if(Y(w))return w=Ne(k,b(w)),new we(b(w.g),w.h);if(30<k.g.length){if(Y(k)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var A=D,C=w;0>=C.l(k);)A=it(A),C=it(C);var V=Le(A,1),O=Le(C,1);for(C=Le(C,2),A=Le(A,2);!Z(C);){var I=O.add(C);0>=I.l(k)&&(V=V.add(A),O=I),C=Le(C,1),A=Le(A,1)}return w=Pe(k,V.j(w)),new we(V,w)}for(V=N;0<=k.l(w);){for(A=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=v(A),I=O.j(w);Y(I)||0<I.l(k);)A-=C,O=v(A),I=O.j(w);Z(O)&&(O=D),V=V.add(O),k=Pe(k,I)}return new we(V,k)}i.A=function(k){return Ne(this,k).h},i.and=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&k.i(C);return new f(A,this.h&k.h)},i.or=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|k.i(C);return new f(A,this.h|k.h)},i.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^k.i(C);return new f(A,this.h^k.h)};function it(k){for(var w=k.g.length+1,A=[],C=0;C<w;C++)A[C]=k.i(C)<<1|k.i(C-1)>>>31;return new f(A,k.h)}function Le(k,w){var A=w>>5;w%=32;for(var C=k.g.length-A,V=[],O=0;O<C;O++)V[O]=0<w?k.i(O+A)>>>w|k.i(O+A+1)<<32-w:k.i(O+A);return new f(V,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Um=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=S,ei=f}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bm,Wo,jm,Ol,lh,zm,$m,Wm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pl=="object"&&Pl];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var m=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var F=l[E];if(!(F in m))break e;m=m[F]}l=l[l.length-1],E=m[l],d=d(E),d!=E&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var m=0,E=!1,F={next:function(){if(!E&&m<l.length){var z=m++;return{value:d(z,l[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function _(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function S(l,d,m){return l.call.apply(l.bind,arguments)}function N(l,d,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,E),l.apply(d,F)}}return function(){return l.apply(d,arguments)}}function D(l,d,m){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:N,D.apply(null,arguments)}function $(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function Z(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,F,z){for(var ne=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ne[Qe-2]=arguments[Qe];return d.prototype[F].apply(E,ne)}}function Y(l){const d=l.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=l[E];return m}return[]}function b(l,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(_(E)){const F=l.length||0,z=E.length||0;l.length=F+z;for(let ne=0;ne<z;ne++)l[F+ne]=E[ne]}else l.push(E)}}class Pe{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ve(l){return/^[\s\xa0]*$/.test(l)}function we(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function Ne(l){return Ne[" "](l),l}Ne[" "]=function(){};var it=we().indexOf("Gecko")!=-1&&!(we().toLowerCase().indexOf("webkit")!=-1&&we().indexOf("Edge")==-1)&&!(we().indexOf("Trident")!=-1||we().indexOf("MSIE")!=-1)&&we().indexOf("Edge")==-1;function Le(l,d,m){for(const E in l)d.call(m,l[E],E,l)}function k(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function w(l){const d={};for(const m in l)d[m]=l[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,d){let m,E;for(let F=1;F<arguments.length;F++){E=arguments[F];for(m in E)l[m]=E[m];for(let z=0;z<A.length;z++)m=A[z],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function V(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function O(l){g.setTimeout(()=>{throw l},0)}function I(){var l=de;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class et{constructor(){this.h=this.g=null}add(d,m){const E=ut.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var ut=new Pe(()=>new ct,l=>l.reset());class ct{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ie=!1,de=new et,J=()=>{const l=g.Promise.resolve(void 0);be=()=>{l.then(x)}};var x=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(m){O(m)}var d=ut;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ie=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return l}();function Ie(l,d){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(it){e:{try{Ne(d.nodeName);var F=!0;break e}catch{}F=!1}F||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:De[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ie.aa.h.call(this)}}Z(Ie,fe);var De={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ke(l,d,m,E,F){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=F,this.key=++ze,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Cn(l){this.src=l,this.g={},this.h=0}Cn.prototype.add=function(l,d,m,E,F){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var ne=B(l,d,E,F);return-1<ne?(d=l[ne],m||(d.fa=!1)):(d=new Ke(d,this.src,z,!!E,F),d.fa=m,l.push(d)),d};function j(l,d){var m=d.type;if(m in l.g){var E=l.g[m],F=Array.prototype.indexOf.call(E,d,void 0),z;(z=0<=F)&&Array.prototype.splice.call(E,F,1),z&&(pt(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function B(l,d,m,E){for(var F=0;F<l.length;++F){var z=l[F];if(!z.da&&z.listener==d&&z.capture==!!m&&z.ha==E)return F}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),te={};function re(l,d,m,E,F){if(Array.isArray(d)){for(var z=0;z<d.length;z++)re(l,d[z],m,E,F);return null}return m=Ys(m),l&&l[je]?l.K(d,m,v(E)?!!E.capture:!1,F):me(l,d,m,!1,E,F)}function me(l,d,m,E,F,z){if(!d)throw Error("Invalid event type");var ne=v(F)?!!F.capture:!!F,Qe=Pn(l);if(Qe||(l[ee]=Qe=new Cn(l)),m=Qe.add(d,m,E,ne,z),m.proxy)return m;if(E=Se(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)Re||(F=ne),F===void 0&&(F=!1),l.addEventListener(d.toString(),E,F);else if(l.attachEvent)l.attachEvent(Et(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Se(){function l(m){return d.call(l.src,l.listener,m)}const d=mt;return l}function Ve(l,d,m,E,F){if(Array.isArray(d))for(var z=0;z<d.length;z++)Ve(l,d[z],m,E,F);else E=v(E)?!!E.capture:!!E,m=Ys(m),l&&l[je]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],m=B(z,m,E,F),-1<m&&(pt(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=Pn(l))&&(d=l.g[d.toString()],l=-1,d&&(l=B(d,m,E,F)),(m=-1<l?d[l]:null)&&vt(m))}function vt(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[je])j(d.i,l);else{var m=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(m,E,l.capture):d.detachEvent?d.detachEvent(Et(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=Pn(d))?(j(m,l),m.h==0&&(m.src=null,d[ee]=null)):pt(l)}}}function Et(l){return l in te?te[l]:te[l]="on"+l}function mt(l,d){if(l.da)l=!0;else{d=new Ie(d,this);var m=l.listener,E=l.ha||l.src;l.fa&&vt(l),l=m.call(E,d)}return l}function Pn(l){return l=l[ee],l instanceof Cn?l:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ys(l){return typeof l=="function"?l:(l[Hn]||(l[Hn]=function(d){return l.handleEvent(d)}),l[Hn])}function wt(){W.call(this),this.i=new Cn(this),this.M=this,this.F=null}Z(wt,W),wt.prototype[je]=!0,wt.prototype.removeEventListener=function(l,d,m,E){Ve(this,l,d,m,E)};function Tt(l,d){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new fe(d,l);else if(d instanceof fe)d.target=d.target||l;else{var F=d;d=new fe(E,l),C(d,F)}if(F=!0,m)for(var z=m.length-1;0<=z;z--){var ne=d.g=m[z];F=ur(ne,E,!0,d)&&F}if(ne=d.g=l,F=ur(ne,E,!0,d)&&F,F=ur(ne,E,!1,d)&&F,m)for(z=0;z<m.length;z++)ne=d.g=m[z],F=ur(ne,E,!1,d)&&F}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],E=0;E<m.length;E++)pt(m[E]);delete l.g[d],l.h--}}this.F=null},wt.prototype.K=function(l,d,m,E){return this.i.add(String(l),d,!1,m,E)},wt.prototype.L=function(l,d,m,E){return this.i.add(String(l),d,!0,m,E)};function ur(l,d,m,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var F=!0,z=0;z<d.length;++z){var ne=d[z];if(ne&&!ne.da&&ne.capture==m){var Qe=ne.listener,It=ne.ha||ne.src;ne.fa&&j(l.i,ne),F=Qe.call(It,E)!==!1&&F}}return F&&!E.defaultPrevented}function Js(l,d,m){if(typeof l=="function")m&&(l=D(l,m));else if(l&&typeof l.handleEvent=="function")l=D(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(l,d||0)}function Pr(l){l.g=Js(()=>{l.g=null,l.i&&(l.i=!1,Pr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends W{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(l){W.call(this),this.h=l,this.g={}}Z(ci,W);var Zs=[];function eo(l){Le(l.g,function(d,m){this.g.hasOwnProperty(m)&&vt(d)},l),l.g={}}ci.prototype.N=function(){ci.aa.N.call(this),eo(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=g.JSON.stringify,no=g.JSON.parse,ro=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function hi(){}hi.prototype.h=null;function qi(l){return l.h||(l.h=l.i())}function Qi(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){fe.call(this,"d")}Z(qn,fe);function Ki(){fe.call(this,"c")}Z(Ki,fe);var Qn={},io=null;function fi(){return io=io||new wt}Qn.La="serverreachability";function so(l){fe.call(this,Qn.La,l)}Z(so,fe);function cr(l){const d=fi();Tt(d,new so(d))}Qn.STAT_EVENT="statevent";function oo(l,d){fe.call(this,Qn.STAT_EVENT,l),this.stat=d}Z(oo,fe);function ht(l){const d=fi();Tt(d,new oo(d,l))}Qn.Ma="timingevent";function Gi(l,d){fe.call(this,Qn.Ma,l),this.size=d}Z(Gi,fe);function Rn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},d)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function pi(l,d,m,E,F,z){l.info(function(){if(l.g)if(z)for(var ne="",Qe=z.split("&"),It=0;It<Qe.length;It++){var Me=Qe[It].split("=");if(1<Me.length){var kt=Me[0];Me=Me[1];var gt=kt.split("_");ne=2<=gt.length&&gt[1]=="type"?ne+(kt+"="+Me+"&"):ne+(kt+"=redacted&")}}else ne=null;else ne=z;return"XMLHTTP REQ ("+E+") [attempt "+F+"]: "+d+`
`+m+`
`+ne})}function Xi(l,d,m,E,F,z,ne){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+F+"]: "+d+`
`+m+`
`+z+" "+ne})}function kn(l,d,m,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+yu(l,m)+(E?" "+E:"")})}function ao(l,d){l.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function yu(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var F=E[1];if(Array.isArray(F)&&!(1>F.length)){var z=F[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ne=1;ne<F.length;ne++)F[ne]=""}}}}return to(m)}catch{return d}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function mi(){}Z(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Nn=new mi;function Vn(l,d,m,E){this.j=l,this.i=d,this.l=m,this.R=E||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new da}function da(){this.i=null,this.g="",this.h=!1}var lo={},Ji={};function Zi(l,d,m){l.L=1,l.v=xr(un(d)),l.m=m,l.P=!0,uo(l,null)}function uo(l,d){l.F=Date.now(),Xe(l),l.A=un(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Or(m.i,"t",E),l.C=0,m=l.j.J,l.h=new da,l.g=Va(l.j,m?d:null,!l.m),0<l.O&&(l.M=new ui(D(l.Y,l,l.g),l.O)),d=l.U,m=l.g,E=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Zs[0]=F.toString()),F=Zs);for(var z=0;z<F.length;z++){var ne=re(m,F[z],E||d.handleEvent,!1,d.h||d);if(!ne)break;d.g[ne.key]=ne}d=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),cr(),pi(l.i,l.u,l.A,l.l,l.R,l.m)}Vn.prototype.ca=function(l){l=l.target;const d=this.M;d&&Zt(l)==3?d.j():this.Y(l)},Vn.prototype.Y=function(l){try{if(l==this.g)e:{const gt=Zt(this.g);var d=this.g.Ba();const _n=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||go(this.g)))){this.J||gt!=4||d==7||(d==8||0>=_n?cr(3):cr(2)),gi(this);var m=this.g.Z();this.X=m;t:if(pa(this)){var E=go(this.g);l="";var F=E.length,z=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Rr(this);var ne="";break t}this.h.i=new g.TextDecoder}for(d=0;d<F;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(z&&d==F-1)});E.length=0,this.h.g+=l,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=m==200,Xi(this.i,this.u,this.A,this.l,this.R,gt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,It=this.g;if((Qe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ve(Qe)){var Me=Qe;break t}}Me=null}if(m=Me)kn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,m);else{this.o=!1,this.s=3,ht(12),gn(this),Rr(this);break e}}if(this.P){m=!0;let hn;for(;!this.J&&this.C<ne.length;)if(hn=_u(this,ne),hn==Ji){gt==4&&(this.s=4,ht(14),m=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==lo){this.s=4,ht(15),kn(this.i,this.l,ne,"[Invalid Chunk]"),m=!1;break}else kn(this.i,this.l,hn,null),co(this,hn);if(pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||ne.length!=0||this.h.h||(this.s=1,ht(16),m=!1),this.o=this.o&&m,!m)kn(this.i,this.l,ne,"[Invalid Chunked Response]"),gn(this),Rr(this);else if(0<ne.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),_o(kt),kt.M=!0,ht(11))}}else kn(this.i,this.l,ne,null),co(this,ne);gt==4&&gn(this),this.o&&!this.J&&(gt==4?cs(this.j,this):(this.o=!1,Xe(this)))}else ss(this.g),m==400&&0<ne.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),gn(this),Rr(this)}}}catch{}finally{}};function pa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _u(l,d){var m=l.C,E=d.indexOf(`
`,m);return E==-1?Ji:(m=Number(d.substring(m,E)),isNaN(m)?lo:(E+=1,E+m>d.length?Ji:(d=d.slice(E,E+m),l.C=E+m,d)))}Vn.prototype.cancel=function(){this.J=!0,gn(this)};function Xe(l){l.S=Date.now()+l.I,ma(l,l.I)}function ma(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Rn(D(l.ba,l),d)}function gi(l){l.B&&(g.clearTimeout(l.B),l.B=null)}Vn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ao(this.i,this.A),this.L!=2&&(cr(),ht(17)),gn(this),this.s=2,Rr(this)):ma(this,this.S-l)};function Rr(l){l.j.G==0||l.J||cs(l.j,l)}function gn(l){gi(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,eo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function co(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Kt(m.h,l))){if(!l.K&&Kt(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var F=E;if(F[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)us(m),Ln(m);else break e;ls(m),ht(18)}}else m.za=F[1],0<m.za-m.T&&37500>F[2]&&m.F&&m.v==0&&!m.C&&(m.C=Rn(D(m.Za,m),6e3));if(1>=ya(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else mr(m,11)}else if((l.K||m.g==l)&&us(m),!ve(d))for(F=m.Da.g.parse(d),d=0;d<F.length;d++){let Me=F[d];if(m.T=Me[0],Me=Me[1],m.G==2)if(Me[0]=="c"){m.K=Me[1],m.ia=Me[2];const kt=Me[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));const gt=Me[4];gt!=null&&(m.Aa=gt,m.j.info("SVER="+m.Aa));const _n=Me[5];_n!=null&&typeof _n=="number"&&0<_n&&(E=1.5*_n,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const hn=l.g;if(hn){const Ii=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var z=E.h;z.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ho(z,z.h),z.h=null))}if(E.D){const fs=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;fs&&(E.ya=fs,Ge(E.I,E.D,fs))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var ne=l;if(E.qa=Na(E,E.J?E.ia:null,E.W),ne.K){_a(E.h,ne);var Qe=ne,It=E.L;It&&(Qe.I=It),Qe.B&&(gi(Qe),Xe(Qe)),E.g=ne}else Ti(E);0<m.i.length&&Yn(m)}else Me[0]!="stop"&&Me[0]!="close"||mr(m,7);else m.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?mr(m,7):Ft(m):Me[0]!="noop"&&m.l&&m.l.ta(Me),m.v=0)}}cr(4)}catch{}}var ga=class{constructor(l,d){this.g=l,this.map=d}};function yi(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ya(l){return l.h?1:l.g?l.g.size:0}function Kt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ho(l,d){l.g?l.g.add(d):l.h=d}function _a(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}yi.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function va(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return Y(l.i)}function es(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(_(l)){for(var d=[],m=l.length,E=0;E<m;E++)d.push(l[E]);return d}d=[],m=0;for(E in l)d[m++]=l[E];return d}function ts(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(_(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const E in l)d[m++]=E;return d}}}function kr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(_(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=ts(l),E=es(l),F=E.length,z=0;z<F;z++)d.call(void 0,E[z],m&&m[z],l)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vu(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),F=null;if(0<=E){var z=l[m].substring(0,E);F=l[m].substring(E+1)}else z=l[m];d(z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function hr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hr){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Nr(this,l.s),this.l=l.l;var d=l.i,m=new Kn;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Vr(this,m),this.m=l.m}else l&&(d=String(l).match(_i))?(this.h=!1,vi(this,d[1]||"",!0),this.o=Fe(d[2]||""),this.g=Fe(d[3]||"",!0),Nr(this,d[4]),this.l=Fe(d[5]||"",!0),Vr(this,d[6]||"",!0),this.m=Fe(d[7]||"")):(this.h=!1,this.i=new Kn(null,this.h))}hr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Dr(d,ns,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Dr(d,ns,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Dr(m,m.charAt(0)=="/"?Ta:wa,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Dr(m,fo)),l.join("")};function un(l){return new hr(l)}function vi(l,d,m){l.j=m?Fe(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Nr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Vr(l,d,m){d instanceof Kn?(l.i=d,Gn(l.i,l.h)):(m||(d=Dr(d,Ia)),l.i=new Kn(d,l.h))}function Ge(l,d,m){l.i.set(d,m)}function xr(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fe(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Dr(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,Ea),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ea(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ns=/[#\/\?@]/g,wa=/[#\?:]/g,Ta=/[#\?]/g,Ia=/[#\?@]/g,fo=/#/g;function Kn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ot(l){l.g||(l.g=new Map,l.h=0,l.i&&vu(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=Kn.prototype,i.add=function(l,d){Ot(this),this.i=null,l=yn(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function xn(l,d){Ot(l),d=yn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Dn(l,d){return Ot(l),d=yn(l,d),l.g.has(d)}i.forEach=function(l,d){Ot(this),this.g.forEach(function(m,E){m.forEach(function(F){l.call(d,F,E,this)},this)},this)},i.na=function(){Ot(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const F=l[E];for(let z=0;z<F.length;z++)m.push(d[E])}return m},i.V=function(l){Ot(this);let d=[];if(typeof l=="string")Dn(this,l)&&(d=d.concat(this.g.get(yn(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},i.set=function(l,d){return Ot(this),this.i=null,l=yn(this,l),Dn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Or(l,d,m){xn(l,d),0<m.length&&(l.i=null,l.g.set(yn(l,d),Y(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const z=encodeURIComponent(String(E)),ne=this.V(E);for(E=0;E<ne.length;E++){var F=z;ne[E]!==""&&(F+="="+encodeURIComponent(String(ne[E]))),l.push(F)}}return this.i=l.join("&")};function yn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Gn(l,d){d&&!l.j&&(Ot(l),l.i=null,l.g.forEach(function(m,E){var F=E.toLowerCase();E!=F&&(xn(this,E),Or(this,F,m))},l)),l.j=d}function Eu(l,d){const m=new di;if(g.Image){const E=new Image;E.onload=$(Jt,m,"TestLoadImage: loaded",!0,d,E),E.onerror=$(Jt,m,"TestLoadImage: error",!1,d,E),E.onabort=$(Jt,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=$(Jt,m,"TestLoadImage: timeout",!1,d,E),g.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function Sa(l,d){const m=new di,E=new AbortController,F=setTimeout(()=>{E.abort(),Jt(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(z=>{clearTimeout(F),z.ok?Jt(m,"TestPingServer: ok",!0,d):Jt(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(F),Jt(m,"TestPingServer: error",!1,d)})}function Jt(l,d,m,E,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),E(m)}catch{}}function wu(){this.g=new ro}function Aa(l,d,m){const E=m||"";try{kr(l,function(F,z){let ne=F;v(F)&&(ne=to(F)),d.push(E+z+"="+encodeURIComponent(ne))})}catch(F){throw d.push(E+"type="+encodeURIComponent("_badmap")),F}}function fr(l){this.l=l.Ub||null,this.j=l.eb||!1}Z(fr,hi),fr.prototype.g=function(){return new Ei(this.l,this.j)},fr.prototype.i=function(l){return function(){return l}}({});function Ei(l,d){wt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(Ei,wt),i=Ei.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Fn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ca(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ca(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?On(this):Fn(this),this.readyState==3&&Ca(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,On(this))},i.Qa=function(l){this.g&&(this.response=l,On(this))},i.ga=function(){this.g&&On(this)};function On(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Fn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Fn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function dr(l){let d="";return Le(l,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function Fr(l,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=dr(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ge(l,d,m))}function tt(l){wt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(tt,wt);var Tu=/^https?$/i,po=["POST","PUT"];i=tt.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?qi(this.o):qi(Nn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){wi(this,z);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var F in E)m.set(F,E[F]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())m.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),F=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(po,d,void 0))||E||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of m)this.g.setRequestHeader(z,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){wi(this,z)}};function wi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,rs(l),cn(l)}function rs(l){l.A||(l.A=!0,Tt(l,"complete"),Tt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Tt(this,"complete"),Tt(this,"abort"),cn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),tt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?mo(this):this.bb())},i.bb=function(){mo(this)};function mo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||Zt(l)!=4||l.Z()!=2)){if(l.u&&Zt(l)==4)Js(l.Ea,0,l);else if(Tt(l,"readystatechange"),Zt(l)==4){l.h=!1;try{const ne=l.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=ne===0){var F=String(l.D).match(_i)[1]||null;!F&&g.self&&g.self.location&&(F=g.self.location.protocol.slice(0,-1)),E=!Tu.test(F?F.toLowerCase():"")}m=E}if(m)Tt(l,"complete"),Tt(l,"success");else{l.m=6;try{var z=2<Zt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",rs(l)}}finally{cn(l)}}}}function cn(l,d){if(l.g){is(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Tt(l,"ready");try{m.onreadystatechange=E}catch{}}}function is(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Zt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),no(d)}};function go(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ss(l){const d={};l=(l.g&&2<=Zt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ve(l[E]))continue;var m=V(l[E]);const F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=d[F]||[];d[F]=z,z.push(m)}k(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function yo(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,l),this.cb=Xn("retryDelaySeedMs",1e4,l),this.Wa=Xn("forwardChannelMaxRetries",2,l),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(l&&l.concurrentRequestLimit),this.Da=new wu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=yo.prototype,i.la=8,i.G=1,i.connect=function(l,d,m,E){ht(0),this.W=l,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=Na(this,null,this.W),Yn(this)};function Ft(l){if(os(l),l.G==3){var d=l.U++,m=un(l.I);if(Ge(m,"SID",l.K),Ge(m,"RID",d),Ge(m,"TYPE","terminate"),pr(l,m),d=new Vn(l,l.j,d),d.L=2,d.v=xr(un(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=Va(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xe(d)}ka(l)}function Ln(l){l.g&&(_o(l),l.g.cancel(),l.g=null)}function os(l){Ln(l),l.u&&(g.clearTimeout(l.u),l.u=null),us(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function Yn(l){if(!ln(l.h)&&!l.s){l.s=!0;var d=l.Ga;be||J(),ie||(be(),ie=!0),de.add(d,l),l.B=0}}function Iu(l,d){return ya(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Rn(D(l.Ga,l,d),Ra(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new Vn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=w(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(F.H=z,z=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Lr(this,F,d),m=un(this.I),Ge(m,"RID",l),Ge(m,"CVER",22),this.D&&Ge(m,"X-HTTP-Session-Id",this.D),pr(this,m),z&&(this.O?d="headers="+encodeURIComponent(String(dr(z)))+"&"+d:this.m&&Fr(m,this.m,z)),ho(this.h,F),this.Ua&&Ge(m,"TYPE","init"),this.P?(Ge(m,"$req",d),Ge(m,"SID","null"),F.T=!0,Zi(F,m,null)):Zi(F,m,d),this.G=2}}else this.G==3&&(l?as(this,l):this.i.length==0||ln(this.h)||as(this))};function as(l,d){var m;d?m=d.l:m=l.U++;const E=un(l.I);Ge(E,"SID",l.K),Ge(E,"RID",m),Ge(E,"AID",l.T),pr(l,E),l.m&&l.o&&Fr(E,l.m,l.o),m=new Vn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Lr(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ho(l.h,m),Zi(m,E,d)}function pr(l,d){l.H&&Le(l.H,function(m,E){Ge(d,E,m)}),l.l&&kr({},function(m,E){Ge(d,E,m)})}function Lr(l,d,m){m=Math.min(l.i.length,m);var E=l.l?D(l.l.Na,l.l,l):null;e:{var F=l.i;let z=-1;for(;;){const ne=["count="+m];z==-1?0<m?(z=F[0].g,ne.push("ofs="+z)):z=0:ne.push("ofs="+z);let Qe=!0;for(let It=0;It<m;It++){let Me=F[It].g;const kt=F[It].map;if(Me-=z,0>Me)z=Math.max(0,F[It].g-100),Qe=!1;else try{Aa(kt,ne,"req"+Me+"_")}catch{E&&E(kt)}}if(Qe){E=ne.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,E}function Ti(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;be||J(),ie||(be(),ie=!0),de.add(d,l),l.v=0}}function ls(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Rn(D(l.Fa,l),Ra(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Pa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Rn(D(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Ln(this),Pa(this))};function _o(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Pa(l){l.g=new Vn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=un(l.qa);Ge(d,"RID","rpc"),Ge(d,"SID",l.K),Ge(d,"AID",l.T),Ge(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(d,"TO",l.ja),Ge(d,"TYPE","xmlhttp"),pr(l,d),l.m&&l.o&&Fr(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=xr(un(d)),m.m=null,m.P=!0,uo(m,l)}i.Za=function(){this.C!=null&&(this.C=null,Ln(this),ls(this),ht(19))};function us(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function cs(l,d){var m=null;if(l.g==d){us(l),_o(l),l.g=null;var E=2}else if(Kt(l.h,d))m=d.D,_a(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var F=l.B;E=fi(),Tt(E,new Gi(E,m)),Yn(l)}else Ti(l);else if(F=d.s,F==3||F==0&&0<d.X||!(E==1&&Iu(l,d)||E==2&&ls(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),F){case 1:mr(l,5);break;case 4:mr(l,10);break;case 3:mr(l,6);break;default:mr(l,2)}}}function Ra(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function mr(l,d){if(l.j.info("Error code "+d),d==2){var m=D(l.fb,l),E=l.Xa;const F=!E;E=new hr(E||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||vi(E,"https"),xr(E),F?Eu(E.toString(),m):Sa(E.toString(),m)}else ht(2);l.G=0,l.l&&l.l.sa(d),ka(l),os(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function ka(l){if(l.G=0,l.ka=[],l.l){const d=va(l.h);(d.length!=0||l.i.length!=0)&&(b(l.ka,d),b(l.ka,l.i),l.h.i.length=0,Y(l.i),l.i.length=0),l.l.ra()}}function Na(l,d,m){var E=m instanceof hr?un(m):new hr(m);if(E.g!="")d&&(E.g=d+"."+E.g),Nr(E,E.s);else{var F=g.location;E=F.protocol,d=d?d+"."+F.hostname:F.hostname,F=+F.port;var z=new hr(null);E&&vi(z,E),d&&(z.g=d),F&&Nr(z,F),m&&(z.l=m),E=z}return m=l.D,d=l.ya,m&&d&&Ge(E,m,d),Ge(E,"VER",l.la),pr(l,E),E}function Va(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new tt(new fr({eb:m})):new tt(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function vo(){}i=vo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function hs(){}hs.prototype.g=function(l,d){return new Gt(l,d)};function Gt(l,d){wt.call(this),this.g=new yo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ve(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ve(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Jn(this)}Z(Gt,wt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Ft(this.g)},Gt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=to(l),l=m);d.i.push(new ga(d.Ya++,l)),d.G==3&&Yn(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,Gt.aa.N.call(this)};function xa(l){qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}Z(xa,qn);function Da(){Ki.call(this),this.status=1}Z(Da,Ki);function Jn(l){this.g=l}Z(Jn,vo),Jn.prototype.ua=function(){Tt(this.g,"a")},Jn.prototype.ta=function(l){Tt(this.g,new xa(l))},Jn.prototype.sa=function(l){Tt(this.g,new Da)},Jn.prototype.ra=function(){Tt(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Wm=function(){return new hs},$m=function(){return fi()},zm=Qn,lh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Ol=Yi,fa.COMPLETE="complete",jm=fa,Qi.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Wo=Qi,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,bm=tt}).apply(typeof Pl<"u"?Pl:typeof self<"u"?self:typeof window<"u"?window:{});const Vp="@firebase/firestore",xp="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Dm("@firebase/firestore");function Ds(){return bi.logLevel}function ae(i,...e){if(bi.logLevel<=Ue.DEBUG){const n=e.map(Rh);bi.debug(`Firestore (${Qs}): ${i}`,...n)}}function Ar(i,...e){if(bi.logLevel<=Ue.ERROR){const n=e.map(Rh);bi.error(`Firestore (${Qs}): ${i}`,...n)}}function Us(i,...e){if(bi.logLevel<=Ue.WARN){const n=e.map(Rh);bi.warn(`Firestore (${Qs}): ${i}`,...n)}}function Rh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Hm(i,s,n)}function Hm(i,e,n){let s=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ar(s),new Error(s)}function qe(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||Hm(e,a,s)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends qs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class y0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _0{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let s=this.i;const a=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ti,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const _=c;e.enqueueRetryable(async()=>{await _.promise,await a(this.currentUser)})},g=_=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(_=>g(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ti)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new qm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class v0{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E0{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new v0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const s=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=T0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function ke(i,e){return i<e?-1:i>e?1:0}function uh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return ke(s,a);{const c=Qm(),f=I0(c.encode(Op(i,n)),c.encode(Op(e,n)));return f!==0?f:ke(s,a)}}n+=s>65535?2:1}return ke(i.length,e.length)}function Op(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function I0(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return ke(i[n],e[n]);return ke(i.length,e.length)}function bs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-62135596800,Lp=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Lp);return new Pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fp)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lp}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Fp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Pt(0,0))}static max(){return new Ae(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="__name__";class rr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=rr.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return ke(e.length,n.length)}static compareSegments(e,n){const s=rr.isNumericId(e),a=rr.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?rr.extractNumericId(e).compare(rr.extractNumericId(n)):uh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}}class rt extends rr{construct(e,n,s){return new rt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const S0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends rr{construct(e,n,s){return new Ut(e,n,s)}static isValidIdentifier(e){return S0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mp}static keyField(){return new Ut([Mp])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new pe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new pe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[a+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new pe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(s+=g,a++):(c(),a++)}if(c(),f)throw new pe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(rt.fromString(e))}static fromName(e){return new _e(rt.fromString(e).popFirst(5))}static empty(){return new _e(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function A0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(s===1e9?new Pt(n+1,0):new Pt(n,s));return new ri(a,_e.empty(),e)}function C0(i){return new ri(i.readTime,i.key,ta)}class ri{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ri(Ae.min(),_e.empty(),ta)}static max(){return new ri(Ae.max(),_e.empty(),ta)}}function P0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(i.documentKey,e.documentKey),n!==0?n:ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==R0)throw i;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let a=0,c=0,f=!1;e.forEach(g=>{++a,g.next(()=>{++c,f&&c===a&&n()},_=>s(_))}),f=!0,c===a&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(a=>a?H.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new H((s,a)=>{const c=e.length,f=new Array(c);let g=0;for(let _=0;_<c;_++){const v=_;n(e[v]).next(S=>{f[v]=S,++g,g===c&&s(f)},S=>a(S))}})}static doWhile(e,n){return new H((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function N0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=-1;function ru(i){return i==null}function Wl(i){return i===0&&1/i==-1/0}function V0(i){return typeof i=="number"&&Number.isInteger(i)&&!Wl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="";function x0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Bp(e)),e=D0(i.get(n),e);return Bp(e)}function D0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case Gm:n+="";break;default:n+=c}}return n}function Bp(i){return i+Gm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function zi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Xm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rl(this.root,e,this.comparator,!0)}}class Rl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Bt.RED,this.left=a??Bt.EMPTY,this.right=c??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Bt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Bt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bp(this.data.getIterator())}getIteratorFrom(e){return new bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class bp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new $n([])}unionWith(e){let n=new Rt(Ut.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ym("Invalid base64 string: "+c):c}}(e);return new bt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const O0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(i){if(qe(!!i,39018),typeof i=="string"){let e=0;const n=O0.exec(i);if(qe(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(i.seconds),nanos:dt(i.nanos)}}function dt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function si(i){return typeof i=="string"?bt.fromBase64String(i):bt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="server_timestamp",Zm="__type__",eg="__previous_value__",tg="__local_write_time__";function Nh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zm])===null||n===void 0?void 0:n.stringValue)===Jm}function iu(i){const e=i.mapValue.fields[eg];return Nh(e)?iu(e):e}function na(i){const e=ii(i.mapValue.fields[tg].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,s,a,c,f,g,_,v,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=S}}const Hl="(default)";class ra{constructor(e,n){this.projectId=e,this.database=n||Hl}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database===Hl}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="__type__",L0="__max__",kl={mapValue:{}},rg="__vector__",ql="value";function oi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Nh(i)?4:B0(i)?9007199254740991:M0(i)?10:11:Ee(28295,{value:i})}function ar(i,e){if(i===e)return!0;const n=oi(i);if(n!==oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return na(i).isEqual(na(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ii(a.timestampValue),g=ii(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return si(a.bytesValue).isEqual(si(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return dt(a.geoPointValue.latitude)===dt(c.geoPointValue.latitude)&&dt(a.geoPointValue.longitude)===dt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return dt(a.integerValue)===dt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=dt(a.doubleValue),g=dt(c.doubleValue);return f===g?Wl(f)===Wl(g):isNaN(f)&&isNaN(g)}return!1}(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},g=c.mapValue.fields||{};if(Up(f)!==Up(g))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(g[_]===void 0||!ar(f[_],g[_])))return!1;return!0}(i,e);default:return Ee(52216,{left:i})}}function ia(i,e){return(i.values||[]).find(n=>ar(n,e))!==void 0}function js(i,e){if(i===e)return 0;const n=oi(i),s=oi(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return function(c,f){const g=dt(c.integerValue||c.doubleValue),_=dt(f.integerValue||f.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(i,e);case 3:return jp(i.timestampValue,e.timestampValue);case 4:return jp(na(i),na(e));case 5:return uh(i.stringValue,e.stringValue);case 6:return function(c,f){const g=si(c),_=si(f);return g.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const g=c.split("/"),_=f.split("/");for(let v=0;v<g.length&&v<_.length;v++){const S=ke(g[v],_[v]);if(S!==0)return S}return ke(g.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const g=ke(dt(c.latitude),dt(f.latitude));return g!==0?g:ke(dt(c.longitude),dt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return zp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var g,_,v,S;const N=c.fields||{},D=f.fields||{},$=(g=N[ql])===null||g===void 0?void 0:g.arrayValue,Z=(_=D[ql])===null||_===void 0?void 0:_.arrayValue,Y=ke(((v=$==null?void 0:$.values)===null||v===void 0?void 0:v.length)||0,((S=Z==null?void 0:Z.values)===null||S===void 0?void 0:S.length)||0);return Y!==0?Y:zp($,Z)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===kl.mapValue&&f===kl.mapValue)return 0;if(c===kl.mapValue)return 1;if(f===kl.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),v=f.fields||{},S=Object.keys(v);_.sort(),S.sort();for(let N=0;N<_.length&&N<S.length;++N){const D=uh(_[N],S[N]);if(D!==0)return D;const $=js(g[_[N]],v[S[N]]);if($!==0)return $}return ke(_.length,S.length)}(i.mapValue,e.mapValue);default:throw Ee(23264,{Pe:n})}}function jp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ke(i,e);const n=ii(i),s=ii(e),a=ke(n.seconds,s.seconds);return a!==0?a:ke(n.nanos,s.nanos)}function zp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=js(n[a],s[a]);if(c)return c}return ke(n.length,s.length)}function zs(i){return ch(i)}function ch(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ii(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return si(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return _e.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=ch(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${ch(n.fields[f])}`;return a+"}"}(i.mapValue):Ee(61005,{value:i})}function Fl(i){switch(oi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=iu(i);return e?16+Fl(e):16;case 5:return 2*i.stringValue.length;case 6:return si(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Fl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return zi(s.fields,(c,f)=>{a+=c.length+Fl(f)}),a}(i.mapValue);default:throw Ee(13486,{value:i})}}function hh(i){return!!i&&"integerValue"in i}function Vh(i){return!!i&&"arrayValue"in i}function $p(i){return!!i&&"nullValue"in i}function Wp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ll(i){return!!i&&"mapValue"in i}function M0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ng])===null||n===void 0?void 0:n.stringValue)===rg}function Ko(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return zi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ko(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(i.arrayValue.values[n]);return e}return Object.assign({},i)}function B0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===L0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ll(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=Ut.emptyPath(),s={},a=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,s,a),s={},a=[],n=g.popLast()}f?s[g.lastSegment()]=Ko(f):a.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Ll(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Ll(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){zi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new An(Ko(this.value))}}function ig(i){const e=[];return zi(i.fields,(n,s)=>{const a=new Ut([n]);if(Ll(s)){const c=ig(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,s,a,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Qt(e,0,Ae.min(),Ae.min(),Ae.min(),An.empty(),0)}static newFoundDocument(e,n,s,a){return new Qt(e,1,n,Ae.min(),s,a,0)}static newNoDocument(e,n){return new Qt(e,2,n,Ae.min(),Ae.min(),An.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Ae.min(),Ae.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.position=e,this.inclusive=n}}function Hp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=_e.comparator(_e.fromName(f.referenceValue),n.key):s=js(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function qp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ar(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function U0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{}class Ct extends sg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new j0(e,n,s):n==="array-contains"?new W0(e,s):n==="in"?new H0(e,s):n==="not-in"?new q0(e,s):n==="array-contains-any"?new Q0(e,s):new Ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new z0(e,s):new $0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(js(n,this.value)):n!==null&&oi(this.value)===oi(n)&&this.matchesComparison(js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends sg{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new lr(e,n)}matches(e){return og(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function og(i){return i.op==="and"}function ag(i){return b0(i)&&og(i)}function b0(i){for(const e of i.filters)if(e instanceof lr)return!1;return!0}function fh(i){if(i instanceof Ct)return i.field.canonicalString()+i.op.toString()+zs(i.value);if(ag(i))return i.filters.map(e=>fh(e)).join(",");{const e=i.filters.map(n=>fh(n)).join(",");return`${i.op}(${e})`}}function lg(i,e){return i instanceof Ct?function(s,a){return a instanceof Ct&&s.op===a.op&&s.field.isEqual(a.field)&&ar(s.value,a.value)}(i,e):i instanceof lr?function(s,a){return a instanceof lr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,g)=>c&&lg(f,a.filters[g]),!0):!1}(i,e):void Ee(19439)}function ug(i){return i instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(i):i instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(ug).join(" ,")+"}"}(i):"Filter"}class j0 extends Ct{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class z0 extends Ct{constructor(e,n){super(e,"in",n),this.keys=cg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $0 extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=cg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>_e.fromName(s.referenceValue))}class W0 extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vh(n)&&ia(n.arrayValue,this.value)}}class H0 extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class q0 extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ia(this.value.arrayValue,n)}}class Q0 extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ia(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n=null,s=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.Ie=null}}function Qp(i,e=null,n=[],s=[],a=null,c=null,f=null){return new K0(i,e,n,s,a,c,f)}function xh(i){const e=Ce(i);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>fh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>zs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>zs(s)).join(",")),e.Ie=n}return e.Ie}function Dh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!U0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!lg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!qp(i.startAt,e.startAt)&&qp(i.endAt,e.endAt)}function dh(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n=null,s=[],a=[],c=null,f="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=_,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function G0(i,e,n,s,a,c,f,g){return new su(i,e,n,s,a,c,f,g)}function hg(i){return new su(i)}function Kp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X0(i){return i.collectionGroup!==null}function Go(i){const e=Ce(i);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Rt(Ut.comparator);return f.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Kl(c,s))}),n.has(Ut.keyField().canonicalString())||e.Ee.push(new Kl(Ut.keyField(),s))}return e.Ee}function ir(i){const e=Ce(i);return e.de||(e.de=Y0(e,Go(i))),e.de}function Y0(i,e){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Kl(a.field,c)});const n=i.endAt?new Ql(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ql(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ph(i,e,n){return new su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function ou(i,e){return Dh(ir(i),ir(e))&&i.limitType===e.limitType}function fg(i){return`${xh(ir(i))}|lt:${i.limitType}`}function Os(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>ug(a)).join(", ")}]`),ru(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>zs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>zs(a)).join(",")),`Target(${s})`}(ir(i))}; limitType=${i.limitType})`}function au(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):_e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Go(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,g,_){const v=Hp(f,g,_);return f.inclusive?v<=0:v<0}(s.startAt,Go(s),a)||s.endAt&&!function(f,g,_){const v=Hp(f,g,_);return f.inclusive?v>=0:v>0}(s.endAt,Go(s),a))}(i,e)}function J0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function dg(i){return(e,n)=>{let s=!1;for(const a of Go(i)){const c=Z0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function Z0(i,e,n){const s=i.field.isKeyField()?_e.comparator(e.key,n.key):function(c,f,g){const _=f.data.field(c),v=g.data.field(c);return _!==null&&v!==null?js(_,v):Ee(42886)}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Xm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new at(_e.comparator);function Cr(){return eE}const pg=new at(_e.comparator);function Ho(...i){let e=pg;for(const n of i)e=e.insert(n.key,n);return e}function mg(i){let e=pg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ui(){return Xo()}function gg(){return Xo()}function Xo(){return new $i(i=>i.toString(),(i,e)=>i.isEqual(e))}const tE=new at(_e.comparator),nE=new Rt(_e.comparator);function Oe(...i){let e=nE;for(const n of i)e=e.add(n);return e}const rE=new Rt(ke);function iE(){return rE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function yg(i){return{integerValue:""+i}}function sE(i,e){return V0(e)?yg(e):Oh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this._=void 0}}function oE(i,e,n){return i instanceof Gl?function(a,c){const f={fields:{[Zm]:{stringValue:Jm},[tg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Nh(c)&&(c=iu(c)),c&&(f.fields[eg]=c),{mapValue:f}}(n,e):i instanceof sa?vg(i,e):i instanceof oa?Eg(i,e):function(a,c){const f=_g(a,c),g=Gp(f)+Gp(a.Re);return hh(f)&&hh(a.Re)?yg(g):Oh(a.serializer,g)}(i,e)}function aE(i,e,n){return i instanceof sa?vg(i,e):i instanceof oa?Eg(i,e):n}function _g(i,e){return i instanceof Xl?function(s){return hh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Gl extends lu{}class sa extends lu{constructor(e){super(),this.elements=e}}function vg(i,e){const n=wg(e);for(const s of i.elements)n.some(a=>ar(a,s))||n.push(s);return{arrayValue:{values:n}}}class oa extends lu{constructor(e){super(),this.elements=e}}function Eg(i,e){let n=wg(e);for(const s of i.elements)n=n.filter(a=>!ar(a,s));return{arrayValue:{values:n}}}class Xl extends lu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Gp(i){return dt(i.integerValue||i.doubleValue)}function wg(i){return Vh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function lE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof sa&&a instanceof sa||s instanceof oa&&a instanceof oa?bs(s.elements,a.elements,ar):s instanceof Xl&&a instanceof Xl?ar(s.Re,a.Re):s instanceof Gl&&a instanceof Gl}(i.transform,e.transform)}class uE{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class uu{}function Tg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Fh(i.key,sr.none()):new la(i.key,i.data,sr.none());{const n=i.data,s=An.empty();let a=new Rt(Ut.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new Wi(i.key,s,new $n(a.toArray()),sr.none())}}function cE(i,e,n){i instanceof la?function(a,c,f){const g=a.value.clone(),_=Yp(a.fieldTransforms,c,f.transformResults);g.setAll(_),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):i instanceof Wi?function(a,c,f){if(!Ml(a.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Yp(a.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(Ig(a)),_.setAll(g),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Yo(i,e,n,s){return i instanceof la?function(c,f,g,_){if(!Ml(c.precondition,f))return g;const v=c.value.clone(),S=Jp(c.fieldTransforms,_,f);return v.setAll(S),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof Wi?function(c,f,g,_){if(!Ml(c.precondition,f))return g;const v=Jp(c.fieldTransforms,_,f),S=f.data;return S.setAll(Ig(c)),S.setAll(v),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(N=>N.field))}(i,e,n,s):function(c,f,g){return Ml(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(i,e,n)}function hE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=_g(s.transform,a||null);c!=null&&(n===null&&(n=An.empty()),n.set(s.field,c))}return n||null}function Xp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bs(s,a,(c,f)=>lE(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class la extends uu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Wi extends uu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ig(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Yp(i,e,n){const s=new Map;qe(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,g=e.data.field(c.field);s.set(c.field,aE(f,g,n[a]))}return s}function Jp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,oE(c,f,e))}return s}class Fh extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fE extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&cE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=gg();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const _=Tg(f,g);_!==null&&s.set(a.key,_),f.isValidDocument()||f.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,s)=>Xp(n,s))&&bs(this.baseMutations,e.baseMutations,(n,s)=>Xp(n,s))}}class Lh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){qe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return tE}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Lh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Be;function gE(i){switch(i){case K.OK:return Ee(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ee(15467,{code:i})}}function Sg(i){if(i===void 0)return Ar("GRPC error has no .code"),K.UNKNOWN;switch(i){case _t.OK:return K.OK;case _t.CANCELLED:return K.CANCELLED;case _t.UNKNOWN:return K.UNKNOWN;case _t.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case _t.INTERNAL:return K.INTERNAL;case _t.UNAVAILABLE:return K.UNAVAILABLE;case _t.UNAUTHENTICATED:return K.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case _t.NOT_FOUND:return K.NOT_FOUND;case _t.ALREADY_EXISTS:return K.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return K.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case _t.ABORTED:return K.ABORTED;case _t.OUT_OF_RANGE:return K.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return K.UNIMPLEMENTED;case _t.DATA_LOSS:return K.DATA_LOSS;default:return Ee(39323,{code:i})}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new ei([4294967295,4294967295],0);function Zp(i){const e=Qm().encode(i),n=new Um;return n.update(e),new Uint8Array(n.digest())}function em(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ei([n,s],0),new ei([a,c],0)]}class Mh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(s<0)throw new qo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ei.fromNumber(this.pe)}we(e,n,s){let a=e.add(n.multiply(ei.fromNumber(s)));return a.compare(yE)===1&&(a=new ei([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Zp(e),[s,a]=em(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);if(!this.be(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Mh(c,a,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=Zp(e),[s,a]=em(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new cu(Ae.min(),a,new at(ke),Cr(),Oe())}}class ua{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ua(s,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,s,a){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=a}}class Ag{constructor(e,n){this.targetId=e,this.Ce=n}}class Cg{constructor(e,n,s=bt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class tm{constructor(){this.Fe=0,this.Me=nm(),this.xe=bt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Oe(),n=Oe(),s=Oe();return this.Me.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ee(38017,{changeType:c})}}),new ua(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=nm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class _E{constructor(e){this.ze=e,this.je=new Map,this.He=Cr(),this.Je=Nl(),this.Ye=Nl(),this.Ze=new at(ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,s=e.Ce.count,a=this._t(n);if(a){const c=a.target;if(dh(c))if(s===0){const f=new _e(c.path);this.tt(n,f,Qt.newNoDocument(f,Ae.min()))}else qe(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const g=this.ct(e),_=g?this.lt(g,e,f):1;if(_!==0){this.st(n);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=si(s).toUint8Array()}catch(_){if(_ instanceof Ym)return Us("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new Mh(f,a,c)}catch(_){return Us(_ instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,c,null),a++)}),a}It(e){const n=new Map;this.je.forEach((c,f)=>{const g=this._t(f);if(g){if(c.current&&dh(g.target)){const _=new _e(g.target.path);this.Et(_).has(f)||this.dt(f,_)||this.tt(f,_,Qt.newNoDocument(_,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=Oe();this.Ye.forEach((c,f)=>{let g=!0;f.forEachWhile(_=>{const v=this._t(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const a=new cu(e,n,this.Ze,this.He,s);return this.He=Cr(),this.Je=Nl(),this.Ye=Nl(),this.Ze=new at(ke),a}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new tm,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new tm),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Nl(){return new at(_e.comparator)}function nm(){return new at(_e.comparator)}const vE={asc:"ASCENDING",desc:"DESCENDING"},EE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wE={and:"AND",or:"OR"};class TE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(i,e){return i.useProto3Json||ru(e)?e:{value:e}}function Yl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function IE(i,e){return Yl(i,e.toTimestamp())}function or(i){return qe(!!i,49232),Ae.fromTimestamp(function(n){const s=ii(n);return new Pt(s.seconds,s.nanos)}(i))}function Bh(i,e){return gh(i,e).canonicalString()}function gh(i,e){const n=function(a){return new rt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Rg(i){const e=rt.fromString(i);return qe(Dg(e),10190,{key:e.toString()}),e}function yh(i,e){return Bh(i.databaseId,e.path)}function Jc(i,e){const n=Rg(e);if(n.get(1)!==i.databaseId.projectId)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new _e(Ng(n))}function kg(i,e){return Bh(i.databaseId,e)}function SE(i){const e=Rg(i);return e.length===4?rt.emptyPath():Ng(e)}function _h(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ng(i){return qe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function rm(i,e,n){return{name:yh(i,e),fields:n.value.mapValue.fields}}function AE(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,S){return v.useProto3Json?(qe(S===void 0||typeof S=="string",58123),bt.fromBase64String(S||"")):(qe(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),bt.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(v){const S=v.code===void 0?K.UNKNOWN:Sg(v.code);return new pe(S,v.message||"")}(f);n=new Cg(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Jc(i,s.document.name),c=or(s.document.updateTime),f=s.document.createTime?or(s.document.createTime):Ae.min(),g=new An({mapValue:{fields:s.document.fields}}),_=Qt.newFoundDocument(a,c,f,g),v=s.targetIds||[],S=s.removedTargetIds||[];n=new Bl(v,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Jc(i,s.document),c=s.readTime?or(s.readTime):Ae.min(),f=Qt.newNoDocument(a,c),g=s.removedTargetIds||[];n=new Bl([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Jc(i,s.document),c=s.removedTargetIds||[];n=new Bl([],c,a,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new mE(a,c),g=s.targetId;n=new Ag(g,f)}}return n}function CE(i,e){let n;if(e instanceof la)n={update:rm(i,e.key,e.value)};else if(e instanceof Fh)n={delete:yh(i,e.key)};else if(e instanceof Wi)n={update:rm(i,e.key,e.data),updateMask:FE(e.fieldMask)};else{if(!(e instanceof fE))return Ee(16599,{ft:e.type});n={verify:yh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const g=f.transform;if(g instanceof Gl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof sa)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof oa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Xl)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Ee(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:IE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)}(i,e.precondition)),n}function PE(i,e){return i&&i.length>0?(qe(e!==void 0,14353),i.map(n=>function(a,c){let f=a.updateTime?or(a.updateTime):or(c);return f.isEqual(Ae.min())&&(f=or(c)),new uE(f,a.transformResults||[])}(n,e))):[]}function RE(i,e){return{documents:[kg(i,e.path)]}}function kE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=kg(i,a);const c=function(v){if(v.length!==0)return xg(lr.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(S=>function(D){return{field:Fs(D.field),direction:xE(D.dir)}}(S))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=mh(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:n,parent:a}}function NE(i){let e=SE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){qe(s===1,65062);const S=n.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=function(N){const D=Vg(N);return D instanceof lr&&ag(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(N){return N.map(D=>function(Z){return new Kl(Ls(Z.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Z.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(N){let D;return D=typeof N=="object"?N.value:N,ru(D)?null:D}(n.limit));let _=null;n.startAt&&(_=function(N){const D=!!N.before,$=N.values||[];return new Ql($,D)}(n.startAt));let v=null;return n.endAt&&(v=function(N){const D=!N.before,$=N.values||[];return new Ql($,D)}(n.endAt)),G0(e,a,f,c,g,"F",_,v)}function VE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ls(n.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ls(n.unaryFilter.field);return Ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ls(n.unaryFilter.field);return Ct.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ls(n.unaryFilter.field);return Ct.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(i):i.fieldFilter!==void 0?function(n){return Ct.create(Ls(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(s=>Vg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(i):Ee(30097,{filter:i})}function xE(i){return vE[i]}function DE(i){return EE[i]}function OE(i){return wE[i]}function Fs(i){return{fieldPath:i.canonicalString()}}function Ls(i){return Ut.fromServerFormat(i.fieldPath)}function xg(i){return i instanceof Ct?function(n){if(n.op==="=="){if(Wp(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if($p(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wp(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if($p(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:DE(n.op),value:n.value}}}(i):i instanceof lr?function(n){const s=n.getFilters().map(a=>xg(a));return s.length===1?s[0]:{compositeFilter:{op:OE(n.op),filters:s}}}(i):Ee(54877,{filter:i})}function FE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,s,a,c=Ae.min(),f=Ae.min(),g=bt.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.wt=e}}function ME(i){const e=NE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.Cn=new UE}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(ri.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(ri.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class UE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Rt(rt.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Rt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Og=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Og,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new $s(0)}static lr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="LruGarbageCollector",bE=1048576;function om([i,e],[n,s]){const a=ke(i,n);return a===0?ke(e,s):a}class jE{constructor(e){this.Er=e,this.buffer=new Rt(om),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();om(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ae(sm,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?ae(sm,"Ignoring IndexedDB error during garbage collection: ",n):await Ks(n)}await this.mr(3e5)})}}class $E{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return H.resolve(nu.le);const s=new jE(n);return this.gr.forEachTarget(e,a=>s.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>s.Rr(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(im)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),im):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,a,c,f,g,_,v;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,f=Date.now(),this.nthSequenceNumber(e,a))).next(N=>(s=N,g=Date.now(),this.removeTargets(e,s,n))).next(N=>(c=N,_=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(v=Date.now(),Ds()<=Ue.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${N} documents in `+(v-_)+`ms
Total Duration: ${v-S}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:N})))}}function WE(i,e){return new $E(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.changes=new $i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Yo(s.mutation,a,$n.empty(),Pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Oe()){const a=Ui();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=Ho();return c.forEach((g,_)=>{f=f.insert(g,_.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Ui();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Oe()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,a){let c=Cr();const f=Xo(),g=function(){return Xo()}();return n.forEach((_,v)=>{const S=s.get(v.key);a.has(v.key)&&(S===void 0||S.mutation instanceof Wi)?c=c.insert(v.key,v):S!==void 0?(f.set(v.key,S.mutation.getFieldMask()),Yo(S.mutation,v,S.mutation.getFieldMask(),Pt.now())):f.set(v.key,$n.empty())}),this.recalculateAndSaveOverlays(e,c).next(_=>(_.forEach((v,S)=>f.set(v,S)),n.forEach((v,S)=>{var N;return g.set(v,new qE(S,(N=f.get(v))!==null&&N!==void 0?N:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Xo();let a=new at((f,g)=>f-g),c=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(_=>{const v=n.get(_);if(v===null)return;let S=s.get(_)||$n.empty();S=g.applyToLocalView(v,S),s.set(_,S);const N=(a.get(g.batchId)||Oe()).add(_);a=a.insert(g.batchId,N)})}).next(()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),v=_.key,S=_.value,N=gg();S.forEach(D=>{if(!c.has(D)){const $=Tg(n.get(D),s.get(D));$!==null&&N.set(D,$),c=c.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(e,v,N))}return H.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return _e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):H.resolve(Ui());let g=ta,_=c;return f.next(v=>H.forEach(v,(S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),c.get(S)?H.resolve():this.remoteDocumentCache.getEntry(e,S).next(D=>{_=_.insert(S,D)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,_,v,Oe())).next(S=>({batchId:g,changes:mg(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(s=>{let a=Ho();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Ho();return this.indexManager.getCollectionParents(e,c).next(g=>H.forEach(g,_=>{const v=function(N,D){return new su(D,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(S=>{S.forEach((N,D)=>{f=f.insert(N,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((_,v)=>{const S=v.getKey();f.get(S)===null&&(f=f.insert(S,Qt.newInvalidDocument(S)))});let g=Ho();return f.forEach((_,v)=>{const S=c.get(_);S!==void 0&&Yo(S.mutation,v,$n.empty(),Pt.now()),au(n,v)&&(g=g.insert(_,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return H.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:ME(a.bundledQuery),readTime:or(a.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.overlays=new at(_e.comparator),this.Qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ui();return H.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.St(e,n,c)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Qr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const a=Ui(),c=n.length+1,f=new _e(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const _=g.getNext().value,v=_.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&_.largestBatchId>s&&a.set(_.getKey(),_)}return H.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new at((v,S)=>v-S);const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let S=c.get(v.largestBatchId);S===null&&(S=Ui(),c=c.insert(v.largestBatchId,S)),S.set(v.getKey(),v)}}const g=Ui(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,S)=>g.set(v,S)),!(g.size()>=a)););return H.resolve(g)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Qr.get(a.largestBatchId).delete(s.key);this.Qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new pE(n,s));let c=this.Qr.get(n);c===void 0&&(c=Oe(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.$r=new Rt(Dt.Ur),this.Kr=new Rt(Dt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Dt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Dt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new _e(new rt([])),s=new Dt(n,e),a=new Dt(n,e+1),c=[];return this.Kr.forEachInRange([s,a],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new _e(new rt([])),s=new Dt(n,e),a=new Dt(n,e+1);let c=Oe();return this.Kr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new Dt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Dt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return _e.comparator(e.key,n.key)||ke(e.Zr,n.Zr)}static Wr(e,n){return ke(e.Zr,n.Zr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Rt(Dt.Ur)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new dE(c,n,s,a);this.mutationQueue.push(f);for(const g of a)this.Xr=this.Xr.add(new Dt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return H.resolve(f)}lookupMutationBatch(e,n){return H.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ti(s),c=a<0?0:a;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?kh:this.nr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Dt(n,0),a=new Dt(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,a],f=>{const g=this.ei(f.Zr);c.push(g)}),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Rt(ke);return n.forEach(a=>{const c=new Dt(a,0),f=new Dt(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],g=>{s=s.add(g.Zr)})}),H.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;_e.isDocumentKey(c)||(c=c.child(""));const f=new Dt(new _e(c),0);let g=new Rt(ke);return this.Xr.forEachWhile(_=>{const v=_.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(g=g.add(_.Zr)),!0)},f),H.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const a=this.ei(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){qe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return H.forEach(n.mutations,a=>{const c=new Dt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Dt(n,0),a=this.Xr.firstAfterOrEqual(s);return H.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.ii=e,this.docs=function(){return new at(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let s=Cr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Qt.newInvalidDocument(a))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Cr();const f=n.path,g=new _e(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:v,value:{document:S}}=_.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||P0(C0(S),s)<=0||(a.has(S.key)||au(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,n,s,a){Ee(9500)}si(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new ZE(this)}getSize(e){return H.resolve(this.size)}}class ZE extends HE{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.persistence=e,this.oi=new $i(n=>xh(n),Dh),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this._i=0,this.ai=new Uh,this.targetCount=0,this.ui=$s.cr()}forEachTarget(e,n){return this.oi.forEach((s,a)=>n(a)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),H.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new $s(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Tr(n),H.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),H.waitFor(c).next(()=>a)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),H.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.ci={},this.overlays={},this.li=new nu(0),this.hi=!1,this.hi=!0,this.Pi=new XE,this.referenceDelegate=e(this),this.Ti=new ew(this),this.indexManager=new BE,this.remoteDocumentCache=function(a){return new JE(a)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new LE(n),this.Ei=new KE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new YE(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ae("MemoryPersistence","Starting transaction:",e);const a=new tw(this.li.next());return this.referenceDelegate.di(),s(a).next(c=>this.referenceDelegate.Ai(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ri(e,n){return H.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class tw extends k0{constructor(e){super(),this.currentSequenceNumber=e}}class bh{constructor(e){this.persistence=e,this.Vi=new Uh,this.mi=null}static fi(e){return new bh(e)}get gi(){if(this.mi)return this.mi;throw Ee(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.gi,s=>{const a=_e.fromPath(s);return this.pi(e,a).next(c=>{c||n.removeEntry(a,Ae.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return H.or([()=>H.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Jl{constructor(e,n){this.persistence=e,this.yi=new $i(s=>x0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=WE(this,n)}static fi(e,n){return new Jl(e,n)}di(){}Ai(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return H.forEach(this.yi,(s,a)=>this.Dr(e,s,a).next(c=>c?H.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.si(e,f=>this.Dr(e,f,n).next(g=>{g||(s++,c.removeEntry(f,Ae.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fl(e.data.value)),n}Dr(e,n,s){return H.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return H.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.ds=s,this.As=a}static Rs(e,n){let s=Oe(),a=Oe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new jh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return X_()?8:N0(K_())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new nw;return this.Ss(e,n,f).next(g=>{if(c.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>c.result)}Ds(e,n,s,a){return s.documentReadCount<this.gs?(Ds()<=Ue.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),H.resolve()):(Ds()<=Ue.DEBUG&&ae("QueryEngine","Query:",Os(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ps*a?(Ds()<=Ue.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):H.resolve())}ws(e,n){if(Kp(n))return H.resolve(null);let s=ir(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=ph(n,null,"F"),s=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Oe(...c);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(_=>{const v=this.vs(n,g);return this.Cs(n,v,f,_.readTime)?this.ws(e,ph(n,null,"F")):this.Fs(e,v,n,_)}))})))}bs(e,n,s,a){return Kp(n)||a.isEqual(Ae.min())?H.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,a)?H.resolve(null):(Ds()<=Ue.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Os(n)),this.Fs(e,f,n,A0(a,ta)).next(g=>g))})}vs(e,n){let s=new Rt(dg(e));return n.forEach((a,c)=>{au(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return Ds()<=Ue.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Os(n)),this.ys.getDocumentsMatchingQuery(e,n,ri.min(),s)}Fs(e,n,s,a){return this.ys.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="LocalStore",iw=3e8;class sw{constructor(e,n,s,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new at(ke),this.Os=new $i(c=>xh(c),Dh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ow(i,e,n,s){return new sw(i,e,n,s)}async function Lg(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let _=Oe();for(const v of a){f.push(v.batchId);for(const S of v.mutations)_=_.add(S.key)}for(const v of c){g.push(v.batchId);for(const S of v.mutations)_=_.add(S.key)}return n.localDocuments.getDocuments(s,_).next(v=>({ks:v,removedBatchIds:f,addedBatchIds:g}))})})}function aw(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,_,v,S){const N=v.batch,D=N.keys();let $=H.resolve();return D.forEach(Z=>{$=$.next(()=>S.getEntry(_,Z)).next(Y=>{const b=v.docVersions.get(Z);qe(b!==null,48541),Y.version.compareTo(b)<0&&(N.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),S.addEntry(Y)))})}),$.next(()=>g.mutationQueue.removeMutationBatch(_,N))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let _=Oe();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(_=_.add(g.batch.mutations[v].key));return _}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Mg(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function lw(i,e){const n=Ce(i),s=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const g=[];e.targetChanges.forEach((S,N)=>{const D=a.get(N);if(!D)return;g.push(n.Ti.removeMatchingKeys(c,S.removedDocuments,N).next(()=>n.Ti.addMatchingKeys(c,S.addedDocuments,N)));let $=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(N)!==null?$=$.withResumeToken(bt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):S.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(S.resumeToken,s)),a=a.insert(N,$),function(Y,b,Pe){return Y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=iw?!0:Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0}(D,$,S)&&g.push(n.Ti.updateTargetData(c,$))});let _=Cr(),v=Oe();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))}),g.push(uw(c,f,e.documentUpdates).next(S=>{_=S.qs,v=S.Qs})),!s.isEqual(Ae.min())){const S=n.Ti.getLastRemoteSnapshotVersion(c).next(N=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(S)}return H.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,v)).next(()=>_)}).then(c=>(n.xs=a,c))}function uw(i,e,n){let s=Oe(),a=Oe();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Cr();return n.forEach((g,_)=>{const v=c.get(g);_.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(g)),_.isNoDocument()&&_.version.isEqual(Ae.min())?(e.removeEntry(g,_.readTime),f=f.insert(g,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),f=f.insert(g,_)):ae(zh,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",_.version)}),{qs:f,Qs:a}})}function cw(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=kh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hw(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Ti.getTargetData(s,e).next(c=>c?(a=c,H.resolve(a)):n.Ti.allocateTargetId(s).next(f=>(a=new Yr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.xs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function vh(i,e,n){const s=Ce(i),a=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!Gs(f))throw f;ae(zh,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(a.target)}function am(i,e,n){const s=Ce(i);let a=Ae.min(),c=Oe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(_,v,S){const N=Ce(_),D=N.Os.get(S);return D!==void 0?H.resolve(N.xs.get(D)):N.Ti.getTargetData(v,S)}(s,f,ir(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,g.targetId).next(_=>{c=_})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?a:Ae.min(),n?c:Oe())).next(g=>(fw(s,J0(e),g),{documents:g,$s:c})))}function fw(i,e,n){let s=i.Ns.get(e)||Ae.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Ns.set(e,s)}class lm{constructor(){this.activeTargetIds=iE()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dw{constructor(){this.xo=new lm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new lm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="ConnectivityMonitor";class cm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ae(um,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ae(um,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=null;function Eh(){return Vl===null?Vl=function(){return 268435456+Math.round(2147483648*Math.random())}():Vl++,"0x"+Vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="RestConnection",mw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gw{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${a}`,this.Go=this.databaseId.database===Hl?`project_id=${s}`:`project_id=${s}&database_id=${a}`}zo(e,n,s,a,c){const f=Eh(),g=this.jo(e,n.toUriEncodedString());ae(Zc,`Sending RPC '${e}' ${f}:`,g,s);const _={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(_,a,c);const{host:v}=new URL(g),S=Ch(v);return this.Jo(e,g,_,s,S).then(N=>(ae(Zc,`Received RPC '${e}' ${f}: `,N),N),N=>{throw Us(Zc,`RPC '${e}' ${f} failed with error: `,N,"url: ",g,"request:",s),N})}Yo(e,n,s,a,c,f){return this.zo(e,n,s,a,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}jo(e,n){const s=mw[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class _w extends gw{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Eh();return new Promise((g,_)=>{const v=new bm;v.setWithCredentials(!0),v.listenOnce(jm.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ol.NO_ERROR:const N=v.getResponseJson();ae(Ht,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(N)),g(N);break;case Ol.TIMEOUT:ae(Ht,`RPC '${e}' ${f} timed out`),_(new pe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const D=v.getStatus();if(ae(Ht,`RPC '${e}' ${f} failed with status:`,D,"response text:",v.getResponseText()),D>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const Z=$==null?void 0:$.error;if(Z&&Z.status&&Z.message){const Y=function(Pe){const ve=Pe.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ve)>=0?ve:K.UNKNOWN}(Z.status);_(new pe(Y,Z.message))}else _(new pe(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new pe(K.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{h_:e,streamId:f,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{ae(Ht,`RPC '${e}' ${f} completed.`)}});const S=JSON.stringify(a);ae(Ht,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",S,s,15)})}I_(e,n,s){const a=Eh(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Wm(),g=$m(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Ho(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const S=c.join("");ae(Ht,`Creating RPC '${e}' stream ${a}: ${S}`,_);const N=f.createWebChannel(S,_);this.E_(N);let D=!1,$=!1;const Z=new yw({Zo:b=>{$?ae(Ht,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(D||(ae(Ht,`Opening RPC '${e}' stream ${a} transport.`),N.open(),D=!0),ae(Ht,`RPC '${e}' stream ${a} sending:`,b),N.send(b))},Xo:()=>N.close()}),Y=(b,Pe,ve)=>{b.listen(Pe,we=>{try{ve(we)}catch(Ne){setTimeout(()=>{throw Ne},0)}})};return Y(N,Wo.EventType.OPEN,()=>{$||(ae(Ht,`RPC '${e}' stream ${a} transport opened.`),Z.__())}),Y(N,Wo.EventType.CLOSE,()=>{$||($=!0,ae(Ht,`RPC '${e}' stream ${a} transport closed`),Z.u_(),this.d_(N))}),Y(N,Wo.EventType.ERROR,b=>{$||($=!0,Us(Ht,`RPC '${e}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),Z.u_(new pe(K.UNAVAILABLE,"The operation could not be completed")))}),Y(N,Wo.EventType.MESSAGE,b=>{var Pe;if(!$){const ve=b.data[0];qe(!!ve,16349);const we=ve,Ne=(we==null?void 0:we.error)||((Pe=we[0])===null||Pe===void 0?void 0:Pe.error);if(Ne){ae(Ht,`RPC '${e}' stream ${a} received error:`,Ne);const it=Ne.status;let Le=function(A){const C=_t[A];if(C!==void 0)return Sg(C)}(it),k=Ne.message;Le===void 0&&(Le=K.INTERNAL,k="Unknown error status: "+it+" with message "+Ne.message),$=!0,Z.u_(new pe(Le,k)),N.close()}else ae(Ht,`RPC '${e}' stream ${a} received:`,ve),Z.c_(ve)}}),Y(g,zm.STAT_EVENT,b=>{b.stat===lh.PROXY?ae(Ht,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===lh.NOPROXY&&ae(Ht,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Z.a_()},0),Z}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(i){return new TE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=a,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-s);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="PersistentStream";class Ug{constructor(e,n,s,a,c,f,g,_){this.xi=e,this.S_=s,this.D_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Bg(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.v_===n&&this.z_(s,a)},s=>{e(()=>{const a=new pe(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(a)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{s(()=>this.j_(a))}),this.stream.onMessage(a=>{s(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ae(hm,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ae(hm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vw extends Ug{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=AE(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ae.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?or(f.readTime):Ae.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=_h(this.serializer),n.addTarget=function(c,f){let g;const _=f.target;if(g=dh(_)?{documents:RE(c,_)}:{query:kE(c,_).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Pg(c,f.resumeToken);const v=mh(c,f.expectedCount);v!==null&&(g.expectedCount=v)}else if(f.snapshotVersion.compareTo(Ae.min())>0){g.readTime=Yl(c,f.snapshotVersion.toTimestamp());const v=mh(c,f.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const s=VE(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=_h(this.serializer),n.removeTarget=e,this.Q_(n)}}class Ew extends Ug{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=PE(e.writeResults,e.commitTime),s=or(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=_h(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>CE(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Tw extends ww{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,gh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(K.UNKNOWN,c.toString())})}Yo(e,n,s,a,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,gh(n,s),a,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(K.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Iw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ar(n),this.ua=!1):ae("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class Sw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{Hi(this)&&(ae(ji,"Restarting streams for network reachability change."),await async function(_){const v=Ce(_);v.da.add(4),await ca(v),v.Va.set("Unknown"),v.da.delete(4),await fu(v)}(this))})}),this.Va=new Iw(s,a)}}async function fu(i){if(Hi(i))for(const e of i.Aa)await e(!0)}async function ca(i){for(const e of i.Aa)await e(!1)}function bg(i,e){const n=Ce(i);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),qh(n)?Hh(n):Xs(n).N_()&&Wh(n,e))}function $h(i,e){const n=Ce(i),s=Xs(n);n.Ea.delete(e),s.N_()&&jg(n,e),n.Ea.size===0&&(s.N_()?s.k_():Hi(n)&&n.Va.set("Unknown"))}function Wh(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(i).Z_(e)}function jg(i,e){i.ma.Ke(e),Xs(i).X_(e)}function Hh(i){i.ma=new _E({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Xs(i).start(),i.Va.ca()}function qh(i){return Hi(i)&&!Xs(i).O_()&&i.Ea.size>0}function Hi(i){return Ce(i).da.size===0}function zg(i){i.ma=void 0}async function Aw(i){i.Va.set("Online")}async function Cw(i){i.Ea.forEach((e,n)=>{Wh(i,e)})}async function Pw(i,e){zg(i),qh(i)?(i.Va.Pa(e),Hh(i)):i.Va.set("Unknown")}async function Rw(i,e,n){if(i.Va.set("Online"),e instanceof Cg&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const g of c.targetIds)a.Ea.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ea.delete(g),a.ma.removeTarget(g))}(i,e)}catch(s){ae(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zl(i,s)}else if(e instanceof Bl?i.ma.Xe(e):e instanceof Ag?i.ma.ot(e):i.ma.nt(e),!n.isEqual(Ae.min()))try{const s=await Mg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const g=c.ma.It(f);return g.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.Ea.get(v);S&&c.Ea.set(v,S.withResumeToken(_.resumeToken,f))}}),g.targetMismatches.forEach((_,v)=>{const S=c.Ea.get(_);if(!S)return;c.Ea.set(_,S.withResumeToken(bt.EMPTY_BYTE_STRING,S.snapshotVersion)),jg(c,_);const N=new Yr(S.target,_,v,S.sequenceNumber);Wh(c,N)}),c.remoteSyncer.applyRemoteEvent(g)}(i,n)}catch(s){ae(ji,"Failed to raise snapshot:",s),await Zl(i,s)}}async function Zl(i,e,n){if(!Gs(e))throw e;i.da.add(1),await ca(i),i.Va.set("Offline"),n||(n=()=>Mg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ae(ji,"Retrying IndexedDB access"),await n(),i.da.delete(1),await fu(i)})}function $g(i,e){return e().catch(n=>Zl(i,n,e))}async function du(i){const e=Ce(i),n=ai(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:kh;for(;kw(e);)try{const a=await cw(e.localStore,s);if(a===null){e.Ia.length===0&&n.k_();break}s=a.batchId,Nw(e,a)}catch(a){await Zl(e,a)}Wg(e)&&Hg(e)}function kw(i){return Hi(i)&&i.Ia.length<10}function Nw(i,e){i.Ia.push(e);const n=ai(i);n.N_()&&n.ea&&n.ta(e.mutations)}function Wg(i){return Hi(i)&&!ai(i).O_()&&i.Ia.length>0}function Hg(i){ai(i).start()}async function Vw(i){ai(i).ia()}async function xw(i){const e=ai(i);for(const n of i.Ia)e.ta(n.mutations)}async function Dw(i,e,n){const s=i.Ia.shift(),a=Lh.from(s,e,n);await $g(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await du(i)}async function Ow(i,e){e&&ai(i).ea&&await async function(s,a){if(function(f){return gE(f)&&f!==K.ABORTED}(a.code)){const c=s.Ia.shift();ai(s).L_(),await $g(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await du(s)}}(i,e),Wg(i)&&Hg(i)}async function fm(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),ae(ji,"RemoteStore received new credentials");const s=Hi(n);n.da.add(3),await ca(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await fu(n)}async function Fw(i,e){const n=Ce(i);e?(n.da.delete(2),await fu(n)):e||(n.da.add(2),await ca(n),n.Va.set("Unknown"))}function Xs(i){return i.fa||(i.fa=function(n,s,a){const c=Ce(n);return c.oa(),new vw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:Aw.bind(null,i),n_:Cw.bind(null,i),i_:Pw.bind(null,i),Y_:Rw.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),qh(i)?Hh(i):i.Va.set("Unknown")):(await i.fa.stop(),zg(i))})),i.fa}function ai(i){return i.ga||(i.ga=function(n,s,a){const c=Ce(n);return c.oa(),new Ew(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Vw.bind(null,i),i_:Ow.bind(null,i),na:xw.bind(null,i),ra:Dw.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await du(i)):(await i.ga.stop(),i.Ia.length>0&&(ae(ji,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,g=new Qh(e,n,f,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(i,e){if(Ar("AsyncQueue",`${e}: ${i}`),Gs(i))return new pe(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(e){return new Bs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Ho(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Bs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.pa=new at(_e.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ee(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ws{constructor(e,n,s,a,c,f,g,_,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new Ws(e,n,Bs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Mw{constructor(){this.queries=pm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Ce(n),c=a.queries;a.queries=pm(),c.forEach((f,g)=>{for(const _ of g.Sa)_.onError(s)})})(this,new pe(K.ABORTED,"Firestore shutting down"))}}function pm(){return new $i(i=>fg(i),ou)}async function Bw(i,e){const n=Ce(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Da()&&e.va()&&(s=2):(c=new Lw,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(a,!0);break;case 1:c.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=Kh(f,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&Gh(n)}async function Uw(i,e){const n=Ce(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.va()?0:1:!c.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bw(i,e){const n=Ce(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Ma(a)&&(s=!0);f.ba=a}}s&&Gh(n)}function jw(i,e,n){const s=Ce(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function Gh(i){i.Ca.forEach(e=>{e.next()})}var wh,mm;(mm=wh||(wh={})).xa="default",mm.Cache="cache";class zw{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ws(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.key=e}}class Qg{constructor(e){this.key=e}}class $w{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.Za=dg(e),this.Xa=new Bs(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new dm,a=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const _=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((S,N)=>{const D=a.get(S),$=au(this.query,N)?N:null,Z=!!D&&this.mutatedKeys.has(D.key),Y=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let b=!1;D&&$?D.data.isEqual($.data)?Z!==Y&&(s.track({type:3,doc:$}),b=!0):this.ru(D,$)||(s.track({type:2,doc:$}),b=!0,(_&&this.Za($,_)>0||v&&this.Za($,v)<0)&&(g=!0)):!D&&$?(s.track({type:0,doc:$}),b=!0):D&&!$&&(s.track({type:1,doc:D}),b=!0,(_||v)&&(g=!0)),b&&($?(f=f.add($),c=Y?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Xa:f,nu:s,Cs:g,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((S,N)=>function($,Z){const Y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:b})}};return Y($)-Y(Z)}(S.type,N.type)||this.Za(S.doc,N.doc)),this.iu(s),a=a!=null&&a;const g=n&&!a?this.su():[],_=this.Ya.size===0&&this.current&&!a?1:0,v=_!==this.Ja;return this.Ja=_,f.length!==0||v?{snapshot:new Ws(this.query,e.Xa,c,f,e.mutatedKeys,_===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new dm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new Qg(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new qg(s))}),n}au(e){this.Ha=e.$s,this.Ya=Oe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ws.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Xh="SyncEngine";class Ww{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Hw{constructor(e){this.key=e,this.cu=!1}}class qw{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new $i(g=>fg(g),ou),this.Pu=new Map,this.Tu=new Set,this.Iu=new at(_e.comparator),this.Eu=new Map,this.du=new Uh,this.Au={},this.Ru=new Map,this.Vu=$s.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Qw(i,e,n=!0){const s=Zg(i);let a;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.uu()):a=await Kg(s,e,n,!0),a}async function Kw(i,e){const n=Zg(i);await Kg(n,e,!0,!1)}async function Kg(i,e,n,s){const a=await hw(i.localStore,ir(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await Gw(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&bg(i.remoteStore,a),g}async function Gw(i,e,n,s,a){i.fu=(N,D,$)=>async function(Y,b,Pe,ve){let we=b.view.tu(Pe);we.Cs&&(we=await am(Y.localStore,b.query,!1).then(({documents:k})=>b.view.tu(k,we)));const Ne=ve&&ve.targetChanges.get(b.targetId),it=ve&&ve.targetMismatches.get(b.targetId)!=null,Le=b.view.applyChanges(we,Y.isPrimaryClient,Ne,it);return ym(Y,b.targetId,Le.ou),Le.snapshot}(i,N,D,$);const c=await am(i.localStore,e,!0),f=new $w(e,c.$s),g=f.tu(c.documents),_=ua.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(g,i.isPrimaryClient,_);ym(i,n,v.ou);const S=new Ww(e,n,f);return i.hu.set(e,S),i.Pu.has(n)?i.Pu.get(n).push(e):i.Pu.set(n,[e]),v.snapshot}async function Xw(i,e,n){const s=Ce(i),a=s.hu.get(e),c=s.Pu.get(a.targetId);if(c.length>1)return s.Pu.set(a.targetId,c.filter(f=>!ou(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await vh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&$h(s.remoteStore,a.targetId),Th(s,a.targetId)}).catch(Ks)):(Th(s,a.targetId),await vh(s.localStore,a.targetId,!0))}async function Yw(i,e){const n=Ce(i),s=n.hu.get(e),a=n.Pu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$h(n.remoteStore,s.targetId))}async function Jw(i,e,n){const s=s1(i);try{const a=await function(f,g){const _=Ce(f),v=Pt.now(),S=g.reduce(($,Z)=>$.add(Z.key),Oe());let N,D;return _.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Z=Cr(),Y=Oe();return _.Bs.getEntries($,S).next(b=>{Z=b,Z.forEach((Pe,ve)=>{ve.isValidDocument()||(Y=Y.add(Pe))})}).next(()=>_.localDocuments.getOverlayedDocuments($,Z)).next(b=>{N=b;const Pe=[];for(const ve of g){const we=hE(ve,N.get(ve.key).overlayedDocument);we!=null&&Pe.push(new Wi(ve.key,we,ig(we.value.mapValue),sr.exists(!0)))}return _.mutationQueue.addMutationBatch($,v,Pe,g)}).next(b=>{D=b;const Pe=b.applyToLocalDocumentSet(N,Y);return _.documentOverlayCache.saveOverlays($,b.batchId,Pe)})}).then(()=>({batchId:D.batchId,changes:mg(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,g,_){let v=f.Au[f.currentUser.toKey()];v||(v=new at(ke)),v=v.insert(g,_),f.Au[f.currentUser.toKey()]=v}(s,a.batchId,n),await ha(s,a.changes),await du(s.remoteStore)}catch(a){const c=Kh(a,"Failed to persist write");n.reject(c)}}async function Gg(i,e){const n=Ce(i);try{const s=await lw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Eu.get(c);f&&(qe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.cu=!0:a.modifiedDocuments.size>0?qe(f.cu,14607):a.removedDocuments.size>0&&(qe(f.cu,42227),f.cu=!1))}),await ha(n,s,e)}catch(s){await Ks(s)}}function gm(i,e,n){const s=Ce(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.hu.forEach((c,f)=>{const g=f.view.Fa(e);g.snapshot&&a.push(g.snapshot)}),function(f,g){const _=Ce(f);_.onlineState=g;let v=!1;_.queries.forEach((S,N)=>{for(const D of N.Sa)D.Fa(g)&&(v=!0)}),v&&Gh(_)}(s.eventManager,e),a.length&&s.lu.Y_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Zw(i,e,n){const s=Ce(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new at(_e.comparator);f=f.insert(c,Qt.newNoDocument(c,Ae.min()));const g=Oe().add(c),_=new cu(Ae.min(),new Map,new at(ke),f,g);await Gg(s,_),s.Iu=s.Iu.remove(c),s.Eu.delete(e),Yh(s)}else await vh(s.localStore,e,!1).then(()=>Th(s,e,n)).catch(Ks)}async function e1(i,e){const n=Ce(i),s=e.batch.batchId;try{const a=await aw(n.localStore,e);Yg(n,s,null),Xg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ha(n,a)}catch(a){await Ks(a)}}async function t1(i,e,n){const s=Ce(i);try{const a=await function(f,g){const _=Ce(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let S;return _.mutationQueue.lookupMutationBatch(v,g).next(N=>(qe(N!==null,37113),S=N.keys(),_.mutationQueue.removeMutationBatch(v,N))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,S,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,S)).next(()=>_.localDocuments.getDocuments(v,S))})}(s.localStore,e);Yg(s,e,n),Xg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ha(s,a)}catch(a){await Ks(a)}}function Xg(i,e){(i.Ru.get(e)||[]).forEach(n=>{n.resolve()}),i.Ru.delete(e)}function Yg(i,e,n){const s=Ce(i);let a=s.Au[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Au[s.currentUser.toKey()]=a}}function Th(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Pu.get(e))i.hu.delete(s),n&&i.lu.gu(s,n);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(s=>{i.du.containsKey(s)||Jg(i,s)})}function Jg(i,e){i.Tu.delete(e.path.canonicalString());const n=i.Iu.get(e);n!==null&&($h(i.remoteStore,n),i.Iu=i.Iu.remove(e),i.Eu.delete(n),Yh(i))}function ym(i,e,n){for(const s of n)s instanceof qg?(i.du.addReference(s.key,e),n1(i,s)):s instanceof Qg?(ae(Xh,"Document no longer in limbo: "+s.key),i.du.removeReference(s.key,e),i.du.containsKey(s.key)||Jg(i,s.key)):Ee(19791,{pu:s})}function n1(i,e){const n=e.key,s=n.path.canonicalString();i.Iu.get(n)||i.Tu.has(s)||(ae(Xh,"New document in limbo: "+n),i.Tu.add(s),Yh(i))}function Yh(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const n=new _e(rt.fromString(e)),s=i.Vu.next();i.Eu.set(s,new Hw(n)),i.Iu=i.Iu.insert(n,s),bg(i.remoteStore,new Yr(ir(hg(n.path)),s,"TargetPurposeLimboResolution",nu.le))}}async function ha(i,e,n){const s=Ce(i),a=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((g,_)=>{f.push(s.fu(_,e,n).then(v=>{var S;if((v||n)&&s.isPrimaryClient){const N=v?!v.fromCache:(S=n==null?void 0:n.targetChanges.get(_.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(_.targetId,N?"current":"not-current")}if(v){a.push(v);const N=jh.Rs(_.targetId,v);c.push(N)}}))}),await Promise.all(f),s.lu.Y_(a),await async function(_,v){const S=Ce(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>H.forEach(v,D=>H.forEach(D.ds,$=>S.persistence.referenceDelegate.addReference(N,D.targetId,$)).next(()=>H.forEach(D.As,$=>S.persistence.referenceDelegate.removeReference(N,D.targetId,$)))))}catch(N){if(!Gs(N))throw N;ae(zh,"Failed to update sequence numbers: "+N)}for(const N of v){const D=N.targetId;if(!N.fromCache){const $=S.xs.get(D),Z=$.snapshotVersion,Y=$.withLastLimboFreeSnapshotVersion(Z);S.xs=S.xs.insert(D,Y)}}}(s.localStore,c))}async function r1(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){ae(Xh,"User change. New user:",e.toKey());const s=await Lg(n.localStore,e);n.currentUser=e,function(c,f){c.Ru.forEach(g=>{g.forEach(_=>{_.reject(new pe(K.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ha(n,s.ks)}}function i1(i,e){const n=Ce(i),s=n.Eu.get(e);if(s&&s.cu)return Oe().add(s.key);{let a=Oe();const c=n.Pu.get(e);if(!c)return a;for(const f of c){const g=n.hu.get(f);a=a.unionWith(g.view.eu)}return a}}function Zg(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zw.bind(null,e),e.lu.Y_=bw.bind(null,e.eventManager),e.lu.gu=jw.bind(null,e.eventManager),e}function s1(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t1.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return ow(this.persistence,new rw,e.initialUser,this.serializer)}Su(e){return new Fg(bh.fi,this.serializer)}bu(e){return new dw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class o1 extends eu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){qe(this.persistence.referenceDelegate instanceof Jl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zE(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Fg(s=>Jl.fi(s,n),this.serializer)}}class Ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=r1.bind(null,this.syncEngine),await Fw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mw}()}createDatastore(e){const n=hu(e.databaseInfo.databaseId),s=function(c){return new _w(c)}(e.databaseInfo);return function(c,f,g,_){return new Tw(c,f,g,_)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,g){return new Sw(s,a,c,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>gm(this.syncEngine,n,0),function(){return cm.C()?new cm:new pw}())}createSyncEngine(e,n){return function(a,c,f,g,_,v,S){const N=new qw(a,c,f,g,_,v);return S&&(N.mu=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=Ce(a);ae(ji,"RemoteStore shutting down."),c.da.add(5),await ca(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ih.provider={build:()=>new Ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="FirestoreClient";class l1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=qt.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{ae(li,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ae(li,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function th(i,e){i.asyncQueue.verifyOperationInProgress(),ae(li,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Lg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function _m(i,e){i.asyncQueue.verifyOperationInProgress();const n=await u1(i);ae(li,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>fm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>fm(e.remoteStore,a)),i._onlineComponents=e}async function u1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ae(li,"Using user provided OfflineComponentProvider");try{await th(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Us("Error using user provided cache. Falling back to memory cache: "+n),await th(i,new eu)}}else ae(li,"Using default OfflineComponentProvider"),await th(i,new o1(void 0));return i._offlineComponents}async function ey(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ae(li,"Using user provided OnlineComponentProvider"),await _m(i,i._uninitializedComponentsProvider._online)):(ae(li,"Using default OnlineComponentProvider"),await _m(i,new Ih))),i._onlineComponents}function c1(i){return ey(i).then(e=>e.syncEngine)}async function h1(i){const e=await ey(i),n=e.eventManager;return n.onListen=Qw.bind(null,e.syncEngine),n.onUnlisten=Xw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yw.bind(null,e.syncEngine),n}function f1(i,e,n={}){const s=new ti;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,g,_,v){const S=new a1({next:D=>{S.xu(),f.enqueueAndForget(()=>Uw(c,N)),D.fromCache&&_.source==="server"?v.reject(new pe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(D)},error:D=>v.reject(D)}),N=new zw(g,S,{includeMetadataChanges:!0,Qa:!0});return Bw(c,N)}(await h1(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(i,e,n){if(!n)throw new pe(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function d1(i,e,n,s){if(e===!0&&s===!0)throw new pe(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Em(i){if(!_e.isDocumentKey(i))throw new pe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wm(i){if(_e.isDocumentKey(i))throw new pe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee(12329,{type:typeof i})}function aa(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jh(i);throw new pe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="firestore.googleapis.com",Tm=!0;class Im{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ry,this.ssl=Tm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Tm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Og;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bE)throw new pe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ty((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Im({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Im(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new g0;switch(s.type){case"firstParty":return new E0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=vm.get(n);s&&(ae("ComponentProvider","Removing Datastore"),vm.delete(n),s.terminate())}(this),Promise.resolve()}}function p1(i,e,n,s={}){var a;i=aa(i,pu);const c=Ch(e),f=i._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),_=`${e}:${n}`;c&&($_(`https://${_}`),Q_("Firestore",!0)),f.host!==ry&&f.host!==_&&Us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},f),{host:_,ssl:c,emulatorOptions:s});if(!jl(v,g)&&(i._setSettings(v),s.mockUserToken)){let S,N;if(typeof s.mockUserToken=="string")S=s.mockUserToken,N=qt.MOCK_USER;else{S=W_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new pe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new qt(D)}i._authCredentials=new y0(new qm(S,N))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class Wn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ni extends mu{constructor(e,n,s){super(e,n,hg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new _e(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function Sm(i,e,...n){if(i=Jo(i),ny("collection","path",e),i instanceof pu){const s=rt.fromString(e,...n);return wm(s),new ni(i,null,s)}{if(!(i instanceof Wn||i instanceof ni))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return wm(s),new ni(i.firestore,null,s)}}function iy(i,e,...n){if(i=Jo(i),arguments.length===1&&(e=Km.newId()),ny("doc","path",e),i instanceof pu){const s=rt.fromString(e,...n);return Em(s),new Wn(i,null,new _e(s))}{if(!(i instanceof Wn||i instanceof ni))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return Em(s),new Wn(i.firestore,i instanceof ni?i.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="AsyncQueue";class Cm{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Bg(this,"async_queue_retry"),this.rc=()=>{const s=eh();s&&ae(Am,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ti;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Gs(e))throw e;ae(Am,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ar("INTERNAL UNHANDLED ERROR: ",Pm(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Qh.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(a),a}oc(){this.Xu&&Ee(47125,{cc:Pm(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Pm(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class gu extends pu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Cm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cm(e),this._firestoreClient=void 0,await e}}}function m1(i,e){const n=typeof i=="object"?i:r0(),s=typeof i=="string"?i:Hl,a=Jv(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=j_("firestore");c&&p1(a,...c)}return a}function sy(i){if(i._terminated)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||g1(i),i._firestoreClient}function g1(i){var e,n,s;const a=i._freezeSettings(),c=function(g,_,v,S){return new F0(g,_,v,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,ty(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new l1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hs(bt.fromBase64String(e))}catch(n){throw new pe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hs(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=/^__.*__$/;class _1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new la(e,this.data,n,this.fieldTransforms)}}function ay(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ic:i})}}class nf{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Vc(e),a}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ay(this.Ic)&&y1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class v1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||hu(e)}bc(e,n,s,a=!1){return new nf({Ic:e,methodName:n,wc:s,path:Ut.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function E1(i){const e=i._freezeSettings(),n=hu(i._databaseId);return new v1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function w1(i,e,n,s,a,c={}){const f=i.bc(c.merge||c.mergeFields?2:0,e,n,a);hy("Data must be an object, but it was:",f,s);const g=uy(s,f);let _,v;if(c.merge)_=new $n(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const N of c.mergeFields){const D=T1(e,N,n);if(!f.contains(D))throw new pe(K.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);S1(S,D)||S.push(D)}_=new $n(S),v=f.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,v=f.fieldTransforms;return new _1(new An(g),_,v)}function ly(i,e){if(cy(i=Jo(i)))return hy("Unsupported field value:",e,i),uy(i,e);if(i instanceof oy)return function(s,a){if(!ay(a.Ic))throw a.gc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const g of s){let _=ly(g,a.fc(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=Jo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Pt.fromDate(s);return{timestampValue:Yl(a.serializer,c)}}if(s instanceof Pt){const c=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yl(a.serializer,c)}}if(s instanceof ef)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hs)return{bytesValue:Pg(a.serializer,s._byteString)};if(s instanceof Wn){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof tf)return function(f,g){return{mapValue:{fields:{[ng]:{stringValue:rg},[ql]:{arrayValue:{values:f.toArray().map(v=>{if(typeof v!="number")throw g.gc("VectorValues must only contain numeric values.");return Oh(g.serializer,v)})}}}}}}(s,a);throw a.gc(`Unsupported field value: ${Jh(s)}`)}(i,e)}function uy(i,e){const n={};return Xm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(i,(s,a)=>{const c=ly(a,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function cy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Pt||i instanceof ef||i instanceof Hs||i instanceof Wn||i instanceof oy||i instanceof tf)}function hy(i,e,n){if(!cy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Jh(n);throw s==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+s)}}function T1(i,e,n){if((e=Jo(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return fy(i,e);throw tu("Field path arguments must be of type string or ",i,!1,void 0,n)}const I1=new RegExp("[~\\*/\\[\\]]");function fy(i,e,n){if(e.search(I1)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Zh(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function tu(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${s}`),f&&(_+=` in document ${a}`),_+=")"),new pe(K.INVALID_ARGUMENT,g+i+_)}function S1(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(py("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A1 extends dy{data(){return super.data()}}function py(i,e){return typeof e=="string"?fy(i,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P1{convertValue(e,n="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return zi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[ql].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>dt(f.doubleValue));return new tf(c)}convertGeoPoint(e){return new ef(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=iu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=ii(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=rt.fromString(e);qe(Dg(s),9688,{name:e});const a=new ra(s.get(1),s.get(3)),c=new _e(s.popFirst(5));return a.isEqual(n)||Ar(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k1 extends dy{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(py("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ul extends k1{data(e={}){return super.data(e)}}class N1{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new xl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ul(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(g=>{const _=new Ul(a._firestore,a._userDataWriter,g.doc.key,g.doc,new xl(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const _=new Ul(a._firestore,a._userDataWriter,g.doc.key,g.doc,new xl(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,S=-1;return g.type!==0&&(v=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),S=f.indexOf(g.doc.key)),{type:V1(g.type),doc:_,oldIndex:v,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:i})}}class x1 extends P1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function D1(i){i=aa(i,mu);const e=aa(i.firestore,gu),n=sy(e),s=new x1(e);return C1(i._query),f1(n,i._query).then(a=>new N1(e,s,i,a))}function O1(i){return my(aa(i.firestore,gu),[new Fh(i._key,sr.none())])}function F1(i,e){const n=aa(i.firestore,gu),s=iy(i),a=R1(i.converter,e);return my(n,[w1(E1(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,sr.exists(!1))]).then(()=>s)}function my(i,e){return function(s,a){const c=new ti;return s.asyncQueue.enqueueAndForget(async()=>Jw(await c1(s),a,c)),c.promise}(sy(i),e)}(function(e,n=!0){(function(a){Qs=a})(n0),$l(new Zo("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new gu(new _0(s.getProvider("auth-internal")),new w0(f,s.getProvider("app-check-internal")),function(v,S){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(v.options.projectId,S)}(f,a),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Ms(Vp,xp,e),Ms(Vp,xp,"esm2017")})();const L1={apiKey:"AIzaSyBQkuO6ltmJ8cfJI9B3Wct7QE6Kh0nvl44",authDomain:"chocolate-batch-calculator.firebaseapp.com",projectId:"chocolate-batch-calculator",storageBucket:"chocolate-batch-calculator.firebasestorage.app",messagingSenderId:"Y1084846149691",appId:"1:1084846149691:web:dc94e0c74818edb9e70c1e",measurementId:"G-6HVVMECN6R"},M1=Lm(L1),nh=m1(M1);function gy(...i){return i.filter(Boolean).join(" ")}const B1=({className:i,...e})=>se.jsx("div",{className:gy("rounded-lg border bg-white p-4 shadow-sm",i),...e}),U1=({className:i,...e})=>se.jsx("div",{className:gy("p-4",i),...e}),Li=({className:i,...e})=>se.jsx("input",{className:`border rounded-md p-2 ${i}`,...e}),Dl=({children:i,className:e,...n})=>se.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white rounded-md ${e}`,...n,children:i}),Bi=i=>i?"opacity-50 bg-gray-100":"border-2 border-blue-300 bg-blue-50 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",b1=i=>i?"font-semibold text-blue-700 bg-blue-50 rounded-md py-1 px-2 border border-blue-300":"",j1=(i,e)=>{const n=Bi(i),s=parseFloat(e);return!isNaN(s)&&s>100?`${n} border-red-500 bg-red-50 text-red-700`:n},z1="This is the fixed weight of one chocolate bar and serves as the foundation for all calculations";function $1(){const[i,e]=He.useState(""),[n,s]=He.useState(""),[a,c]=He.useState(""),[f,g]=He.useState(0),[_,v]=He.useState(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),[S,N]=He.useState([]),[D,$]=He.useState(!1),[Z,Y]=He.useState(null),[b,Pe]=He.useState(!1),[ve,we]=He.useState(!1),[Ne,it]=He.useState(null),[Le,k]=He.useState(!1),[w,A]=He.useState({index:null,field:null}),[C,V]=He.useState(0),[O,I]=He.useState("g"),[et,ut]=He.useState({}),[ct,be]=He.useState({}),[ie,de]=He.useState(!1),J=j=>parseFloat(j).toFixed(2),x=()=>a.trim()!==""&&(b||i>0)&&n>0,W=j=>{if(!j||isNaN(parseFloat(j)))return"";const B=parseFloat(j);return O==="lbs"?(B/453.59237).toFixed(2):parseFloat(B).toFixed(2)},fe=j=>{if(!j||isNaN(parseFloat(j)))return"";const B=parseFloat(j);return O==="lbs"?(B*453.59237).toString():B.toString()},Re=j=>{if(!j||isNaN(parseFloat(j)))return"N/A";const B=parseFloat(j);return O==="lbs"?`${(B/453.59237).toFixed(2)} lbs`:`${B.toFixed(2)} g`},Ie=(j,B,ee)=>{if(!b&&j===C&&B!=="name")return;const te=[..._];if(ee===""){te[j][B]=ee,B===te[j].staticField&&(B==="weightPerBar"?(te[j].totalWeight="",te[j].percentage=""):B==="percentage"?(te[j].totalWeight="",te[j].weightPerBar=""):B==="totalWeight"&&(te[j].percentage="",te[j].weightPerBar=""),console.log(`Cleared calculated values for ingredient #${j+1} after ${B} was deleted`)),b&&(B==="totalWeight"||te[j].totalWeight==="")&&setTimeout(()=>{k(re=>!re)},0),v(te);return}if(A({index:j,field:B}),te[j][B]=ee,B==="name"){v(te);return}if(B==="weightPerBar"&&ee!==""?te[j].staticField="weightPerBar":B==="percentage"&&ee!==""?te[j].staticField="percentage":B==="totalWeight"&&ee!==""&&(te[j].staticField="totalWeight"),B!=="name"&&be(re=>({...re,[`${j}-${B}`]:!0})),b&&(B==="weightPerBar"||B==="percentage")&&!isNaN(parseFloat(ee))){const re=parseFloat(ee);if(B==="weightPerBar"){const me=re,Se=parseFloat(i)||1,Ve=me*Se;console.log("Auto-mode weightPerBar calculation:",{targetWeightPerBar:me,currentNumBars:Se,calculatedTotalWeight:Ve}),te[j].totalWeight=J(Ve),parseFloat(_[j].totalWeight);const Et=_.reduce((mt,Pn,Hn)=>Hn!==j?mt+(parseFloat(Pn.totalWeight)||0):mt,0)+Ve;if(g(Et),Et>0){const mt=Ve/Et*100;te[j].percentage=J(mt)}}else if(B==="percentage"){const me=re,Se=parseFloat(f)||0;if(Se>0){const Ve=me/100*Se;if(console.log("Auto-mode percentage calculation:",{targetPercentage:me,currentTotalBatchWeight:Se,calculatedTotalWeight:Ve}),te[j].totalWeight=J(Ve),parseFloat(i)>0){const vt=Ve/parseFloat(i);te[j].weightPerBar=J(vt)}}else console.warn("Cannot calculate ingredient weight from percentage with zero total batch weight")}}else if(!b&&(B==="weightPerBar"||B==="percentage")&&!isNaN(parseFloat(ee))){const re=parseFloat(ee);if(B==="weightPerBar"&&te[j].staticField==="weightPerBar"){const me=re*i;if(te[j].totalWeight=J(me),f>0){const Se=me/f*100;te[j].percentage=J(Se)}}else if(B==="percentage"&&te[j].staticField==="percentage"){const me=re/100*f;te[j].totalWeight=J(me);const Se=i>0?me/i:0;te[j].weightPerBar=J(Se)}}if(B==="totalWeight"&&!isNaN(parseFloat(ee))){const re=parseFloat(ee);if(j===3&&console.log("Ingredient #4 totalWeight calculation:",{totalWeight:re,numBars:parseFloat(i)||0,calculatedWeightPerBar:i>0?re/(parseFloat(i)||1):0}),A({index:j,field:B}),te[j].totalWeight=ee,te[j].staticField="totalWeight",b){te[j].staticField="totalWeight",parseFloat(_[j].totalWeight);const Se=_.reduce((Ve,vt,Et)=>Et!==j?Ve+(parseFloat(vt.totalWeight)||0):Ve,0)+re;g(Se)}}v(te),setTimeout(()=>{A({index:null,field:null}),k(re=>!re)},300)},De=j=>{if(j===C)return;const B={..._[C]};({..._[j]});const ee=[..._];B.weightPerBar&&B.percentage&&(ee[C]={...B,staticField:"weightPerBar"}),V(j),v(ee)},je=()=>{e(""),s(""),c(""),g(0),v(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),Pe(!1),we(!1),it(null),V(0),be({}),de(!1)},ze=async()=>{if(!a){alert("Please enter a batch name before saving.");return}$(!0),Y(null);const j={batchName:a,numBars:i,barWeight:n,totalBatchWeight:f,ingredients:_,createdAt:new Date().toISOString()};try{const B=await F1(Sm(nh,"batches"),j);j.id=B.id,N(ee=>[...ee,j]),alert("Batch saved successfully!")}catch(B){console.error("Error saving batch:",B),Y("Failed to save batch"),alert("Failed to save batch. Please try again.")}finally{$(!1)}},Ke=j=>{j&&(c(j.batchName),e(j.numBars),s(j.barWeight),g(j.totalBatchWeight),v(j.ingredients)),be({}),de(!0)},pt=async j=>{if(window.confirm("Are you sure you want to delete this batch?")){$(!0),Y(null);try{const B=iy(nh,"batches",j);await O1(B),N(ee=>ee.filter(te=>te.id!==j)),alert("Batch deleted successfully!")}catch(B){console.error("Error deleting batch:",B),Y("Failed to delete batch"),alert("Failed to delete batch. Please try again.")}finally{$(!1)}}};He.useEffect(()=>{(async()=>{$(!0),Y(null);try{const B=Sm(nh,"batches"),te=(await D1(B)).docs.map(re=>({id:re.id,...re.data()}));N(te)}catch(B){console.error("Error fetching batches:",B),Y("Failed to load saved batches")}finally{$(!1)}})()},[]),He.useEffect(()=>{if(b&&f>0&&n>0){const j=parseFloat(n),B=f/j;let ee;Math.abs(B-Math.round(B))<.01?ee=Math.round(B):ee=Math.floor(B),ee=Math.max(1,ee),!isNaN(ee)&&ee!==parseInt(i)&&(console.log(`Auto-updating number of bars: ${i}  ${ee} (totalBatchWeight: ${f}, barWeight: ${j})`),e(ee),v(te=>te.map((me,Se)=>{if(ct[`${Se}-weightPerBar`])return me;const Ve=parseFloat(me.totalWeight)||0;return Ve>0?{...me,weightPerBar:J(Ve/ee)}:me})))}},[b,f,n,i,ct]),He.useEffect(()=>{if(!b&&i>0&&n>0){const j=parseFloat(i)*parseFloat(n),B=Math.round(j);!isNaN(B)&&B!==f&&g(B)}},[i,n,b,f]),He.useEffect(()=>{if(!b&&i>0&&n>0){if(w.index!==null)return;const j=parseFloat(i)*parseFloat(n);let B=0,ee=0;_.forEach((re,me)=>{if(me!==C){if(re.staticField==="weightPerBar"&&re.weightPerBar){const Ve=(parseFloat(re.weightPerBar)||0)*i;Ve>0&&(B+=Ve/j*100,ee+=Ve)}else if(re.staticField==="percentage"&&re.percentage){const Se=parseFloat(re.percentage)||0;Se>0&&(B+=Se,ee+=Se/100*j)}else if(re.staticField==="totalWeight"&&re.totalWeight){const Se=parseFloat(re.totalWeight)||0;Se>0&&(B+=Se/j*100,ee+=Se)}}});const te=_.map((re,me)=>{if(me===C){const mt=Math.max(0,100-B),Pn=Math.max(0,j-ee),Hn=i>0?Pn/i:0;return{...re,percentage:J(mt),totalWeight:J(Pn),weightPerBar:J(Hn)}}if(!(re.weightPerBar!==""&&!isNaN(parseFloat(re.weightPerBar))||re.percentage!==""&&!isNaN(parseFloat(re.percentage))||re.totalWeight!==""&&!isNaN(parseFloat(re.totalWeight))))return re;const Ve=parseFloat(re.percentage)||0,vt=parseFloat(re.weightPerBar)||0,Et=parseFloat(re.totalWeight)||0;if(Ve>0&&re.staticField==="percentage"){const mt=Ve/100*j;return{...re,totalWeight:isNaN(mt)?"0":mt.toFixed(2),weightPerBar:i>0?(mt/i).toFixed(2):"0"}}if(vt>0&&re.staticField==="weightPerBar"){const mt=vt*i;return{...re,totalWeight:isNaN(mt)?"0":mt.toFixed(2),percentage:j>0?(mt/j*100).toFixed(2):"0"}}return Et>0&&re.staticField==="totalWeight"?{...re,percentage:j>0?(Et/j*100).toFixed(2):"0",weightPerBar:i>0?(Et/i).toFixed(2):"0"}:re});JSON.stringify(te)!==JSON.stringify(_)&&v(te)}},[i,n,b,f,_,w,C]),He.useEffect(()=>{if(b&&f>0){if(w.index!==null)return;v(j=>{const B=[...j];return B.forEach((ee,te)=>{if(te>0&&ee.staticField==="percentage"&&ee.percentage){const me=(parseFloat(ee.percentage)||0)/100*f;if(me>0&&(B[te].totalWeight=J(me),i>0)){const Se=me/i;B[te].weightPerBar=J(Se)}}}),B})}},[b,f,i,w]),He.useEffect(()=>{b&&v(j=>{const B=[...j],te=100-B.slice(1).reduce((me,Se)=>me+(parseFloat(Se.percentage)||0),0),re=te>0?te.toFixed(2):"0";return B[0].percentage!==re?(B[0].percentage=re,B):j})},[b,_]),He.useEffect(()=>{b&&f>0&&i>0&&v(j=>{const B=[...j];let ee=!1;return B.forEach((te,re)=>{if(w.index===re)return;if(ct[`${re}-weightPerBar`]){console.log(`Preserving user-entered weightPerBar for ingredient ${re+1}`);return}const me=parseFloat(te.totalWeight)||0;if(re===0||te.staticField==="percentage"){const Se=me>0?(me/i).toFixed(2):"0";Se!==te.weightPerBar&&(B[re].weightPerBar=Se,ee=!0)}}),ee?B:j})},[b,f,i,w,ct]);const Cn=j=>{const B=j.target.checked;if(Pe(B),B){we(!1),console.log("Switching to auto mode, bar weight:",n);const ee=parseFloat(n);if(ee>0){const te=ee;console.log("Setting initial batch weight to:",te),g(te),e(1),v(re=>{const me=[...re];return me[0]={...me[0],totalWeight:ee.toString(),percentage:"100",weightPerBar:ee.toString(),staticField:"totalWeight"},me})}else g(0),e(0),v(te=>{const re=[...te];return re[0]={...re[0],totalWeight:"",percentage:"100",weightPerBar:"",staticField:"totalWeight"},re})}else e(""),i>0&&n>0&&g(i*n)};return He.useEffect(()=>{if(b&&!w.index){const j=_.reduce((B,ee)=>{const te=parseFloat(ee.totalWeight)||0;return B+te},0);Math.abs(j-parseFloat(f))>.01&&g(j.toFixed(2))}},[b,_,w]),He.useEffect(()=>{if(b){const j=_.reduce((B,ee)=>B+(parseFloat(ee.percentage)||0),0);j>100&&console.warn("Total percentage exceeds 100%:",j)}},[b,_]),He.useEffect(()=>{if(b&&parseFloat(f)>0){if(w.index!==null)return;v(j=>{const B=[...j];let ee=!1;return B.forEach((te,re)=>{if(te.staticField==="percentage"){const me=parseFloat(te.percentage)||0;if(me>0){const Se=me/100*f,Ve=J(Se);if(Ve!==te.totalWeight){if(B[re].totalWeight=Ve,i>0){const vt=Se/i;B[re].weightPerBar=J(vt)}ee=!0}}}}),ee?B:j})}},[b,f,i,w]),He.useEffect(()=>{if(b&&f>0){if(w.index!==null&&w.field==="totalWeight")return;v(j=>{const B=[...j];let ee=!1;return B.forEach((te,re)=>{if(te.staticField!=="percentage"){const me=parseFloat(te.totalWeight)||0;if(me>0){const Se=me/f*100,Ve=J(Se);Ve!==te.percentage&&(B[re].percentage=Ve,ee=!0)}}}),ee?B:j})}},[b,f,w]),He.useEffect(()=>{A({index:null,field:null}),ut({})},[O]),se.jsxs("div",{className:"p-6 max-w-lg mx-auto",children:[se.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Chocolate Batch Calculator"}),se.jsx(B1,{children:se.jsxs(U1,{className:"p-4 space-y-6",children:[se.jsxs("div",{className:"border-2 border-gray-300 rounded-md p-4 bg-gray-50",children:[se.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Batch Settings"}),se.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[se.jsx("div",{className:"flex items-center justify-between",children:se.jsxs("label",{className:"block font-bold",children:["Batch Name ",se.jsx("span",{className:"text-red-500",children:"*"})]})}),se.jsx(Li,{type:"text",placeholder:"Batch Name",value:a,onChange:j=>c(j.target.value),required:!0,className:Bi(!1)})]}),se.jsxs("div",{className:"mb-3",children:[se.jsxs("div",{className:"flex items-center justify-between mb-1",children:[se.jsxs("label",{className:"block font-bold",children:["Number of Bars ",b?null:se.jsx("span",{className:"text-red-500",children:"*"})]}),se.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[se.jsx("input",{type:"checkbox",checked:b,onChange:Cn}),se.jsx("span",{children:"Auto-calc"})]})]}),se.jsx(Li,{type:"number",placeholder:"Number of Bars",value:i,onChange:j=>{e(j.target.value),we(!0)},required:!b,disabled:b,className:Bi(b)})]}),se.jsxs("div",{className:"mb-3",children:[se.jsxs("div",{className:"flex items-center justify-between mb-1",children:[se.jsxs("label",{className:"block font-bold",children:["Weight of Individual Bar (g) ",se.jsx("span",{className:"text-red-500",children:"*"})]}),se.jsx("span",{className:"text-sm text-blue-600 font-bold",children:"User-defined only"})]}),se.jsx(Li,{type:"number",placeholder:"Bar Weight (g)",value:n,onChange:j=>s(j.target.value),required:!0,className:`${Bi(!1)} border-2 border-blue-500`}),se.jsx("p",{className:"text-xs text-gray-500 mt-1",children:z1})]}),se.jsxs("div",{className:"mb-3",children:[se.jsx("label",{className:"block font-bold mb-1",children:"Weight Unit"}),se.jsxs("div",{className:"flex border rounded overflow-hidden",children:[se.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${O==="g"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>I("g"),type:"button",children:"Grams (g)"}),se.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${O==="lbs"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>I("lbs"),type:"button",children:"Pounds (lbs)"})]})]}),se.jsx("div",{className:"font-bold mt-3 text-center",children:parseFloat(f)>0?`Total Batch Weight: ${Re(f)}`:"Total Weight: N/A"})]}),se.jsxs("div",{children:[se.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ingredients"}),se.jsx("ul",{className:"space-y-4",children:_.map((j,B)=>se.jsxs("li",{className:"flex flex-col space-y-2",children:[B>0&&se.jsx("hr",{className:"border-gray-300 my-2"}),se.jsxs("div",{className:"flex items-center justify-between",children:[se.jsxs("label",{className:"block font-bold",children:["Ingredient #",B+1]}),b&&B===0?se.jsx("span",{className:"text-sm text-gray-500 italic",children:"Base ingredient"}):null,!b&&se.jsxs("label",{className:`flex items-center space-x-2 ${b1(B===C)}`,children:[se.jsx("input",{type:"radio",name:"autoPercentageIngredient",checked:C===B,onChange:()=>De(B),disabled:!x()}),se.jsx("span",{className:"text-sm",children:"Auto-calc"})]})]}),se.jsx(Li,{type:"text",placeholder:"Name",value:j.name,onChange:ee=>Ie(B,"name",ee.target.value),disabled:!x(),className:Bi(!x())}),se.jsxs("div",{children:[se.jsxs("label",{className:"block font-bold",children:["Percentage (%)",j.staticField==="percentage"&&j.percentage&&!(!b&&B===C)&&se.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"}),!isNaN(parseFloat(j.percentage))&&parseFloat(j.percentage)>100&&se.jsx("span",{className:"ml-2 text-xs font-normal text-red-600",children:"(exceeds 100%)"})]}),se.jsx(Li,{type:"number",placeholder:"Percentage (%)",value:j.percentage,onChange:ee=>Ie(B,"percentage",ee.target.value),onFocus:()=>A({index:B,field:"percentage"}),disabled:!x()||b&&B===0||!b&&B===C,className:j1(!x()||b&&B===0||!b&&B===C,j.percentage)})]}),se.jsxs("div",{children:[se.jsxs("label",{className:"block font-bold",children:["Weight/Bar (g)",j.staticField==="weightPerBar"&&j.weightPerBar&&!(!b&&B===C)&&se.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),se.jsx(Li,{type:"number",inputMode:"decimal",step:"any",placeholder:"Weight per bar (g)",value:j.weightPerBar??"",onChange:ee=>{Ie(B,"weightPerBar",ee.target.value)},onFocus:()=>{A({index:B,field:"weightPerBar"}),be(ee=>({...ee,[`${B}-weightPerBar`]:!0}))},disabled:!x()||b&&B===0||!b&&B===C,className:Bi(!x()||b&&B===0||!b&&B===C)})]}),se.jsxs("div",{children:[se.jsxs("label",{className:"block font-bold",children:["Total Weight (",O,")",j.staticField==="totalWeight"&&!(!b&&B===C)&&se.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),se.jsx(Li,{type:"text",inputMode:"decimal",placeholder:`Total Weight (${O})`,value:w.index===B&&w.field==="totalWeight"?et[B]||"":W(j.totalWeight),onChange:ee=>{const te=ee.target.value;ut(me=>({...me,[B]:te})),A({index:B,field:"totalWeight"});const re=[..._];if(re[B].staticField="totalWeight",O==="g")Ie(B,"totalWeight",te);else if(O==="lbs"&&te&&!isNaN(parseFloat(te))){const me=fe(te);if(re[B].totalWeight=me,i>0){const Ve=parseFloat(me)/i;re[B].weightPerBar=J(Ve)}if(f>0){const Ve=parseFloat(me)/f*100;re[B].percentage=J(Ve)}v(re),k(Se=>!Se)}else Ie(B,"totalWeight","")},onBlur:()=>{if(O==="lbs"){const ee=et[B];if(ee!==void 0&&ee!==""&&!isNaN(parseFloat(ee))){const te=fe(ee);Ie(B,"totalWeight",te)}else(ee===""||isNaN(parseFloat(ee)))&&Ie(B,"totalWeight","")}setTimeout(()=>{w.index===B&&w.field==="totalWeight"&&A({index:null,field:null})},100)},onFocus:()=>{A({index:B,field:"totalWeight"}),O==="lbs"&&j.totalWeight?ut(te=>({...te,[B]:W(j.totalWeight)})):ut(te=>({...te,[B]:j.totalWeight||""}));const ee=[..._];ee[B].staticField="totalWeight",v(ee)},disabled:!x()||!b&&B===C,className:Bi(!x()||!b&&B===C)})]})]},B))})]}),se.jsxs("div",{className:"flex space-x-4 mt-4",children:[se.jsx(Dl,{onClick:()=>ze(),disabled:D,children:D?"Saving...":"Save Batch"}),se.jsx(Dl,{onClick:()=>je(),variant:"secondary",disabled:D,children:"Reset Batch"})]}),se.jsxs("div",{className:"mt-6",children:[se.jsx("h2",{className:"text-lg font-semibold",children:"Saved Batches"}),Z&&se.jsx("p",{className:"text-red-500",children:Z}),D&&se.jsx("p",{children:"Loading batches..."}),!D&&S.length>0?se.jsx("ul",{className:"space-y-2",children:S.map(j=>se.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[se.jsx("span",{children:j.batchName}),se.jsxs("div",{className:"flex space-x-2",children:[se.jsx(Dl,{onClick:()=>Ke(j),variant:"secondary",size:"sm",children:"Restore"}),se.jsx(Dl,{onClick:()=>pt(j.id),variant:"destructive",size:"sm",children:"Delete"})]})]},j.id))}):!D&&se.jsx("p",{children:"No saved batches yet."})]})]})})]})}N_.createRoot(document.getElementById("root")).render(se.jsx(I_.StrictMode,{children:se.jsx($1,{})}));
