(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Mm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Qc={exports:{}},Ho={},Kc={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p;function A_(){if(_p)return Fe;_p=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.iterator;function R(F){return F===null||typeof F!="object"?null:(F=k&&F[k]||F["@@iterator"],typeof F=="function"?F:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,Z={};function B(F,z,ue){this.props=F,this.context=z,this.refs=Z,this.updater=ue||$}B.prototype.isReactComponent={},B.prototype.setState=function(F,z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,z,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Ce(){}Ce.prototype=B.prototype;function we(F,z,ue){this.props=F,this.context=z,this.refs=Z,this.updater=ue||$}var Ie=we.prototype=new Ce;Ie.constructor=we,Y(Ie,B.prototype),Ie.isPureReactComponent=!0;var De=Array.isArray,ut=Object.prototype.hasOwnProperty,Be={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function w(F,z,ue){var ke,Ne={},Oe=null,Ve=null;if(z!=null)for(ke in z.ref!==void 0&&(Ve=z.ref),z.key!==void 0&&(Oe=""+z.key),z)ut.call(z,ke)&&!V.hasOwnProperty(ke)&&(Ne[ke]=z[ke]);var We=arguments.length-2;if(We===1)Ne.children=ue;else if(1<We){for(var Ge=Array(We),_t=0;_t<We;_t++)Ge[_t]=arguments[_t+2];Ne.children=Ge}if(F&&F.defaultProps)for(ke in We=F.defaultProps,We)Ne[ke]===void 0&&(Ne[ke]=We[ke]);return{$$typeof:i,type:F,key:Oe,ref:Ve,props:Ne,_owner:Be.current}}function A(F,z){return{$$typeof:i,type:F.type,key:z,ref:F.ref,props:F.props,_owner:F._owner}}function C(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function x(F){var z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ue){return z[ue]})}var D=/\/+/g;function S(F,z){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):z.toString(36)}function st(F,z,ue,ke,Ne){var Oe=typeof F;(Oe==="undefined"||Oe==="boolean")&&(F=null);var Ve=!1;if(F===null)Ve=!0;else switch(Oe){case"string":case"number":Ve=!0;break;case"object":switch(F.$$typeof){case i:case e:Ve=!0}}if(Ve)return Ve=F,Ne=Ne(Ve),F=ke===""?"."+S(Ve,0):ke,De(Ne)?(ue="",F!=null&&(ue=F.replace(D,"$&/")+"/"),st(Ne,z,ue,"",function(_t){return _t})):Ne!=null&&(C(Ne)&&(Ne=A(Ne,ue+(!Ne.key||Ve&&Ve.key===Ne.key?"":(""+Ne.key).replace(D,"$&/")+"/")+F)),z.push(Ne)),1;if(Ve=0,ke=ke===""?".":ke+":",De(F))for(var We=0;We<F.length;We++){Oe=F[We];var Ge=ke+S(Oe,We);Ve+=st(Oe,z,ue,Ge,Ne)}else if(Ge=R(F),typeof Ge=="function")for(F=Ge.call(F),We=0;!(Oe=F.next()).done;)Oe=Oe.value,Ge=ke+S(Oe,We++),Ve+=st(Oe,z,ue,Ge,Ne);else if(Oe==="object")throw z=String(F),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Ve}function pt(F,z,ue){if(F==null)return F;var ke=[],Ne=0;return st(F,ke,"","",function(Oe){return z.call(ue,Oe,Ne++)}),ke}function tt(F){if(F._status===-1){var z=F._result;z=z(),z.then(function(ue){(F._status===0||F._status===-1)&&(F._status=1,F._result=ue)},function(ue){(F._status===0||F._status===-1)&&(F._status=2,F._result=ue)}),F._status===-1&&(F._status=0,F._result=z)}if(F._status===1)return F._result.default;throw F._result}var ze={current:null},ne={transition:null},ge={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Be};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:pt,forEach:function(F,z,ue){pt(F,function(){z.apply(this,arguments)},ue)},count:function(F){var z=0;return pt(F,function(){z++}),z},toArray:function(F){return pt(F,function(z){return z})||[]},only:function(F){if(!C(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Fe.Component=B,Fe.Fragment=n,Fe.Profiler=a,Fe.PureComponent=we,Fe.StrictMode=s,Fe.Suspense=y,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Fe.act=oe,Fe.cloneElement=function(F,z,ue){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ke=Y({},F.props),Ne=F.key,Oe=F.ref,Ve=F._owner;if(z!=null){if(z.ref!==void 0&&(Oe=z.ref,Ve=Be.current),z.key!==void 0&&(Ne=""+z.key),F.type&&F.type.defaultProps)var We=F.type.defaultProps;for(Ge in z)ut.call(z,Ge)&&!V.hasOwnProperty(Ge)&&(ke[Ge]=z[Ge]===void 0&&We!==void 0?We[Ge]:z[Ge])}var Ge=arguments.length-2;if(Ge===1)ke.children=ue;else if(1<Ge){We=Array(Ge);for(var _t=0;_t<Ge;_t++)We[_t]=arguments[_t+2];ke.children=We}return{$$typeof:i,type:F.type,key:Ne,ref:Oe,props:ke,_owner:Ve}},Fe.createContext=function(F){return F={$$typeof:f,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:c,_context:F},F.Consumer=F},Fe.createElement=w,Fe.createFactory=function(F){var z=w.bind(null,F);return z.type=F,z},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:m,render:F}},Fe.isValidElement=C,Fe.lazy=function(F){return{$$typeof:I,_payload:{_status:-1,_result:F},_init:tt}},Fe.memo=function(F,z){return{$$typeof:v,type:F,compare:z===void 0?null:z}},Fe.startTransition=function(F){var z=ne.transition;ne.transition={};try{F()}finally{ne.transition=z}},Fe.unstable_act=oe,Fe.useCallback=function(F,z){return ze.current.useCallback(F,z)},Fe.useContext=function(F){return ze.current.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F){return ze.current.useDeferredValue(F)},Fe.useEffect=function(F,z){return ze.current.useEffect(F,z)},Fe.useId=function(){return ze.current.useId()},Fe.useImperativeHandle=function(F,z,ue){return ze.current.useImperativeHandle(F,z,ue)},Fe.useInsertionEffect=function(F,z){return ze.current.useInsertionEffect(F,z)},Fe.useLayoutEffect=function(F,z){return ze.current.useLayoutEffect(F,z)},Fe.useMemo=function(F,z){return ze.current.useMemo(F,z)},Fe.useReducer=function(F,z,ue){return ze.current.useReducer(F,z,ue)},Fe.useRef=function(F){return ze.current.useRef(F)},Fe.useState=function(F){return ze.current.useState(F)},Fe.useSyncExternalStore=function(F,z,ue){return ze.current.useSyncExternalStore(F,z,ue)},Fe.useTransition=function(){return ze.current.useTransition()},Fe.version="18.3.1",Fe}var vp;function kh(){return vp||(vp=1,Kc.exports=A_()),Kc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function C_(){if(Ep)return Ho;Ep=1;var i=kh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,v){var I,k={},R=null,$=null;v!==void 0&&(R=""+v),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&($=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(k[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)k[I]===void 0&&(k[I]=y[I]);return{$$typeof:e,type:m,key:R,ref:$,props:k,_owner:a.current}}return Ho.Fragment=n,Ho.jsx=f,Ho.jsxs=f,Ho}var wp;function P_(){return wp||(wp=1,Qc.exports=C_()),Qc.exports}var ie=P_(),qe=kh();const R_=Mm(qe);var Pl={},Gc={exports:{}},an={},Xc={exports:{}},Yc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function k_(){return Tp||(Tp=1,function(i){function e(ne,ge){var oe=ne.length;ne.push(ge);e:for(;0<oe;){var F=oe-1>>>1,z=ne[F];if(0<a(z,ge))ne[F]=ge,ne[oe]=z,oe=F;else break e}}function n(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ge=ne[0],oe=ne.pop();if(oe!==ge){ne[0]=oe;e:for(var F=0,z=ne.length,ue=z>>>1;F<ue;){var ke=2*(F+1)-1,Ne=ne[ke],Oe=ke+1,Ve=ne[Oe];if(0>a(Ne,oe))Oe<z&&0>a(Ve,Ne)?(ne[F]=Ve,ne[Oe]=oe,F=Oe):(ne[F]=Ne,ne[ke]=oe,F=ke);else if(Oe<z&&0>a(Ve,oe))ne[F]=Ve,ne[Oe]=oe,F=Oe;else break e}}return ge}function a(ne,ge){var oe=ne.sortIndex-ge.sortIndex;return oe!==0?oe:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],v=[],I=1,k=null,R=3,$=!1,Y=!1,Z=!1,B=typeof setTimeout=="function"?setTimeout:null,Ce=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ie(ne){for(var ge=n(v);ge!==null;){if(ge.callback===null)s(v);else if(ge.startTime<=ne)s(v),ge.sortIndex=ge.expirationTime,e(y,ge);else break;ge=n(v)}}function De(ne){if(Z=!1,Ie(ne),!Y)if(n(y)!==null)Y=!0,tt(ut);else{var ge=n(v);ge!==null&&ze(De,ge.startTime-ne)}}function ut(ne,ge){Y=!1,Z&&(Z=!1,Ce(w),w=-1),$=!0;var oe=R;try{for(Ie(ge),k=n(y);k!==null&&(!(k.expirationTime>ge)||ne&&!x());){var F=k.callback;if(typeof F=="function"){k.callback=null,R=k.priorityLevel;var z=F(k.expirationTime<=ge);ge=i.unstable_now(),typeof z=="function"?k.callback=z:k===n(y)&&s(y),Ie(ge)}else s(y);k=n(y)}if(k!==null)var ue=!0;else{var ke=n(v);ke!==null&&ze(De,ke.startTime-ge),ue=!1}return ue}finally{k=null,R=oe,$=!1}}var Be=!1,V=null,w=-1,A=5,C=-1;function x(){return!(i.unstable_now()-C<A)}function D(){if(V!==null){var ne=i.unstable_now();C=ne;var ge=!0;try{ge=V(!0,ne)}finally{ge?S():(Be=!1,V=null)}}else Be=!1}var S;if(typeof we=="function")S=function(){we(D)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,pt=st.port2;st.port1.onmessage=D,S=function(){pt.postMessage(null)}}else S=function(){B(D,0)};function tt(ne){V=ne,Be||(Be=!0,S())}function ze(ne,ge){w=B(function(){ne(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){Y||$||(Y=!0,tt(ut))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(ne){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var oe=R;R=ge;try{return ne()}finally{R=oe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=R;R=ne;try{return ge()}finally{R=oe}},i.unstable_scheduleCallback=function(ne,ge,oe){var F=i.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?F+oe:F):oe=F,ne){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=oe+z,ne={id:I++,callback:ge,priorityLevel:ne,startTime:oe,expirationTime:z,sortIndex:-1},oe>F?(ne.sortIndex=oe,e(v,ne),n(y)===null&&ne===n(v)&&(Z?(Ce(w),w=-1):Z=!0,ze(De,oe-F))):(ne.sortIndex=z,e(y,ne),Y||$||(Y=!0,tt(ut))),ne},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(ne){var ge=R;return function(){var oe=R;R=ge;try{return ne.apply(this,arguments)}finally{R=oe}}}}(Yc)),Yc}var Ip;function N_(){return Ip||(Ip=1,Xc.exports=k_()),Xc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function V_(){if(Sp)return an;Sp=1;var i=kh(),e=N_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},k={};function R(t){return y.call(k,t)?!0:y.call(I,t)?!1:v.test(t)?k[t]=!0:(I[t]=!0,!1)}function $(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y(t,r,o,u){if(r===null||typeof r>"u"||$(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];B[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ce=/[\-:]([a-z])/g;function we(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Ce,we);B[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Ce,we);B[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Ce,we);B[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ie(t,r,o,u){var h=B.hasOwnProperty(r)?B[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Y(r,o,h,u)&&(o=null),u||h===null?R(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var De=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ut=Symbol.for("react.element"),Be=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,F;function z(t){if(F===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);F=r&&r[1]||""}return`
`+F+t}var ue=!1;function ke(t,r){if(!t||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,T=p.length-1;1<=_&&0<=T&&h[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(h[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||h[_]!==p[T]){var P=`
`+h[_].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=_&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?z(t):""}function Ne(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=ke(t.type,!1),t;case 11:return t=ke(t.type.render,!1),t;case 1:return t=ke(t.type,!0),t;default:return""}}function Oe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Be:return"Portal";case A:return"Profiler";case w:return"StrictMode";case S:return"Suspense";case st:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pt:return r=t.displayName||null,r!==null?r:Oe(t.type)||"Memo";case tt:r=t._payload,t=t._init;try{return Oe(t(r))}catch{}}return null}function Ve(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function We(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ge(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _t(t){var r=Ge(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function kn(t){t._valueTracker||(t._valueTracker=_t(t))}function Pr(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Ge(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function qn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function j(t,r){var o=r.checked;return oe({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function b(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=We(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function re(t,r){r=r.checked,r!=null&&Ie(t,"checked",r,!1)}function J(t,r){re(t,r);var o=We(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?de(t,r.type,o):r.hasOwnProperty("defaultValue")&&de(t,r.type,We(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function G(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function de(t,r,o){(r!=="number"||qn(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var se=Array.isArray;function he(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+We(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Se(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nt(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(se(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:We(o)}}function Xe(t,r){var o=We(r.value),u=We(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function kt(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Ye(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Ye(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ur,eo=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ur.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Rr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pi=["Webkit","ms","Moz","O"];Object.keys(di).forEach(function(t){pi.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),di[r]=di[t]})});function to(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||di.hasOwnProperty(t)&&di[t]?(""+r).trim():r+"px"}function no(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=to(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ro=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function io(t,r){if(r){if(ro[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function so(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=null;function Gi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,_n=null,Qn=null;function Yi(t){if(t=No(t)){if(typeof Xi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=za(r),Xi(t.stateNode,t.type,r))}}function Kn(t){_n?Qn?Qn.push(t):Qn=[t]:_n=t}function oo(){if(_n){var t=_n,r=Qn;if(Qn=_n=null,Yi(t),r)for(t=0;t<r.length;t++)Yi(r[t])}}function gi(t,r){return t(r)}function ao(){}var cr=!1;function lo(t,r,o){if(cr)return t(r,o);cr=!0;try{return gi(t,r,o)}finally{cr=!1,(_n!==null||Qn!==null)&&(ao(),oo())}}function mt(t,r){var o=t.stateNode;if(o===null)return null;var u=za(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Ji=!1;if(m)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Ji=!1}function yi(t,r,o,u,h,p,_,T,P){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(Q){this.onError(Q)}}var _i=!1,Zi=null,Vn=!1,uo=null,wu={onError:function(t){_i=!0,Zi=t}};function es(t,r,o,u,h,p,_,T,P){_i=!1,Zi=null,yi.apply(wu,arguments)}function da(t,r,o,u,h,p,_,T,P){if(es.apply(this,arguments),_i){if(_i){var U=Zi;_i=!1,Zi=null}else throw Error(n(198));Vn||(Vn=!0,uo=U)}}function xn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function vi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Dn(t){if(xn(t)!==t)throw Error(n(188))}function pa(t){var r=t.alternate;if(!r){if(r=xn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Dn(h),t;if(p===u)return Dn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,T=h.child;T;){if(T===o){_=!0,o=h,u=p;break}if(T===u){_=!0,u=h,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=h;break}if(T===u){_=!0,u=p,o=h;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function co(t){return t=pa(t),t!==null?ts(t):null}function ts(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ts(t);if(r!==null)return r;t=t.sibling}return null}var ns=e.unstable_scheduleCallback,ho=e.unstable_cancelCallback,ma=e.unstable_shouldYield,Tu=e.unstable_requestPaint,Ze=e.unstable_now,ga=e.unstable_getCurrentPriorityLevel,Ei=e.unstable_ImmediatePriority,kr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,fo=e.unstable_LowPriority,ya=e.unstable_IdlePriority,wi=null,cn=null;function _a(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(wi,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:Ea,po=Math.log,va=Math.LN2;function Ea(t){return t>>>=0,t===0?32:31-(po(t)/va|0)|0}var rs=64,is=4194304;function Nr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ti(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~h;T!==0?u=Nr(T):(p&=_,p!==0&&(u=Nr(p)))}else _=o&~h,_!==0?u=Nr(_):p!==0&&(u=Nr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Gt(r),h=1<<o,u|=t[o],r&=~h;return u}function Iu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Gt(p),T=1<<_,P=h[_];P===-1?((T&o)===0||(T&u)!==0)&&(h[_]=Iu(T,r)):P<=r&&(t.expiredLanes|=T),p&=~T}}function hn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ii(){var t=rs;return rs<<=1,(rs&4194240)===0&&(rs=64),t}function Vr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function xr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Gt(r),t[r]=o}function Je(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Gt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Dr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Gt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Le=0;function Fr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var wa,ss,Ta,Ia,Sa,mo=!1,Gn=[],Ot=null,Fn=null,On=null,Or=new Map,En=new Map,Xn=[],Su="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Aa(t,r){switch(t){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Or.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(r.pointerId)}}function Zt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=No(r),r!==null&&ss(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Au(t,r,o,u,h){switch(r){case"focusin":return Ot=Zt(Ot,t,r,o,u,h),!0;case"dragenter":return Fn=Zt(Fn,t,r,o,u,h),!0;case"mouseover":return On=Zt(On,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Or.set(p,Zt(Or.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,En.set(p,Zt(En.get(p)||null,t,r,o,u,h)),!0}return!1}function Ca(t){var r=Ri(t.target);if(r!==null){var o=xn(r);if(o!==null){if(r=o.tag,r===13){if(r=vi(o),r!==null){t.blockedOn=r,Sa(t.priority,function(){Ta(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=os(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);mi=u,o.target.dispatchEvent(u),mi=null}else return r=No(o),r!==null&&ss(r),t.blockedOn=o,!1;r.shift()}return!0}function Si(t,r,o){fr(t)&&o.delete(r)}function Pa(){mo=!1,Ot!==null&&fr(Ot)&&(Ot=null),Fn!==null&&fr(Fn)&&(Fn=null),On!==null&&fr(On)&&(On=null),Or.forEach(Si),En.forEach(Si)}function Mn(t,r){t.blockedOn===r&&(t.blockedOn=null,mo||(mo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pa)))}function Ln(t){function r(h){return Mn(h,t)}if(0<Gn.length){Mn(Gn[0],t);for(var o=1;o<Gn.length;o++){var u=Gn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Ot!==null&&Mn(Ot,t),Fn!==null&&Mn(Fn,t),On!==null&&Mn(On,t),Or.forEach(r),En.forEach(r),o=0;o<Xn.length;o++)u=Xn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Xn.length&&(o=Xn[0],o.blockedOn===null);)Ca(o),o.blockedOn===null&&Xn.shift()}var dr=De.ReactCurrentBatchConfig,Mr=!0;function ot(t,r,o,u){var h=Le,p=dr.transition;dr.transition=null;try{Le=1,go(t,r,o,u)}finally{Le=h,dr.transition=p}}function Cu(t,r,o,u){var h=Le,p=dr.transition;dr.transition=null;try{Le=4,go(t,r,o,u)}finally{Le=h,dr.transition=p}}function go(t,r,o,u){if(Mr){var h=os(t,r,o,u);if(h===null)Lu(t,r,u,Ai,o),Aa(t,u);else if(Au(h,t,r,o,u))u.stopPropagation();else if(Aa(t,u),r&4&&-1<Su.indexOf(t)){for(;h!==null;){var p=No(h);if(p!==null&&wa(p),p=os(t,r,o,u),p===null&&Lu(t,r,u,Ai,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Lu(t,r,u,null,o)}}var Ai=null;function os(t,r,o,u){if(Ai=null,t=Gi(u),t=Ri(t),t!==null)if(r=xn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=vi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ai=t,null}function yo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ga()){case Ei:return 1;case kr:return 4;case vn:case fo:return 16;case ya:return 536870912;default:return 16}default:return 16}}var fn=null,as=null,en=null;function _o(){if(en)return en;var t,r=as,o=r.length,u,h="value"in fn?fn.value:fn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return en=h.slice(t,1<u?1-u:void 0)}function ls(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function vo(){return!1}function Mt(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:vo,this.isPropagationStopped=vo,this}return oe(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),r}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Mt(Bn),Jn=oe({},Bn,{view:0,detail:0}),Pu=Mt(Jn),cs,pr,Lr,Ci=oe({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(cs=t.screenX-Lr.screenX,pr=t.screenY-Lr.screenY):pr=cs=0,Lr=t),cs)},movementY:function(t){return"movementY"in t?t.movementY:pr}}),hs=Mt(Ci),Eo=oe({},Ci,{dataTransfer:0}),Ra=Mt(Eo),fs=oe({},Jn,{relatedTarget:0}),ds=Mt(fs),ka=oe({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Mt(ka),Na=oe({},Bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=Mt(Na),xa=oe({},Bn,{data:0}),wo=Mt(xa),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Da[t])?!!r[t]:!1}function Zn(){return Fa}var l=oe({},Jn,{key:function(t){if(t.key){var r=ps[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(t){return t.type==="keypress"?ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Mt(l),g=oe({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Mt(g),O=oe({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),W=Mt(O),te=oe({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Mt(te),It=oe({},Ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Mt(It),Nt=[9,13,27,32],vt=m&&"CompositionEvent"in window,wn=null;m&&"documentMode"in document&&(wn=document.documentMode);var dn=m&&"TextEvent"in window&&!wn,Pi=m&&(!vt||wn&&8<wn&&11>=wn),ms=" ",ff=!1;function df(t,r){switch(t){case"keyup":return Nt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function Ty(t,r){switch(t){case"compositionend":return pf(r);case"keypress":return r.which!==32?null:(ff=!0,ms);case"textInput":return t=r.data,t===ms&&ff?null:t;default:return null}}function Iy(t,r){if(gs)return t==="compositionend"||!vt&&df(t,r)?(t=_o(),en=as=fn=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var Sy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Sy[t.type]:r==="textarea"}function gf(t,r,o,u){Kn(u),r=ba(r,"onChange"),0<r.length&&(o=new us("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var To=null,Io=null;function Ay(t){Ff(t,0)}function Oa(t){var r=ws(t);if(Pr(r))return t}function Cy(t,r){if(t==="change")return r}var yf=!1;if(m){var Ru;if(m){var ku="oninput"in document;if(!ku){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),ku=typeof _f.oninput=="function"}Ru=ku}else Ru=!1;yf=Ru&&(!document.documentMode||9<document.documentMode)}function vf(){To&&(To.detachEvent("onpropertychange",Ef),Io=To=null)}function Ef(t){if(t.propertyName==="value"&&Oa(Io)){var r=[];gf(r,Io,t,Gi(t)),lo(Ay,r)}}function Py(t,r,o){t==="focusin"?(vf(),To=r,Io=o,To.attachEvent("onpropertychange",Ef)):t==="focusout"&&vf()}function Ry(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(Io)}function ky(t,r){if(t==="click")return Oa(r)}function Ny(t,r){if(t==="input"||t==="change")return Oa(r)}function Vy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var bn=typeof Object.is=="function"?Object.is:Vy;function So(t,r){if(bn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!bn(t[h],r[h]))return!1}return!0}function wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tf(t,r){var o=wf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wf(o)}}function If(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?If(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Sf(){for(var t=window,r=qn();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=qn(t.document)}return r}function Nu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function xy(t){var r=Sf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&If(o.ownerDocument.documentElement,o)){if(u!==null&&Nu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Tf(o,p);var _=Tf(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dy=m&&"documentMode"in document&&11>=document.documentMode,ys=null,Vu=null,Ao=null,xu=!1;function Af(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xu||ys==null||ys!==qn(u)||(u=ys,"selectionStart"in u&&Nu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ao&&So(Ao,u)||(Ao=u,u=ba(Vu,"onSelect"),0<u.length&&(r=new us("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ys)))}function Ma(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var _s={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},Du={},Cf={};m&&(Cf=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function La(t){if(Du[t])return Du[t];if(!_s[t])return t;var r=_s[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Cf)return Du[t]=r[o];return t}var Pf=La("animationend"),Rf=La("animationiteration"),kf=La("animationstart"),Nf=La("transitionend"),Vf=new Map,xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,r){Vf.set(t,r),c(r,[t])}for(var Fu=0;Fu<xf.length;Fu++){var Ou=xf[Fu],Fy=Ou.toLowerCase(),Oy=Ou[0].toUpperCase()+Ou.slice(1);Br(Fy,"on"+Oy)}Br(Pf,"onAnimationEnd"),Br(Rf,"onAnimationIteration"),Br(kf,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Nf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),My=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function Df(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,da(u,r,void 0,t),t.currentTarget=null}function Ff(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],P=T.instance,U=T.currentTarget;if(T=T.listener,P!==p&&h.isPropagationStopped())break e;Df(h,T,U),p=P}else for(_=0;_<u.length;_++){if(T=u[_],P=T.instance,U=T.currentTarget,T=T.listener,P!==p&&h.isPropagationStopped())break e;Df(h,T,U),p=P}}}if(Vn)throw t=uo,Vn=!1,uo=null,t}function rt(t,r){var o=r[Wu];o===void 0&&(o=r[Wu]=new Set);var u=t+"__bubble";o.has(u)||(Of(r,t,2,!1),o.add(u))}function Mu(t,r,o){var u=0;r&&(u|=4),Of(o,t,u,r)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Ba]){t[Ba]=!0,s.forEach(function(o){o!=="selectionchange"&&(My.has(o)||Mu(o,!1,t),Mu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ba]||(r[Ba]=!0,Mu("selectionchange",!1,r))}}function Of(t,r,o,u){switch(yo(r)){case 1:var h=ot;break;case 4:h=Cu;break;default:h=go}o=h.bind(null,r,o,t),h=void 0,!Ji||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Lu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===h||P.nodeType===8&&P.parentNode===h))return;_=_.return}for(;T!==null;){if(_=Ri(T),_===null)return;if(P=_.tag,P===5||P===6){u=p=_;continue e}T=T.parentNode}}u=u.return}lo(function(){var U=p,Q=Gi(o),X=[];e:{var q=Vf.get(t);if(q!==void 0){var ae=us,fe=t;switch(t){case"keypress":if(ls(o)===0)break e;case"keydown":case"keyup":ae=d;break;case"focusin":fe="focus",ae=ds;break;case"focusout":fe="blur",ae=ds;break;case"beforeblur":case"afterblur":ae=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=W;break;case Pf:case Rf:case kf:ae=mr;break;case Nf:ae=Ke;break;case"scroll":ae=Pu;break;case"wheel":ae=be;break;case"copy":case"cut":case"paste":ae=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=E}var pe=(r&4)!==0,gt=!pe&&t==="scroll",M=pe?q!==null?q+"Capture":null:q;pe=[];for(var N=U,L;N!==null;){L=N;var ee=L.stateNode;if(L.tag===5&&ee!==null&&(L=ee,M!==null&&(ee=mt(N,M),ee!=null&&pe.push(Ro(N,ee,L)))),gt)break;N=N.return}0<pe.length&&(q=new ae(q,fe,null,o,Q),X.push({event:q,listeners:pe}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",q&&o!==mi&&(fe=o.relatedTarget||o.fromElement)&&(Ri(fe)||fe[gr]))break e;if((ae||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,ae?(fe=o.relatedTarget||o.toElement,ae=U,fe=fe?Ri(fe):null,fe!==null&&(gt=xn(fe),fe!==gt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=U),ae!==fe)){if(pe=hs,ee="onMouseLeave",M="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(pe=E,ee="onPointerLeave",M="onPointerEnter",N="pointer"),gt=ae==null?q:ws(ae),L=fe==null?q:ws(fe),q=new pe(ee,N+"leave",ae,o,Q),q.target=gt,q.relatedTarget=L,ee=null,Ri(Q)===U&&(pe=new pe(M,N+"enter",fe,o,Q),pe.target=L,pe.relatedTarget=gt,ee=pe),gt=ee,ae&&fe)t:{for(pe=ae,M=fe,N=0,L=pe;L;L=vs(L))N++;for(L=0,ee=M;ee;ee=vs(ee))L++;for(;0<N-L;)pe=vs(pe),N--;for(;0<L-N;)M=vs(M),L--;for(;N--;){if(pe===M||M!==null&&pe===M.alternate)break t;pe=vs(pe),M=vs(M)}pe=null}else pe=null;ae!==null&&Mf(X,q,ae,pe,!1),fe!==null&&gt!==null&&Mf(X,gt,fe,pe,!0)}}e:{if(q=U?ws(U):window,ae=q.nodeName&&q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&q.type==="file")var me=Cy;else if(mf(q))if(yf)me=Ny;else{me=Ry;var _e=Py}else(ae=q.nodeName)&&ae.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(me=ky);if(me&&(me=me(t,U))){gf(X,me,o,Q);break e}_e&&_e(t,q,U),t==="focusout"&&(_e=q._wrapperState)&&_e.controlled&&q.type==="number"&&de(q,"number",q.value)}switch(_e=U?ws(U):window,t){case"focusin":(mf(_e)||_e.contentEditable==="true")&&(ys=_e,Vu=U,Ao=null);break;case"focusout":Ao=Vu=ys=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,Af(X,o,Q);break;case"selectionchange":if(Dy)break;case"keydown":case"keyup":Af(X,o,Q)}var ve;if(vt)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else gs?df(t,o)&&(Ae="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(Pi&&o.locale!=="ko"&&(gs||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&gs&&(ve=_o()):(fn=Q,as="value"in fn?fn.value:fn.textContent,gs=!0)),_e=ba(U,Ae),0<_e.length&&(Ae=new wo(Ae,t,null,o,Q),X.push({event:Ae,listeners:_e}),ve?Ae.data=ve:(ve=pf(o),ve!==null&&(Ae.data=ve)))),(ve=dn?Ty(t,o):Iy(t,o))&&(U=ba(U,"onBeforeInput"),0<U.length&&(Q=new wo("onBeforeInput","beforeinput",null,o,Q),X.push({event:Q,listeners:U}),Q.data=ve))}Ff(X,r)})}function Ro(t,r,o){return{instance:t,listener:r,currentTarget:o}}function ba(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=mt(t,o),p!=null&&u.unshift(Ro(t,p,h)),p=mt(t,r),p!=null&&u.push(Ro(t,p,h))),t=t.return}return u}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,P=T.alternate,U=T.stateNode;if(P!==null&&P===u)break;T.tag===5&&U!==null&&(T=U,h?(P=mt(o,p),P!=null&&_.unshift(Ro(o,P,T))):h||(P=mt(o,p),P!=null&&_.push(Ro(o,P,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var Ly=/\r\n?/g,By=/\u0000|\uFFFD/g;function Lf(t){return(typeof t=="string"?t:""+t).replace(Ly,`
`).replace(By,"")}function Ua(t,r,o){if(r=Lf(r),Lf(t)!==r&&o)throw Error(n(425))}function ja(){}var Bu=null,bu=null;function Uu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ju=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Bf=typeof Promise=="function"?Promise:void 0,Uy=typeof queueMicrotask=="function"?queueMicrotask:typeof Bf<"u"?function(t){return Bf.resolve(null).then(t).catch(jy)}:ju;function jy(t){setTimeout(function(){throw t})}function zu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Ln(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Ln(r)}function br(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function bf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),er="__reactFiber$"+Es,ko="__reactProps$"+Es,gr="__reactContainer$"+Es,Wu="__reactEvents$"+Es,zy="__reactListeners$"+Es,Wy="__reactHandles$"+Es;function Ri(t){var r=t[er];if(r)return r;for(var o=t.parentNode;o;){if(r=o[gr]||o[er]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=bf(t);t!==null;){if(o=t[er])return o;t=bf(t)}return r}t=o,o=t.parentNode}return null}function No(t){return t=t[er]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function za(t){return t[ko]||null}var $u=[],Ts=-1;function Ur(t){return{current:t}}function it(t){0>Ts||(t.current=$u[Ts],$u[Ts]=null,Ts--)}function et(t,r){Ts++,$u[Ts]=t.current,t.current=r}var jr={},zt=Ur(jr),tn=Ur(!1),ki=jr;function Is(t,r){var o=t.type.contextTypes;if(!o)return jr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function nn(t){return t=t.childContextTypes,t!=null}function Wa(){it(tn),it(zt)}function Uf(t,r,o){if(zt.current!==jr)throw Error(n(168));et(zt,r),et(tn,o)}function jf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Ve(t)||"Unknown",h));return oe({},o,u)}function $a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ki=zt.current,et(zt,t),et(tn,tn.current),!0}function zf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=jf(t,r,ki),u.__reactInternalMemoizedMergedChildContext=t,it(tn),it(zt),et(zt,t)):it(tn),et(tn,o)}var yr=null,Ha=!1,Hu=!1;function Wf(t){yr===null?yr=[t]:yr.push(t)}function $y(t){Ha=!0,Wf(t)}function zr(){if(!Hu&&yr!==null){Hu=!0;var t=0,r=Le;try{var o=yr;for(Le=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}yr=null,Ha=!1}catch(h){throw yr!==null&&(yr=yr.slice(t+1)),ns(Ei,zr),h}finally{Le=r,Hu=!1}}return null}var Ss=[],As=0,qa=null,Qa=0,Tn=[],In=0,Ni=null,_r=1,vr="";function Vi(t,r){Ss[As++]=Qa,Ss[As++]=qa,qa=t,Qa=r}function $f(t,r,o){Tn[In++]=_r,Tn[In++]=vr,Tn[In++]=Ni,Ni=t;var u=_r;t=vr;var h=32-Gt(u)-1;u&=~(1<<h),o+=1;var p=32-Gt(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,_r=1<<32-Gt(r)+h|o<<h|u,vr=p+t}else _r=1<<p|o<<h|u,vr=t}function qu(t){t.return!==null&&(Vi(t,1),$f(t,1,0))}function Qu(t){for(;t===qa;)qa=Ss[--As],Ss[As]=null,Qa=Ss[--As],Ss[As]=null;for(;t===Ni;)Ni=Tn[--In],Tn[In]=null,vr=Tn[--In],Tn[In]=null,_r=Tn[--In],Tn[In]=null}var pn=null,mn=null,at=!1,Un=null;function Hf(t,r){var o=Pn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function qf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,pn=t,mn=br(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,pn=t,mn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ni!==null?{id:_r,overflow:vr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Pn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,pn=t,mn=null,!0):!1;default:return!1}}function Ku(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gu(t){if(at){var r=mn;if(r){var o=r;if(!qf(t,r)){if(Ku(t))throw Error(n(418));r=br(o.nextSibling);var u=pn;r&&qf(t,r)?Hf(u,o):(t.flags=t.flags&-4097|2,at=!1,pn=t)}}else{if(Ku(t))throw Error(n(418));t.flags=t.flags&-4097|2,at=!1,pn=t}}}function Qf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function Ka(t){if(t!==pn)return!1;if(!at)return Qf(t),at=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Uu(t.type,t.memoizedProps)),r&&(r=mn)){if(Ku(t))throw Kf(),Error(n(418));for(;r;)Hf(t,r),r=br(r.nextSibling)}if(Qf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){mn=br(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}mn=null}}else mn=pn?br(t.stateNode.nextSibling):null;return!0}function Kf(){for(var t=mn;t;)t=br(t.nextSibling)}function Cs(){mn=pn=null,at=!1}function Xu(t){Un===null?Un=[t]:Un.push(t)}var Hy=De.ReactCurrentBatchConfig;function Vo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=h.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ga(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Gf(t){var r=t._init;return r(t._payload)}function Xf(t){function r(M,N){if(t){var L=M.deletions;L===null?(M.deletions=[N],M.flags|=16):L.push(N)}}function o(M,N){if(!t)return null;for(;N!==null;)r(M,N),N=N.sibling;return null}function u(M,N){for(M=new Map;N!==null;)N.key!==null?M.set(N.key,N):M.set(N.index,N),N=N.sibling;return M}function h(M,N){return M=Xr(M,N),M.index=0,M.sibling=null,M}function p(M,N,L){return M.index=L,t?(L=M.alternate,L!==null?(L=L.index,L<N?(M.flags|=2,N):L):(M.flags|=2,N)):(M.flags|=1048576,N)}function _(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,N,L,ee){return N===null||N.tag!==6?(N=jc(L,M.mode,ee),N.return=M,N):(N=h(N,L),N.return=M,N)}function P(M,N,L,ee){var me=L.type;return me===V?Q(M,N,L.props.children,ee,L.key):N!==null&&(N.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===tt&&Gf(me)===N.type)?(ee=h(N,L.props),ee.ref=Vo(M,N,L),ee.return=M,ee):(ee=vl(L.type,L.key,L.props,null,M.mode,ee),ee.ref=Vo(M,N,L),ee.return=M,ee)}function U(M,N,L,ee){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=zc(L,M.mode,ee),N.return=M,N):(N=h(N,L.children||[]),N.return=M,N)}function Q(M,N,L,ee,me){return N===null||N.tag!==7?(N=bi(L,M.mode,ee,me),N.return=M,N):(N=h(N,L),N.return=M,N)}function X(M,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return N=jc(""+N,M.mode,L),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ut:return L=vl(N.type,N.key,N.props,null,M.mode,L),L.ref=Vo(M,null,N),L.return=M,L;case Be:return N=zc(N,M.mode,L),N.return=M,N;case tt:var ee=N._init;return X(M,ee(N._payload),L)}if(se(N)||ge(N))return N=bi(N,M.mode,L,null),N.return=M,N;Ga(M,N)}return null}function q(M,N,L,ee){var me=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return me!==null?null:T(M,N,""+L,ee);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ut:return L.key===me?P(M,N,L,ee):null;case Be:return L.key===me?U(M,N,L,ee):null;case tt:return me=L._init,q(M,N,me(L._payload),ee)}if(se(L)||ge(L))return me!==null?null:Q(M,N,L,ee,null);Ga(M,L)}return null}function ae(M,N,L,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return M=M.get(L)||null,T(N,M,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ut:return M=M.get(ee.key===null?L:ee.key)||null,P(N,M,ee,me);case Be:return M=M.get(ee.key===null?L:ee.key)||null,U(N,M,ee,me);case tt:var _e=ee._init;return ae(M,N,L,_e(ee._payload),me)}if(se(ee)||ge(ee))return M=M.get(L)||null,Q(N,M,ee,me,null);Ga(N,ee)}return null}function fe(M,N,L,ee){for(var me=null,_e=null,ve=N,Ae=N=0,Dt=null;ve!==null&&Ae<L.length;Ae++){ve.index>Ae?(Dt=ve,ve=null):Dt=ve.sibling;var He=q(M,ve,L[Ae],ee);if(He===null){ve===null&&(ve=Dt);break}t&&ve&&He.alternate===null&&r(M,ve),N=p(He,N,Ae),_e===null?me=He:_e.sibling=He,_e=He,ve=Dt}if(Ae===L.length)return o(M,ve),at&&Vi(M,Ae),me;if(ve===null){for(;Ae<L.length;Ae++)ve=X(M,L[Ae],ee),ve!==null&&(N=p(ve,N,Ae),_e===null?me=ve:_e.sibling=ve,_e=ve);return at&&Vi(M,Ae),me}for(ve=u(M,ve);Ae<L.length;Ae++)Dt=ae(ve,M,Ae,L[Ae],ee),Dt!==null&&(t&&Dt.alternate!==null&&ve.delete(Dt.key===null?Ae:Dt.key),N=p(Dt,N,Ae),_e===null?me=Dt:_e.sibling=Dt,_e=Dt);return t&&ve.forEach(function(Yr){return r(M,Yr)}),at&&Vi(M,Ae),me}function pe(M,N,L,ee){var me=ge(L);if(typeof me!="function")throw Error(n(150));if(L=me.call(L),L==null)throw Error(n(151));for(var _e=me=null,ve=N,Ae=N=0,Dt=null,He=L.next();ve!==null&&!He.done;Ae++,He=L.next()){ve.index>Ae?(Dt=ve,ve=null):Dt=ve.sibling;var Yr=q(M,ve,He.value,ee);if(Yr===null){ve===null&&(ve=Dt);break}t&&ve&&Yr.alternate===null&&r(M,ve),N=p(Yr,N,Ae),_e===null?me=Yr:_e.sibling=Yr,_e=Yr,ve=Dt}if(He.done)return o(M,ve),at&&Vi(M,Ae),me;if(ve===null){for(;!He.done;Ae++,He=L.next())He=X(M,He.value,ee),He!==null&&(N=p(He,N,Ae),_e===null?me=He:_e.sibling=He,_e=He);return at&&Vi(M,Ae),me}for(ve=u(M,ve);!He.done;Ae++,He=L.next())He=ae(ve,M,Ae,He.value,ee),He!==null&&(t&&He.alternate!==null&&ve.delete(He.key===null?Ae:He.key),N=p(He,N,Ae),_e===null?me=He:_e.sibling=He,_e=He);return t&&ve.forEach(function(S_){return r(M,S_)}),at&&Vi(M,Ae),me}function gt(M,N,L,ee){if(typeof L=="object"&&L!==null&&L.type===V&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case ut:e:{for(var me=L.key,_e=N;_e!==null;){if(_e.key===me){if(me=L.type,me===V){if(_e.tag===7){o(M,_e.sibling),N=h(_e,L.props.children),N.return=M,M=N;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===tt&&Gf(me)===_e.type){o(M,_e.sibling),N=h(_e,L.props),N.ref=Vo(M,_e,L),N.return=M,M=N;break e}o(M,_e);break}else r(M,_e);_e=_e.sibling}L.type===V?(N=bi(L.props.children,M.mode,ee,L.key),N.return=M,M=N):(ee=vl(L.type,L.key,L.props,null,M.mode,ee),ee.ref=Vo(M,N,L),ee.return=M,M=ee)}return _(M);case Be:e:{for(_e=L.key;N!==null;){if(N.key===_e)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){o(M,N.sibling),N=h(N,L.children||[]),N.return=M,M=N;break e}else{o(M,N);break}else r(M,N);N=N.sibling}N=zc(L,M.mode,ee),N.return=M,M=N}return _(M);case tt:return _e=L._init,gt(M,N,_e(L._payload),ee)}if(se(L))return fe(M,N,L,ee);if(ge(L))return pe(M,N,L,ee);Ga(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,N!==null&&N.tag===6?(o(M,N.sibling),N=h(N,L),N.return=M,M=N):(o(M,N),N=jc(L,M.mode,ee),N.return=M,M=N),_(M)):o(M,N)}return gt}var Ps=Xf(!0),Yf=Xf(!1),Xa=Ur(null),Ya=null,Rs=null,Yu=null;function Ju(){Yu=Rs=Ya=null}function Zu(t){var r=Xa.current;it(Xa),t._currentValue=r}function ec(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ks(t,r){Ya=t,Yu=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(rn=!0),t.firstContext=null)}function Sn(t){var r=t._currentValue;if(Yu!==t)if(t={context:t,memoizedValue:r,next:null},Rs===null){if(Ya===null)throw Error(n(308));Rs=t,Ya.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return r}var xi=null;function tc(t){xi===null?xi=[t]:xi.push(t)}function Jf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,tc(r)):(o.next=h.next,h.next=o),r.interleaved=o,Er(t,u)}function Er(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Wr=!1;function nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function $r(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,Er(t,o)}return h=u.interleaved,h===null?(r.next=r,tc(u)):(r.next=h.next,h.next=r),u.interleaved=r,Er(t,o)}function Ja(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Dr(t,o)}}function ed(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Za(t,r,o,u){var h=t.updateQueue;Wr=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var P=T,U=P.next;P.next=null,_===null?p=U:_.next=U,_=P;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=U:T.next=U,Q.lastBaseUpdate=P))}if(p!==null){var X=h.baseState;_=0,Q=U=P=null,T=p;do{var q=T.lane,ae=T.eventTime;if((u&q)===q){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var fe=t,pe=T;switch(q=r,ae=o,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){X=fe.call(ae,X,q);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,q=typeof fe=="function"?fe.call(ae,X,q):fe,q==null)break e;X=oe({},X,q);break e;case 2:Wr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else ae={eventTime:ae,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(U=Q=ae,P=X):Q=Q.next=ae,_|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(Q===null&&(P=X),h.baseState=P,h.firstBaseUpdate=U,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Oi|=_,t.lanes=_,t.memoizedState=X}}function td(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var xo={},tr=Ur(xo),Do=Ur(xo),Fo=Ur(xo);function Di(t){if(t===xo)throw Error(n(174));return t}function rc(t,r){switch(et(Fo,r),et(Do,t),et(tr,xo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Tt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Tt(r,t)}it(tr),et(tr,r)}function Ns(){it(tr),it(Do),it(Fo)}function nd(t){Di(Fo.current);var r=Di(tr.current),o=Tt(r,t.type);r!==o&&(et(Do,t),et(tr,o))}function ic(t){Do.current===t&&(it(tr),it(Do))}var ct=Ur(0);function el(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var sc=[];function oc(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var tl=De.ReactCurrentDispatcher,ac=De.ReactCurrentBatchConfig,Fi=0,ht=null,St=null,Vt=null,nl=!1,Oo=!1,Mo=0,qy=0;function Wt(){throw Error(n(321))}function lc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!bn(t[o],r[o]))return!1;return!0}function uc(t,r,o,u,h,p){if(Fi=p,ht=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,tl.current=t===null||t.memoizedState===null?Xy:Yy,t=o(u,h),Oo){p=0;do{if(Oo=!1,Mo=0,25<=p)throw Error(n(301));p+=1,Vt=St=null,r.updateQueue=null,tl.current=Jy,t=o(u,h)}while(Oo)}if(tl.current=sl,r=St!==null&&St.next!==null,Fi=0,Vt=St=ht=null,nl=!1,r)throw Error(n(300));return t}function cc(){var t=Mo!==0;return Mo=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function An(){if(St===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var r=Vt===null?ht.memoizedState:Vt.next;if(r!==null)Vt=r,St=t;else{if(t===null)throw Error(n(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Vt===null?ht.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function Lo(t,r){return typeof r=="function"?r(t):r}function hc(t){var r=An(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=St,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=_=null,P=null,U=p;do{var Q=U.lane;if((Fi&Q)===Q)P!==null&&(P=P.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var X={lane:Q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};P===null?(T=P=X,_=u):P=P.next=X,ht.lanes|=Q,Oi|=Q}U=U.next}while(U!==null&&U!==p);P===null?_=u:P.next=T,bn(u,r.memoizedState)||(rn=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=P,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,ht.lanes|=p,Oi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function fc(t){var r=An(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);bn(p,r.memoizedState)||(rn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function rd(){}function id(t,r){var o=ht,u=An(),h=r(),p=!bn(u.memoizedState,h);if(p&&(u.memoizedState=h,rn=!0),u=u.queue,dc(ad.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Vt!==null&&Vt.memoizedState.tag&1){if(o.flags|=2048,Bo(9,od.bind(null,o,u,h,r),void 0,null),xt===null)throw Error(n(349));(Fi&30)!==0||sd(o,r,h)}return h}function sd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=ht.updateQueue,r===null?(r={lastEffect:null,stores:null},ht.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function od(t,r,o,u){r.value=o,r.getSnapshot=u,ld(r)&&ud(t)}function ad(t,r,o){return o(function(){ld(r)&&ud(t)})}function ld(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!bn(t,o)}catch{return!0}}function ud(t){var r=Er(t,1);r!==null&&$n(r,t,1,-1)}function cd(t){var r=nr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},r.queue=t,t=t.dispatch=Gy.bind(null,ht,t),[r.memoizedState,t]}function Bo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=ht.updateQueue,r===null?(r={lastEffect:null,stores:null},ht.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function hd(){return An().memoizedState}function rl(t,r,o,u){var h=nr();ht.flags|=t,h.memoizedState=Bo(1|r,o,void 0,u===void 0?null:u)}function il(t,r,o,u){var h=An();u=u===void 0?null:u;var p=void 0;if(St!==null){var _=St.memoizedState;if(p=_.destroy,u!==null&&lc(u,_.deps)){h.memoizedState=Bo(r,o,p,u);return}}ht.flags|=t,h.memoizedState=Bo(1|r,o,p,u)}function fd(t,r){return rl(8390656,8,t,r)}function dc(t,r){return il(2048,8,t,r)}function dd(t,r){return il(4,2,t,r)}function pd(t,r){return il(4,4,t,r)}function md(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function gd(t,r,o){return o=o!=null?o.concat([t]):null,il(4,4,md.bind(null,r,t),o)}function pc(){}function yd(t,r){var o=An();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&lc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function _d(t,r){var o=An();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&lc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function vd(t,r,o){return(Fi&21)===0?(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=o):(bn(o,r)||(o=Ii(),ht.lanes|=o,Oi|=o,t.baseState=!0),r)}function Qy(t,r){var o=Le;Le=o!==0&&4>o?o:4,t(!0);var u=ac.transition;ac.transition={};try{t(!1),r()}finally{Le=o,ac.transition=u}}function Ed(){return An().memoizedState}function Ky(t,r,o){var u=Kr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},wd(t))Td(r,o);else if(o=Jf(t,r,o,u),o!==null){var h=Jt();$n(o,t,u,h),Id(o,r,u)}}function Gy(t,r,o){var u=Kr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(wd(t))Td(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(h.hasEagerState=!0,h.eagerState=T,bn(T,_)){var P=r.interleaved;P===null?(h.next=h,tc(r)):(h.next=P.next,P.next=h),r.interleaved=h;return}}catch{}finally{}o=Jf(t,r,h,u),o!==null&&(h=Jt(),$n(o,t,u,h),Id(o,r,u))}}function wd(t){var r=t.alternate;return t===ht||r!==null&&r===ht}function Td(t,r){Oo=nl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Id(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Dr(t,o)}}var sl={readContext:Sn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Xy={readContext:Sn,useCallback:function(t,r){return nr().memoizedState=[t,r===void 0?null:r],t},useContext:Sn,useEffect:fd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,rl(4194308,4,md.bind(null,r,t),o)},useLayoutEffect:function(t,r){return rl(4194308,4,t,r)},useInsertionEffect:function(t,r){return rl(4,2,t,r)},useMemo:function(t,r){var o=nr();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=nr();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Ky.bind(null,ht,t),[u.memoizedState,t]},useRef:function(t){var r=nr();return t={current:t},r.memoizedState=t},useState:cd,useDebugValue:pc,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=cd(!1),r=t[0];return t=Qy.bind(null,t[1]),nr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=ht,h=nr();if(at){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),xt===null)throw Error(n(349));(Fi&30)!==0||sd(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,fd(ad.bind(null,u,p,t),[t]),u.flags|=2048,Bo(9,od.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=nr(),r=xt.identifierPrefix;if(at){var o=vr,u=_r;o=(u&~(1<<32-Gt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Mo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=qy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Yy={readContext:Sn,useCallback:yd,useContext:Sn,useEffect:dc,useImperativeHandle:gd,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:_d,useReducer:hc,useRef:hd,useState:function(){return hc(Lo)},useDebugValue:pc,useDeferredValue:function(t){var r=An();return vd(r,St.memoizedState,t)},useTransition:function(){var t=hc(Lo)[0],r=An().memoizedState;return[t,r]},useMutableSource:rd,useSyncExternalStore:id,useId:Ed,unstable_isNewReconciler:!1},Jy={readContext:Sn,useCallback:yd,useContext:Sn,useEffect:dc,useImperativeHandle:gd,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:_d,useReducer:fc,useRef:hd,useState:function(){return fc(Lo)},useDebugValue:pc,useDeferredValue:function(t){var r=An();return St===null?r.memoizedState=t:vd(r,St.memoizedState,t)},useTransition:function(){var t=fc(Lo)[0],r=An().memoizedState;return[t,r]},useMutableSource:rd,useSyncExternalStore:id,useId:Ed,unstable_isNewReconciler:!1};function jn(t,r){if(t&&t.defaultProps){r=oe({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function mc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:oe({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var ol={isMounted:function(t){return(t=t._reactInternals)?xn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Jt(),h=Kr(t),p=wr(u,h);p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&($n(r,t,h,u),Ja(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Jt(),h=Kr(t),p=wr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=$r(t,p,h),r!==null&&($n(r,t,h,u),Ja(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Jt(),u=Kr(t),h=wr(o,u);h.tag=2,r!=null&&(h.callback=r),r=$r(t,h,u),r!==null&&($n(r,t,u,o),Ja(r,t,u))}};function Sd(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!So(o,u)||!So(h,p):!0}function Ad(t,r,o){var u=!1,h=jr,p=r.contextType;return typeof p=="object"&&p!==null?p=Sn(p):(h=nn(r)?ki:zt.current,u=r.contextTypes,p=(u=u!=null)?Is(t,h):jr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ol,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Cd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&ol.enqueueReplaceState(r,r.state,null)}function gc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},nc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=Sn(p):(p=nn(r)?ki:zt.current,h.context=Is(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(mc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&ol.enqueueReplaceState(h,h.state,null),Za(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,r){try{var o="",u=r;do o+=Ne(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function yc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function _c(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Zy=typeof WeakMap=="function"?WeakMap:Map;function Pd(t,r,o){o=wr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){dl||(dl=!0,Dc=u),_c(t,r)},o}function Rd(t,r,o){o=wr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){_c(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){_c(t,r),typeof u!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function kd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Zy;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=d_.bind(null,t,r,o),r.then(t,t))}function Nd(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Vd(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=wr(-1,1),r.tag=2,$r(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var e_=De.ReactCurrentOwner,rn=!1;function Yt(t,r,o,u){r.child=t===null?Yf(r,null,o,u):Ps(r,t.child,o,u)}function xd(t,r,o,u,h){o=o.render;var p=r.ref;return ks(r,h),u=uc(t,r,o,u,p,h),o=cc(),t!==null&&!rn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Tr(t,r,h)):(at&&o&&qu(r),r.flags|=1,Yt(t,r,u,h),r.child)}function Dd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Uc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Fd(t,r,p,u,h)):(t=vl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:So,o(_,u)&&t.ref===r.ref)return Tr(t,r,h)}return r.flags|=1,t=Xr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Fd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(So(p,u)&&t.ref===r.ref)if(rn=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(rn=!0);else return r.lanes=t.lanes,Tr(t,r,h)}return vc(t,r,o,u,h)}function Od(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Ds,gn),gn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,et(Ds,gn),gn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,et(Ds,gn),gn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,et(Ds,gn),gn|=u;return Yt(t,r,h,o),r.child}function Md(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function vc(t,r,o,u,h){var p=nn(o)?ki:zt.current;return p=Is(r,p),ks(r,h),o=uc(t,r,o,u,p,h),u=cc(),t!==null&&!rn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Tr(t,r,h)):(at&&u&&qu(r),r.flags|=1,Yt(t,r,o,h),r.child)}function Ld(t,r,o,u,h){if(nn(o)){var p=!0;$a(r)}else p=!1;if(ks(r,h),r.stateNode===null)ll(t,r),Ad(r,o,u),gc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var P=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=Sn(U):(U=nn(o)?ki:zt.current,U=Is(r,U));var Q=o.getDerivedStateFromProps,X=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||P!==U)&&Cd(r,_,u,U),Wr=!1;var q=r.memoizedState;_.state=q,Za(r,u,_,h),P=r.memoizedState,T!==u||q!==P||tn.current||Wr?(typeof Q=="function"&&(mc(r,o,Q,u),P=r.memoizedState),(T=Wr||Sd(r,o,T,u,q,P,U))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),_.props=u,_.state=P,_.context=U,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Zf(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:jn(r.type,T),_.props=U,X=r.pendingProps,q=_.context,P=o.contextType,typeof P=="object"&&P!==null?P=Sn(P):(P=nn(o)?ki:zt.current,P=Is(r,P));var ae=o.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==X||q!==P)&&Cd(r,_,u,P),Wr=!1,q=r.memoizedState,_.state=q,Za(r,u,_,h);var fe=r.memoizedState;T!==X||q!==fe||tn.current||Wr?(typeof ae=="function"&&(mc(r,o,ae,u),fe=r.memoizedState),(U=Wr||Sd(r,o,U,u,q,fe,P)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,fe,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,fe,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=fe),_.props=u,_.state=fe,_.context=P,u=U):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return Ec(t,r,o,u,p,h)}function Ec(t,r,o,u,h,p){Md(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&zf(r,o,!1),Tr(t,r,p);u=r.stateNode,e_.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Ps(r,t.child,null,p),r.child=Ps(r,null,T,p)):Yt(t,r,T,p),r.memoizedState=u.state,h&&zf(r,o,!0),r.child}function Bd(t){var r=t.stateNode;r.pendingContext?Uf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Uf(t,r.context,!1),rc(t,r.containerInfo)}function bd(t,r,o,u,h){return Cs(),Xu(h),r.flags|=256,Yt(t,r,o,u),r.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function Tc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ud(t,r,o){var u=r.pendingProps,h=ct.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),et(ct,h&1),t===null)return Gu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=El(_,u,0,null),t=bi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Tc(o),r.memoizedState=wc,t):Ic(r,_));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return t_(t,r,_,u,T,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,T=h.sibling;var P={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=P,r.deletions=null):(u=Xr(h,P),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Xr(T,p):(p=bi(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?Tc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=wc,u}return p=t.child,t=p.sibling,u=Xr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Ic(t,r){return r=El({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function al(t,r,o,u){return u!==null&&Xu(u),Ps(r,t.child,null,o),t=Ic(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function t_(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=yc(Error(n(422))),al(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=El({mode:"visible",children:u.children},h,0,null),p=bi(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&Ps(r,t.child,null,_),r.child.memoizedState=Tc(_),r.memoizedState=wc,p);if((r.mode&1)===0)return al(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=yc(p,u,void 0),al(t,r,_,u)}if(T=(_&t.childLanes)!==0,rn||T){if(u=xt,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Er(t,h),$n(u,t,h,-1))}return bc(),u=yc(Error(n(421))),al(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=p_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,mn=br(h.nextSibling),pn=r,at=!0,Un=null,t!==null&&(Tn[In++]=_r,Tn[In++]=vr,Tn[In++]=Ni,_r=t.id,vr=t.overflow,Ni=r),r=Ic(r,u.children),r.flags|=4096,r)}function jd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),ec(t.return,r,o)}function Sc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function zd(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Yt(t,r,u.children,o),u=ct.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jd(t,o,r);else if(t.tag===19)jd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(et(ct,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&el(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Sc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&el(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Sc(r,!0,o,null,p);break;case"together":Sc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ll(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Tr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Oi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Xr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Xr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function n_(t,r,o){switch(r.tag){case 3:Bd(r),Cs();break;case 5:nd(r);break;case 1:nn(r.type)&&$a(r);break;case 4:rc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;et(Xa,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(et(ct,ct.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Ud(t,r,o):(et(ct,ct.current&1),t=Tr(t,r,o),t!==null?t.sibling:null);et(ct,ct.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return zd(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(ct,ct.current),u)break;return null;case 22:case 23:return r.lanes=0,Od(t,r,o)}return Tr(t,r,o)}var Wd,Ac,$d,Hd;Wd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Ac=function(){},$d=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Di(tr.current);var p=null;switch(o){case"input":h=j(t,h),u=j(t,u),p=[];break;case"select":h=oe({},h,{value:void 0}),u=oe({},u,{value:void 0}),p=[];break;case"textarea":h=Se(t,h),u=Se(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ja)}io(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var T=h[U];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var P=u[U];if(T=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&P!==T&&(P!=null||T!=null))if(U==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in P)P.hasOwnProperty(_)&&T[_]!==P[_]&&(o||(o={}),o[_]=P[_])}else o||(p||(p=[]),p.push(U,o)),o=P;else U==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(p=p||[]).push(U,P)):U==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(U,""+P):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(P!=null&&U==="onScroll"&&rt("scroll",t),p||T===P||(p=[])):(p=p||[]).push(U,P))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Hd=function(t,r,o,u){o!==u&&(r.flags|=4)};function bo(t,r){if(!at)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function $t(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function r_(t,r,o){var u=r.pendingProps;switch(Qu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return nn(r.type)&&Wa(),$t(r),null;case 3:return u=r.stateNode,Ns(),it(tn),it(zt),oc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ka(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Un!==null&&(Mc(Un),Un=null))),Ac(t,r),$t(r),null;case 5:ic(r);var h=Di(Fo.current);if(o=r.type,t!==null&&r.stateNode!=null)$d(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return $t(r),null}if(t=Di(tr.current),Ka(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[er]=r,u[ko]=p,t=(r.mode&1)!==0,o){case"dialog":rt("cancel",u),rt("close",u);break;case"iframe":case"object":case"embed":rt("load",u);break;case"video":case"audio":for(h=0;h<Co.length;h++)rt(Co[h],u);break;case"source":rt("error",u);break;case"img":case"image":case"link":rt("error",u),rt("load",u);break;case"details":rt("toggle",u);break;case"input":b(u,p),rt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},rt("invalid",u);break;case"textarea":nt(u,p),rt("invalid",u)}io(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&rt("scroll",u)}switch(o){case"input":kn(u),G(u,p,!0);break;case"textarea":kn(u),kt(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ja)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ye(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[er]=r,t[ko]=u,Wd(t,r,!1,!1),r.stateNode=t;e:{switch(_=so(o,u),o){case"dialog":rt("cancel",t),rt("close",t),h=u;break;case"iframe":case"object":case"embed":rt("load",t),h=u;break;case"video":case"audio":for(h=0;h<Co.length;h++)rt(Co[h],t);h=u;break;case"source":rt("error",t),h=u;break;case"img":case"image":case"link":rt("error",t),rt("load",t),h=u;break;case"details":rt("toggle",t),h=u;break;case"input":b(t,u),h=j(t,u),rt("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=oe({},u,{value:void 0}),rt("invalid",t);break;case"textarea":nt(t,u),h=Se(t,u),rt("invalid",t);break;default:h=u}io(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var P=T[p];p==="style"?no(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&eo(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Rr(t,P):typeof P=="number"&&Rr(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&rt("scroll",t):P!=null&&Ie(t,p,P,_))}switch(o){case"input":kn(t),G(t,u,!1);break;case"textarea":kn(t),kt(t);break;case"option":u.value!=null&&t.setAttribute("value",""+We(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?he(t,!!u.multiple,p,!1):u.defaultValue!=null&&he(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ja)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return $t(r),null;case 6:if(t&&r.stateNode!=null)Hd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Di(Fo.current),Di(tr.current),Ka(r)){if(u=r.stateNode,o=r.memoizedProps,u[er]=r,(p=u.nodeValue!==o)&&(t=pn,t!==null))switch(t.tag){case 3:Ua(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[er]=r,r.stateNode=u}return $t(r),null;case 13:if(it(ct),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&mn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Kf(),Cs(),r.flags|=98560,p=!1;else if(p=Ka(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[er]=r}else Cs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),p=!1}else Un!==null&&(Mc(Un),Un=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(ct.current&1)!==0?At===0&&(At=3):bc())),r.updateQueue!==null&&(r.flags|=4),$t(r),null);case 4:return Ns(),Ac(t,r),t===null&&Po(r.stateNode.containerInfo),$t(r),null;case 10:return Zu(r.type._context),$t(r),null;case 17:return nn(r.type)&&Wa(),$t(r),null;case 19:if(it(ct),p=r.memoizedState,p===null)return $t(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)bo(p,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=el(t),_!==null){for(r.flags|=128,bo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return et(ct,ct.current&1|2),r.child}t=t.sibling}p.tail!==null&&Ze()>Fs&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304)}else{if(!u)if(t=el(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),bo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!at)return $t(r),null}else 2*Ze()-p.renderingStartTime>Fs&&o!==1073741824&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ze(),r.sibling=null,o=ct.current,et(ct,u?o&1|2:o&1),r):($t(r),null);case 22:case 23:return Bc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(gn&1073741824)!==0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function i_(t,r){switch(Qu(r),r.tag){case 1:return nn(r.type)&&Wa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ns(),it(tn),it(zt),oc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ic(r),null;case 13:if(it(ct),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Cs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return it(ct),null;case 4:return Ns(),null;case 10:return Zu(r.type._context),null;case 22:case 23:return Bc(),null;case 24:return null;default:return null}}var ul=!1,Ht=!1,s_=typeof WeakSet=="function"?WeakSet:Set,ce=null;function xs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){dt(t,r,u)}else o.current=null}function Cc(t,r,o){try{o()}catch(u){dt(t,r,u)}}var qd=!1;function o_(t,r){if(Bu=Mr,t=Sf(),Nu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,P=-1,U=0,Q=0,X=t,q=null;t:for(;;){for(var ae;X!==o||h!==0&&X.nodeType!==3||(T=_+h),X!==p||u!==0&&X.nodeType!==3||(P=_+u),X.nodeType===3&&(_+=X.nodeValue.length),(ae=X.firstChild)!==null;)q=X,X=ae;for(;;){if(X===t)break t;if(q===o&&++U===h&&(T=_),q===p&&++Q===u&&(P=_),(ae=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=ae}o=T===-1||P===-1?null:{start:T,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(bu={focusedElem:t,selectionRange:o},Mr=!1,ce=r;ce!==null;)if(r=ce,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ce=t;else for(;ce!==null;){r=ce;try{var fe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,gt=fe.memoizedState,M=r.stateNode,N=M.getSnapshotBeforeUpdate(r.elementType===r.type?pe:jn(r.type,pe),gt);M.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ee){dt(r,r.return,ee)}if(t=r.sibling,t!==null){t.return=r.return,ce=t;break}ce=r.return}return fe=qd,qd=!1,fe}function Uo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Cc(r,o,p)}h=h.next}while(h!==u)}}function cl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Pc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Qd(t){var r=t.alternate;r!==null&&(t.alternate=null,Qd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[er],delete r[ko],delete r[Wu],delete r[zy],delete r[Wy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kd(t){return t.tag===5||t.tag===3||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ja));else if(u!==4&&(t=t.child,t!==null))for(Rc(t,r,o),t=t.sibling;t!==null;)Rc(t,r,o),t=t.sibling}function kc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(kc(t,r,o),t=t.sibling;t!==null;)kc(t,r,o),t=t.sibling}var Lt=null,zn=!1;function Hr(t,r,o){for(o=o.child;o!==null;)Xd(t,r,o),o=o.sibling}function Xd(t,r,o){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(wi,o)}catch{}switch(o.tag){case 5:Ht||xs(o,r);case 6:var u=Lt,h=zn;Lt=null,Hr(t,r,o),Lt=u,zn=h,Lt!==null&&(zn?(t=Lt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Lt.removeChild(o.stateNode));break;case 18:Lt!==null&&(zn?(t=Lt,o=o.stateNode,t.nodeType===8?zu(t.parentNode,o):t.nodeType===1&&zu(t,o),Ln(t)):zu(Lt,o.stateNode));break;case 4:u=Lt,h=zn,Lt=o.stateNode.containerInfo,zn=!0,Hr(t,r,o),Lt=u,zn=h;break;case 0:case 11:case 14:case 15:if(!Ht&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Cc(o,r,_),h=h.next}while(h!==u)}Hr(t,r,o);break;case 1:if(!Ht&&(xs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){dt(o,r,T)}Hr(t,r,o);break;case 21:Hr(t,r,o);break;case 22:o.mode&1?(Ht=(u=Ht)||o.memoizedState!==null,Hr(t,r,o),Ht=u):Hr(t,r,o);break;default:Hr(t,r,o)}}function Yd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new s_),r.forEach(function(u){var h=m_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Wn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:Lt=T.stateNode,zn=!1;break e;case 3:Lt=T.stateNode.containerInfo,zn=!0;break e;case 4:Lt=T.stateNode.containerInfo,zn=!0;break e}T=T.return}if(Lt===null)throw Error(n(160));Xd(p,_,h),Lt=null,zn=!1;var P=h.alternate;P!==null&&(P.return=null),h.return=null}catch(U){dt(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jd(r,t),r=r.sibling}function Jd(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(r,t),rr(t),u&4){try{Uo(3,t,t.return),cl(3,t)}catch(pe){dt(t,t.return,pe)}try{Uo(5,t,t.return)}catch(pe){dt(t,t.return,pe)}}break;case 1:Wn(r,t),rr(t),u&512&&o!==null&&xs(o,o.return);break;case 5:if(Wn(r,t),rr(t),u&512&&o!==null&&xs(o,o.return),t.flags&32){var h=t.stateNode;try{Rr(h,"")}catch(pe){dt(t,t.return,pe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&re(h,p),so(T,_);var U=so(T,p);for(_=0;_<P.length;_+=2){var Q=P[_],X=P[_+1];Q==="style"?no(h,X):Q==="dangerouslySetInnerHTML"?eo(h,X):Q==="children"?Rr(h,X):Ie(h,Q,X,U)}switch(T){case"input":J(h,p);break;case"textarea":Xe(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?he(h,!!p.multiple,ae,!1):q!==!!p.multiple&&(p.defaultValue!=null?he(h,!!p.multiple,p.defaultValue,!0):he(h,!!p.multiple,p.multiple?[]:"",!1))}h[ko]=p}catch(pe){dt(t,t.return,pe)}}break;case 6:if(Wn(r,t),rr(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(pe){dt(t,t.return,pe)}}break;case 3:if(Wn(r,t),rr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ln(r.containerInfo)}catch(pe){dt(t,t.return,pe)}break;case 4:Wn(r,t),rr(t);break;case 13:Wn(r,t),rr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(xc=Ze())),u&4&&Yd(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Ht=(U=Ht)||Q,Wn(r,t),Ht=U):Wn(r,t),rr(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!Q&&(t.mode&1)!==0)for(ce=t,Q=t.child;Q!==null;){for(X=ce=Q;ce!==null;){switch(q=ce,ae=q.child,q.tag){case 0:case 11:case 14:case 15:Uo(4,q,q.return);break;case 1:xs(q,q.return);var fe=q.stateNode;if(typeof fe.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,fe.props=r.memoizedProps,fe.state=r.memoizedState,fe.componentWillUnmount()}catch(pe){dt(u,o,pe)}}break;case 5:xs(q,q.return);break;case 22:if(q.memoizedState!==null){tp(X);continue}}ae!==null?(ae.return=q,ce=ae):tp(X)}Q=Q.sibling}e:for(Q=null,X=t;;){if(X.tag===5){if(Q===null){Q=X;try{h=X.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=X.stateNode,P=X.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=to("display",_))}catch(pe){dt(t,t.return,pe)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=U?"":X.memoizedProps}catch(pe){dt(t,t.return,pe)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===t)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===t)break e;for(;X.sibling===null;){if(X.return===null||X.return===t)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Wn(r,t),rr(t),u&4&&Yd(t);break;case 21:break;default:Wn(r,t),rr(t)}}function rr(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Kd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Rr(h,""),u.flags&=-33);var p=Gd(t);kc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,T=Gd(t);Rc(t,T,_);break;default:throw Error(n(161))}}catch(P){dt(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function a_(t,r,o){ce=t,Zd(t)}function Zd(t,r,o){for(var u=(t.mode&1)!==0;ce!==null;){var h=ce,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||ul;if(!_){var T=h.alternate,P=T!==null&&T.memoizedState!==null||Ht;T=ul;var U=Ht;if(ul=_,(Ht=P)&&!U)for(ce=h;ce!==null;)_=ce,P=_.child,_.tag===22&&_.memoizedState!==null?np(h):P!==null?(P.return=_,ce=P):np(h);for(;p!==null;)ce=p,Zd(p),p=p.sibling;ce=h,ul=T,Ht=U}ep(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ce=p):ep(t)}}function ep(t){for(;ce!==null;){var r=ce;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ht||cl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ht)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:jn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&td(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}td(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var Q=U.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&Ln(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ht||r.flags&512&&Pc(r)}catch(q){dt(r,r.return,q)}}if(r===t){ce=null;break}if(o=r.sibling,o!==null){o.return=r.return,ce=o;break}ce=r.return}}function tp(t){for(;ce!==null;){var r=ce;if(r===t){ce=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ce=o;break}ce=r.return}}function np(t){for(;ce!==null;){var r=ce;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{cl(4,r)}catch(P){dt(r,o,P)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(P){dt(r,h,P)}}var p=r.return;try{Pc(r)}catch(P){dt(r,p,P)}break;case 5:var _=r.return;try{Pc(r)}catch(P){dt(r,_,P)}}}catch(P){dt(r,r.return,P)}if(r===t){ce=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ce=T;break}ce=r.return}}var l_=Math.ceil,hl=De.ReactCurrentDispatcher,Nc=De.ReactCurrentOwner,Cn=De.ReactCurrentBatchConfig,$e=0,xt=null,Et=null,Bt=0,gn=0,Ds=Ur(0),At=0,jo=null,Oi=0,fl=0,Vc=0,zo=null,sn=null,xc=0,Fs=1/0,Ir=null,dl=!1,Dc=null,qr=null,pl=!1,Qr=null,ml=0,Wo=0,Fc=null,gl=-1,yl=0;function Jt(){return($e&6)!==0?Ze():gl!==-1?gl:gl=Ze()}function Kr(t){return(t.mode&1)===0?1:($e&2)!==0&&Bt!==0?Bt&-Bt:Hy.transition!==null?(yl===0&&(yl=Ii()),yl):(t=Le,t!==0||(t=window.event,t=t===void 0?16:yo(t.type)),t)}function $n(t,r,o,u){if(50<Wo)throw Wo=0,Fc=null,Error(n(185));xr(t,o,u),(($e&2)===0||t!==xt)&&(t===xt&&(($e&2)===0&&(fl|=o),At===4&&Gr(t,Bt)),on(t,u),o===1&&$e===0&&(r.mode&1)===0&&(Fs=Ze()+500,Ha&&zr()))}function on(t,r){var o=t.callbackNode;hr(t,r);var u=Ti(t,t===xt?Bt:0);if(u===0)o!==null&&ho(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&ho(o),r===1)t.tag===0?$y(ip.bind(null,t)):Wf(ip.bind(null,t)),Uy(function(){($e&6)===0&&zr()}),o=null;else{switch(Fr(u)){case 1:o=Ei;break;case 4:o=kr;break;case 16:o=vn;break;case 536870912:o=ya;break;default:o=vn}o=fp(o,rp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function rp(t,r){if(gl=-1,yl=0,($e&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Os()&&t.callbackNode!==o)return null;var u=Ti(t,t===xt?Bt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=_l(t,u);else{r=u;var h=$e;$e|=2;var p=op();(xt!==t||Bt!==r)&&(Ir=null,Fs=Ze()+500,Li(t,r));do try{h_();break}catch(T){sp(t,T)}while(!0);Ju(),hl.current=p,$e=h,Et!==null?r=0:(xt=null,Bt=0,r=At)}if(r!==0){if(r===2&&(h=hn(t),h!==0&&(u=h,r=Oc(t,h))),r===1)throw o=jo,Li(t,0),Gr(t,u),on(t,Ze()),o;if(r===6)Gr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!u_(h)&&(r=_l(t,u),r===2&&(p=hn(t),p!==0&&(u=p,r=Oc(t,p))),r===1))throw o=jo,Li(t,0),Gr(t,u),on(t,Ze()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Bi(t,sn,Ir);break;case 3:if(Gr(t,u),(u&130023424)===u&&(r=xc+500-Ze(),10<r)){if(Ti(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Jt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=ju(Bi.bind(null,t,sn,Ir),r);break}Bi(t,sn,Ir);break;case 4:if(Gr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Gt(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=Ze()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*l_(u/1960))-u,10<u){t.timeoutHandle=ju(Bi.bind(null,t,sn,Ir),u);break}Bi(t,sn,Ir);break;case 5:Bi(t,sn,Ir);break;default:throw Error(n(329))}}}return on(t,Ze()),t.callbackNode===o?rp.bind(null,t):null}function Oc(t,r){var o=zo;return t.current.memoizedState.isDehydrated&&(Li(t,r).flags|=256),t=_l(t,r),t!==2&&(r=sn,sn=o,r!==null&&Mc(r)),t}function Mc(t){sn===null?sn=t:sn.push.apply(sn,t)}function u_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!bn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gr(t,r){for(r&=~Vc,r&=~fl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Gt(r),u=1<<o;t[o]=-1,r&=~u}}function ip(t){if(($e&6)!==0)throw Error(n(327));Os();var r=Ti(t,0);if((r&1)===0)return on(t,Ze()),null;var o=_l(t,r);if(t.tag!==0&&o===2){var u=hn(t);u!==0&&(r=u,o=Oc(t,u))}if(o===1)throw o=jo,Li(t,0),Gr(t,r),on(t,Ze()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Bi(t,sn,Ir),on(t,Ze()),null}function Lc(t,r){var o=$e;$e|=1;try{return t(r)}finally{$e=o,$e===0&&(Fs=Ze()+500,Ha&&zr())}}function Mi(t){Qr!==null&&Qr.tag===0&&($e&6)===0&&Os();var r=$e;$e|=1;var o=Cn.transition,u=Le;try{if(Cn.transition=null,Le=1,t)return t()}finally{Le=u,Cn.transition=o,$e=r,($e&6)===0&&zr()}}function Bc(){gn=Ds.current,it(Ds)}function Li(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,by(o)),Et!==null)for(o=Et.return;o!==null;){var u=o;switch(Qu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Wa();break;case 3:Ns(),it(tn),it(zt),oc();break;case 5:ic(u);break;case 4:Ns();break;case 13:it(ct);break;case 19:it(ct);break;case 10:Zu(u.type._context);break;case 22:case 23:Bc()}o=o.return}if(xt=t,Et=t=Xr(t.current,null),Bt=gn=r,At=0,jo=null,Vc=fl=Oi=0,sn=zo=null,xi!==null){for(r=0;r<xi.length;r++)if(o=xi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}xi=null}return t}function sp(t,r){do{var o=Et;try{if(Ju(),tl.current=sl,nl){for(var u=ht.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}nl=!1}if(Fi=0,Vt=St=ht=null,Oo=!1,Mo=0,Nc.current=null,o===null||o.return===null){At=1,jo=r,Et=null;break}e:{var p=t,_=o.return,T=o,P=r;if(r=Bt,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var U=P,Q=T,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=Nd(_);if(ae!==null){ae.flags&=-257,Vd(ae,_,T,p,r),ae.mode&1&&kd(p,U,r),r=ae,P=U;var fe=r.updateQueue;if(fe===null){var pe=new Set;pe.add(P),r.updateQueue=pe}else fe.add(P);break e}else{if((r&1)===0){kd(p,U,r),bc();break e}P=Error(n(426))}}else if(at&&T.mode&1){var gt=Nd(_);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),Vd(gt,_,T,p,r),Xu(Vs(P,T));break e}}p=P=Vs(P,T),At!==4&&(At=2),zo===null?zo=[p]:zo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=Pd(p,P,r);ed(p,M);break e;case 1:T=P;var N=p.type,L=p.stateNode;if((p.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(qr===null||!qr.has(L)))){p.flags|=65536,r&=-r,p.lanes|=r;var ee=Rd(p,T,r);ed(p,ee);break e}}p=p.return}while(p!==null)}lp(o)}catch(me){r=me,Et===o&&o!==null&&(Et=o=o.return);continue}break}while(!0)}function op(){var t=hl.current;return hl.current=sl,t===null?sl:t}function bc(){(At===0||At===3||At===2)&&(At=4),xt===null||(Oi&268435455)===0&&(fl&268435455)===0||Gr(xt,Bt)}function _l(t,r){var o=$e;$e|=2;var u=op();(xt!==t||Bt!==r)&&(Ir=null,Li(t,r));do try{c_();break}catch(h){sp(t,h)}while(!0);if(Ju(),$e=o,hl.current=u,Et!==null)throw Error(n(261));return xt=null,Bt=0,At}function c_(){for(;Et!==null;)ap(Et)}function h_(){for(;Et!==null&&!ma();)ap(Et)}function ap(t){var r=hp(t.alternate,t,gn);t.memoizedProps=t.pendingProps,r===null?lp(t):Et=r,Nc.current=null}function lp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=r_(o,r,gn),o!==null){Et=o;return}}else{if(o=i_(o,r),o!==null){o.flags&=32767,Et=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,Et=null;return}}if(r=r.sibling,r!==null){Et=r;return}Et=r=t}while(r!==null);At===0&&(At=5)}function Bi(t,r,o){var u=Le,h=Cn.transition;try{Cn.transition=null,Le=1,f_(t,r,o,u)}finally{Cn.transition=h,Le=u}return null}function f_(t,r,o,u){do Os();while(Qr!==null);if(($e&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Je(t,p),t===xt&&(Et=xt=null,Bt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||pl||(pl=!0,fp(vn,function(){return Os(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var _=Le;Le=1;var T=$e;$e|=4,Nc.current=null,o_(t,o),Jd(o,t),xy(bu),Mr=!!Bu,bu=Bu=null,t.current=o,a_(o),Tu(),$e=T,Le=_,Cn.transition=p}else t.current=o;if(pl&&(pl=!1,Qr=t,ml=h),p=t.pendingLanes,p===0&&(qr=null),_a(o.stateNode),on(t,Ze()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(dl)throw dl=!1,t=Dc,Dc=null,t;return(ml&1)!==0&&t.tag!==0&&Os(),p=t.pendingLanes,(p&1)!==0?t===Fc?Wo++:(Wo=0,Fc=t):Wo=0,zr(),null}function Os(){if(Qr!==null){var t=Fr(ml),r=Cn.transition,o=Le;try{if(Cn.transition=null,Le=16>t?16:t,Qr===null)var u=!1;else{if(t=Qr,Qr=null,ml=0,($e&6)!==0)throw Error(n(331));var h=$e;for($e|=4,ce=t.current;ce!==null;){var p=ce,_=p.child;if((ce.flags&16)!==0){var T=p.deletions;if(T!==null){for(var P=0;P<T.length;P++){var U=T[P];for(ce=U;ce!==null;){var Q=ce;switch(Q.tag){case 0:case 11:case 15:Uo(8,Q,p)}var X=Q.child;if(X!==null)X.return=Q,ce=X;else for(;ce!==null;){Q=ce;var q=Q.sibling,ae=Q.return;if(Qd(Q),Q===U){ce=null;break}if(q!==null){q.return=ae,ce=q;break}ce=ae}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var gt=pe.sibling;pe.sibling=null,pe=gt}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ce=_;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Uo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ce=M;break e}ce=p.return}}var N=t.current;for(ce=N;ce!==null;){_=ce;var L=_.child;if((_.subtreeFlags&2064)!==0&&L!==null)L.return=_,ce=L;else e:for(_=N;ce!==null;){if(T=ce,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:cl(9,T)}}catch(me){dt(T,T.return,me)}if(T===_){ce=null;break e}var ee=T.sibling;if(ee!==null){ee.return=T.return,ce=ee;break e}ce=T.return}}if($e=h,zr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(wi,t)}catch{}u=!0}return u}finally{Le=o,Cn.transition=r}}return!1}function up(t,r,o){r=Vs(o,r),r=Pd(t,r,1),t=$r(t,r,1),r=Jt(),t!==null&&(xr(t,1,r),on(t,r))}function dt(t,r,o){if(t.tag===3)up(t,t,o);else for(;r!==null;){if(r.tag===3){up(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qr===null||!qr.has(u))){t=Vs(o,t),t=Rd(r,t,1),r=$r(r,t,1),t=Jt(),r!==null&&(xr(r,1,t),on(r,t));break}}r=r.return}}function d_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Jt(),t.pingedLanes|=t.suspendedLanes&o,xt===t&&(Bt&o)===o&&(At===4||At===3&&(Bt&130023424)===Bt&&500>Ze()-xc?Li(t,0):Vc|=o),on(t,r)}function cp(t,r){r===0&&((t.mode&1)===0?r=1:(r=is,is<<=1,(is&130023424)===0&&(is=4194304)));var o=Jt();t=Er(t,r),t!==null&&(xr(t,r,o),on(t,o))}function p_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),cp(t,o)}function m_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),cp(t,o)}var hp;hp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||tn.current)rn=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return rn=!1,n_(t,r,o);rn=(t.flags&131072)!==0}else rn=!1,at&&(r.flags&1048576)!==0&&$f(r,Qa,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;ll(t,r),t=r.pendingProps;var h=Is(r,zt.current);ks(r,o),h=uc(null,r,u,t,h,o);var p=cc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,nn(u)?(p=!0,$a(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,nc(r),h.updater=ol,r.stateNode=h,h._reactInternals=r,gc(r,u,t,o),r=Ec(null,r,u,!0,p,o)):(r.tag=0,at&&p&&qu(r),Yt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(ll(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=y_(u),t=jn(u,t),h){case 0:r=vc(null,r,u,t,o);break e;case 1:r=Ld(null,r,u,t,o);break e;case 11:r=xd(null,r,u,t,o);break e;case 14:r=Dd(null,r,u,jn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),vc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),Ld(t,r,u,h,o);case 3:e:{if(Bd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Zf(t,r),Za(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Vs(Error(n(423)),r),r=bd(t,r,u,o,h);break e}else if(u!==h){h=Vs(Error(n(424)),r),r=bd(t,r,u,o,h);break e}else for(mn=br(r.stateNode.containerInfo.firstChild),pn=r,at=!0,Un=null,o=Yf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Cs(),u===h){r=Tr(t,r,o);break e}Yt(t,r,u,o)}r=r.child}return r;case 5:return nd(r),t===null&&Gu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Uu(u,h)?_=null:p!==null&&Uu(u,p)&&(r.flags|=32),Md(t,r),Yt(t,r,_,o),r.child;case 6:return t===null&&Gu(r),null;case 13:return Ud(t,r,o);case 4:return rc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Ps(r,null,u,o):Yt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),xd(t,r,u,h,o);case 7:return Yt(t,r,r.pendingProps,o),r.child;case 8:return Yt(t,r,r.pendingProps.children,o),r.child;case 12:return Yt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,et(Xa,u._currentValue),u._currentValue=_,p!==null)if(bn(p.value,_)){if(p.children===h.children&&!tn.current){r=Tr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var P=T.firstContext;P!==null;){if(P.context===u){if(p.tag===1){P=wr(-1,o&-o),P.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var Q=U.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),U.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),ec(p.return,o,r),T.lanes|=o;break}P=P.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),ec(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Yt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,ks(r,o),h=Sn(h),u=u(h),r.flags|=1,Yt(t,r,u,o),r.child;case 14:return u=r.type,h=jn(u,r.pendingProps),h=jn(u.type,h),Dd(t,r,u,h,o);case 15:return Fd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),ll(t,r),r.tag=1,nn(u)?(t=!0,$a(r)):t=!1,ks(r,o),Ad(r,u,h),gc(r,u,h,o),Ec(null,r,u,!0,t,o);case 19:return zd(t,r,o);case 22:return Od(t,r,o)}throw Error(n(156,r.tag))};function fp(t,r){return ns(t,r)}function g_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,r,o,u){return new g_(t,r,o,u)}function Uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function y_(t){if(typeof t=="function")return Uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===pt)return 14}return 2}function Xr(t,r){var o=t.alternate;return o===null?(o=Pn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function vl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Uc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case V:return bi(o.children,h,p,r);case w:_=8,h|=8;break;case A:return t=Pn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=Pn(13,o,r,h),t.elementType=S,t.lanes=p,t;case st:return t=Pn(19,o,r,h),t.elementType=st,t.lanes=p,t;case ze:return El(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:_=10;break e;case x:_=9;break e;case D:_=11;break e;case pt:_=14;break e;case tt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=Pn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function bi(t,r,o,u){return t=Pn(7,t,u,r),t.lanes=o,t}function El(t,r,o,u){return t=Pn(22,t,u,r),t.elementType=ze,t.lanes=o,t.stateNode={isHidden:!1},t}function jc(t,r,o){return t=Pn(6,t,null,r),t.lanes=o,t}function zc(t,r,o){return r=Pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function __(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vr(0),this.expirationTimes=Vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Wc(t,r,o,u,h,p,_,T,P){return t=new __(t,r,o,T,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Pn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(p),t}function v_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Be,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function dp(t){if(!t)return jr;t=t._reactInternals;e:{if(xn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(nn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(nn(o))return jf(t,o,r)}return r}function pp(t,r,o,u,h,p,_,T,P){return t=Wc(o,u,!0,t,h,p,_,T,P),t.context=dp(null),o=t.current,u=Jt(),h=Kr(o),p=wr(u,h),p.callback=r??null,$r(o,p,h),t.current.lanes=h,xr(t,h,u),on(t,u),t}function wl(t,r,o,u){var h=r.current,p=Jt(),_=Kr(h);return o=dp(o),r.context===null?r.context=o:r.pendingContext=o,r=wr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=$r(h,r,_),t!==null&&($n(t,h,_,p),Ja(t,h,_)),_}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function $c(t,r){mp(t,r),(t=t.alternate)&&mp(t,r)}function E_(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hc(t){this._internalRoot=t}Il.prototype.render=Hc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));wl(t,r,null,null)},Il.prototype.unmount=Hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Mi(function(){wl(null,t,null,null)}),r[gr]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ia();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Xn.length&&r!==0&&r<Xn[o].priority;o++);Xn.splice(o,0,t),o===0&&Ca(t)}};function qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yp(){}function w_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Tl(_);p.call(U)}}var _=pp(r,u,t,0,null,!1,!1,"",yp);return t._reactRootContainer=_,t[gr]=_.current,Po(t.nodeType===8?t.parentNode:t),Mi(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var U=Tl(P);T.call(U)}}var P=Wc(t,0,!1,null,null,!1,!1,"",yp);return t._reactRootContainer=P,t[gr]=P.current,Po(t.nodeType===8?t.parentNode:t),Mi(function(){wl(r,P,o,u)}),P}function Al(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var T=h;h=function(){var P=Tl(_);T.call(P)}}wl(r,_,t,h)}else _=w_(o,r,t,h,u);return Tl(_)}wa=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Nr(r.pendingLanes);o!==0&&(Dr(r,o|1),on(r,Ze()),($e&6)===0&&(Fs=Ze()+500,zr()))}break;case 13:Mi(function(){var u=Er(t,1);if(u!==null){var h=Jt();$n(u,t,1,h)}}),$c(t,1)}},ss=function(t){if(t.tag===13){var r=Er(t,134217728);if(r!==null){var o=Jt();$n(r,t,134217728,o)}$c(t,134217728)}},Ta=function(t){if(t.tag===13){var r=Kr(t),o=Er(t,r);if(o!==null){var u=Jt();$n(o,t,r,u)}$c(t,r)}},Ia=function(){return Le},Sa=function(t,r){var o=Le;try{return Le=t,r()}finally{Le=o}},Xi=function(t,r,o){switch(r){case"input":if(J(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=za(u);if(!h)throw Error(n(90));Pr(u),J(u,h)}}}break;case"textarea":Xe(t,o);break;case"select":r=o.value,r!=null&&he(t,!!o.multiple,r,!1)}},gi=Lc,ao=Mi;var T_={usingClientEntryPoint:!1,Events:[No,ws,za,Kn,oo,Lc]},$o={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I_={bundleType:$o.bundleType,version:$o.version,rendererPackageName:$o.rendererPackageName,rendererConfig:$o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:De.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=co(t),t===null?null:t.stateNode},findFiberByHostInstance:$o.findFiberByHostInstance||E_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{wi=Cl.inject(I_),cn=Cl}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_,an.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(r))throw Error(n(200));return v_(t,r,null,o)},an.createRoot=function(t,r){if(!qc(t))throw Error(n(299));var o=!1,u="",h=gp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Wc(t,1,!1,null,null,o,!1,u,h),t[gr]=r.current,Po(t.nodeType===8?t.parentNode:t),new Hc(r)},an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=co(r),t=t===null?null:t.stateNode,t},an.flushSync=function(t){return Mi(t)},an.hydrate=function(t,r,o){if(!Sl(r))throw Error(n(200));return Al(null,t,r,!0,o)},an.hydrateRoot=function(t,r,o){if(!qc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=gp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=pp(r,null,t,1,o??null,h,!1,p,_),t[gr]=r.current,Po(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Il(r)},an.render=function(t,r,o){if(!Sl(r))throw Error(n(200));return Al(null,t,r,!1,o)},an.unmountComponentAtNode=function(t){if(!Sl(t))throw Error(n(40));return t._reactRootContainer?(Mi(function(){Al(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1},an.unstable_batchedUpdates=Lc,an.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Sl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Al(t,r,o,!1,u)},an.version="18.3.1-next-f1338f8080-20240426",an}var Ap;function x_(){if(Ap)return Gc.exports;Ap=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Gc.exports=V_(),Gc.exports}var Cp;function D_(){if(Cp)return Pl;Cp=1;var i=x_();return Pl.createRoot=i.createRoot,Pl.hydrateRoot=i.hydrateRoot,Pl}var F_=D_();const O_=Mm(F_),M_=()=>{};var Pp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},L_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Bm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,I=c>>2,k=(c&3)<<4|m>>4;let R=(m&15)<<2|v>>6,$=v&63;y||($=64,f||(R=64)),s.push(n[I],n[k],n[R],n[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Lm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):L_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const k=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||v==null||k==null)throw new B_;const R=c<<2|m>>4;if(s.push(R),v!==64){const $=m<<4&240|v>>2;if(s.push($),k!==64){const Y=v<<6&192|k;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class B_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b_=function(i){const e=Lm(i);return Bm.encodeByteArray(e,!0)},zl=function(i){return b_(i).replace(/\./g,"")},U_=function(i){try{return Bm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=()=>j_().__FIREBASE_DEFAULTS__,W_=()=>{if(typeof process>"u"||typeof Pp>"u")return;const i=Pp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&U_(i[1]);return e&&JSON.parse(e)},Nh=()=>{try{return M_()||z_()||W_()||$_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},H_=i=>{var e,n;return(n=(e=Nh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},q_=i=>{const e=H_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},bm=()=>{var i;return(i=Nh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(i){return i.endsWith(".cloudworkstations.dev")}async function K_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[zl(JSON.stringify(n)),zl(JSON.stringify(f)),""].join(".")}const Go={};function X_(){const i={prod:[],emulator:[]};for(const e of Object.keys(Go))Go[e]?i.emulator.push(e):i.prod.push(e);return i}function Y_(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Rp=!1;function J_(i,e){if(typeof window>"u"||typeof document>"u"||!Vh(window.location.host)||Go[i]===e||Go[i]||Rp)return;Go[i]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=X_().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,$){R.setAttribute("width","24"),R.setAttribute("id",$),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Rp=!0,f()},R}function I(R,$){R.setAttribute("id",$),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function k(){const R=Y_(s),$=n("text"),Y=document.getElementById($)||document.createElement("span"),Z=n("learnmore"),B=document.getElementById(Z)||document.createElement("a"),Ce=n("preprendIcon"),we=document.getElementById(Ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const Ie=R.element;m(Ie),I(B,Z);const De=v();y(we,Ce),Ie.append(we,Y,B,De),document.body.appendChild(Ie)}c?(Y.innerText="Preview backend disconnected.",we.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(we.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ev(){var i;const e=(i=Nh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tv(){return!ev()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nv(){try{return typeof indexedDB=="object"}catch{return!1}}function rv(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="FirebaseError";class Gs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=iv,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Um.prototype.create)}}class Um{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?sv(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new Gs(a,m,s)}}function sv(i,e){return i.replace(ov,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const ov=/\{\$([^}]+)}/g;function Wl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(kp(c)&&kp(f)){if(!Wl(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function kp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(i){return i&&i._delegate?i._delegate:i}class ea{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Q_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uv(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lv(i){return i===ji?void 0:i}function uv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new av(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const hv={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},fv=je.INFO,dv={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},pv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=dv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=fv,this._logHandler=pv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const mv=(i,e)=>e.some(n=>i instanceof n);let Np,Vp;function gv(){return Np||(Np=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yv(){return Vp||(Vp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zm=new WeakMap,oh=new WeakMap,Wm=new WeakMap,Jc=new WeakMap,xh=new WeakMap;function _v(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Zr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&zm.set(n,i)}).catch(()=>{}),xh.set(e,i),e}function vv(i){if(oh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});oh.set(i,e)}let ah={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return oh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Wm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Ev(i){ah=i(ah)}function wv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Zc(this),e,...n);return Wm.set(s,e.sort?e.sort():[e]),Zr(s)}:yv().includes(i)?function(...e){return i.apply(Zc(this),e),Zr(zm.get(this))}:function(...e){return Zr(i.apply(Zc(this),e))}}function Tv(i){return typeof i=="function"?wv(i):(i instanceof IDBTransaction&&vv(i),mv(i,gv())?new Proxy(i,ah):i)}function Zr(i){if(i instanceof IDBRequest)return _v(i);if(Jc.has(i))return Jc.get(i);const e=Tv(i);return e!==i&&(Jc.set(i,e),xh.set(e,i)),e}const Zc=i=>xh.get(i);function Iv(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=Zr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Zr(f.result),y.oldVersion,y.newVersion,Zr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Sv=["get","getKey","getAll","getAllKeys","count"],Av=["put","add","delete","clear"],eh=new Map;function xp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Av.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Sv.includes(n)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return eh.set(e,c),c}Ev(i=>({...i,get:(e,n,s)=>xp(e,n)||i.get(e,n,s),has:(e,n)=>!!xp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Pv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lh="@firebase/app",Dp="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new jm("@firebase/app"),Rv="@firebase/app-compat",kv="@firebase/analytics-compat",Nv="@firebase/analytics",Vv="@firebase/app-check-compat",xv="@firebase/app-check",Dv="@firebase/auth",Fv="@firebase/auth-compat",Ov="@firebase/database",Mv="@firebase/data-connect",Lv="@firebase/database-compat",Bv="@firebase/functions",bv="@firebase/functions-compat",Uv="@firebase/installations",jv="@firebase/installations-compat",zv="@firebase/messaging",Wv="@firebase/messaging-compat",$v="@firebase/performance",Hv="@firebase/performance-compat",qv="@firebase/remote-config",Qv="@firebase/remote-config-compat",Kv="@firebase/storage",Gv="@firebase/storage-compat",Xv="@firebase/firestore",Yv="@firebase/ai",Jv="@firebase/firestore-compat",Zv="firebase",e0="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="[DEFAULT]",t0={[lh]:"fire-core",[Rv]:"fire-core-compat",[Nv]:"fire-analytics",[kv]:"fire-analytics-compat",[xv]:"fire-app-check",[Vv]:"fire-app-check-compat",[Dv]:"fire-auth",[Fv]:"fire-auth-compat",[Ov]:"fire-rtdb",[Mv]:"fire-data-connect",[Lv]:"fire-rtdb-compat",[Bv]:"fire-fn",[bv]:"fire-fn-compat",[Uv]:"fire-iid",[jv]:"fire-iid-compat",[zv]:"fire-fcm",[Wv]:"fire-fcm-compat",[$v]:"fire-perf",[Hv]:"fire-perf-compat",[qv]:"fire-rc",[Qv]:"fire-rc-compat",[Kv]:"fire-gcs",[Gv]:"fire-gcs-compat",[Xv]:"fire-fst",[Jv]:"fire-fst-compat",[Yv]:"fire-vertex","fire-js":"fire-js",[Zv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Map,n0=new Map,ch=new Map;function Fp(i,e){try{i.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Hl(i){const e=i.name;if(ch.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;ch.set(e,i);for(const n of $l.values())Fp(n,i);for(const n of n0.values())Fp(n,i);return!0}function r0(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function i0(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new Um("app","Firebase",s0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=e0;function $m(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:uh,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw ei.create("bad-app-name",{appName:String(a)});if(n||(n=bm()),!n)throw ei.create("no-options");const c=$l.get(a);if(c){if(Wl(n,c.options)&&Wl(s,c.config))return c;throw ei.create("duplicate-app",{appName:a})}const f=new cv(a);for(const y of ch.values())f.addComponent(y);const m=new o0(n,s,f);return $l.set(a,m),m}function l0(i=uh){const e=$l.get(i);if(!e&&i===uh&&bm())return $m();if(!e)throw ei.create("no-app",{appName:i});return e}function Us(i,e,n){var s;let a=(s=t0[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(m.join(" "));return}Hl(new ea(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="firebase-heartbeat-database",c0=1,ta="firebase-heartbeat-store";let th=null;function Hm(){return th||(th=Iv(u0,c0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ta)}catch(n){console.warn(n)}}}}).catch(i=>{throw ei.create("idb-open",{originalErrorMessage:i.message})})),th}async function h0(i){try{const n=(await Hm()).transaction(ta),s=await n.objectStore(ta).get(qm(i));return await n.done,s}catch(e){if(e instanceof Gs)Sr.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function Op(i,e){try{const s=(await Hm()).transaction(ta,"readwrite");await s.objectStore(ta).put(e,qm(i)),await s.done}catch(n){if(n instanceof Gs)Sr.warn(n.message);else{const s=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(s.message)}}}function qm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=1024,d0=30;class p0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Mp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>d0){const f=y0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Sr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mp(),{heartbeatsToSend:s,unsentEntries:a}=m0(this._heartbeatsCache.heartbeats),c=zl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Sr.warn(n),""}}}function Mp(){return new Date().toISOString().substring(0,10)}function m0(i,e=f0){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Lp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Lp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class g0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nv()?rv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Lp(i){return zl(JSON.stringify({version:2,heartbeats:i})).length}function y0(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(i){Hl(new ea("platform-logger",e=>new Cv(e),"PRIVATE")),Hl(new ea("heartbeat",e=>new p0(e),"PRIVATE")),Us(lh,Dp,i),Us(lh,Dp,"esm2017"),Us("fire-js","")}_0("");var v0="firebase",E0="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(v0,E0,"app");var Bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,Qm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,w){function A(){}A.prototype=w.prototype,V.D=w.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(C,x,D){for(var S=Array(arguments.length-2),st=2;st<arguments.length;st++)S[st-2]=arguments[st];return w.prototype[x].apply(C,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)C[x]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(x=0;16>x;++x)C[x]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=V.g[0],A=V.g[1],x=V.g[2];var D=V.g[3],S=w+(D^A&(x^D))+C[0]+3614090360&4294967295;w=A+(S<<7&4294967295|S>>>25),S=D+(x^w&(A^x))+C[1]+3905402710&4294967295,D=w+(S<<12&4294967295|S>>>20),S=x+(A^D&(w^A))+C[2]+606105819&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(w^x&(D^w))+C[3]+3250441966&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(D^A&(x^D))+C[4]+4118548399&4294967295,w=A+(S<<7&4294967295|S>>>25),S=D+(x^w&(A^x))+C[5]+1200080426&4294967295,D=w+(S<<12&4294967295|S>>>20),S=x+(A^D&(w^A))+C[6]+2821735955&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(w^x&(D^w))+C[7]+4249261313&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(D^A&(x^D))+C[8]+1770035416&4294967295,w=A+(S<<7&4294967295|S>>>25),S=D+(x^w&(A^x))+C[9]+2336552879&4294967295,D=w+(S<<12&4294967295|S>>>20),S=x+(A^D&(w^A))+C[10]+4294925233&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(w^x&(D^w))+C[11]+2304563134&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(D^A&(x^D))+C[12]+1804603682&4294967295,w=A+(S<<7&4294967295|S>>>25),S=D+(x^w&(A^x))+C[13]+4254626195&4294967295,D=w+(S<<12&4294967295|S>>>20),S=x+(A^D&(w^A))+C[14]+2792965006&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(w^x&(D^w))+C[15]+1236535329&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(x^D&(A^x))+C[1]+4129170786&4294967295,w=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(w^A))+C[6]+3225465664&4294967295,D=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(D^w))+C[11]+643717713&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^w&(x^D))+C[0]+3921069994&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^D&(A^x))+C[5]+3593408605&4294967295,w=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(w^A))+C[10]+38016083&4294967295,D=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(D^w))+C[15]+3634488961&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^w&(x^D))+C[4]+3889429448&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^D&(A^x))+C[9]+568446438&4294967295,w=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(w^A))+C[14]+3275163606&4294967295,D=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(D^w))+C[3]+4107603335&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^w&(x^D))+C[8]+1163531501&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^D&(A^x))+C[13]+2850285829&4294967295,w=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(w^A))+C[2]+4243563512&4294967295,D=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(D^w))+C[7]+1735328473&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^w&(x^D))+C[12]+2368359562&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(A^x^D)+C[5]+4294588738&4294967295,w=A+(S<<4&4294967295|S>>>28),S=D+(w^A^x)+C[8]+2272392833&4294967295,D=w+(S<<11&4294967295|S>>>21),S=x+(D^w^A)+C[11]+1839030562&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^w)+C[14]+4259657740&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^D)+C[1]+2763975236&4294967295,w=A+(S<<4&4294967295|S>>>28),S=D+(w^A^x)+C[4]+1272893353&4294967295,D=w+(S<<11&4294967295|S>>>21),S=x+(D^w^A)+C[7]+4139469664&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^w)+C[10]+3200236656&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^D)+C[13]+681279174&4294967295,w=A+(S<<4&4294967295|S>>>28),S=D+(w^A^x)+C[0]+3936430074&4294967295,D=w+(S<<11&4294967295|S>>>21),S=x+(D^w^A)+C[3]+3572445317&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^w)+C[6]+76029189&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^D)+C[9]+3654602809&4294967295,w=A+(S<<4&4294967295|S>>>28),S=D+(w^A^x)+C[12]+3873151461&4294967295,D=w+(S<<11&4294967295|S>>>21),S=x+(D^w^A)+C[15]+530742520&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^w)+C[2]+3299628645&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(x^(A|~D))+C[0]+4096336452&4294967295,w=A+(S<<6&4294967295|S>>>26),S=D+(A^(w|~x))+C[7]+1126891415&4294967295,D=w+(S<<10&4294967295|S>>>22),S=x+(w^(D|~A))+C[14]+2878612391&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~w))+C[5]+4237533241&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~D))+C[12]+1700485571&4294967295,w=A+(S<<6&4294967295|S>>>26),S=D+(A^(w|~x))+C[3]+2399980690&4294967295,D=w+(S<<10&4294967295|S>>>22),S=x+(w^(D|~A))+C[10]+4293915773&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~w))+C[1]+2240044497&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~D))+C[8]+1873313359&4294967295,w=A+(S<<6&4294967295|S>>>26),S=D+(A^(w|~x))+C[15]+4264355552&4294967295,D=w+(S<<10&4294967295|S>>>22),S=x+(w^(D|~A))+C[6]+2734768916&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~w))+C[13]+1309151649&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~D))+C[4]+4149444226&4294967295,w=A+(S<<6&4294967295|S>>>26),S=D+(A^(w|~x))+C[11]+3174756917&4294967295,D=w+(S<<10&4294967295|S>>>22),S=x+(w^(D|~A))+C[2]+718787259&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~w))+C[9]+3951481745&4294967295,V.g[0]=V.g[0]+w&4294967295,V.g[1]=V.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+D&4294967295}s.prototype.u=function(V,w){w===void 0&&(w=V.length);for(var A=w-this.blockSize,C=this.B,x=this.h,D=0;D<w;){if(x==0)for(;D<=A;)a(this,V,D),D+=this.blockSize;if(typeof V=="string"){for(;D<w;)if(C[x++]=V.charCodeAt(D++),x==this.blockSize){a(this,C),x=0;break}}else for(;D<w;)if(C[x++]=V[D++],x==this.blockSize){a(this,C),x=0;break}}this.h=x,this.o+=w},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var w=1;w<V.length-8;++w)V[w]=0;var A=8*this.o;for(w=V.length-8;w<V.length;++w)V[w]=A&255,A/=256;for(this.u(V),V=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)V[A++]=this.g[w]>>>C&255;return V};function c(V,w){var A=m;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=w(V)}function f(V,w){this.h=w;for(var A=[],C=!0,x=V.length-1;0<=x;x--){var D=V[x]|0;C&&D==w||(A[x]=D,C=!1)}this.g=A}var m={};function y(V){return-128<=V&&128>V?c(V,function(w){return new f([w|0],0>w?-1:0)}):new f([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return k;if(0>V)return B(v(-V));for(var w=[],A=1,C=0;V>=A;C++)w[C]=V/A|0,A*=4294967296;return new f(w,0)}function I(V,w){if(V.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(V.charAt(0)=="-")return B(I(V.substring(1),w));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(w,8)),C=k,x=0;x<V.length;x+=8){var D=Math.min(8,V.length-x),S=parseInt(V.substring(x,x+D),w);8>D?(D=v(Math.pow(w,D)),C=C.j(D).add(v(S))):(C=C.j(A),C=C.add(v(S)))}return C}var k=y(0),R=y(1),$=y(16777216);i=f.prototype,i.m=function(){if(Z(this))return-B(this).m();for(var V=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);V+=(0<=C?C:4294967296+C)*w,w*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Y(this))return"0";if(Z(this))return"-"+B(this).toString(V);for(var w=v(Math.pow(V,6)),A=this,C="";;){var x=De(A,w).g;A=Ce(A,x.j(w));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=x,Y(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Y(V){if(V.h!=0)return!1;for(var w=0;w<V.g.length;w++)if(V.g[w]!=0)return!1;return!0}function Z(V){return V.h==-1}i.l=function(V){return V=Ce(this,V),Z(V)?-1:Y(V)?0:1};function B(V){for(var w=V.g.length,A=[],C=0;C<w;C++)A[C]=~V.g[C];return new f(A,~V.h).add(R)}i.abs=function(){return Z(this)?B(this):this},i.add=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0,x=0;x<=w;x++){var D=C+(this.i(x)&65535)+(V.i(x)&65535),S=(D>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);C=S>>>16,D&=65535,S&=65535,A[x]=S<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Ce(V,w){return V.add(B(w))}i.j=function(V){if(Y(this)||Y(V))return k;if(Z(this))return Z(V)?B(this).j(B(V)):B(B(this).j(V));if(Z(V))return B(this.j(B(V)));if(0>this.l($)&&0>V.l($))return v(this.m()*V.m());for(var w=this.g.length+V.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<V.g.length;x++){var D=this.i(C)>>>16,S=this.i(C)&65535,st=V.i(x)>>>16,pt=V.i(x)&65535;A[2*C+2*x]+=S*pt,we(A,2*C+2*x),A[2*C+2*x+1]+=D*pt,we(A,2*C+2*x+1),A[2*C+2*x+1]+=S*st,we(A,2*C+2*x+1),A[2*C+2*x+2]+=D*st,we(A,2*C+2*x+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new f(A,0)};function we(V,w){for(;(V[w]&65535)!=V[w];)V[w+1]+=V[w]>>>16,V[w]&=65535,w++}function Ie(V,w){this.g=V,this.h=w}function De(V,w){if(Y(w))throw Error("division by zero");if(Y(V))return new Ie(k,k);if(Z(V))return w=De(B(V),w),new Ie(B(w.g),B(w.h));if(Z(w))return w=De(V,B(w)),new Ie(B(w.g),w.h);if(30<V.g.length){if(Z(V)||Z(w))throw Error("slowDivide_ only works with positive integers.");for(var A=R,C=w;0>=C.l(V);)A=ut(A),C=ut(C);var x=Be(A,1),D=Be(C,1);for(C=Be(C,2),A=Be(A,2);!Y(C);){var S=D.add(C);0>=S.l(V)&&(x=x.add(A),D=S),C=Be(C,1),A=Be(A,1)}return w=Ce(V,x.j(w)),new Ie(x,w)}for(x=k;0<=V.l(w);){for(A=Math.max(1,Math.floor(V.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=v(A),S=D.j(w);Z(S)||0<S.l(V);)A-=C,D=v(A),S=D.j(w);Y(D)&&(D=R),x=x.add(D),V=Ce(V,S)}return new Ie(x,V)}i.A=function(V){return De(this,V).h},i.and=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&V.i(C);return new f(A,this.h&V.h)},i.or=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|V.i(C);return new f(A,this.h|V.h)},i.xor=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^V.i(C);return new f(A,this.h^V.h)};function ut(V){for(var w=V.g.length+1,A=[],C=0;C<w;C++)A[C]=V.i(C)<<1|V.i(C-1)>>>31;return new f(A,V.h)}function Be(V,w){var A=w>>5;w%=32;for(var C=V.g.length-A,x=[],D=0;D<C;D++)x[D]=0<w?V.i(D+A)>>>w|V.i(D+A+1)<<32-w:V.i(D+A);return new f(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Qm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=I,ti=f}).apply(typeof Bp<"u"?Bp:typeof self<"u"?self:typeof window<"u"?window:{});var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Km,qo,Gm,Ml,hh,Xm,Ym,Jm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in g))break e;g=g[O]}l=l[l.length-1],E=g[l],d=d(E),d!=E&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,E=!1,O={next:function(){if(!E&&g<l.length){var W=g++;return{value:d(W,l[W]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function I(l,d,g){return l.call.apply(l.bind,arguments)}function k(l,d,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function R(l,d,g){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:k,R.apply(null,arguments)}function $(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function Y(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,O,W){for(var te=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)te[Ke-2]=arguments[Ke];return d.prototype[O].apply(E,te)}}function Z(l){const d=l.length;if(0<d){const g=Array(d);for(let E=0;E<d;E++)g[E]=l[E];return g}return[]}function B(l,d){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(y(E)){const O=l.length||0,W=E.length||0;l.length=O+W;for(let te=0;te<W;te++)l[O+te]=E[te]}else l.push(E)}}class Ce{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function we(l){return/^[\s\xa0]*$/.test(l)}function Ie(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function De(l){return De[" "](l),l}De[" "]=function(){};var ut=Ie().indexOf("Gecko")!=-1&&!(Ie().toLowerCase().indexOf("webkit")!=-1&&Ie().indexOf("Edge")==-1)&&!(Ie().indexOf("Trident")!=-1||Ie().indexOf("MSIE")!=-1)&&Ie().indexOf("Edge")==-1;function Be(l,d,g){for(const E in l)d.call(g,l[E],E,l)}function V(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function w(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,d){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)l[g]=E[g];for(let W=0;W<A.length;W++)g=A[W],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function x(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ge;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class st{constructor(){this.h=this.g=null}add(d,g){const E=pt.get();E.set(d,g),this.h?this.h.next=E:this.g=E,this.h=E}}var pt=new Ce(()=>new tt,l=>l.reset());class tt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,ne=!1,ge=new st,oe=()=>{const l=m.Promise.resolve(void 0);ze=()=>{l.then(F)}};var F=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){D(g)}var d=pt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ne=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function Ne(l,d){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(ut){e:{try{De(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Oe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ne.aa.h.call(this)}}Y(Ne,ue);var Oe={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),We=0;function Ge(l,d,g,E,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!E,this.ha=O,this.key=++We,this.da=this.fa=!1}function _t(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function kn(l){this.src=l,this.g={},this.h=0}kn.prototype.add=function(l,d,g,E,O){var W=l.toString();l=this.g[W],l||(l=this.g[W]=[],this.h++);var te=qn(l,d,E,O);return-1<te?(d=l[te],g||(d.fa=!1)):(d=new Ge(d,this.src,W,!!E,O),d.fa=g,l.push(d)),d};function Pr(l,d){var g=d.type;if(g in l.g){var E=l.g[g],O=Array.prototype.indexOf.call(E,d,void 0),W;(W=0<=O)&&Array.prototype.splice.call(E,O,1),W&&(_t(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function qn(l,d,g,E){for(var O=0;O<l.length;++O){var W=l[O];if(!W.da&&W.listener==d&&W.capture==!!g&&W.ha==E)return O}return-1}var j="closure_lm_"+(1e6*Math.random()|0),b={};function re(l,d,g,E,O){if(Array.isArray(d)){for(var W=0;W<d.length;W++)re(l,d[W],g,E,O);return null}return g=kt(g),l&&l[Ve]?l.K(d,g,v(E)?!!E.capture:!1,O):J(l,d,g,!1,E,O)}function J(l,d,g,E,O,W){if(!d)throw Error("Invalid event type");var te=v(O)?!!O.capture:!!O,Ke=nt(l);if(Ke||(l[j]=Ke=new kn(l)),g=Ke.add(d,g,E,te,W),g.proxy)return g;if(E=G(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)ke||(O=te),O===void 0&&(O=!1),l.addEventListener(d.toString(),E,O);else if(l.attachEvent)l.attachEvent(he(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function G(){function l(g){return d.call(l.src,l.listener,g)}const d=Se;return l}function de(l,d,g,E,O){if(Array.isArray(d))for(var W=0;W<d.length;W++)de(l,d[W],g,E,O);else E=v(E)?!!E.capture:!!E,g=kt(g),l&&l[Ve]?(l=l.i,d=String(d).toString(),d in l.g&&(W=l.g[d],g=qn(W,g,E,O),-1<g&&(_t(W[g]),Array.prototype.splice.call(W,g,1),W.length==0&&(delete l.g[d],l.h--)))):l&&(l=nt(l))&&(d=l.g[d.toString()],l=-1,d&&(l=qn(d,g,E,O)),(g=-1<l?d[l]:null)&&se(g))}function se(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ve])Pr(d.i,l);else{var g=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(g,E,l.capture):d.detachEvent?d.detachEvent(he(g),E):d.addListener&&d.removeListener&&d.removeListener(E),(g=nt(d))?(Pr(g,l),g.h==0&&(g.src=null,d[j]=null)):_t(l)}}}function he(l){return l in b?b[l]:b[l]="on"+l}function Se(l,d){if(l.da)l=!0;else{d=new Ne(d,this);var g=l.listener,E=l.ha||l.src;l.fa&&se(l),l=g.call(E,d)}return l}function nt(l){return l=l[j],l instanceof kn?l:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(l){return typeof l=="function"?l:(l[Xe]||(l[Xe]=function(d){return l.handleEvent(d)}),l[Xe])}function Ye(){z.call(this),this.i=new kn(this),this.M=this,this.F=null}Y(Ye,z),Ye.prototype[Ve]=!0,Ye.prototype.removeEventListener=function(l,d,g,E){de(this,l,d,g,E)};function Tt(l,d){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new ue(d,l);else if(d instanceof ue)d.target=d.target||l;else{var O=d;d=new ue(E,l),C(d,O)}if(O=!0,g)for(var W=g.length-1;0<=W;W--){var te=d.g=g[W];O=ur(te,E,!0,d)&&O}if(te=d.g=l,O=ur(te,E,!0,d)&&O,O=ur(te,E,!1,d)&&O,g)for(W=0;W<g.length;W++)te=d.g=g[W],O=ur(te,E,!1,d)&&O}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],E=0;E<g.length;E++)_t(g[E]);delete l.g[d],l.h--}}this.F=null},Ye.prototype.K=function(l,d,g,E){return this.i.add(String(l),d,!1,g,E)},Ye.prototype.L=function(l,d,g,E){return this.i.add(String(l),d,!0,g,E)};function ur(l,d,g,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,W=0;W<d.length;++W){var te=d[W];if(te&&!te.da&&te.capture==g){var Ke=te.listener,It=te.ha||te.src;te.fa&&Pr(l.i,te),O=Ke.call(It,E)!==!1&&O}}return O&&!E.defaultPrevented}function eo(l,d,g){if(typeof l=="function")g&&(l=R(l,g));else if(l&&typeof l.handleEvent=="function")l=R(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Rr(l){l.g=eo(()=>{l.g=null,l.i&&(l.i=!1,Rr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class di extends z{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(l){z.call(this),this.h=l,this.g={}}Y(pi,z);var to=[];function no(l){Be(l.g,function(d,g){this.g.hasOwnProperty(g)&&se(d)},l),l.g={}}pi.prototype.N=function(){pi.aa.N.call(this),no(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=m.JSON.stringify,io=m.JSON.parse,so=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function mi(){}mi.prototype.h=null;function Gi(l){return l.h||(l.h=l.i())}function Xi(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){ue.call(this,"d")}Y(Qn,ue);function Yi(){ue.call(this,"c")}Y(Yi,ue);var Kn={},oo=null;function gi(){return oo=oo||new Ye}Kn.La="serverreachability";function ao(l){ue.call(this,Kn.La,l)}Y(ao,ue);function cr(l){const d=gi();Tt(d,new ao(d))}Kn.STAT_EVENT="statevent";function lo(l,d){ue.call(this,Kn.STAT_EVENT,l),this.stat=d}Y(lo,ue);function mt(l){const d=gi();Tt(d,new lo(d,l))}Kn.Ma="timingevent";function Ji(l,d){ue.call(this,Kn.Ma,l),this.size=d}Y(Ji,ue);function Nn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function yi(){this.g=!0}yi.prototype.xa=function(){this.g=!1};function _i(l,d,g,E,O,W){l.info(function(){if(l.g)if(W)for(var te="",Ke=W.split("&"),It=0;It<Ke.length;It++){var be=Ke[It].split("=");if(1<be.length){var Nt=be[0];be=be[1];var vt=Nt.split("_");te=2<=vt.length&&vt[1]=="type"?te+(Nt+"="+be+"&"):te+(Nt+"=redacted&")}}else te=null;else te=W;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+d+`
`+g+`
`+te})}function Zi(l,d,g,E,O,W,te){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+d+`
`+g+`
`+W+" "+te})}function Vn(l,d,g,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+wu(l,g)+(E?" "+E:"")})}function uo(l,d){l.info(function(){return"TIMEOUT: "+d})}yi.prototype.info=function(){};function wu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var W=O[0];if(W!="noop"&&W!="stop"&&W!="close")for(var te=1;te<O.length;te++)O[te]=""}}}}return ro(g)}catch{return d}}var es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},da={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function vi(){}Y(vi,mi),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},xn=new vi;function Dn(l,d,g,E){this.j=l,this.i=d,this.l=g,this.R=E||1,this.U=new pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}var co={},ts={};function ns(l,d,g){l.L=1,l.v=Dr(hn(d)),l.m=g,l.P=!0,ho(l,null)}function ho(l,d){l.F=Date.now(),Ze(l),l.A=hn(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Or(g.i,"t",E),l.C=0,g=l.j.J,l.h=new pa,l.g=xa(l.j,g?d:null,!l.m),0<l.O&&(l.M=new di(R(l.Y,l,l.g),l.O)),d=l.U,g=l.g,E=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(to[0]=O.toString()),O=to);for(var W=0;W<O.length;W++){var te=re(g,O[W],E||d.handleEvent,!1,d.h||d);if(!te)break;d.g[te.key]=te}d=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),cr(),_i(l.i,l.u,l.A,l.l,l.R,l.m)}Dn.prototype.ca=function(l){l=l.target;const d=this.M;d&&en(l)==3?d.j():this.Y(l)},Dn.prototype.Y=function(l){try{if(l==this.g)e:{const vt=en(this.g);var d=this.g.Ba();const wn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||_o(this.g)))){this.J||vt!=4||d==7||(d==8||0>=wn?cr(3):cr(2)),Ei(this);var g=this.g.Z();this.X=g;t:if(ma(this)){var E=_o(this.g);l="";var O=E.length,W=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),kr(this);var te="";break t}this.h.i=new m.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(W&&d==O-1)});E.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=g==200,Zi(this.i,this.u,this.A,this.l,this.R,vt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,It=this.g;if((Ke=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!we(Ke)){var be=Ke;break t}}be=null}if(g=be)Vn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fo(this,g);else{this.o=!1,this.s=3,mt(12),vn(this),kr(this);break e}}if(this.P){g=!0;let dn;for(;!this.J&&this.C<te.length;)if(dn=Tu(this,te),dn==ts){vt==4&&(this.s=4,mt(14),g=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==co){this.s=4,mt(15),Vn(this.i,this.l,te,"[Invalid Chunk]"),g=!1;break}else Vn(this.i,this.l,dn,null),fo(this,dn);if(ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||te.length!=0||this.h.h||(this.s=1,mt(16),g=!1),this.o=this.o&&g,!g)Vn(this.i,this.l,te,"[Invalid Chunked Response]"),vn(this),kr(this);else if(0<te.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Eo(Nt),Nt.M=!0,mt(11))}}else Vn(this.i,this.l,te,null),fo(this,te);vt==4&&vn(this),this.o&&!this.J&&(vt==4?ds(this.j,this):(this.o=!1,Ze(this)))}else ls(this.g),g==400&&0<te.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),vn(this),kr(this)}}}catch{}finally{}};function ma(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Tu(l,d){var g=l.C,E=d.indexOf(`
`,g);return E==-1?ts:(g=Number(d.substring(g,E)),isNaN(g)?co:(E+=1,E+g>d.length?ts:(d=d.slice(E,E+g),l.C=E+g,d)))}Dn.prototype.cancel=function(){this.J=!0,vn(this)};function Ze(l){l.S=Date.now()+l.I,ga(l,l.I)}function ga(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Nn(R(l.ba,l),d)}function Ei(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Dn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(uo(this.i,this.A),this.L!=2&&(cr(),mt(17)),vn(this),this.s=2,kr(this)):ga(this,this.S-l)};function kr(l){l.j.G==0||l.J||ds(l.j,l)}function vn(l){Ei(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,no(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function fo(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Gt(g.h,l))){if(!l.K&&Gt(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)fs(g),Bn(g);else break e;hs(g),mt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Nn(R(g.Za,g),6e3));if(1>=_a(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else mr(g,11)}else if((l.K||g.g==l)&&fs(g),!we(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let be=O[d];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const Nt=be[3];Nt!=null&&(g.la=Nt,g.j.info("VER="+g.la));const vt=be[4];vt!=null&&(g.Aa=vt,g.j.info("SVER="+g.Aa));const wn=be[5];wn!=null&&typeof wn=="number"&&0<wn&&(E=1.5*wn,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const dn=l.g;if(dn){const Pi=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var W=E.h;W.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(po(W,W.h),W.h=null))}if(E.D){const ms=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;ms&&(E.ya=ms,Je(E.I,E.D,ms))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var te=l;if(E.qa=Va(E,E.J?E.ia:null,E.W),te.K){va(E.h,te);var Ke=te,It=E.L;It&&(Ke.I=It),Ke.B&&(Ei(Ke),Ze(Ke)),E.g=te}else Ci(E);0<g.i.length&&Jn(g)}else be[0]!="stop"&&be[0]!="close"||mr(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?mr(g,7):Mt(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}cr(4)}catch{}}var ya=class{constructor(l,d){this.g=l,this.map=d}};function wi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _a(l){return l.h?1:l.g?l.g.size:0}function Gt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function po(l,d){l.g?l.g.add(d):l.h=d}function va(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}wi.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ea(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return Z(l.i)}function rs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,E=0;E<g;E++)d.push(l[E]);return d}d=[],g=0;for(E in l)d[g++]=l[E];return d}function is(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const E in l)d[g++]=E;return d}}}function Nr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=is(l),E=rs(l),O=E.length,W=0;W<O;W++)d.call(void 0,E[W],g&&g[W],l)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Iu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),O=null;if(0<=E){var W=l[g].substring(0,E);O=l[g].substring(E+1)}else W=l[g];d(W,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hr){this.h=l.h,Ii(this,l.j),this.o=l.o,this.g=l.g,Vr(this,l.s),this.l=l.l;var d=l.i,g=new Gn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),xr(this,g),this.m=l.m}else l&&(d=String(l).match(Ti))?(this.h=!1,Ii(this,d[1]||"",!0),this.o=Le(d[2]||""),this.g=Le(d[3]||"",!0),Vr(this,d[4]),this.l=Le(d[5]||"",!0),xr(this,d[6]||"",!0),this.m=Le(d[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}hr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Fr(d,ss,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Fr(d,ss,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Fr(g,g.charAt(0)=="/"?Ia:Ta,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Fr(g,mo)),l.join("")};function hn(l){return new hr(l)}function Ii(l,d,g){l.j=g?Le(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Vr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function xr(l,d,g){d instanceof Gn?(l.i=d,Xn(l.i,l.h)):(g||(d=Fr(d,Sa)),l.i=new Gn(d,l.h))}function Je(l,d,g){l.i.set(d,g)}function Dr(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Le(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,wa),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function wa(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ss=/[#\/\?@]/g,Ta=/[#\?:]/g,Ia=/[#\?]/g,Sa=/[#\?@]/g,mo=/#/g;function Gn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ot(l){l.g||(l.g=new Map,l.h=0,l.i&&Iu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Gn.prototype,i.add=function(l,d){Ot(this),this.i=null,l=En(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function Fn(l,d){Ot(l),d=En(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function On(l,d){return Ot(l),d=En(l,d),l.g.has(d)}i.forEach=function(l,d){Ot(this),this.g.forEach(function(g,E){g.forEach(function(O){l.call(d,O,E,this)},this)},this)},i.na=function(){Ot(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let E=0;E<d.length;E++){const O=l[E];for(let W=0;W<O.length;W++)g.push(d[E])}return g},i.V=function(l){Ot(this);let d=[];if(typeof l=="string")On(this,l)&&(d=d.concat(this.g.get(En(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return Ot(this),this.i=null,l=En(this,l),On(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Or(l,d,g){Fn(l,d),0<g.length&&(l.i=null,l.g.set(En(l,d),Z(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var E=d[g];const W=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var O=W;te[E]!==""&&(O+="="+encodeURIComponent(String(te[E]))),l.push(O)}}return this.i=l.join("&")};function En(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Xn(l,d){d&&!l.j&&(Ot(l),l.i=null,l.g.forEach(function(g,E){var O=E.toLowerCase();E!=O&&(Fn(this,E),Or(this,O,g))},l)),l.j=d}function Su(l,d){const g=new yi;if(m.Image){const E=new Image;E.onload=$(Zt,g,"TestLoadImage: loaded",!0,d,E),E.onerror=$(Zt,g,"TestLoadImage: error",!1,d,E),E.onabort=$(Zt,g,"TestLoadImage: abort",!1,d,E),E.ontimeout=$(Zt,g,"TestLoadImage: timeout",!1,d,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function Aa(l,d){const g=new yi,E=new AbortController,O=setTimeout(()=>{E.abort(),Zt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(W=>{clearTimeout(O),W.ok?Zt(g,"TestPingServer: ok",!0,d):Zt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Zt(g,"TestPingServer: error",!1,d)})}function Zt(l,d,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function Au(){this.g=new so}function Ca(l,d,g){const E=g||"";try{Nr(l,function(O,W){let te=O;v(O)&&(te=ro(O)),d.push(E+W+"="+encodeURIComponent(te))})}catch(O){throw d.push(E+"type="+encodeURIComponent("_badmap")),O}}function fr(l){this.l=l.Ub||null,this.j=l.eb||!1}Y(fr,mi),fr.prototype.g=function(){return new Si(this.l,this.j)},fr.prototype.i=function(l){return function(){return l}}({});function Si(l,d){Ye.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Si,Ye),i=Si.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Ln(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pa(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pa(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Mn(this):Ln(this),this.readyState==3&&Pa(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Mn(this))},i.Qa=function(l){this.g&&(this.response=l,Mn(this))},i.ga=function(){this.g&&Mn(this)};function Mn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ln(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Ln(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function dr(l){let d="";return Be(l,function(g,E){d+=E,d+=":",d+=g,d+=`\r
`}),d}function Mr(l,d,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=dr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Je(l,d,g))}function ot(l){Ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(ot,Ye);var Cu=/^https?$/i,go=["POST","PUT"];i=ot.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?Gi(this.o):Gi(xn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(W){Ai(this,W);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const W of E.keys())g.set(W,E.get(W));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(W=>W.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(go,d,void 0))||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,te]of g)this.g.setRequestHeader(W,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{as(this),this.u=!0,this.g.send(l),this.u=!1}catch(W){Ai(this,W)}};function Ai(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,os(l),fn(l)}function os(l){l.A||(l.A=!0,Tt(l,"complete"),Tt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Tt(this,"complete"),Tt(this,"abort"),fn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),ot.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?yo(this):this.bb())},i.bb=function(){yo(this)};function yo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||en(l)!=4||l.Z()!=2)){if(l.u&&en(l)==4)eo(l.Ea,0,l);else if(Tt(l,"readystatechange"),en(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var E;if(E=te===0){var O=String(l.D).match(Ti)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),E=!Cu.test(O?O.toLowerCase():"")}g=E}if(g)Tt(l,"complete"),Tt(l,"success");else{l.m=6;try{var W=2<en(l)?l.g.statusText:""}catch{W=""}l.l=W+" ["+l.Z()+"]",os(l)}}finally{fn(l)}}}}function fn(l,d){if(l.g){as(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Tt(l,"ready");try{g.onreadystatechange=E}catch{}}}function as(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function en(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),io(d)}};function _o(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(l){const d={};l=(l.g&&2<=en(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(we(l[E]))continue;var g=x(l[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const W=d[O]||[];d[O]=W,W.push(g)}V(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function vo(l){this.Aa=0,this.i=[],this.j=new yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,l),this.cb=Yn("retryDelaySeedMs",1e4,l),this.Wa=Yn("forwardChannelMaxRetries",2,l),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new wi(l&&l.concurrentRequestLimit),this.Da=new Au,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=vo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,E){mt(0),this.W=l,this.H=d||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Va(this,null,this.W),Jn(this)};function Mt(l){if(us(l),l.G==3){var d=l.U++,g=hn(l.I);if(Je(g,"SID",l.K),Je(g,"RID",d),Je(g,"TYPE","terminate"),pr(l,g),d=new Dn(l,l.j,d),d.L=2,d.v=Dr(hn(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=xa(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ze(d)}Na(l)}function Bn(l){l.g&&(Eo(l),l.g.cancel(),l.g=null)}function us(l){Bn(l),l.u&&(m.clearTimeout(l.u),l.u=null),fs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Jn(l){if(!cn(l.h)&&!l.s){l.s=!0;var d=l.Ga;ze||oe(),ne||(ze(),ne=!0),ge.add(d,l),l.B=0}}function Pu(l,d){return _a(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Nn(R(l.Ga,l,d),ka(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new Dn(this,this.j,l);let W=this.o;if(this.S&&(W?(W=w(W),C(W,this.S)):W=this.S),this.m!==null||this.O||(O.H=W,W=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Lr(this,O,d),g=hn(this.I),Je(g,"RID",l),Je(g,"CVER",22),this.D&&Je(g,"X-HTTP-Session-Id",this.D),pr(this,g),W&&(this.O?d="headers="+encodeURIComponent(String(dr(W)))+"&"+d:this.m&&Mr(g,this.m,W)),po(this.h,O),this.Ua&&Je(g,"TYPE","init"),this.P?(Je(g,"$req",d),Je(g,"SID","null"),O.T=!0,ns(O,g,null)):ns(O,g,d),this.G=2}}else this.G==3&&(l?cs(this,l):this.i.length==0||cn(this.h)||cs(this))};function cs(l,d){var g;d?g=d.l:g=l.U++;const E=hn(l.I);Je(E,"SID",l.K),Je(E,"RID",g),Je(E,"AID",l.T),pr(l,E),l.m&&l.o&&Mr(E,l.m,l.o),g=new Dn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Lr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),po(l.h,g),ns(g,E,d)}function pr(l,d){l.H&&Be(l.H,function(g,E){Je(d,E,g)}),l.l&&Nr({},function(g,E){Je(d,E,g)})}function Lr(l,d,g){g=Math.min(l.i.length,g);var E=l.l?R(l.l.Na,l.l,l):null;e:{var O=l.i;let W=-1;for(;;){const te=["count="+g];W==-1?0<g?(W=O[0].g,te.push("ofs="+W)):W=0:te.push("ofs="+W);let Ke=!0;for(let It=0;It<g;It++){let be=O[It].g;const Nt=O[It].map;if(be-=W,0>be)W=Math.max(0,O[It].g-100),Ke=!1;else try{Ca(Nt,te,"req"+be+"_")}catch{E&&E(Nt)}}if(Ke){E=te.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,E}function Ci(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ze||oe(),ne||(ze(),ne=!0),ge.add(d,l),l.v=0}}function hs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Nn(R(l.Fa,l),ka(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Nn(R(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Bn(this),Ra(this))};function Eo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Ra(l){l.g=new Dn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=hn(l.qa);Je(d,"RID","rpc"),Je(d,"SID",l.K),Je(d,"AID",l.T),Je(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(d,"TO",l.ja),Je(d,"TYPE","xmlhttp"),pr(l,d),l.m&&l.o&&Mr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Dr(hn(d)),g.m=null,g.P=!0,ho(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Bn(this),hs(this),mt(19))};function fs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ds(l,d){var g=null;if(l.g==d){fs(l),Eo(l),l.g=null;var E=2}else if(Gt(l.h,d))g=d.D,va(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;E=gi(),Tt(E,new Ji(E,g)),Jn(l)}else Ci(l);else if(O=d.s,O==3||O==0&&0<d.X||!(E==1&&Pu(l,d)||E==2&&hs(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),O){case 1:mr(l,5);break;case 4:mr(l,10);break;case 3:mr(l,6);break;default:mr(l,2)}}}function ka(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function mr(l,d){if(l.j.info("Error code "+d),d==2){var g=R(l.fb,l),E=l.Xa;const O=!E;E=new hr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ii(E,"https"),Dr(E),O?Su(E.toString(),g):Aa(E.toString(),g)}else mt(2);l.G=0,l.l&&l.l.sa(d),Na(l),us(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Na(l){if(l.G=0,l.ka=[],l.l){const d=Ea(l.h);(d.length!=0||l.i.length!=0)&&(B(l.ka,d),B(l.ka,l.i),l.h.i.length=0,Z(l.i),l.i.length=0),l.l.ra()}}function Va(l,d,g){var E=g instanceof hr?hn(g):new hr(g);if(E.g!="")d&&(E.g=d+"."+E.g),Vr(E,E.s);else{var O=m.location;E=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var W=new hr(null);E&&Ii(W,E),d&&(W.g=d),O&&Vr(W,O),g&&(W.l=g),E=W}return g=l.D,d=l.ya,g&&d&&Je(E,g,d),Je(E,"VER",l.la),pr(l,E),E}function xa(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new ot(new fr({eb:g})):new ot(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function wo(){}i=wo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ps(){}ps.prototype.g=function(l,d){return new Xt(l,d)};function Xt(l,d){Ye.call(this),this.g=new vo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!we(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!we(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Zn(this)}Y(Xt,Ye),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Mt(this.g)},Xt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=ro(l),l=g);d.i.push(new ya(d.Ya++,l)),d.G==3&&Jn(d)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,Xt.aa.N.call(this)};function Da(l){Qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}Y(Da,Qn);function Fa(){Yi.call(this),this.status=1}Y(Fa,Yi);function Zn(l){this.g=l}Y(Zn,wo),Zn.prototype.ua=function(){Tt(this.g,"a")},Zn.prototype.ta=function(l){Tt(this.g,new Da(l))},Zn.prototype.sa=function(l){Tt(this.g,new Fa)},Zn.prototype.ra=function(){Tt(this.g,"b")},ps.prototype.createWebChannel=ps.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Jm=function(){return new ps},Ym=function(){return gi()},Xm=Kn,hh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,Ml=es,da.COMPLETE="complete",Gm=da,Xi.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,qo=Xi,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,Km=ot}).apply(typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{});const bp="@firebase/firestore",Up="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new jm("@firebase/firestore");function Ms(){return $i.logLevel}function le(i,...e){if($i.logLevel<=je.DEBUG){const n=e.map(Dh);$i.debug(`Firestore (${Xs}): ${i}`,...n)}}function Ar(i,...e){if($i.logLevel<=je.ERROR){const n=e.map(Dh);$i.error(`Firestore (${Xs}): ${i}`,...n)}}function zs(i,...e){if($i.logLevel<=je.WARN){const n=e.map(Dh);$i.warn(`Firestore (${Xs}): ${i}`,...n)}}function Dh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Zm(i,s,n)}function Zm(i,e,n){let s=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ar(s),new Error(s)}function Qe(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||Zm(e,a,s)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class T0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I0{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ni,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ni)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new eg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class S0{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A0{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new S0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=c=>{c.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,le("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=P0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function xe(i,e){return i<e?-1:i>e?1:0}function fh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return xe(s,a);{const c=tg(),f=R0(c.encode(zp(i,n)),c.encode(zp(e,n)));return f!==0?f:xe(s,a)}}n+=s>65535?2:1}return xe(i.length,e.length)}function zp(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function R0(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return xe(i[n],e[n]);return xe(i.length,e.length)}function Ws(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=-62135596800,$p=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*$p);return new Pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wp)throw new ye(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$p}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Wp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Pt(0,0))}static max(){return new Pe(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="__name__";class ir{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=ir.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return xe(e.length,n.length)}static compareSegments(e,n){const s=ir.isNumericId(e),a=ir.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?ir.extractNumericId(e).compare(ir.extractNumericId(n)):fh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class lt extends ir{construct(e,n,s){return new lt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const k0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends ir{construct(e,n,s){return new Ut(e,n,s)}static isValidIdentifier(e){return k0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hp}static keyField(){return new Ut([Hp])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ye(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ye(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ye(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ye(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=-1;function N0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(s===1e9?new Pt(n+1,0):new Pt(n,s));return new si(a,Ee.empty(),e)}function V0(i){return new si(i.readTime,i.key,na)}class si{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new si(Pe.min(),Ee.empty(),na)}static max(){return new si(Pe.max(),Ee.empty(),na)}}function x0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:xe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==D0)throw i;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let a=0,c=0,f=!1;e.forEach(m=>{++a,m.next(()=>{++c,f&&c===a&&n()},y=>s(y))}),f=!0,c===a&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(a=>a?H.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new H((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next(I=>{f[v]=I,++m,m===c&&s(f)},I=>a(I))}})}static doWhile(e,n){return new H((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function O0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Js(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}iu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=-1;function su(i){return i==null}function ql(i){return i===0&&1/i==-1/0}function M0(i){return typeof i=="number"&&Number.isInteger(i)&&!ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="";function L0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=qp(e)),e=B0(i.get(n),e);return qp(e)}function B0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case rg:n+="";break;default:n+=c}}return n}function qp(i){return i+rg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function hi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ig(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??bt.RED,this.left=a??bt.EMPTY,this.right=c??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new bt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return bt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kp(this.data.getIterator())}getIteratorFrom(e){return new Kp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class Kp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Rt(Ut.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new sg("Invalid base64 string: "+c):c}}(e);return new jt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const b0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(i){if(Qe(!!i,39018),typeof i=="string"){let e=0;const n=b0.exec(i);if(Qe(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(i.seconds),nanos:yt(i.nanos)}}function yt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ai(i){return typeof i=="string"?jt.fromBase64String(i):jt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="server_timestamp",ag="__type__",lg="__previous_value__",ug="__local_write_time__";function Oh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ag])===null||n===void 0?void 0:n.stringValue)===og}function ou(i){const e=i.mapValue.fields[lg];return Oh(e)?ou(e):e}function ra(i){const e=oi(i.mapValue.fields[ug].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n,s,a,c,f,m,y,v,I){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=I}}const Ql="(default)";class ia{constructor(e,n){this.projectId=e,this.database=n||Ql}static empty(){return new ia("","")}get isDefaultDatabase(){return this.database===Ql}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="__type__",j0="__max__",Nl={mapValue:{}},hg="__vector__",Kl="value";function li(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Oh(i)?4:W0(i)?9007199254740991:z0(i)?10:11:Te(28295,{value:i})}function ar(i,e){if(i===e)return!0;const n=li(i);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ra(i).isEqual(ra(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=oi(a.timestampValue),m=oi(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return ai(a.bytesValue).isEqual(ai(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return yt(a.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return yt(a.integerValue)===yt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=yt(a.doubleValue),m=yt(c.doubleValue);return f===m?ql(f)===ql(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ws(i.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Qp(f)!==Qp(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!ar(f[y],m[y])))return!1;return!0}(i,e);default:return Te(52216,{left:i})}}function sa(i,e){return(i.values||[]).find(n=>ar(n,e))!==void 0}function $s(i,e){if(i===e)return 0;const n=li(i),s=li(e);if(n!==s)return xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(i.booleanValue,e.booleanValue);case 2:return function(c,f){const m=yt(c.integerValue||c.doubleValue),y=yt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return Gp(i.timestampValue,e.timestampValue);case 4:return Gp(ra(i),ra(e));case 5:return fh(i.stringValue,e.stringValue);case 6:return function(c,f){const m=ai(c),y=ai(f);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),y=f.split("/");for(let v=0;v<m.length&&v<y.length;v++){const I=xe(m[v],y[v]);if(I!==0)return I}return xe(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const m=xe(yt(c.latitude),yt(f.latitude));return m!==0?m:xe(yt(c.longitude),yt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Xp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var m,y,v,I;const k=c.fields||{},R=f.fields||{},$=(m=k[Kl])===null||m===void 0?void 0:m.arrayValue,Y=(y=R[Kl])===null||y===void 0?void 0:y.arrayValue,Z=xe(((v=$==null?void 0:$.values)===null||v===void 0?void 0:v.length)||0,((I=Y==null?void 0:Y.values)===null||I===void 0?void 0:I.length)||0);return Z!==0?Z:Xp($,Y)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===Nl.mapValue&&f===Nl.mapValue)return 0;if(c===Nl.mapValue)return 1;if(f===Nl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=f.fields||{},I=Object.keys(v);y.sort(),I.sort();for(let k=0;k<y.length&&k<I.length;++k){const R=fh(y[k],I[k]);if(R!==0)return R;const $=$s(m[y[k]],v[I[k]]);if($!==0)return $}return xe(y.length,I.length)}(i.mapValue,e.mapValue);default:throw Te(23264,{Pe:n})}}function Gp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return xe(i,e);const n=oi(i),s=oi(e),a=xe(n.seconds,s.seconds);return a!==0?a:xe(n.nanos,s.nanos)}function Xp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=$s(n[a],s[a]);if(c)return c}return xe(n.length,s.length)}function Hs(i){return dh(i)}function dh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=oi(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ai(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Ee.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=dh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${dh(n.fields[f])}`;return a+"}"}(i.mapValue):Te(61005,{value:i})}function Ll(i){switch(li(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ou(i);return e?16+Ll(e):16;case 5:return 2*i.stringValue.length;case 6:return ai(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Ll(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return hi(s.fields,(c,f)=>{a+=c.length+Ll(f)}),a}(i.mapValue);default:throw Te(13486,{value:i})}}function ph(i){return!!i&&"integerValue"in i}function Mh(i){return!!i&&"arrayValue"in i}function Yp(i){return!!i&&"nullValue"in i}function Jp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bl(i){return!!i&&"mapValue"in i}function z0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[cg])===null||n===void 0?void 0:n.stringValue)===hg}function Xo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return hi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Xo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function W0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===j0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(n)}setAll(e){let n=Ut.emptyPath(),s={},a=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}f?s[m.lastSegment()]=Xo(f):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Bl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){hi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new un(Xo(this.value))}}function fg(i){const e=[];return hi(i.fields,(n,s)=>{const a=new Ut([n]);if(Bl(s)){const c=fg(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,s,a,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,Pe.min(),Pe.min(),Pe.min(),un.empty(),0)}static newFoundDocument(e,n,s,a){return new Kt(e,1,n,Pe.min(),s,a,0)}static newNoDocument(e,n){return new Kt(e,2,n,Pe.min(),Pe.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,Pe.min(),Pe.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.position=e,this.inclusive=n}}function Zp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),n.key):s=$s(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function em(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ar(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function $0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{}class Ct extends dg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new q0(e,n,s):n==="array-contains"?new G0(e,s):n==="in"?new X0(e,s):n==="not-in"?new Y0(e,s):n==="array-contains-any"?new J0(e,s):new Ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Q0(e,s):new K0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($s(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends dg{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new lr(e,n)}matches(e){return pg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function pg(i){return i.op==="and"}function mg(i){return H0(i)&&pg(i)}function H0(i){for(const e of i.filters)if(e instanceof lr)return!1;return!0}function mh(i){if(i instanceof Ct)return i.field.canonicalString()+i.op.toString()+Hs(i.value);if(mg(i))return i.filters.map(e=>mh(e)).join(",");{const e=i.filters.map(n=>mh(n)).join(",");return`${i.op}(${e})`}}function gg(i,e){return i instanceof Ct?function(s,a){return a instanceof Ct&&s.op===a.op&&s.field.isEqual(a.field)&&ar(s.value,a.value)}(i,e):i instanceof lr?function(s,a){return a instanceof lr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,m)=>c&&gg(f,a.filters[m]),!0):!1}(i,e):void Te(19439)}function yg(i){return i instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(i):i instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(yg).join(" ,")+"}"}(i):"Filter"}class q0 extends Ct{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q0 extends Ct{constructor(e,n){super(e,"in",n),this.keys=_g("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K0 extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=_g("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _g(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class G0 extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mh(n)&&sa(n.arrayValue,this.value)}}class X0 extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class Y0 extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sa(this.value.arrayValue,n)}}class J0 extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>sa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.Ie=null}}function tm(i,e=null,n=[],s=[],a=null,c=null,f=null){return new Z0(i,e,n,s,a,c,f)}function Lh(i){const e=Re(i);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>mh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hs(s)).join(",")),e.Ie=n}return e.Ie}function Bh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!$0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!gg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!em(i.startAt,e.startAt)&&em(i.endAt,e.endAt)}function gh(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function eE(i,e,n,s,a,c,f,m){return new au(i,e,n,s,a,c,f,m)}function vg(i){return new au(i)}function nm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function tE(i){return i.collectionGroup!==null}function Yo(i){const e=Re(i);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Rt(Ut.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Xl(c,s))}),n.has(Ut.keyField().canonicalString())||e.Ee.push(new Xl(Ut.keyField(),s))}return e.Ee}function sr(i){const e=Re(i);return e.de||(e.de=nE(e,Yo(i))),e.de}function nE(i,e){if(i.limitType==="F")return tm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Xl(a.field,c)});const n=i.endAt?new Gl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Gl(i.startAt.position,i.startAt.inclusive):null;return tm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function yh(i,e,n){return new au(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function lu(i,e){return Bh(sr(i),sr(e))&&i.limitType===e.limitType}function Eg(i){return`${Lh(sr(i))}|lt:${i.limitType}`}function Ls(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>yg(a)).join(", ")}]`),su(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Hs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Hs(a)).join(",")),`Target(${s})`}(sr(i))}; limitType=${i.limitType})`}function uu(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Yo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,m,y){const v=Zp(f,m,y);return f.inclusive?v<=0:v<0}(s.startAt,Yo(s),a)||s.endAt&&!function(f,m,y){const v=Zp(f,m,y);return f.inclusive?v>=0:v>0}(s.endAt,Yo(s),a))}(i,e)}function rE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function wg(i){return(e,n)=>{let s=!1;for(const a of Yo(i)){const c=iE(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function iE(i,e,n){const s=i.field.isKeyField()?Ee.comparator(e.key,n.key):function(c,f,m){const y=f.data.field(c),v=m.data.field(c);return y!==null&&v!==null?$s(y,v):Te(42886)}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return ig(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new ft(Ee.comparator);function Cr(){return sE}const Tg=new ft(Ee.comparator);function Qo(...i){let e=Tg;for(const n of i)e=e.insert(n.key,n);return e}function Ig(i){let e=Tg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Wi(){return Jo()}function Sg(){return Jo()}function Jo(){return new Qi(i=>i.toString(),(i,e)=>i.isEqual(e))}const oE=new ft(Ee.comparator),aE=new Rt(Ee.comparator);function Me(...i){let e=aE;for(const n of i)e=e.add(n);return e}const lE=new Rt(xe);function uE(){return lE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ql(e)?"-0":e}}function Ag(i){return{integerValue:""+i}}function cE(i,e){return M0(e)?Ag(e):bh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this._=void 0}}function hE(i,e,n){return i instanceof Yl?function(a,c){const f={fields:{[ag]:{stringValue:og},[ug]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Oh(c)&&(c=ou(c)),c&&(f.fields[lg]=c),{mapValue:f}}(n,e):i instanceof oa?Pg(i,e):i instanceof aa?Rg(i,e):function(a,c){const f=Cg(a,c),m=rm(f)+rm(a.Re);return ph(f)&&ph(a.Re)?Ag(m):bh(a.serializer,m)}(i,e)}function fE(i,e,n){return i instanceof oa?Pg(i,e):i instanceof aa?Rg(i,e):n}function Cg(i,e){return i instanceof Jl?function(s){return ph(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Yl extends cu{}class oa extends cu{constructor(e){super(),this.elements=e}}function Pg(i,e){const n=kg(e);for(const s of i.elements)n.some(a=>ar(a,s))||n.push(s);return{arrayValue:{values:n}}}class aa extends cu{constructor(e){super(),this.elements=e}}function Rg(i,e){let n=kg(e);for(const s of i.elements)n=n.filter(a=>!ar(a,s));return{arrayValue:{values:n}}}class Jl extends cu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function rm(i){return yt(i.integerValue||i.doubleValue)}function kg(i){return Mh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function dE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof oa&&a instanceof oa||s instanceof aa&&a instanceof aa?Ws(s.elements,a.elements,ar):s instanceof Jl&&a instanceof Jl?ar(s.Re,a.Re):s instanceof Yl&&a instanceof Yl}(i.transform,e.transform)}class pE{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hu{}function Ng(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Uh(i.key,Hn.none()):new la(i.key,i.data,Hn.none());{const n=i.data,s=un.empty();let a=new Rt(Ut.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new fi(i.key,s,new yn(a.toArray()),Hn.none())}}function mE(i,e,n){i instanceof la?function(a,c,f){const m=a.value.clone(),y=sm(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof fi?function(a,c,f){if(!bl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=sm(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(Vg(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Zo(i,e,n,s){return i instanceof la?function(c,f,m,y){if(!bl(c.precondition,f))return m;const v=c.value.clone(),I=om(c.fieldTransforms,y,f);return v.setAll(I),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof fi?function(c,f,m,y){if(!bl(c.precondition,f))return m;const v=om(c.fieldTransforms,y,f),I=f.data;return I.setAll(Vg(c)),I.setAll(v),f.convertToFoundDocument(f.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(k=>k.field))}(i,e,n,s):function(c,f,m){return bl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function gE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Cg(s.transform,a||null);c!=null&&(n===null&&(n=un.empty()),n.set(s.field,c))}return n||null}function im(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ws(s,a,(c,f)=>dE(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class la extends hu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fi extends hu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Vg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function sm(i,e,n){const s=new Map;Qe(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,fE(f,m,n[a]))}return s}function om(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,hE(c,f,e))}return s}class Uh extends hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yE extends hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&mE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Zo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Zo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Sg();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(a.key)?null:m;const y=Ng(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(Pe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(n,s)=>im(n,s))&&Ws(this.baseMutations,e.baseMutations,(n,s)=>im(n,s))}}class jh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return oE}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new jh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Ue;function wE(i){switch(i){case K.OK:return Te(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function xg(i){if(i===void 0)return Ar("GRPC error has no .code"),K.UNKNOWN;switch(i){case wt.OK:return K.OK;case wt.CANCELLED:return K.CANCELLED;case wt.UNKNOWN:return K.UNKNOWN;case wt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case wt.INTERNAL:return K.INTERNAL;case wt.UNAVAILABLE:return K.UNAVAILABLE;case wt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case wt.NOT_FOUND:return K.NOT_FOUND;case wt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case wt.ABORTED:return K.ABORTED;case wt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case wt.DATA_LOSS:return K.DATA_LOSS;default:return Te(39323,{code:i})}}(Ue=wt||(wt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new ti([4294967295,4294967295],0);function am(i){const e=tg().encode(i),n=new Qm;return n.update(e),new Uint8Array(n.digest())}function lm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ti([n,s],0),new ti([a,c],0)]}class zh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(s<0)throw new Ko(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ti.fromNumber(this.pe)}we(e,n,s){let a=e.add(n.multiply(ti.fromNumber(s)));return a.compare(TE)===1&&(a=new ti([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=am(e),[s,a]=lm(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);if(!this.be(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new zh(c,a,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.pe===0)return;const n=am(e),[s,a]=lm(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new fu(Pe.min(),a,new ft(xe),Cr(),Me())}}class ua{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ua(s,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,s,a){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=a}}class Dg{constructor(e,n){this.targetId=e,this.Ce=n}}class Fg{constructor(e,n,s=jt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class um{constructor(){this.Fe=0,this.Me=cm(),this.xe=jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Me(),n=Me(),s=Me();return this.Me.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Te(38017,{changeType:c})}}),new ua(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=cm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class IE{constructor(e){this.ze=e,this.je=new Map,this.He=Cr(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new ft(xe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,s=e.Ce.count,a=this._t(n);if(a){const c=a.target;if(gh(c))if(s===0){const f=new Ee(c.path);this.tt(n,f,Kt.newNoDocument(f,Pe.min()))}else Qe(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const m=this.ct(e),y=m?this.lt(m,e,f):1;if(y!==0){this.st(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,m;try{f=ai(s).toUint8Array()}catch(y){if(y instanceof sg)return zs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new zh(f,a,c)}catch(y){return zs(y instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,c,null),a++)}),a}It(e){const n=new Map;this.je.forEach((c,f)=>{const m=this._t(f);if(m){if(c.current&&gh(m.target)){const y=new Ee(m.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,Kt.newNoDocument(y,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=Me();this.Ye.forEach((c,f)=>{let m=!0;f.forEachWhile(y=>{const v=this._t(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const a=new fu(e,n,this.Ze,this.He,s);return this.He=Cr(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new ft(xe),a}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new um,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(xe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(xe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new um),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vl(){return new ft(Ee.comparator)}function cm(){return new ft(Ee.comparator)}const SE={asc:"ASCENDING",desc:"DESCENDING"},AE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CE={and:"AND",or:"OR"};class PE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _h(i,e){return i.useProto3Json||su(e)?e:{value:e}}function Zl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Og(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function RE(i,e){return Zl(i,e.toTimestamp())}function or(i){return Qe(!!i,49232),Pe.fromTimestamp(function(n){const s=oi(n);return new Pt(s.seconds,s.nanos)}(i))}function Wh(i,e){return vh(i,e).canonicalString()}function vh(i,e){const n=function(a){return new lt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Mg(i){const e=lt.fromString(i);return Qe(jg(e),10190,{key:e.toString()}),e}function Eh(i,e){return Wh(i.databaseId,e.path)}function nh(i,e){const n=Mg(e);if(n.get(1)!==i.databaseId.projectId)throw new ye(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ye(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(Bg(n))}function Lg(i,e){return Wh(i.databaseId,e)}function kE(i){const e=Mg(i);return e.length===4?lt.emptyPath():Bg(e)}function wh(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Bg(i){return Qe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function hm(i,e,n){return{name:Eh(i,e),fields:n.value.mapValue.fields}}function NE(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,I){return v.useProto3Json?(Qe(I===void 0||typeof I=="string",58123),jt.fromBase64String(I||"")):(Qe(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),jt.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(v){const I=v.code===void 0?K.UNKNOWN:xg(v.code);return new ye(I,v.message||"")}(f);n=new Fg(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=nh(i,s.document.name),c=or(s.document.updateTime),f=s.document.createTime?or(s.document.createTime):Pe.min(),m=new un({mapValue:{fields:s.document.fields}}),y=Kt.newFoundDocument(a,c,f,m),v=s.targetIds||[],I=s.removedTargetIds||[];n=new Ul(v,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=nh(i,s.document),c=s.readTime?or(s.readTime):Pe.min(),f=Kt.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Ul([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=nh(i,s.document),c=s.removedTargetIds||[];n=new Ul([],c,a,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new EE(a,c),m=s.targetId;n=new Dg(m,f)}}return n}function VE(i,e){let n;if(e instanceof la)n={update:hm(i,e.key,e.value)};else if(e instanceof Uh)n={delete:Eh(i,e.key)};else if(e instanceof fi)n={update:hm(i,e.key,e.data),updateMask:UE(e.fieldMask)};else{if(!(e instanceof yE))return Te(16599,{ft:e.type});n={verify:Eh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const m=f.transform;if(m instanceof Yl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof oa)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof aa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Jl)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Te(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:RE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)}(i,e.precondition)),n}function xE(i,e){return i&&i.length>0?(Qe(e!==void 0,14353),i.map(n=>function(a,c){let f=a.updateTime?or(a.updateTime):or(c);return f.isEqual(Pe.min())&&(f=or(c)),new pE(f,a.transformResults||[])}(n,e))):[]}function DE(i,e){return{documents:[Lg(i,e.path)]}}function FE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Lg(i,a);const c=function(v){if(v.length!==0)return Ug(lr.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(I=>function(R){return{field:Bs(R.field),direction:LE(R.dir)}}(I))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=_h(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:n,parent:a}}function OE(i){let e=kE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Qe(s===1,65062);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(k){const R=bg(k);return R instanceof lr&&mg(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(k){return k.map(R=>function(Y){return new Xl(bs(Y.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(R))}(n.orderBy));let m=null;n.limit&&(m=function(k){let R;return R=typeof k=="object"?k.value:k,su(R)?null:R}(n.limit));let y=null;n.startAt&&(y=function(k){const R=!!k.before,$=k.values||[];return new Gl($,R)}(n.startAt));let v=null;return n.endAt&&(v=function(k){const R=!k.before,$=k.values||[];return new Gl($,R)}(n.endAt)),eE(e,a,f,c,m,"F",y,v)}function ME(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=bs(n.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=bs(n.unaryFilter.field);return Ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=bs(n.unaryFilter.field);return Ct.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=bs(n.unaryFilter.field);return Ct.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(i):i.fieldFilter!==void 0?function(n){return Ct.create(bs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(s=>bg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(i):Te(30097,{filter:i})}function LE(i){return SE[i]}function BE(i){return AE[i]}function bE(i){return CE[i]}function Bs(i){return{fieldPath:i.canonicalString()}}function bs(i){return Ut.fromServerFormat(i.fieldPath)}function Ug(i){return i instanceof Ct?function(n){if(n.op==="=="){if(Jp(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(Yp(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jp(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(Yp(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:BE(n.op),value:n.value}}}(i):i instanceof lr?function(n){const s=n.getFilters().map(a=>Ug(a));return s.length===1?s[0]:{compositeFilter:{op:bE(n.op),filters:s}}}(i):Te(54877,{filter:i})}function UE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,a,c=Pe.min(),f=Pe.min(),m=jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.wt=e}}function zE(i){const e=OE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.Cn=new $E}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(si.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class $E{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Rt(lt.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Rt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zg=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(zg,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new qs(0)}static lr(){return new qs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="LruGarbageCollector",HE=1048576;function pm([i,e],[n,s]){const a=xe(i,n);return a===0?xe(e,s):a}class qE{constructor(e){this.Er=e,this.buffer=new Rt(pm),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();pm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){le(dm,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Js(n)?le(dm,"Ignoring IndexedDB error during garbage collection: ",n):await Ys(n)}await this.mr(3e5)})}}class KE{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return H.resolve(iu.le);const s=new qE(n);return this.gr.forEachTarget(e,a=>s.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>s.Rr(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(fm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fm):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,a,c,f,m,y,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,f=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(s=k,m=Date.now(),this.removeTargets(e,s,n))).next(k=>(c=k,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(k=>(v=Date.now(),Ms()<=je.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-I}ms
	Determined least recently used ${a} in `+(m-f)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${k} documents in `+(v-y)+`ms
Total Duration: ${v-I}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}function GE(i,e){return new KE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.changes=new Qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Zo(s.mutation,a,yn.empty(),Pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Me()){const a=Wi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=Qo();return c.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Wi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Me()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,a){let c=Cr();const f=Jo(),m=function(){return Jo()}();return n.forEach((y,v)=>{const I=s.get(v.key);a.has(v.key)&&(I===void 0||I.mutation instanceof fi)?c=c.insert(v.key,v):I!==void 0?(f.set(v.key,I.mutation.getFieldMask()),Zo(I.mutation,v,I.mutation.getFieldMask(),Pt.now())):f.set(v.key,yn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((v,I)=>f.set(v,I)),n.forEach((v,I)=>{var k;return m.set(v,new YE(I,(k=f.get(v))!==null&&k!==void 0?k:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Jo();let a=new ft((f,m)=>f-m),c=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let I=s.get(y)||yn.empty();I=m.applyToLocalView(v,I),s.set(y,I);const k=(a.get(m.batchId)||Me()).add(y);a=a.insert(m.batchId,k)})}).next(()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,I=y.value,k=Sg();I.forEach(R=>{if(!c.has(R)){const $=Ng(n.get(R),s.get(R));$!==null&&k.set(R,$),c=c.add(R)}}),f.push(this.documentOverlayCache.saveOverlays(e,v,k))}return H.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):H.resolve(Wi());let m=na,y=c;return f.next(v=>H.forEach(v,(I,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),c.get(I)?H.resolve():this.remoteDocumentCache.getEntry(e,I).next(R=>{y=y.insert(I,R)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,y,v,Me())).next(I=>({batchId:m,changes:Ig(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next(s=>{let a=Qo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Qo();return this.indexManager.getCollectionParents(e,c).next(m=>H.forEach(m,y=>{const v=function(k,R){return new au(R,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(I=>{I.forEach((k,R)=>{f=f.insert(k,R)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((y,v)=>{const I=v.getKey();f.get(I)===null&&(f=f.insert(I,Kt.newInvalidDocument(I)))});let m=Qo();return f.forEach((y,v)=>{const I=c.get(y);I!==void 0&&Zo(I.mutation,v,yn.empty(),Pt.now()),uu(n,v)&&(m=m.insert(y,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return H.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:zE(a.bundledQuery),readTime:or(a.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.overlays=new ft(Ee.comparator),this.Qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Wi();return H.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.St(e,n,c)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Qr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const a=Wi(),c=n.length+1,f=new Ee(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return H.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new ft((v,I)=>v-I);const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let I=c.get(v.largestBatchId);I===null&&(I=Wi(),c=c.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const m=Wi(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,I)=>m.set(v,I)),!(m.size()>=a)););return H.resolve(m)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Qr.get(a.largestBatchId).delete(s.key);this.Qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new vE(n,s));let c=this.Qr.get(n);c===void 0&&(c=Me(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.$r=new Rt(Ft.Ur),this.Kr=new Rt(Ft.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Ft(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Ft(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Ee(new lt([])),s=new Ft(n,e),a=new Ft(n,e+1),c=[];return this.Kr.forEachInRange([s,a],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ee(new lt([])),s=new Ft(n,e),a=new Ft(n,e+1);let c=Me();return this.Kr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new Ft(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ee.comparator(e.key,n.key)||xe(e.Zr,n.Zr)}static Wr(e,n){return xe(e.Zr,n.Zr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Rt(Ft.Ur)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new _E(c,n,s,a);this.mutationQueue.push(f);for(const m of a)this.Xr=this.Xr.add(new Ft(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return H.resolve(f)}lookupMutationBatch(e,n){return H.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ti(s),c=a<0?0:a;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Fh:this.nr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ft(n,0),a=new Ft(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,a],f=>{const m=this.ei(f.Zr);c.push(m)}),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Rt(xe);return n.forEach(a=>{const c=new Ft(a,0),f=new Ft(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],m=>{s=s.add(m.Zr)})}),H.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const f=new Ft(new Ee(c),0);let m=new Rt(xe);return this.Xr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.Zr)),!0)},f),H.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const a=this.ei(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Qe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return H.forEach(n.mutations,a=>{const c=new Ft(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Ft(n,0),a=this.Xr.firstAfterOrEqual(s);return H.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.ii=e,this.docs=function(){return new ft(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let s=Cr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Kt.newInvalidDocument(a))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Cr();const f=n.path,m=new Ee(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:I}}=y.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||x0(V0(I),s)<=0||(a.has(I.key)||uu(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,n,s,a){Te(9500)}si(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new iw(this)}getSize(e){return H.resolve(this.size)}}class iw extends XE{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.persistence=e,this.oi=new Qi(n=>Lh(n),Bh),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new $h,this.targetCount=0,this.ui=qs.cr()}forEachTarget(e,n){return this.oi.forEach((s,a)=>n(a)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),H.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new qs(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Tr(n),H.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),H.waitFor(c).next(()=>a)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),H.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.ci={},this.overlays={},this.li=new iu(0),this.hi=!1,this.hi=!0,this.Pi=new tw,this.referenceDelegate=e(this),this.Ti=new sw(this),this.indexManager=new WE,this.remoteDocumentCache=function(a){return new rw(a)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new jE(n),this.Ei=new ZE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ew,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new nw(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){le("MemoryPersistence","Starting transaction:",e);const a=new ow(this.li.next());return this.referenceDelegate.di(),s(a).next(c=>this.referenceDelegate.Ai(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ri(e,n){return H.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class ow extends F0{constructor(e){super(),this.currentSequenceNumber=e}}class Hh{constructor(e){this.persistence=e,this.Vi=new $h,this.mi=null}static fi(e){return new Hh(e)}get gi(){if(this.mi)return this.mi;throw Te(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.gi,s=>{const a=Ee.fromPath(s);return this.pi(e,a).next(c=>{c||n.removeEntry(a,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return H.or([()=>H.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class eu{constructor(e,n){this.persistence=e,this.yi=new Qi(s=>L0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=GE(this,n)}static fi(e,n){return new eu(e,n)}di(){}Ai(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return H.forEach(this.yi,(s,a)=>this.Dr(e,s,a).next(c=>c?H.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.si(e,f=>this.Dr(e,f,n).next(m=>{m||(s++,c.removeEntry(f,Pe.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ll(e.data.value)),n}Dr(e,n,s){return H.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return H.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.ds=s,this.As=a}static Rs(e,n){let s=Me(),a=Me();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new qh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return tv()?8:O0(Z_())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new aw;return this.Ss(e,n,f).next(m=>{if(c.result=m,this.fs)return this.Ds(e,n,f,m.size)})}).next(()=>c.result)}Ds(e,n,s,a){return s.documentReadCount<this.gs?(Ms()<=je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),H.resolve()):(Ms()<=je.DEBUG&&le("QueryEngine","Query:",Ls(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ps*a?(Ms()<=je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):H.resolve())}ws(e,n){if(nm(n))return H.resolve(null);let s=sr(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=yh(n,null,"F"),s=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Me(...c);return this.ys.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.vs(n,m);return this.Cs(n,v,f,y.readTime)?this.ws(e,yh(n,null,"F")):this.Fs(e,v,n,y)}))})))}bs(e,n,s,a){return nm(n)||a.isEqual(Pe.min())?H.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,a)?H.resolve(null):(Ms()<=je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ls(n)),this.Fs(e,f,n,N0(a,na)).next(m=>m))})}vs(e,n){let s=new Rt(wg(e));return n.forEach((a,c)=>{uu(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return Ms()<=je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.ys.getDocumentsMatchingQuery(e,n,si.min(),s)}Fs(e,n,s,a){return this.ys.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="LocalStore",uw=3e8;class cw{constructor(e,n,s,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new ft(xe),this.Os=new Qi(c=>Lh(c),Bh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JE(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function hw(i,e,n,s){return new cw(i,e,n,s)}async function $g(i,e){const n=Re(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],m=[];let y=Me();for(const v of a){f.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}for(const v of c){m.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}return n.localDocuments.getDocuments(s,y).next(v=>({ks:v,removedBatchIds:f,addedBatchIds:m}))})})}function fw(i,e){const n=Re(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,v,I){const k=v.batch,R=k.keys();let $=H.resolve();return R.forEach(Y=>{$=$.next(()=>I.getEntry(y,Y)).next(Z=>{const B=v.docVersions.get(Y);Qe(B!==null,48541),Z.version.compareTo(B)<0&&(k.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),I.addEntry(Z)))})}),$.next(()=>m.mutationQueue.removeMutationBatch(y,k))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Me();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Hg(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function dw(i,e){const n=Re(i),s=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const m=[];e.targetChanges.forEach((I,k)=>{const R=a.get(k);if(!R)return;m.push(n.Ti.removeMatchingKeys(c,I.removedDocuments,k).next(()=>n.Ti.addMatchingKeys(c,I.addedDocuments,k)));let $=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?$=$.withResumeToken(jt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):I.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(I.resumeToken,s)),a=a.insert(k,$),function(Z,B,Ce){return Z.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=uw?!0:Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0}(R,$,I)&&m.push(n.Ti.updateTargetData(c,$))});let y=Cr(),v=Me();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(pw(c,f,e.documentUpdates).next(I=>{y=I.qs,v=I.Qs})),!s.isEqual(Pe.min())){const I=n.Ti.getLastRemoteSnapshotVersion(c).next(k=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(I)}return H.waitFor(m).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,v)).next(()=>y)}).then(c=>(n.xs=a,c))}function pw(i,e,n){let s=Me(),a=Me();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Cr();return n.forEach((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Pe.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):le(Qh,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)}),{qs:f,Qs:a}})}function mw(i,e){const n=Re(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Fh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function gw(i,e){const n=Re(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Ti.getTargetData(s,e).next(c=>c?(a=c,H.resolve(a)):n.Ti.allocateTargetId(s).next(f=>(a=new Jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.xs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Th(i,e,n){const s=Re(i),a=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!Js(f))throw f;le(Qh,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(a.target)}function mm(i,e,n){const s=Re(i);let a=Pe.min(),c=Me();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,v,I){const k=Re(y),R=k.Os.get(I);return R!==void 0?H.resolve(k.xs.get(R)):k.Ti.getTargetData(v,I)}(s,f,sr(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,m.targetId).next(y=>{c=y})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?a:Pe.min(),n?c:Me())).next(m=>(yw(s,rE(e),m),{documents:m,$s:c})))}function yw(i,e,n){let s=i.Ns.get(e)||Pe.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Ns.set(e,s)}class gm{constructor(){this.activeTargetIds=uE()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _w{constructor(){this.xo=new gm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new gm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="ConnectivityMonitor";class _m{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){le(ym,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){le(ym,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function Ih(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="RestConnection",Ew={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ww{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${a}`,this.Go=this.databaseId.database===Ql?`project_id=${s}`:`project_id=${s}&database_id=${a}`}zo(e,n,s,a,c){const f=Ih(),m=this.jo(e,n.toUriEncodedString());le(rh,`Sending RPC '${e}' ${f}:`,m,s);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,a,c);const{host:v}=new URL(m),I=Vh(v);return this.Jo(e,m,y,s,I).then(k=>(le(rh,`Received RPC '${e}' ${f}: `,k),k),k=>{throw zs(rh,`RPC '${e}' ${f} failed with error: `,k,"url: ",m,"request:",s),k})}Yo(e,n,s,a,c,f){return this.zo(e,n,s,a,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}jo(e,n){const s=Ew[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class Iw extends ww{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Ih();return new Promise((m,y)=>{const v=new Km;v.setWithCredentials(!0),v.listenOnce(Gm.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ml.NO_ERROR:const k=v.getResponseJson();le(qt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(k)),m(k);break;case Ml.TIMEOUT:le(qt,`RPC '${e}' ${f} timed out`),y(new ye(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const R=v.getStatus();if(le(qt,`RPC '${e}' ${f} failed with status:`,R,"response text:",v.getResponseText()),R>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const Y=$==null?void 0:$.error;if(Y&&Y.status&&Y.message){const Z=function(Ce){const we=Ce.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(we)>=0?we:K.UNKNOWN}(Y.status);y(new ye(Z,Y.message))}else y(new ye(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ye(K.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{h_:e,streamId:f,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{le(qt,`RPC '${e}' ${f} completed.`)}});const I=JSON.stringify(a);le(qt,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",I,s,15)})}I_(e,n,s){const a=Ih(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Jm(),m=Ym(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const I=c.join("");le(qt,`Creating RPC '${e}' stream ${a}: ${I}`,y);const k=f.createWebChannel(I,y);this.E_(k);let R=!1,$=!1;const Y=new Tw({Zo:B=>{$?le(qt,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(R||(le(qt,`Opening RPC '${e}' stream ${a} transport.`),k.open(),R=!0),le(qt,`RPC '${e}' stream ${a} sending:`,B),k.send(B))},Xo:()=>k.close()}),Z=(B,Ce,we)=>{B.listen(Ce,Ie=>{try{we(Ie)}catch(De){setTimeout(()=>{throw De},0)}})};return Z(k,qo.EventType.OPEN,()=>{$||(le(qt,`RPC '${e}' stream ${a} transport opened.`),Y.__())}),Z(k,qo.EventType.CLOSE,()=>{$||($=!0,le(qt,`RPC '${e}' stream ${a} transport closed`),Y.u_(),this.d_(k))}),Z(k,qo.EventType.ERROR,B=>{$||($=!0,zs(qt,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),Y.u_(new ye(K.UNAVAILABLE,"The operation could not be completed")))}),Z(k,qo.EventType.MESSAGE,B=>{var Ce;if(!$){const we=B.data[0];Qe(!!we,16349);const Ie=we,De=(Ie==null?void 0:Ie.error)||((Ce=Ie[0])===null||Ce===void 0?void 0:Ce.error);if(De){le(qt,`RPC '${e}' stream ${a} received error:`,De);const ut=De.status;let Be=function(A){const C=wt[A];if(C!==void 0)return xg(C)}(ut),V=De.message;Be===void 0&&(Be=K.INTERNAL,V="Unknown error status: "+ut+" with message "+De.message),$=!0,Y.u_(new ye(Be,V)),k.close()}else le(qt,`RPC '${e}' stream ${a} received:`,we),Y.c_(we)}}),Z(m,Xm.STAT_EVENT,B=>{B.stat===hh.PROXY?le(qt,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===hh.NOPROXY&&le(qt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Y.a_()},0),Y}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function ih(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(i){return new PE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=a,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-s);a>0&&le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="PersistentStream";class Qg{constructor(e,n,s,a,c,f,m,y){this.xi=e,this.S_=s,this.D_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new qg(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.v_===n&&this.z_(s,a)},s=>{e(()=>{const a=new ye(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(a)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{s(()=>this.j_(a))}),this.stream.onMessage(a=>{s(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return le(vm,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(le(vm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sw extends Qg{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=NE(this.serializer,e),s=function(c){if(!("targetChange"in c))return Pe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Pe.min():f.readTime?or(f.readTime):Pe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=wh(this.serializer),n.addTarget=function(c,f){let m;const y=f.target;if(m=gh(y)?{documents:DE(c,y)}:{query:FE(c,y).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Og(c,f.resumeToken);const v=_h(c,f.expectedCount);v!==null&&(m.expectedCount=v)}else if(f.snapshotVersion.compareTo(Pe.min())>0){m.readTime=Zl(c,f.snapshotVersion.toTimestamp());const v=_h(c,f.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=ME(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=wh(this.serializer),n.removeTarget=e,this.Q_(n)}}class Aw extends Qg{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=xE(e.writeResults,e.commitTime),s=or(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=wh(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>VE(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{}class Pw extends Cw{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new ye(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,vh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(K.UNKNOWN,c.toString())})}Yo(e,n,s,a,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(e,vh(n,s),a,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ye(K.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Rw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ar(n),this.ua=!1):le("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="RemoteStore";class kw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{Ki(this)&&(le(Hi,"Restarting streams for network reachability change."),await async function(y){const v=Re(y);v.da.add(4),await ca(v),v.Va.set("Unknown"),v.da.delete(4),await pu(v)}(this))})}),this.Va=new Rw(s,a)}}async function pu(i){if(Ki(i))for(const e of i.Aa)await e(!0)}async function ca(i){for(const e of i.Aa)await e(!1)}function Kg(i,e){const n=Re(i);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Yh(n)?Xh(n):Zs(n).N_()&&Gh(n,e))}function Kh(i,e){const n=Re(i),s=Zs(n);n.Ea.delete(e),s.N_()&&Gg(n,e),n.Ea.size===0&&(s.N_()?s.k_():Ki(n)&&n.Va.set("Unknown"))}function Gh(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(i).Z_(e)}function Gg(i,e){i.ma.Ke(e),Zs(i).X_(e)}function Xh(i){i.ma=new IE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Zs(i).start(),i.Va.ca()}function Yh(i){return Ki(i)&&!Zs(i).O_()&&i.Ea.size>0}function Ki(i){return Re(i).da.size===0}function Xg(i){i.ma=void 0}async function Nw(i){i.Va.set("Online")}async function Vw(i){i.Ea.forEach((e,n)=>{Gh(i,e)})}async function xw(i,e){Xg(i),Yh(i)?(i.Va.Pa(e),Xh(i)):i.Va.set("Unknown")}async function Dw(i,e,n){if(i.Va.set("Online"),e instanceof Fg&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const m of c.targetIds)a.Ea.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.Ea.delete(m),a.ma.removeTarget(m))}(i,e)}catch(s){le(Hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await tu(i,s)}else if(e instanceof Ul?i.ma.Xe(e):e instanceof Dg?i.ma.ot(e):i.ma.nt(e),!n.isEqual(Pe.min()))try{const s=await Hg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const m=c.ma.It(f);return m.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.Ea.get(v);I&&c.Ea.set(v,I.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,v)=>{const I=c.Ea.get(y);if(!I)return;c.Ea.set(y,I.withResumeToken(jt.EMPTY_BYTE_STRING,I.snapshotVersion)),Gg(c,y);const k=new Jr(I.target,y,v,I.sequenceNumber);Gh(c,k)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){le(Hi,"Failed to raise snapshot:",s),await tu(i,s)}}async function tu(i,e,n){if(!Js(e))throw e;i.da.add(1),await ca(i),i.Va.set("Offline"),n||(n=()=>Hg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{le(Hi,"Retrying IndexedDB access"),await n(),i.da.delete(1),await pu(i)})}function Yg(i,e){return e().catch(n=>tu(i,n,e))}async function mu(i){const e=Re(i),n=ui(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Fh;for(;Fw(e);)try{const a=await mw(e.localStore,s);if(a===null){e.Ia.length===0&&n.k_();break}s=a.batchId,Ow(e,a)}catch(a){await tu(e,a)}Jg(e)&&Zg(e)}function Fw(i){return Ki(i)&&i.Ia.length<10}function Ow(i,e){i.Ia.push(e);const n=ui(i);n.N_()&&n.ea&&n.ta(e.mutations)}function Jg(i){return Ki(i)&&!ui(i).O_()&&i.Ia.length>0}function Zg(i){ui(i).start()}async function Mw(i){ui(i).ia()}async function Lw(i){const e=ui(i);for(const n of i.Ia)e.ta(n.mutations)}async function Bw(i,e,n){const s=i.Ia.shift(),a=jh.from(s,e,n);await Yg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await mu(i)}async function bw(i,e){e&&ui(i).ea&&await async function(s,a){if(function(f){return wE(f)&&f!==K.ABORTED}(a.code)){const c=s.Ia.shift();ui(s).L_(),await Yg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await mu(s)}}(i,e),Jg(i)&&Zg(i)}async function Em(i,e){const n=Re(i);n.asyncQueue.verifyOperationInProgress(),le(Hi,"RemoteStore received new credentials");const s=Ki(n);n.da.add(3),await ca(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await pu(n)}async function Uw(i,e){const n=Re(i);e?(n.da.delete(2),await pu(n)):e||(n.da.add(2),await ca(n),n.Va.set("Unknown"))}function Zs(i){return i.fa||(i.fa=function(n,s,a){const c=Re(n);return c.oa(),new Sw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:Nw.bind(null,i),n_:Vw.bind(null,i),i_:xw.bind(null,i),Y_:Dw.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),Yh(i)?Xh(i):i.Va.set("Unknown")):(await i.fa.stop(),Xg(i))})),i.fa}function ui(i){return i.ga||(i.ga=function(n,s,a){const c=Re(n);return c.oa(),new Aw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Mw.bind(null,i),i_:bw.bind(null,i),na:Lw.bind(null,i),ra:Bw.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await mu(i)):(await i.ga.stop(),i.Ia.length>0&&(le(Hi,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,m=new Jh(e,n,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zh(i,e){if(Ar("AsyncQueue",`${e}: ${i}`),Js(i))return new ye(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{static emptySet(e){return new js(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Qo(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new js;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.pa=new ft(Ee.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Te(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Qs{constructor(e,n,s,a,c,f,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Qs(e,n,js.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class zw{constructor(){this.queries=Tm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Re(n),c=a.queries;a.queries=Tm(),c.forEach((f,m)=>{for(const y of m.Sa)y.onError(s)})})(this,new ye(K.ABORTED,"Firestore shutting down"))}}function Tm(){return new Qi(i=>Eg(i),lu)}async function Ww(i,e){const n=Re(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Da()&&e.va()&&(s=2):(c=new jw,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(a,!0);break;case 1:c.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const m=Zh(f,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&ef(n)}async function $w(i,e){const n=Re(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.va()?0:1:!c.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Hw(i,e){const n=Re(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Ma(a)&&(s=!0);f.ba=a}}s&&ef(n)}function qw(i,e,n){const s=Re(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function ef(i){i.Ca.forEach(e=>{e.next()})}var Sh,Im;(Im=Sh||(Sh={})).xa="default",Im.Cache="cache";class Qw{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Sh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.key=e}}class ty{constructor(e){this.key=e}}class Kw{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.Za=wg(e),this.Xa=new js(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new wm,a=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,k)=>{const R=a.get(I),$=uu(this.query,k)?k:null,Y=!!R&&this.mutatedKeys.has(R.key),Z=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let B=!1;R&&$?R.data.isEqual($.data)?Y!==Z&&(s.track({type:3,doc:$}),B=!0):this.ru(R,$)||(s.track({type:2,doc:$}),B=!0,(y&&this.Za($,y)>0||v&&this.Za($,v)<0)&&(m=!0)):!R&&$?(s.track({type:0,doc:$}),B=!0):R&&!$&&(s.track({type:1,doc:R}),B=!0,(y||v)&&(m=!0)),B&&($?(f=f.add($),c=Z?c.add(I):c.delete(I)):(f=f.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const I=this.query.limitType==="F"?f.last():f.first();f=f.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{Xa:f,nu:s,Cs:m,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((I,k)=>function($,Y){const Z=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:B})}};return Z($)-Z(Y)}(I.type,k.type)||this.Za(I.doc,k.doc)),this.iu(s),a=a!=null&&a;const m=n&&!a?this.su():[],y=this.Ya.size===0&&this.current&&!a?1:0,v=y!==this.Ja;return this.Ja=y,f.length!==0||v?{snapshot:new Qs(this.query,e.Xa,c,f,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new wm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new ty(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new ey(s))}),n}au(e){this.Ha=e.$s,this.Ya=Me();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Qs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const tf="SyncEngine";class Gw{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Xw{constructor(e){this.key=e,this.cu=!1}}class Yw{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Qi(m=>Eg(m),lu),this.Pu=new Map,this.Tu=new Set,this.Iu=new ft(Ee.comparator),this.Eu=new Map,this.du=new $h,this.Au={},this.Ru=new Map,this.Vu=qs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Jw(i,e,n=!0){const s=ay(i);let a;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.uu()):a=await ny(s,e,n,!0),a}async function Zw(i,e){const n=ay(i);await ny(n,e,!0,!1)}async function ny(i,e,n,s){const a=await gw(i.localStore,sr(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await e1(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&Kg(i.remoteStore,a),m}async function e1(i,e,n,s,a){i.fu=(k,R,$)=>async function(Z,B,Ce,we){let Ie=B.view.tu(Ce);Ie.Cs&&(Ie=await mm(Z.localStore,B.query,!1).then(({documents:V})=>B.view.tu(V,Ie)));const De=we&&we.targetChanges.get(B.targetId),ut=we&&we.targetMismatches.get(B.targetId)!=null,Be=B.view.applyChanges(Ie,Z.isPrimaryClient,De,ut);return Am(Z,B.targetId,Be.ou),Be.snapshot}(i,k,R,$);const c=await mm(i.localStore,e,!0),f=new Kw(e,c.$s),m=f.tu(c.documents),y=ua.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(m,i.isPrimaryClient,y);Am(i,n,v.ou);const I=new Gw(e,n,f);return i.hu.set(e,I),i.Pu.has(n)?i.Pu.get(n).push(e):i.Pu.set(n,[e]),v.snapshot}async function t1(i,e,n){const s=Re(i),a=s.hu.get(e),c=s.Pu.get(a.targetId);if(c.length>1)return s.Pu.set(a.targetId,c.filter(f=>!lu(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Th(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Kh(s.remoteStore,a.targetId),Ah(s,a.targetId)}).catch(Ys)):(Ah(s,a.targetId),await Th(s.localStore,a.targetId,!0))}async function n1(i,e){const n=Re(i),s=n.hu.get(e),a=n.Pu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Kh(n.remoteStore,s.targetId))}async function r1(i,e,n){const s=c1(i);try{const a=await function(f,m){const y=Re(f),v=Pt.now(),I=m.reduce(($,Y)=>$.add(Y.key),Me());let k,R;return y.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=Cr(),Z=Me();return y.Bs.getEntries($,I).next(B=>{Y=B,Y.forEach((Ce,we)=>{we.isValidDocument()||(Z=Z.add(Ce))})}).next(()=>y.localDocuments.getOverlayedDocuments($,Y)).next(B=>{k=B;const Ce=[];for(const we of m){const Ie=gE(we,k.get(we.key).overlayedDocument);Ie!=null&&Ce.push(new fi(we.key,Ie,fg(Ie.value.mapValue),Hn.exists(!0)))}return y.mutationQueue.addMutationBatch($,v,Ce,m)}).next(B=>{R=B;const Ce=B.applyToLocalDocumentSet(k,Z);return y.documentOverlayCache.saveOverlays($,B.batchId,Ce)})}).then(()=>({batchId:R.batchId,changes:Ig(k)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,m,y){let v=f.Au[f.currentUser.toKey()];v||(v=new ft(xe)),v=v.insert(m,y),f.Au[f.currentUser.toKey()]=v}(s,a.batchId,n),await ha(s,a.changes),await mu(s.remoteStore)}catch(a){const c=Zh(a,"Failed to persist write");n.reject(c)}}async function ry(i,e){const n=Re(i);try{const s=await dw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Eu.get(c);f&&(Qe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.cu=!0:a.modifiedDocuments.size>0?Qe(f.cu,14607):a.removedDocuments.size>0&&(Qe(f.cu,42227),f.cu=!1))}),await ha(n,s,e)}catch(s){await Ys(s)}}function Sm(i,e,n){const s=Re(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.hu.forEach((c,f)=>{const m=f.view.Fa(e);m.snapshot&&a.push(m.snapshot)}),function(f,m){const y=Re(f);y.onlineState=m;let v=!1;y.queries.forEach((I,k)=>{for(const R of k.Sa)R.Fa(m)&&(v=!0)}),v&&ef(y)}(s.eventManager,e),a.length&&s.lu.Y_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function i1(i,e,n){const s=Re(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new ft(Ee.comparator);f=f.insert(c,Kt.newNoDocument(c,Pe.min()));const m=Me().add(c),y=new fu(Pe.min(),new Map,new ft(xe),f,m);await ry(s,y),s.Iu=s.Iu.remove(c),s.Eu.delete(e),nf(s)}else await Th(s.localStore,e,!1).then(()=>Ah(s,e,n)).catch(Ys)}async function s1(i,e){const n=Re(i),s=e.batch.batchId;try{const a=await fw(n.localStore,e);sy(n,s,null),iy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ha(n,a)}catch(a){await Ys(a)}}async function o1(i,e,n){const s=Re(i);try{const a=await function(f,m){const y=Re(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return y.mutationQueue.lookupMutationBatch(v,m).next(k=>(Qe(k!==null,37113),I=k.keys(),y.mutationQueue.removeMutationBatch(v,k))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,I,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>y.localDocuments.getDocuments(v,I))})}(s.localStore,e);sy(s,e,n),iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ha(s,a)}catch(a){await Ys(a)}}function iy(i,e){(i.Ru.get(e)||[]).forEach(n=>{n.resolve()}),i.Ru.delete(e)}function sy(i,e,n){const s=Re(i);let a=s.Au[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Au[s.currentUser.toKey()]=a}}function Ah(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Pu.get(e))i.hu.delete(s),n&&i.lu.gu(s,n);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(s=>{i.du.containsKey(s)||oy(i,s)})}function oy(i,e){i.Tu.delete(e.path.canonicalString());const n=i.Iu.get(e);n!==null&&(Kh(i.remoteStore,n),i.Iu=i.Iu.remove(e),i.Eu.delete(n),nf(i))}function Am(i,e,n){for(const s of n)s instanceof ey?(i.du.addReference(s.key,e),a1(i,s)):s instanceof ty?(le(tf,"Document no longer in limbo: "+s.key),i.du.removeReference(s.key,e),i.du.containsKey(s.key)||oy(i,s.key)):Te(19791,{pu:s})}function a1(i,e){const n=e.key,s=n.path.canonicalString();i.Iu.get(n)||i.Tu.has(s)||(le(tf,"New document in limbo: "+n),i.Tu.add(s),nf(i))}function nf(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const n=new Ee(lt.fromString(e)),s=i.Vu.next();i.Eu.set(s,new Xw(n)),i.Iu=i.Iu.insert(n,s),Kg(i.remoteStore,new Jr(sr(vg(n.path)),s,"TargetPurposeLimboResolution",iu.le))}}async function ha(i,e,n){const s=Re(i),a=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((m,y)=>{f.push(s.fu(y,e,n).then(v=>{var I;if((v||n)&&s.isPrimaryClient){const k=v?!v.fromCache:(I=n==null?void 0:n.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(y.targetId,k?"current":"not-current")}if(v){a.push(v);const k=qh.Rs(y.targetId,v);c.push(k)}}))}),await Promise.all(f),s.lu.Y_(a),await async function(y,v){const I=Re(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>H.forEach(v,R=>H.forEach(R.ds,$=>I.persistence.referenceDelegate.addReference(k,R.targetId,$)).next(()=>H.forEach(R.As,$=>I.persistence.referenceDelegate.removeReference(k,R.targetId,$)))))}catch(k){if(!Js(k))throw k;le(Qh,"Failed to update sequence numbers: "+k)}for(const k of v){const R=k.targetId;if(!k.fromCache){const $=I.xs.get(R),Y=$.snapshotVersion,Z=$.withLastLimboFreeSnapshotVersion(Y);I.xs=I.xs.insert(R,Z)}}}(s.localStore,c))}async function l1(i,e){const n=Re(i);if(!n.currentUser.isEqual(e)){le(tf,"User change. New user:",e.toKey());const s=await $g(n.localStore,e);n.currentUser=e,function(c,f){c.Ru.forEach(m=>{m.forEach(y=>{y.reject(new ye(K.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ha(n,s.ks)}}function u1(i,e){const n=Re(i),s=n.Eu.get(e);if(s&&s.cu)return Me().add(s.key);{let a=Me();const c=n.Pu.get(e);if(!c)return a;for(const f of c){const m=n.hu.get(f);a=a.unionWith(m.view.eu)}return a}}function ay(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ry.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i1.bind(null,e),e.lu.Y_=Hw.bind(null,e.eventManager),e.lu.gu=qw.bind(null,e.eventManager),e}function c1(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o1.bind(null,e),e}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=du(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return hw(this.persistence,new lw,e.initialUser,this.serializer)}Su(e){return new Wg(Hh.fi,this.serializer)}bu(e){return new _w}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class h1 extends nu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Qe(this.persistence.referenceDelegate instanceof eu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QE(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Wg(s=>eu.fi(s,n),this.serializer)}}class Ch{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=l1.bind(null,this.syncEngine),await Uw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zw}()}createDatastore(e){const n=du(e.databaseInfo.databaseId),s=function(c){return new Iw(c)}(e.databaseInfo);return function(c,f,m,y){return new Pw(c,f,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,m){return new kw(s,a,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Sm(this.syncEngine,n,0),function(){return _m.C()?new _m:new vw}())}createSyncEngine(e,n){return function(a,c,f,m,y,v,I){const k=new Yw(a,c,f,m,y,v);return I&&(k.mu=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=Re(a);le(Hi,"RemoteStore shutting down."),c.da.add(5),await ca(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ch.provider={build:()=>new Ch};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="FirestoreClient";class d1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Qt.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{le(ci,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(le(ci,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Zh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sh(i,e){i.asyncQueue.verifyOperationInProgress(),le(ci,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await $g(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Cm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await p1(i);le(ci,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Em(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Em(e.remoteStore,a)),i._onlineComponents=e}async function p1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){le(ci,"Using user provided OfflineComponentProvider");try{await sh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await sh(i,new nu)}}else le(ci,"Using default OfflineComponentProvider"),await sh(i,new h1(void 0));return i._offlineComponents}async function ly(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(le(ci,"Using user provided OnlineComponentProvider"),await Cm(i,i._uninitializedComponentsProvider._online)):(le(ci,"Using default OnlineComponentProvider"),await Cm(i,new Ch))),i._onlineComponents}function m1(i){return ly(i).then(e=>e.syncEngine)}async function g1(i){const e=await ly(i),n=e.eventManager;return n.onListen=Jw.bind(null,e.syncEngine),n.onUnlisten=t1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n1.bind(null,e.syncEngine),n}function y1(i,e,n={}){const s=new ni;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,m,y,v){const I=new f1({next:R=>{I.xu(),f.enqueueAndForget(()=>$w(c,k)),R.fromCache&&y.source==="server"?v.reject(new ye(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),k=new Qw(m,I,{includeMetadataChanges:!0,Qa:!0});return Ww(c,k)}(await g1(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(i,e,n){if(!n)throw new ye(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _1(i,e,n,s){if(e===!0&&s===!0)throw new ye(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Rm(i){if(!Ee.isDocumentKey(i))throw new ye(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function km(i){if(Ee.isDocumentKey(i))throw new ye(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function qi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(i);throw new ye(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="firestore.googleapis.com",Nm=!0;class Vm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hy,this.ssl=Nm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Nm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HE)throw new ye(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uy((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ye(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new w0;switch(s.type){case"firstParty":return new A0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Pm.get(n);s&&(le("ComponentProvider","Removing Datastore"),Pm.delete(n),s.terminate())}(this),Promise.resolve()}}function v1(i,e,n,s={}){var a;i=qi(i,gu);const c=Vh(e),f=i._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),y=`${e}:${n}`;c&&(K_(`https://${y}`),J_("Firestore",!0)),f.host!==hy&&f.host!==y&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},f),{host:y,ssl:c,emulatorOptions:s});if(!Wl(v,m)&&(i._setSettings(v),s.mockUserToken)){let I,k;if(typeof s.mockUserToken=="string")I=s.mockUserToken,k=Qt.MOCK_USER;else{I=G_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new ye(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Qt(R)}i._authCredentials=new T0(new eg(I,k))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yu(this.firestore,e,this._query)}}class Rn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class ri extends yu{constructor(e,n,s){super(e,n,vg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ee(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function xm(i,e,...n){if(i=ii(i),cy("collection","path",e),i instanceof gu){const s=lt.fromString(e,...n);return km(s),new ri(i,null,s)}{if(!(i instanceof Rn||i instanceof ri))throw new ye(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...n));return km(s),new ri(i.firestore,null,s)}}function Ph(i,e,...n){if(i=ii(i),arguments.length===1&&(e=ng.newId()),cy("doc","path",e),i instanceof gu){const s=lt.fromString(e,...n);return Rm(s),new Rn(i,null,new Ee(s))}{if(!(i instanceof Rn||i instanceof ri))throw new ye(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...n));return Rm(s),new Rn(i.firestore,i instanceof ri?i.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="AsyncQueue";class Fm{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new qg(this,"async_queue_retry"),this.rc=()=>{const s=ih();s&&le(Dm,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=ih();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ni;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Js(e))throw e;le(Dm,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ar("INTERNAL UNHANDLED ERROR: ",Om(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Jh.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(a),a}oc(){this.Xu&&Te(47125,{cc:Om(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Om(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class fa extends gu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Fm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fm(e),this._firestoreClient=void 0,await e}}}function E1(i,e){const n=typeof i=="object"?i:l0(),s=typeof i=="string"?i:Ql,a=r0(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=q_("firestore");c&&v1(a,...c)}return a}function fy(i){if(i._terminated)throw new ye(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||w1(i),i._firestoreClient}function w1(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,v,I){return new U0(m,y,v,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,uy(I.experimentalLongPollingOptions),I.useFetchStreams,I.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new d1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(jt.fromBase64String(e))}catch(n){throw new ye(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=/^__.*__$/;class I1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new la(e,this.data,n,this.fieldTransforms)}}class dy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function py(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ic:i})}}class lf{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Vc(e),a}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ru(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(py(this.Ic)&&T1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class S1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||du(e)}bc(e,n,s,a=!1){return new lf({Ic:e,methodName:n,wc:s,path:Ut.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function my(i){const e=i._freezeSettings(),n=du(i._databaseId);return new S1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function A1(i,e,n,s,a,c={}){const f=i.bc(c.merge||c.mergeFields?2:0,e,n,a);uf("Data must be an object, but it was:",f,s);const m=gy(s,f);let y,v;if(c.merge)y=new yn(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const I=[];for(const k of c.mergeFields){const R=Rh(e,k,n);if(!f.contains(R))throw new ye(K.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);_y(I,R)||I.push(R)}y=new yn(I),v=f.fieldTransforms.filter(k=>y.covers(k.field))}else y=null,v=f.fieldTransforms;return new I1(new un(m),y,v)}class vu extends sf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vu}}function C1(i,e,n,s){const a=i.bc(1,e,n);uf("Data must be an object, but it was:",a,s);const c=[],f=un.empty();hi(s,(y,v)=>{const I=cf(e,y,n);v=ii(v);const k=a.mc(I);if(v instanceof vu)c.push(I);else{const R=Eu(v,k);R!=null&&(c.push(I),f.set(I,R))}});const m=new yn(c);return new dy(f,m,a.fieldTransforms)}function P1(i,e,n,s,a,c){const f=i.bc(1,e,n),m=[Rh(e,s,n)],y=[a];if(c.length%2!=0)throw new ye(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)m.push(Rh(e,c[R])),y.push(c[R+1]);const v=[],I=un.empty();for(let R=m.length-1;R>=0;--R)if(!_y(v,m[R])){const $=m[R];let Y=y[R];Y=ii(Y);const Z=f.mc($);if(Y instanceof vu)v.push($);else{const B=Eu(Y,Z);B!=null&&(v.push($),I.set($,B))}}const k=new yn(v);return new dy(I,k,f.fieldTransforms)}function Eu(i,e){if(yy(i=ii(i)))return uf("Unsupported field value:",e,i),gy(i,e);if(i instanceof sf)return function(s,a){if(!py(a.Ic))throw a.gc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const m of s){let y=Eu(m,a.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=ii(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Pt.fromDate(s);return{timestampValue:Zl(a.serializer,c)}}if(s instanceof Pt){const c=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zl(a.serializer,c)}}if(s instanceof of)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ks)return{bytesValue:Og(a.serializer,s._byteString)};if(s instanceof Rn){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Wh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof af)return function(f,m){return{mapValue:{fields:{[cg]:{stringValue:hg},[Kl]:{arrayValue:{values:f.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return bh(m.serializer,v)})}}}}}}(s,a);throw a.gc(`Unsupported field value: ${rf(s)}`)}(i,e)}function gy(i,e){const n={};return ig(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(i,(s,a)=>{const c=Eu(a,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function yy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Pt||i instanceof of||i instanceof Ks||i instanceof Rn||i instanceof sf||i instanceof af)}function uf(i,e,n){if(!yy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=rf(n);throw s==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+s)}}function Rh(i,e,n){if((e=ii(e))instanceof _u)return e._internalPath;if(typeof e=="string")return cf(i,e);throw ru("Field path arguments must be of type string or ",i,!1,void 0,n)}const R1=new RegExp("[~\\*/\\[\\]]");function cf(i,e,n){if(e.search(R1)>=0)throw ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _u(...e.split("."))._internalPath}catch{throw ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ru(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new ye(K.INVALID_ARGUMENT,m+i+y)}function _y(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ey("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k1 extends vy{data(){return super.data()}}function Ey(i,e){return typeof e=="string"?cf(i,e):e instanceof _u?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V1{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return hi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[Kl].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>yt(f.doubleValue));return new af(c)}convertGeoPoint(e){return new of(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ou(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){const n=oi(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=lt.fromString(e);Qe(jg(s),9688,{name:e});const a=new ia(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return a.isEqual(n)||Ar(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D1 extends vy{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ey("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class jl extends D1{data(e={}){return super.data(e)}}class F1{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Dl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jl(this._firestore,this._userDataWriter,s.key,s,new Dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Dl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Dl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,I=-1;return m.type!==0&&(v=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),I=f.indexOf(m.doc.key)),{type:O1(m.type),doc:y,oldIndex:v,newIndex:I}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}class M1 extends V1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function L1(i){i=qi(i,yu);const e=qi(i.firestore,fa),n=fy(e),s=new M1(e);return N1(i._query),y1(n,i._query).then(a=>new F1(e,s,i,a))}function B1(i,e,n,...s){i=qi(i,Rn);const a=qi(i.firestore,fa),c=my(a);let f;return f=typeof(e=ii(e))=="string"||e instanceof _u?P1(c,"updateDoc",i._key,e,n,s):C1(c,"updateDoc",i._key,e),hf(a,[f.toMutation(i._key,Hn.exists(!0))])}function b1(i){return hf(qi(i.firestore,fa),[new Uh(i._key,Hn.none())])}function U1(i,e){const n=qi(i.firestore,fa),s=Ph(i),a=x1(i.converter,e);return hf(n,[A1(my(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Hn.exists(!1))]).then(()=>s)}function hf(i,e){return function(s,a){const c=new ni;return s.asyncQueue.enqueueAndForget(async()=>r1(await m1(s),a,c)),c.promise}(fy(i),e)}(function(e,n=!0){(function(a){Xs=a})(a0),Hl(new ea("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new fa(new I0(s.getProvider("auth-internal")),new C0(f,s.getProvider("app-check-internal")),function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(v.options.projectId,I)}(f,a),f);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Us(bp,Up,e),Us(bp,Up,"esm2017")})();const j1={apiKey:"AIzaSyBQkuO6ltmJ8cfJI9B3Wct7QE6Kh0nvl44",authDomain:"chocolate-batch-calculator.firebaseapp.com",projectId:"chocolate-batch-calculator",storageBucket:"chocolate-batch-calculator.firebasestorage.app",messagingSenderId:"Y1084846149691",appId:"1:1084846149691:web:dc94e0c74818edb9e70c1e",measurementId:"G-6HVVMECN6R"},z1=$m(j1),Fl=E1(z1);function wy(...i){return i.filter(Boolean).join(" ")}const W1=({className:i,...e})=>ie.jsx("div",{className:wy("rounded-lg border bg-white p-4 shadow-sm",i),...e}),$1=({className:i,...e})=>ie.jsx("div",{className:wy("p-4",i),...e}),Ui=({className:i,...e})=>ie.jsx("input",{className:`border rounded-md p-2 ${i}`,...e}),Ol=({children:i,className:e,...n})=>ie.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white rounded-md ${e}`,...n,children:i}),zi=i=>i?"opacity-50 bg-gray-100":"border-2 border-blue-300 bg-blue-50 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",H1=i=>i?"font-semibold text-blue-700 bg-blue-50 rounded-md py-1 px-2 border border-blue-300":"",q1=(i,e)=>{const n=zi(i),s=parseFloat(e);return!isNaN(s)&&s>100?`${n} border-red-500 bg-red-50 text-red-700`:n},Q1="This is the fixed weight of one chocolate bar and serves as the foundation for all calculations";function K1(){const[i,e]=qe.useState(""),[n,s]=qe.useState(""),[a,c]=qe.useState(""),[f,m]=qe.useState(0),[y,v]=qe.useState(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),[I,k]=qe.useState([]),[R,$]=qe.useState(!1),[Y,Z]=qe.useState(null),[B,Ce]=qe.useState(!1),[we,Ie]=qe.useState(!1),[De,ut]=qe.useState(null),[Be,V]=qe.useState(!1),[w,A]=qe.useState({index:null,field:null}),[C,x]=qe.useState(0),[D,S]=qe.useState("g"),[st,pt]=qe.useState({}),[tt,ze]=qe.useState({}),[ne,ge]=qe.useState(!1),[oe,F]=qe.useState(null),z=j=>parseFloat(j).toFixed(2),ue=()=>a.trim()!==""&&(B||i>0)&&n>0,ke=j=>{if(!j||isNaN(parseFloat(j)))return"";const b=parseFloat(j);return D==="lbs"?(b/453.59237).toFixed(2):parseFloat(b).toFixed(2)},Ne=j=>{if(!j||isNaN(parseFloat(j)))return"";const b=parseFloat(j);return D==="lbs"?(b*453.59237).toString():b.toString()},Oe=j=>{if(!j||isNaN(parseFloat(j)))return"N/A";const b=parseFloat(j);return D==="lbs"?`${(b/453.59237).toFixed(2)} lbs`:`${b.toFixed(2)} g`},Ve=(j,b,re)=>{if(!B&&j===C&&b!=="name")return;const J=[...y];if(re===""){J[j][b]=re,b===J[j].staticField&&(b==="weightPerBar"?(J[j].totalWeight="",J[j].percentage=""):b==="percentage"?(J[j].totalWeight="",J[j].weightPerBar=""):b==="totalWeight"&&(J[j].percentage="",J[j].weightPerBar=""),console.log(`Cleared calculated values for ingredient #${j+1} after ${b} was deleted`)),B&&(b==="totalWeight"||J[j].totalWeight==="")&&setTimeout(()=>{V(G=>!G)},0),v(J);return}if(A({index:j,field:b}),J[j][b]=re,b==="name"){v(J);return}if(b==="weightPerBar"&&re!==""?J[j].staticField="weightPerBar":b==="percentage"&&re!==""?J[j].staticField="percentage":b==="totalWeight"&&re!==""&&(J[j].staticField="totalWeight"),b!=="name"&&ze(G=>({...G,[`${j}-${b}`]:!0})),B&&(b==="weightPerBar"||b==="percentage")&&!isNaN(parseFloat(re))){const G=parseFloat(re);if(b==="weightPerBar"){const de=G;if(parseFloat(n)>0){const se=de/parseFloat(n)*100;J[j].percentage=z(se),console.log("Auto-mode weightPerBar calculation:",{targetWeightPerBar:de,calculatedPercentage:se,barWeight:parseFloat(n)});const he=y.reduce((Xe,kt,Ye)=>Ye!==j?Xe+(parseFloat(kt.totalWeight)||0):Xe,0);let Se;Math.abs(parseFloat(n)-de)>.001?Se=de*he/(parseFloat(n)-de):Se=de*(he/de+1),Se=Math.max(0,Se),console.log("Calculated total weight for ingredient:",{otherIngredientsWeight:he,calculatedTotalWeight:Se}),J[j].totalWeight=z(Se);const nt=he+Se;m(nt)}}else if(b==="percentage"){const de=G,se=parseFloat(f)||0;if(se>0){const he=de/100*se;if(console.log("Auto-mode percentage calculation:",{targetPercentage:de,currentTotalBatchWeight:se,calculatedTotalWeight:he}),J[j].totalWeight=z(he),parseFloat(i)>0){const Se=he/parseFloat(i);J[j].weightPerBar=z(Se)}}else console.warn("Cannot calculate ingredient weight from percentage with zero total batch weight")}}else if(!B&&(b==="weightPerBar"||b==="percentage")&&!isNaN(parseFloat(re))){const G=parseFloat(re);if(b==="weightPerBar"&&J[j].staticField==="weightPerBar"){const de=G*i;if(J[j].totalWeight=z(de),n>0){const se=G/parseFloat(n)*100;J[j].percentage=z(se)}}else if(b==="percentage"&&J[j].staticField==="percentage"){const de=G/100*f;J[j].totalWeight=z(de);const se=i>0?de/i:0;J[j].weightPerBar=z(se)}}if(b==="totalWeight"&&!isNaN(parseFloat(re))){const G=parseFloat(re);if(j===3&&console.log("Ingredient #4 totalWeight calculation:",{totalWeight:G,numBars:parseFloat(i)||0,calculatedWeightPerBar:i>0?G/(parseFloat(i)||1):0}),A({index:j,field:b}),J[j].totalWeight=re,J[j].staticField="totalWeight",B){J[j].staticField="totalWeight",parseFloat(y[j].totalWeight);const se=y.reduce((he,Se,nt)=>nt!==j?he+(parseFloat(Se.totalWeight)||0):he,0)+G;m(se)}if(i>0&&n>0){const de=G/i;J[j].weightPerBar=z(de);const se=de/parseFloat(n)*100;J[j].percentage=z(se)}}v(J),setTimeout(()=>{A({index:null,field:null}),V(G=>!G)},300)},We=j=>{if(j===C)return;const b={...y[C]};({...y[j]});const re=[...y];b.weightPerBar&&b.percentage&&(re[C]={...b,staticField:"weightPerBar"}),x(j),v(re)},Ge=()=>{e(""),s(""),c(""),m(0),v(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),Ce(!1),Ie(!1),ut(null),x(0),ze({}),ge(!1),F(null)},_t=async()=>{if(!a){alert("Please enter a batch name before saving.");return}$(!0),Z(null);const j={batchName:a,numBars:i,barWeight:n,totalBatchWeight:f,ingredients:y.map(b=>({...b})),isNumBarsAuto:B,autoPercentageIndex:C};try{if(oe){const G=I.find(de=>de.id===oe);if(G&&G.batchName===a){const de=Ph(Fl,"batches",oe);await B1(de,{...j,updatedAt:new Date().toISOString()}),k(se=>se.map(he=>he.id===oe?{...he,...j,updatedAt:new Date().toISOString()}:he)),alert("Batch updated successfully!");return}}const b={...j,createdAt:new Date().toISOString()},re=await U1(xm(Fl,"batches"),b),J={...b,id:re.id};k(G=>[...G,J]),F(re.id),alert("Batch saved successfully!")}catch(b){console.error("Error saving batch:",b),Z("Failed to save batch"),alert("Failed to save batch. Please try again.")}finally{$(!1)}},kn=j=>{j&&(c(j.batchName),e(j.numBars),s(j.barWeight),m(j.totalBatchWeight),v(j.ingredients.map(b=>({...b}))),j.hasOwnProperty("isNumBarsAuto")?Ce(j.isNumBarsAuto):Ce(!1),j.hasOwnProperty("autoPercentageIndex")?x(j.autoPercentageIndex):x(0),F(j.id)),ze({}),ge(!0)},Pr=async j=>{if(window.confirm("Are you sure you want to delete this batch?")){$(!0),Z(null);try{const b=Ph(Fl,"batches",j);await b1(b),k(re=>re.filter(J=>J.id!==j)),oe===j&&F(null),alert("Batch deleted successfully!")}catch(b){console.error("Error deleting batch:",b),Z("Failed to delete batch"),alert("Failed to delete batch. Please try again.")}finally{$(!1)}}};qe.useEffect(()=>{(async()=>{$(!0),Z(null);try{const b=xm(Fl,"batches"),J=(await L1(b)).docs.map(G=>({id:G.id,...G.data()}));k(J)}catch(b){console.error("Error fetching batches:",b),Z("Failed to load saved batches")}finally{$(!1)}})()},[]),qe.useEffect(()=>{if(B&&f>0&&n>0){const j=parseFloat(n),b=f/j,re=parseFloat(b.toFixed(2)),J=Math.max(.01,re);!isNaN(J)&&Math.abs(J-parseFloat(i))>.01&&(console.log(`Auto-updating number of bars: ${i}  ${J} (totalBatchWeight: ${f}, barWeight: ${j})`),e(J),v(G=>G.map((se,he)=>{const Se=parseFloat(se.weightPerBar)||0;if(Se>0&&(tt[`${he}-weightPerBar`]||se.staticField==="weightPerBar")){const Xe=Se*J;return{...se,totalWeight:z(Xe)}}const nt=parseFloat(se.totalWeight)||0;return nt>0&&se.staticField!=="weightPerBar"&&!tt[`${he}-weightPerBar`]?{...se,weightPerBar:z(nt/J)}:se})))}},[B,f,n,i,tt]),qe.useEffect(()=>{if(!B&&i>0&&n>0){const j=parseFloat(i)*parseFloat(n),b=Math.round(j);!isNaN(b)&&b!==f&&m(b)}},[i,n,B,f]),qe.useEffect(()=>{if(!B&&i>0&&n>0){if(w.index!==null)return;const j=parseFloat(i)*parseFloat(n);let b=0,re=0;y.forEach((G,de)=>{if(de!==C){if(G.staticField==="weightPerBar"&&G.weightPerBar){const he=(parseFloat(G.weightPerBar)||0)*i;he>0&&(b+=he/j*100,re+=he)}else if(G.staticField==="percentage"&&G.percentage){const se=parseFloat(G.percentage)||0;se>0&&(b+=se,re+=se/100*j)}else if(G.staticField==="totalWeight"&&G.totalWeight){const se=parseFloat(G.totalWeight)||0;se>0&&(b+=se/j*100,re+=se)}}});const J=y.map((G,de)=>{if(de===C){const Xe=Math.max(0,100-b),kt=Math.max(0,j-re),Ye=i>0?kt/i:0;return{...G,percentage:z(Xe),totalWeight:z(kt),weightPerBar:z(Ye)}}if(!(G.weightPerBar!==""&&!isNaN(parseFloat(G.weightPerBar))||G.percentage!==""&&!isNaN(parseFloat(G.percentage))||G.totalWeight!==""&&!isNaN(parseFloat(G.totalWeight))))return G;const he=parseFloat(G.percentage)||0,Se=parseFloat(G.weightPerBar)||0,nt=parseFloat(G.totalWeight)||0;if(he>0&&G.staticField==="percentage"){const Xe=he/100*j;return{...G,totalWeight:isNaN(Xe)?"0":Xe.toFixed(2),weightPerBar:i>0?(Xe/i).toFixed(2):"0"}}if(Se>0&&G.staticField==="weightPerBar"){const Xe=Se*i;return{...G,totalWeight:isNaN(Xe)?"0":Xe.toFixed(2),percentage:parseFloat(n)>0?(Se/parseFloat(n)*100).toFixed(2):"0"}}if(nt>0&&G.staticField==="totalWeight"){const Xe=i>0?nt/i:0;return{...G,percentage:parseFloat(n)>0?(Xe/parseFloat(n)*100).toFixed(2):"0",weightPerBar:i>0?(nt/i).toFixed(2):"0"}}return G});JSON.stringify(J)!==JSON.stringify(y)&&v(J)}},[i,n,B,f,y,w,C]),qe.useEffect(()=>{if(B&&f>0){if(w.index!==null)return;v(j=>{const b=[...j];return b.forEach((re,J)=>{if(re.staticField==="percentage"&&re.percentage){const de=(parseFloat(re.percentage)||0)/100*f;if(de>0&&(b[J].totalWeight=z(de),i>0)){const se=de/i;b[J].weightPerBar=z(se)}}}),b})}},[B,f,i,w]),qe.useEffect(()=>{B&&f>0&&i>0&&v(j=>{const b=[...j];let re=!1;return b.forEach((J,G)=>{if(w.index===G)return;if(tt[`${G}-weightPerBar`]||J.staticField==="weightPerBar"){console.log(`Preserving weightPerBar for ingredient ${G+1} (static field or user-entered)`);return}const de=parseFloat(J.totalWeight)||0;if(G===0||J.staticField==="percentage"){const se=de>0?(de/i).toFixed(2):"0";se!==J.weightPerBar&&(b[G].weightPerBar=se,re=!0)}}),re?b:j})},[B,f,i,w,tt]);const qn=j=>{const b=j.target.checked;if(Ce(b),b){Ie(!1),console.log("Switching to auto mode, bar weight:",n);const re=parseFloat(n);if(re>0){const J=re;console.log("Setting initial batch weight to:",J),m(J),e(1),v(G=>{const de=[...G];return de[0]={...de[0],totalWeight:re.toString(),percentage:"100",weightPerBar:re.toString(),staticField:"totalWeight"},de})}else m(0),e(0),v(J=>{const G=[...J];return G[0]={...G[0],totalWeight:"",percentage:"100",weightPerBar:"",staticField:"totalWeight"},G})}else e(""),i>0&&n>0&&m(i*n)};return qe.useEffect(()=>{if(B&&!w.index){const j=y.reduce((b,re)=>{const J=parseFloat(re.totalWeight)||0;return b+J},0);Math.abs(j-parseFloat(f))>.01&&m(j.toFixed(2))}},[B,y,w]),qe.useEffect(()=>{if(B){const j=y.reduce((b,re)=>b+(parseFloat(re.percentage)||0),0);j>100&&console.warn("Total percentage exceeds 100%:",j)}},[B,y]),qe.useEffect(()=>{if(B&&parseFloat(f)>0){if(w.index!==null)return;v(j=>{const b=[...j];let re=!1;return b.forEach((J,G)=>{if(J.staticField==="percentage"){const de=parseFloat(J.percentage)||0;if(de>0){const se=de/100*f,he=z(se);if(he!==J.totalWeight){if(b[G].totalWeight=he,i>0&&J.staticField!=="weightPerBar"&&!tt[`${G}-weightPerBar`]){const Se=se/i;b[G].weightPerBar=z(Se)}re=!0}}}}),re?b:j})}},[B,f,i,w,tt]),qe.useEffect(()=>{if(B&&f>0){if(w.index!==null&&w.field==="totalWeight")return;v(j=>{const b=[...j];let re=!1;return b.forEach((J,G)=>{if(J.staticField!=="percentage"){const de=parseFloat(J.weightPerBar)||0;if(de>0&&parseFloat(n)>0){const se=de/parseFloat(n)*100,he=z(se);he!==J.percentage&&(b[G].percentage=he,re=!0)}}}),re?b:j})}},[B,f,w,n]),qe.useEffect(()=>{A({index:null,field:null}),pt({})},[D]),ie.jsxs("div",{className:"p-6 max-w-lg mx-auto",children:[ie.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Chocolate Batch Calculator"}),ie.jsx(W1,{children:ie.jsxs($1,{className:"p-4 space-y-6",children:[ie.jsxs("div",{className:"border-2 border-gray-300 rounded-md p-4 bg-gray-50",children:[ie.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Batch Settings"}),ie.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[ie.jsx("div",{className:"flex items-center justify-between",children:ie.jsxs("label",{className:"block font-bold",children:["Batch Name ",ie.jsx("span",{className:"text-red-500",children:"*"})]})}),ie.jsx(Ui,{type:"text",placeholder:"Batch Name",value:a,onChange:j=>c(j.target.value),required:!0,className:zi(!1)})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-1",children:[ie.jsxs("label",{className:"block font-bold",children:["Number of Bars ",B?null:ie.jsx("span",{className:"text-red-500",children:"*"})]}),ie.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[ie.jsx("input",{type:"checkbox",checked:B,onChange:qn}),ie.jsx("span",{children:"Auto-calc"})]})]}),ie.jsx(Ui,{type:"number",step:"0.01",inputMode:"decimal",placeholder:"Number of Bars",value:i,onChange:j=>{e(j.target.value),Ie(!0)},required:!B,disabled:B,className:zi(B)})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-1",children:[ie.jsxs("label",{className:"block font-bold",children:["Weight of Individual Bar (g) ",ie.jsx("span",{className:"text-red-500",children:"*"})]}),ie.jsx("span",{className:"text-sm text-blue-600 font-bold",children:"User-defined only"})]}),ie.jsx(Ui,{type:"number",placeholder:"Bar Weight (g)",value:n,onChange:j=>s(j.target.value),required:!0,className:`${zi(!1)} border-2 border-blue-500`}),ie.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q1})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsx("label",{className:"block font-bold mb-1",children:"Weight Unit"}),ie.jsxs("div",{className:"flex border rounded overflow-hidden",children:[ie.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${D==="g"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>S("g"),type:"button",children:"Grams (g)"}),ie.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${D==="lbs"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>S("lbs"),type:"button",children:"Pounds (lbs)"})]})]}),ie.jsx("div",{className:"font-bold mt-3 text-center",children:parseFloat(f)>0?`Total Batch Weight: ${Oe(f)}`:"Total Weight: N/A"})]}),ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ingredients"}),ie.jsx("ul",{className:"space-y-4",children:y.map((j,b)=>ie.jsxs("li",{className:"flex flex-col space-y-2",children:[b>0&&ie.jsx("hr",{className:"border-gray-300 my-2"}),ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("label",{className:"block font-bold",children:["Ingredient #",b+1]}),B&&b===0?ie.jsx("span",{className:"text-sm text-gray-500 italic",children:"Base ingredient"}):null,!B&&ie.jsxs("label",{className:`flex items-center space-x-2 ${H1(b===C)}`,children:[ie.jsx("input",{type:"radio",name:"autoPercentageIngredient",checked:C===b,onChange:()=>We(b),disabled:!ue()}),ie.jsx("span",{className:"text-sm",children:"Auto-calc"})]})]}),ie.jsx(Ui,{type:"text",placeholder:"Name",value:j.name,onChange:re=>Ve(b,"name",re.target.value),disabled:!ue(),className:zi(!ue())}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Percentage (%)",j.staticField==="percentage"&&j.percentage&&!(!B&&b===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"}),!isNaN(parseFloat(j.percentage))&&parseFloat(j.percentage)>100&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-red-600",children:"(exceeds 100%)"})]}),ie.jsx(Ui,{type:"number",placeholder:"Percentage (%)",value:j.percentage,onChange:re=>Ve(b,"percentage",re.target.value),onFocus:()=>A({index:b,field:"percentage"}),disabled:!ue()||B&&b===0||!B&&b===C,className:q1(!ue()||B&&b===0||!B&&b===C,j.percentage)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Weight/Bar (g)",j.staticField==="weightPerBar"&&j.weightPerBar&&!(!B&&b===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),ie.jsx(Ui,{type:"number",inputMode:"decimal",step:"any",placeholder:"Weight per bar (g)",value:j.weightPerBar??"",onChange:re=>{Ve(b,"weightPerBar",re.target.value)},onFocus:()=>{A({index:b,field:"weightPerBar"}),ze(re=>({...re,[`${b}-weightPerBar`]:!0}))},disabled:!ue()||B&&b===0||!B&&b===C,className:zi(!ue()||B&&b===0||!B&&b===C)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Total Weight (",D,")",j.staticField==="totalWeight"&&!(!B&&b===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),ie.jsx(Ui,{type:"text",inputMode:"decimal",placeholder:`Total Weight (${D})`,value:w.index===b&&w.field==="totalWeight"?st[b]||"":ke(j.totalWeight),onChange:re=>{const J=re.target.value;pt(de=>({...de,[b]:J})),A({index:b,field:"totalWeight"});const G=[...y];if(G[b].staticField="totalWeight",D==="g")if(J&&!isNaN(parseFloat(J))){const de=Ne(J);if(G[b].totalWeight=de,i>0){const he=parseFloat(de)/i;G[b].weightPerBar=z(he)}if(f>0){const se=parseFloat(de);if(i>0&&parseFloat(n)>0){const Se=se/i/parseFloat(n)*100;G[b].percentage=z(Se)}}v(G),setTimeout(()=>{if(B){const se=G.reduce((he,Se)=>he+(parseFloat(Se.totalWeight)||0),0);m(se)}if(B&&G.reduce((se,he)=>se+(parseFloat(he.totalWeight)||0),0)>0){const se=G.reduce((Se,nt)=>Se+(parseFloat(nt.totalWeight)||0),0),he=G.map((Se,nt)=>{if(nt===b)return Se;const Xe={...Se};if(Se.staticField!=="percentage"){const kt=parseFloat(Se.totalWeight)||0;if(kt>0){const Ye=kt/se*100;Xe.percentage=z(Ye)}}if(Se.staticField!=="weightPerBar"&&!tt[`${nt}-weightPerBar`]){const kt=parseFloat(Se.totalWeight)||0;if(kt>0&&i>0){const Ye=kt/i;Xe.weightPerBar=z(Ye)}}return Xe});v(he)}V(se=>!se)},10)}else Ve(b,"totalWeight","");else if(D==="lbs"&&J&&!isNaN(parseFloat(J))){const de=Ne(J);if(G[b].totalWeight=de,i>0){const he=parseFloat(de)/i;G[b].weightPerBar=z(he)}if(f>0){const se=parseFloat(de);if(i>0&&parseFloat(n)>0){const Se=se/i/parseFloat(n)*100;G[b].percentage=z(Se)}}v(G),setTimeout(()=>{if(B){const se=G.reduce((he,Se)=>he+(parseFloat(Se.totalWeight)||0),0);m(se)}if(B&&G.reduce((se,he)=>se+(parseFloat(he.totalWeight)||0),0)>0){G.reduce((he,Se)=>he+(parseFloat(Se.totalWeight)||0),0);const se=G.map((he,Se)=>{if(Se!==b&&he.staticField!=="percentage"){const nt=parseFloat(he.totalWeight)||0;if(nt>0&&i>0&&parseFloat(n)>0){const kt=nt/i/parseFloat(n)*100;return{...he,percentage:z(kt)}}}return he});v(se)}V(se=>!se)},10)}else Ve(b,"totalWeight","")},onBlur:()=>{if(D==="lbs"){const re=st[b];if(re!==void 0&&re!==""&&!isNaN(parseFloat(re))){const J=Ne(re);Ve(b,"totalWeight",J)}else(re===""||isNaN(parseFloat(re)))&&Ve(b,"totalWeight","")}setTimeout(()=>{w.index===b&&w.field==="totalWeight"&&A({index:null,field:null})},100)},onFocus:()=>{A({index:b,field:"totalWeight"}),D==="lbs"&&j.totalWeight?pt(J=>({...J,[b]:ke(j.totalWeight)})):pt(J=>({...J,[b]:ke(j.totalWeight)||""}));const re=[...y];re[b].staticField="totalWeight",v(re)},disabled:!ue()||!B&&b===C,className:zi(!ue()||!B&&b===C)})]})]},b))})]}),ie.jsxs("div",{className:"flex space-x-4 mt-4",children:[ie.jsx(Ol,{onClick:()=>_t(),disabled:R,children:R?"Saving...":"Save Batch"}),ie.jsx(Ol,{onClick:()=>Ge(),variant:"secondary",disabled:R,children:"Reset Batch"})]}),ie.jsxs("div",{className:"mt-6",children:[ie.jsx("h2",{className:"text-lg font-semibold",children:"Saved Batches"}),Y&&ie.jsx("p",{className:"text-red-500",children:Y}),R&&ie.jsx("p",{children:"Loading batches..."}),!R&&I.length>0?ie.jsx("ul",{className:"space-y-2",children:I.map(j=>ie.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[ie.jsx("span",{children:j.batchName}),ie.jsxs("div",{className:"flex space-x-2",children:[ie.jsx(Ol,{onClick:()=>kn(j),variant:"secondary",size:"sm",children:"Restore"}),ie.jsx(Ol,{onClick:()=>Pr(j.id),variant:"destructive",size:"sm",children:"Delete"})]})]},j.id))}):!R&&ie.jsx("p",{children:"No saved batches yet."})]})]})})]})}O_.createRoot(document.getElementById("root")).render(ie.jsx(R_.StrictMode,{children:ie.jsx(K1,{})}));
