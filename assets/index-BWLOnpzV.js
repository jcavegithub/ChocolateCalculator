(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Pm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $c={exports:{}},$o={},Wc={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function E_(){if(cp)return xe;cp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=k&&O[k]||O["@@iterator"],typeof O=="function"?O:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Y={};function j(O,W,fe){this.props=O,this.context=W,this.refs=Y,this.updater=fe||$}j.prototype.isReactComponent={},j.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Ae(){}Ae.prototype=j.prototype;function ve(O,W,fe){this.props=O,this.context=W,this.refs=Y,this.updater=fe||$}var we=ve.prototype=new Ae;we.constructor=ve,J(we,j.prototype),we.isPureReactComponent=!0;var ke=Array.isArray,rt=Object.prototype.hasOwnProperty,Le={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function w(O,W,fe){var Ce,Re={},De=null,je=null;if(W!=null)for(Ce in W.ref!==void 0&&(je=W.ref),W.key!==void 0&&(De=""+W.key),W)rt.call(W,Ce)&&!V.hasOwnProperty(Ce)&&(Re[Ce]=W[Ce]);var B=arguments.length-2;if(B===1)Re.children=fe;else if(1<B){for(var U=Array(B),Z=0;Z<B;Z++)U[Z]=arguments[Z+2];Re.children=U}if(O&&O.defaultProps)for(Ce in B=O.defaultProps,B)Re[Ce]===void 0&&(Re[Ce]=B[Ce]);return{$$typeof:i,type:O,key:De,ref:je,props:Re,_owner:Le.current}}function A(O,W){return{$$typeof:i,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function N(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return W[fe]})}var D=/\/+/g;function I(O,W){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):W.toString(36)}function Ze(O,W,fe,Ce,Re){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var je=!1;if(O===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(O.$$typeof){case i:case e:je=!0}}if(je)return je=O,Re=Re(je),O=Ce===""?"."+I(je,0):Ce,ke(Re)?(fe="",O!=null&&(fe=O.replace(D,"$&/")+"/"),Ze(Re,W,fe,"",function(Z){return Z})):Re!=null&&(C(Re)&&(Re=A(Re,fe+(!Re.key||je&&je.key===Re.key?"":(""+Re.key).replace(D,"$&/")+"/")+O)),W.push(Re)),1;if(je=0,Ce=Ce===""?".":Ce+":",ke(O))for(var B=0;B<O.length;B++){De=O[B];var U=Ce+I(De,B);je+=Ze(De,W,fe,U,Re)}else if(U=x(O),typeof U=="function")for(O=U.call(O),B=0;!(De=O.next()).done;)De=De.value,U=Ce+I(De,B++),je+=Ze(De,W,fe,U,Re);else if(De==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return je}function lt(O,W,fe){if(O==null)return O;var Ce=[],Re=0;return Ze(O,Ce,"","",function(De){return W.call(fe,De,Re++)}),Ce}function Fe(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Ve={current:null},te={transition:null},de={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:te,ReactCurrentOwner:Le};function se(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:lt,forEach:function(O,W,fe){lt(O,function(){W.apply(this,arguments)},fe)},count:function(O){var W=0;return lt(O,function(){W++}),W},toArray:function(O){return lt(O,function(W){return W})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},xe.Component=j,xe.Fragment=n,xe.Profiler=a,xe.PureComponent=ve,xe.StrictMode=s,xe.Suspense=_,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,xe.act=se,xe.cloneElement=function(O,W,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ce=J({},O.props),Re=O.key,De=O.ref,je=O._owner;if(W!=null){if(W.ref!==void 0&&(De=W.ref,je=Le.current),W.key!==void 0&&(Re=""+W.key),O.type&&O.type.defaultProps)var B=O.type.defaultProps;for(U in W)rt.call(W,U)&&!V.hasOwnProperty(U)&&(Ce[U]=W[U]===void 0&&B!==void 0?B[U]:W[U])}var U=arguments.length-2;if(U===1)Ce.children=fe;else if(1<U){B=Array(U);for(var Z=0;Z<U;Z++)B[Z]=arguments[Z+2];Ce.children=B}return{$$typeof:i,type:O.type,key:Re,ref:De,props:Ce,_owner:je}},xe.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},xe.createElement=w,xe.createFactory=function(O){var W=w.bind(null,O);return W.type=O,W},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:g,render:O}},xe.isValidElement=C,xe.lazy=function(O){return{$$typeof:S,_payload:{_status:-1,_result:O},_init:Fe}},xe.memo=function(O,W){return{$$typeof:v,type:O,compare:W===void 0?null:W}},xe.startTransition=function(O){var W=te.transition;te.transition={};try{O()}finally{te.transition=W}},xe.unstable_act=se,xe.useCallback=function(O,W){return Ve.current.useCallback(O,W)},xe.useContext=function(O){return Ve.current.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O){return Ve.current.useDeferredValue(O)},xe.useEffect=function(O,W){return Ve.current.useEffect(O,W)},xe.useId=function(){return Ve.current.useId()},xe.useImperativeHandle=function(O,W,fe){return Ve.current.useImperativeHandle(O,W,fe)},xe.useInsertionEffect=function(O,W){return Ve.current.useInsertionEffect(O,W)},xe.useLayoutEffect=function(O,W){return Ve.current.useLayoutEffect(O,W)},xe.useMemo=function(O,W){return Ve.current.useMemo(O,W)},xe.useReducer=function(O,W,fe){return Ve.current.useReducer(O,W,fe)},xe.useRef=function(O){return Ve.current.useRef(O)},xe.useState=function(O){return Ve.current.useState(O)},xe.useSyncExternalStore=function(O,W,fe){return Ve.current.useSyncExternalStore(O,W,fe)},xe.useTransition=function(){return Ve.current.useTransition()},xe.version="18.3.1",xe}var hp;function Sh(){return hp||(hp=1,Wc.exports=E_()),Wc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function w_(){if(fp)return $o;fp=1;var i=Sh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,_,v){var S,k={},x=null,$=null;v!==void 0&&(x=""+v),_.key!==void 0&&(x=""+_.key),_.ref!==void 0&&($=_.ref);for(S in _)s.call(_,S)&&!c.hasOwnProperty(S)&&(k[S]=_[S]);if(g&&g.defaultProps)for(S in _=g.defaultProps,_)k[S]===void 0&&(k[S]=_[S]);return{$$typeof:e,type:g,key:x,ref:$,props:k,_owner:a.current}}return $o.Fragment=n,$o.jsx=f,$o.jsxs=f,$o}var dp;function T_(){return dp||(dp=1,$c.exports=w_()),$c.exports}var ie=T_(),qe=Sh();const I_=Pm(qe);var Cl={},Hc={exports:{}},en={},qc={exports:{}},Qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function S_(){return pp||(pp=1,function(i){function e(te,de){var se=te.length;te.push(de);e:for(;0<se;){var O=se-1>>>1,W=te[O];if(0<a(W,de))te[O]=de,te[se]=W,se=O;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var de=te[0],se=te.pop();if(se!==de){te[0]=se;e:for(var O=0,W=te.length,fe=W>>>1;O<fe;){var Ce=2*(O+1)-1,Re=te[Ce],De=Ce+1,je=te[De];if(0>a(Re,se))De<W&&0>a(je,Re)?(te[O]=je,te[De]=se,O=De):(te[O]=Re,te[Ce]=se,O=Ce);else if(De<W&&0>a(je,se))te[O]=je,te[De]=se,O=De;else break e}}return de}function a(te,de){var se=te.sortIndex-de.sortIndex;return se!==0?se:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var _=[],v=[],S=1,k=null,x=3,$=!1,J=!1,Y=!1,j=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function we(te){for(var de=n(v);de!==null;){if(de.callback===null)s(v);else if(de.startTime<=te)s(v),de.sortIndex=de.expirationTime,e(_,de);else break;de=n(v)}}function ke(te){if(Y=!1,we(te),!J)if(n(_)!==null)J=!0,Fe(rt);else{var de=n(v);de!==null&&Ve(ke,de.startTime-te)}}function rt(te,de){J=!1,Y&&(Y=!1,Ae(w),w=-1),$=!0;var se=x;try{for(we(de),k=n(_);k!==null&&(!(k.expirationTime>de)||te&&!N());){var O=k.callback;if(typeof O=="function"){k.callback=null,x=k.priorityLevel;var W=O(k.expirationTime<=de);de=i.unstable_now(),typeof W=="function"?k.callback=W:k===n(_)&&s(_),we(de)}else s(_);k=n(_)}if(k!==null)var fe=!0;else{var Ce=n(v);Ce!==null&&Ve(ke,Ce.startTime-de),fe=!1}return fe}finally{k=null,x=se,$=!1}}var Le=!1,V=null,w=-1,A=5,C=-1;function N(){return!(i.unstable_now()-C<A)}function D(){if(V!==null){var te=i.unstable_now();C=te;var de=!0;try{de=V(!0,te)}finally{de?I():(Le=!1,V=null)}}else Le=!1}var I;if(typeof ve=="function")I=function(){ve(D)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,lt=Ze.port2;Ze.port1.onmessage=D,I=function(){lt.postMessage(null)}}else I=function(){j(D,0)};function Fe(te){V=te,Le||(Le=!0,I())}function Ve(te,de){w=j(function(){te(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){J||$||(J=!0,Fe(rt))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(te){switch(x){case 1:case 2:case 3:var de=3;break;default:de=x}var se=x;x=de;try{return te()}finally{x=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=x;x=te;try{return de()}finally{x=se}},i.unstable_scheduleCallback=function(te,de,se){var O=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?O+se:O):se=O,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=se+W,te={id:S++,callback:de,priorityLevel:te,startTime:se,expirationTime:W,sortIndex:-1},se>O?(te.sortIndex=se,e(v,te),n(_)===null&&te===n(v)&&(Y?(Ae(w),w=-1):Y=!0,Ve(ke,se-O))):(te.sortIndex=W,e(_,te),J||$||(J=!0,Fe(rt))),te},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(te){var de=x;return function(){var se=x;x=de;try{return te.apply(this,arguments)}finally{x=se}}}}(Qc)),Qc}var mp;function A_(){return mp||(mp=1,qc.exports=S_()),qc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function C_(){if(gp)return en;gp=1;var i=Sh(),e=A_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},k={};function x(t){return _.call(k,t)?!0:_.call(S,t)?!1:v.test(t)?k[t]=!0:(S[t]=!0,!1)}function $(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,r,o,u){if(r===null||typeof r>"u"||$(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Y(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new Y(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];j[r]=new Y(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new Y(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new Y(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new Y(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new Y(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new Y(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new Y(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new Y(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ae=/[\-:]([a-z])/g;function ve(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Ae,ve);j[r]=new Y(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Ae,ve);j[r]=new Y(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Ae,ve);j[r]=new Y(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new Y(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new Y(t,1,!1,t.toLowerCase(),null,!0,!0)});function we(t,r,o,u){var h=j.hasOwnProperty(r)?j[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(J(r,o,h,u)&&(o=null),u||h===null?x(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ke=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rt=Symbol.for("react.element"),Le=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),te=Symbol.iterator;function de(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,O;function W(t){if(O===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+t}var fe=!1;function Ce(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(b){var u=b}Reflect.construct(t,[],r)}else{try{r.call()}catch(b){u=b}t.call(r.prototype)}else{try{throw Error()}catch(b){u=b}t()}}catch(b){if(b&&u&&typeof b.stack=="string"){for(var h=b.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,T=p.length-1;1<=y&&0<=T&&h[y]!==p[T];)T--;for(;1<=y&&0<=T;y--,T--)if(h[y]!==p[T]){if(y!==1||T!==1)do if(y--,T--,0>T||h[y]!==p[T]){var R=`
`+h[y].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=y&&0<=T);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?W(t):""}function Re(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Ce(t.type,!1),t;case 11:return t=Ce(t.type.render,!1),t;case 1:return t=Ce(t.type,!0),t;default:return""}}function De(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Le:return"Portal";case A:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lt:return r=t.displayName||null,r!==null?r:De(t.type)||"Memo";case Fe:r=t._payload,t=t._init;try{return De(t(r))}catch{}}return null}function je(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function B(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Z(t){var r=U(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ne(t){t._valueTracker||(t._valueTracker=Z(t))}function re(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=U(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function _e(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ne(t,r){var o=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Ke(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=B(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function cn(t,r){r=r.checked,r!=null&&we(t,"checked",r,!1)}function Tn(t,r){cn(t,r);var o=B(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?ir(t,r.type,o):r.hasOwnProperty("defaultValue")&&ir(t,r.type,B(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function qt(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function ir(t,r,o){(r!=="number"||_e(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var In=Array.isArray;function sr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+B(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Xs(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $i(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(In(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:B(o)}}function Wi(t,r){var o=B(r.value),u=B(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Ys(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?mt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var or,Js=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=or.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ai=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(t){ai.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),oi[r]=oi[t]})});function Zs(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||oi.hasOwnProperty(t)&&oi[t]?(""+r).trim():r+"px"}function eo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Zs(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var to=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function no(t,r){if(r){if(to[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ro(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Hi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,hn=null,jn=null;function Qi(t){if(t=Po(t)){if(typeof qi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=ja(r),qi(t.stateNode,t.type,r))}}function zn(t){hn?jn?jn.push(t):jn=[t]:hn=t}function io(){if(hn){var t=hn,r=jn;if(jn=hn=null,Qi(t),r)for(t=0;t<r.length;t++)Qi(r[t])}}function ui(t,r){return t(r)}function so(){}var ar=!1;function oo(t,r,o){if(ar)return t(r,o);ar=!0;try{return ui(t,r,o)}finally{ar=!1,(hn!==null||jn!==null)&&(so(),io())}}function ut(t,r){var o=t.stateNode;if(o===null)return null;var u=ja(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Ki=!1;if(g)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){Ki=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{Ki=!1}function ci(t,r,o,u,h,p,y,T,R){var b=Array.prototype.slice.call(arguments,3);try{r.apply(o,b)}catch(Q){this.onError(Q)}}var hi=!1,Gi=null,An=!1,ao=null,yu={onError:function(t){hi=!0,Gi=t}};function Xi(t,r,o,u,h,p,y,T,R){hi=!1,Gi=null,ci.apply(yu,arguments)}function fa(t,r,o,u,h,p,y,T,R){if(Xi.apply(this,arguments),hi){if(hi){var b=Gi;hi=!1,Gi=null}else throw Error(n(198));An||(An=!0,ao=b)}}function Cn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function fi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Rn(t){if(Cn(t)!==t)throw Error(n(188))}function da(t){var r=t.alternate;if(!r){if(r=Cn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Rn(h),t;if(p===u)return Rn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,T=h.child;T;){if(T===o){y=!0,o=h,u=p;break}if(T===u){y=!0,u=h,o=p;break}T=T.sibling}if(!y){for(T=p.child;T;){if(T===o){y=!0,o=p,u=h;break}if(T===u){y=!0,u=p,o=h;break}T=T.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function lo(t){return t=da(t),t!==null?Yi(t):null}function Yi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Yi(t);if(r!==null)return r;t=t.sibling}return null}var Ji=e.unstable_scheduleCallback,uo=e.unstable_cancelCallback,pa=e.unstable_shouldYield,_u=e.unstable_requestPaint,Ge=e.unstable_now,ma=e.unstable_getCurrentPriorityLevel,di=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,co=e.unstable_LowPriority,ga=e.unstable_IdlePriority,pi=null,nn=null;function ya(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(pi,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:va,ho=Math.log,_a=Math.LN2;function va(t){return t>>>=0,t===0?32:31-(ho(t)/_a|0)|0}var Zi=64,es=4194304;function Cr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var T=y&~h;T!==0?u=Cr(T):(p&=y,p!==0&&(u=Cr(p)))}else y=o&~h,y!==0?u=Cr(y):p!==0&&(u=Cr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-zt(r),h=1<<o,u|=t[o],r&=~h;return u}function vu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-zt(p),T=1<<y,R=h[y];R===-1?((T&o)===0||(T&u)!==0)&&(h[y]=vu(T,r)):R<=r&&(t.expiredLanes|=T),p&=~T}}function rn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gi(){var t=Zi;return Zi<<=1,(Zi&4194240)===0&&(Zi=64),t}function Rr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-zt(r),t[r]=o}function Qe(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-zt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function kr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-zt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Me=0;function Vr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ea,ts,wa,Ta,Ia,fo=!1,$n=[],Pt=null,Pn=null,kn=null,Nr=new Map,dn=new Map,Wn=[],Eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sa(t,r){switch(t){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Nr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(r.pointerId)}}function Qt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Po(r),r!==null&&ts(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function wu(t,r,o,u,h){switch(r){case"focusin":return Pt=Qt(Pt,t,r,o,u,h),!0;case"dragenter":return Pn=Qt(Pn,t,r,o,u,h),!0;case"mouseover":return kn=Qt(kn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Nr.set(p,Qt(Nr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,dn.set(p,Qt(dn.get(p)||null,t,r,o,u,h)),!0}return!1}function Aa(t){var r=wi(t.target);if(r!==null){var o=Cn(r);if(o!==null){if(r=o.tag,r===13){if(r=fi(o),r!==null){t.blockedOn=r,Ia(t.priority,function(){wa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ur(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ns(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);li=u,o.target.dispatchEvent(u),li=null}else return r=Po(o),r!==null&&ts(r),t.blockedOn=o,!1;r.shift()}return!0}function yi(t,r,o){ur(t)&&o.delete(r)}function Ca(){fo=!1,Pt!==null&&ur(Pt)&&(Pt=null),Pn!==null&&ur(Pn)&&(Pn=null),kn!==null&&ur(kn)&&(kn=null),Nr.forEach(yi),dn.forEach(yi)}function Vn(t,r){t.blockedOn===r&&(t.blockedOn=null,fo||(fo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ca)))}function Nn(t){function r(h){return Vn(h,t)}if(0<$n.length){Vn($n[0],t);for(var o=1;o<$n.length;o++){var u=$n[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Pt!==null&&Vn(Pt,t),Pn!==null&&Vn(Pn,t),kn!==null&&Vn(kn,t),Nr.forEach(r),dn.forEach(r),o=0;o<Wn.length;o++)u=Wn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Wn.length&&(o=Wn[0],o.blockedOn===null);)Aa(o),o.blockedOn===null&&Wn.shift()}var cr=ke.ReactCurrentBatchConfig,xr=!0;function et(t,r,o,u){var h=Me,p=cr.transition;cr.transition=null;try{Me=1,po(t,r,o,u)}finally{Me=h,cr.transition=p}}function Tu(t,r,o,u){var h=Me,p=cr.transition;cr.transition=null;try{Me=4,po(t,r,o,u)}finally{Me=h,cr.transition=p}}function po(t,r,o,u){if(xr){var h=ns(t,r,o,u);if(h===null)Du(t,r,u,_i,o),Sa(t,u);else if(wu(h,t,r,o,u))u.stopPropagation();else if(Sa(t,u),r&4&&-1<Eu.indexOf(t)){for(;h!==null;){var p=Po(h);if(p!==null&&Ea(p),p=ns(t,r,o,u),p===null&&Du(t,r,u,_i,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Du(t,r,u,null,o)}}var _i=null;function ns(t,r,o,u){if(_i=null,t=Hi(u),t=wi(t),t!==null)if(r=Cn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=fi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return _i=t,null}function mo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ma()){case di:return 1;case Ar:return 4;case fn:case co:return 16;case ga:return 536870912;default:return 16}default:return 16}}var sn=null,rs=null,Kt=null;function go(){if(Kt)return Kt;var t,r=rs,o=r.length,u,h="value"in sn?sn.value:sn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return Kt=h.slice(t,1<u?1-u:void 0)}function is(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Hn(){return!0}function yo(){return!1}function kt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Hn:yo,this.isPropagationStopped=yo,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){},isPersistent:Hn}),r}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ss=kt(xn),qn=se({},xn,{view:0,detail:0}),Iu=kt(qn),os,hr,Dr,vi=se({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(os=t.screenX-Dr.screenX,hr=t.screenY-Dr.screenY):hr=os=0,Dr=t),os)},movementY:function(t){return"movementY"in t?t.movementY:hr}}),as=kt(vi),_o=se({},vi,{dataTransfer:0}),Ra=kt(_o),ls=se({},qn,{relatedTarget:0}),us=kt(ls),Pa=se({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),fr=kt(Pa),ka=se({},xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=kt(ka),Na=se({},xn,{data:0}),vo=kt(Na),cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Da(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=xa[t])?!!r[t]:!1}function Qn(){return Da}var l=se({},qn,{key:function(t){if(t.key){var r=cs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=is(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$t[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qn,charCode:function(t){return t.type==="keypress"?is(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?is(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=kt(l),m=se({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=kt(m),L=se({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qn}),z=kt(L),ee=se({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=kt(ee),yt=se({},vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=kt(yt),It=[9,13,27,32],ft=g&&"CompositionEvent"in window,pn=null;g&&"documentMode"in document&&(pn=document.documentMode);var on=g&&"TextEvent"in window&&!pn,Ei=g&&(!ft||pn&&8<pn&&11>=pn),hs=" ",rf=!1;function sf(t,r){switch(t){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function yy(t,r){switch(t){case"compositionend":return of(r);case"keypress":return r.which!==32?null:(rf=!0,hs);case"textInput":return t=r.data,t===hs&&rf?null:t;default:return null}}function _y(t,r){if(fs)return t==="compositionend"||!ft&&sf(t,r)?(t=go(),Kt=rs=sn=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ei&&r.locale!=="ko"?null:r.data;default:return null}}var vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!vy[t.type]:r==="textarea"}function lf(t,r,o,u){zn(u),r=Ba(r,"onChange"),0<r.length&&(o=new ss("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Eo=null,wo=null;function Ey(t){Cf(t,0)}function Oa(t){var r=ys(t);if(re(r))return t}function wy(t,r){if(t==="change")return r}var uf=!1;if(g){var Su;if(g){var Au="oninput"in document;if(!Au){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Au=typeof cf.oninput=="function"}Su=Au}else Su=!1;uf=Su&&(!document.documentMode||9<document.documentMode)}function hf(){Eo&&(Eo.detachEvent("onpropertychange",ff),wo=Eo=null)}function ff(t){if(t.propertyName==="value"&&Oa(wo)){var r=[];lf(r,wo,t,Hi(t)),oo(Ey,r)}}function Ty(t,r,o){t==="focusin"?(hf(),Eo=r,wo=o,Eo.attachEvent("onpropertychange",ff)):t==="focusout"&&hf()}function Iy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(wo)}function Sy(t,r){if(t==="click")return Oa(r)}function Ay(t,r){if(t==="input"||t==="change")return Oa(r)}function Cy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Dn=typeof Object.is=="function"?Object.is:Cy;function To(t,r){if(Dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!_.call(r,h)||!Dn(t[h],r[h]))return!1}return!0}function df(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pf(t,r){var o=df(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=df(o)}}function mf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?mf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function gf(){for(var t=window,r=_e();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=_e(t.document)}return r}function Cu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Ry(t){var r=gf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&mf(o.ownerDocument.documentElement,o)){if(u!==null&&Cu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=pf(o,p);var y=pf(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Py=g&&"documentMode"in document&&11>=document.documentMode,ds=null,Ru=null,Io=null,Pu=!1;function yf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pu||ds==null||ds!==_e(u)||(u=ds,"selectionStart"in u&&Cu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Io&&To(Io,u)||(Io=u,u=Ba(Ru,"onSelect"),0<u.length&&(r=new ss("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ds)))}function La(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ps={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},ku={},_f={};g&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Ma(t){if(ku[t])return ku[t];if(!ps[t])return t;var r=ps[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in _f)return ku[t]=r[o];return t}var vf=Ma("animationend"),Ef=Ma("animationiteration"),wf=Ma("animationstart"),Tf=Ma("transitionend"),If=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,r){If.set(t,r),c(r,[t])}for(var Vu=0;Vu<Sf.length;Vu++){var Nu=Sf[Vu],ky=Nu.toLowerCase(),Vy=Nu[0].toUpperCase()+Nu.slice(1);Or(ky,"on"+Vy)}Or(vf,"onAnimationEnd"),Or(Ef,"onAnimationIteration"),Or(wf,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Af(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,fa(u,r,void 0,t),t.currentTarget=null}function Cf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var T=u[y],R=T.instance,b=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break e;Af(h,T,b),p=R}else for(y=0;y<u.length;y++){if(T=u[y],R=T.instance,b=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break e;Af(h,T,b),p=R}}}if(An)throw t=ao,An=!1,ao=null,t}function Ye(t,r){var o=r[Uu];o===void 0&&(o=r[Uu]=new Set);var u=t+"__bubble";o.has(u)||(Rf(r,t,2,!1),o.add(u))}function xu(t,r,o){var u=0;r&&(u|=4),Rf(o,t,u,r)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Fa]){t[Fa]=!0,s.forEach(function(o){o!=="selectionchange"&&(Ny.has(o)||xu(o,!1,t),xu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fa]||(r[Fa]=!0,xu("selectionchange",!1,r))}}function Rf(t,r,o,u){switch(mo(r)){case 1:var h=et;break;case 4:h=Tu;break;default:h=po}o=h.bind(null,r,o,t),h=void 0,!Ki||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Du(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var R=y.tag;if((R===3||R===4)&&(R=y.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;y=y.return}for(;T!==null;){if(y=wi(T),y===null)return;if(R=y.tag,R===5||R===6){u=p=y;continue e}T=T.parentNode}}u=u.return}oo(function(){var b=p,Q=Hi(o),G=[];e:{var q=If.get(t);if(q!==void 0){var oe=ss,ue=t;switch(t){case"keypress":if(is(o)===0)break e;case"keydown":case"keyup":oe=d;break;case"focusin":ue="focus",oe=us;break;case"focusout":ue="blur",oe=us;break;case"beforeblur":case"afterblur":oe=us;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=as;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=z;break;case vf:case Ef:case wf:oe=fr;break;case Tf:oe=He;break;case"scroll":oe=Iu;break;case"wheel":oe=Be;break;case"copy":case"cut":case"paste":oe=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=E}var ce=(r&4)!==0,ct=!ce&&t==="scroll",M=ce?q!==null?q+"Capture":null:q;ce=[];for(var P=b,F;P!==null;){F=P;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,M!==null&&(X=ut(P,M),X!=null&&ce.push(Co(P,X,F)))),ct)break;P=P.return}0<ce.length&&(q=new oe(q,ue,null,o,Q),G.push({event:q,listeners:ce}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",q&&o!==li&&(ue=o.relatedTarget||o.fromElement)&&(wi(ue)||ue[dr]))break e;if((oe||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,oe?(ue=o.relatedTarget||o.toElement,oe=b,ue=ue?wi(ue):null,ue!==null&&(ct=Cn(ue),ue!==ct||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=b),oe!==ue)){if(ce=as,X="onMouseLeave",M="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(ce=E,X="onPointerLeave",M="onPointerEnter",P="pointer"),ct=oe==null?q:ys(oe),F=ue==null?q:ys(ue),q=new ce(X,P+"leave",oe,o,Q),q.target=ct,q.relatedTarget=F,X=null,wi(Q)===b&&(ce=new ce(M,P+"enter",ue,o,Q),ce.target=F,ce.relatedTarget=ct,X=ce),ct=X,oe&&ue)t:{for(ce=oe,M=ue,P=0,F=ce;F;F=ms(F))P++;for(F=0,X=M;X;X=ms(X))F++;for(;0<P-F;)ce=ms(ce),P--;for(;0<F-P;)M=ms(M),F--;for(;P--;){if(ce===M||M!==null&&ce===M.alternate)break t;ce=ms(ce),M=ms(M)}ce=null}else ce=null;oe!==null&&Pf(G,q,oe,ce,!1),ue!==null&&ct!==null&&Pf(G,ct,ue,ce,!0)}}e:{if(q=b?ys(b):window,oe=q.nodeName&&q.nodeName.toLowerCase(),oe==="select"||oe==="input"&&q.type==="file")var he=wy;else if(af(q))if(uf)he=Ay;else{he=Iy;var me=Ty}else(oe=q.nodeName)&&oe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(he=Sy);if(he&&(he=he(t,b))){lf(G,he,o,Q);break e}me&&me(t,q,b),t==="focusout"&&(me=q._wrapperState)&&me.controlled&&q.type==="number"&&ir(q,"number",q.value)}switch(me=b?ys(b):window,t){case"focusin":(af(me)||me.contentEditable==="true")&&(ds=me,Ru=b,Io=null);break;case"focusout":Io=Ru=ds=null;break;case"mousedown":Pu=!0;break;case"contextmenu":case"mouseup":case"dragend":Pu=!1,yf(G,o,Q);break;case"selectionchange":if(Py)break;case"keydown":case"keyup":yf(G,o,Q)}var ge;if(ft)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else fs?sf(t,o)&&(Te="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(Ei&&o.locale!=="ko"&&(fs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&fs&&(ge=go()):(sn=Q,rs="value"in sn?sn.value:sn.textContent,fs=!0)),me=Ba(b,Te),0<me.length&&(Te=new vo(Te,t,null,o,Q),G.push({event:Te,listeners:me}),ge?Te.data=ge:(ge=of(o),ge!==null&&(Te.data=ge)))),(ge=on?yy(t,o):_y(t,o))&&(b=Ba(b,"onBeforeInput"),0<b.length&&(Q=new vo("onBeforeInput","beforeinput",null,o,Q),G.push({event:Q,listeners:b}),Q.data=ge))}Cf(G,r)})}function Co(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ba(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ut(t,o),p!=null&&u.unshift(Co(t,p,h)),p=ut(t,r),p!=null&&u.push(Co(t,p,h))),t=t.return}return u}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var T=o,R=T.alternate,b=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&b!==null&&(T=b,h?(R=ut(o,p),R!=null&&y.unshift(Co(o,R,T))):h||(R=ut(o,p),R!=null&&y.push(Co(o,R,T)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var xy=/\r\n?/g,Dy=/\u0000|\uFFFD/g;function kf(t){return(typeof t=="string"?t:""+t).replace(xy,`
`).replace(Dy,"")}function Ua(t,r,o){if(r=kf(r),kf(t)!==r&&o)throw Error(n(425))}function ba(){}var Ou=null,Lu=null;function Mu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fu=typeof setTimeout=="function"?setTimeout:void 0,Oy=typeof clearTimeout=="function"?clearTimeout:void 0,Vf=typeof Promise=="function"?Promise:void 0,Ly=typeof queueMicrotask=="function"?queueMicrotask:typeof Vf<"u"?function(t){return Vf.resolve(null).then(t).catch(My)}:Fu;function My(t){setTimeout(function(){throw t})}function Bu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Nn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Nn(r)}function Lr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Nf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var gs=Math.random().toString(36).slice(2),Kn="__reactFiber$"+gs,Ro="__reactProps$"+gs,dr="__reactContainer$"+gs,Uu="__reactEvents$"+gs,Fy="__reactListeners$"+gs,By="__reactHandles$"+gs;function wi(t){var r=t[Kn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[dr]||o[Kn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Nf(t);t!==null;){if(o=t[Kn])return o;t=Nf(t)}return r}t=o,o=t.parentNode}return null}function Po(t){return t=t[Kn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ja(t){return t[Ro]||null}var bu=[],_s=-1;function Mr(t){return{current:t}}function Je(t){0>_s||(t.current=bu[_s],bu[_s]=null,_s--)}function Xe(t,r){_s++,bu[_s]=t.current,t.current=r}var Fr={},Lt=Mr(Fr),Gt=Mr(!1),Ti=Fr;function vs(t,r){var o=t.type.contextTypes;if(!o)return Fr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Xt(t){return t=t.childContextTypes,t!=null}function za(){Je(Gt),Je(Lt)}function xf(t,r,o){if(Lt.current!==Fr)throw Error(n(168));Xe(Lt,r),Xe(Gt,o)}function Df(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,je(t)||"Unknown",h));return se({},o,u)}function $a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ti=Lt.current,Xe(Lt,t),Xe(Gt,Gt.current),!0}function Of(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Df(t,r,Ti),u.__reactInternalMemoizedMergedChildContext=t,Je(Gt),Je(Lt),Xe(Lt,t)):Je(Gt),Xe(Gt,o)}var pr=null,Wa=!1,ju=!1;function Lf(t){pr===null?pr=[t]:pr.push(t)}function Uy(t){Wa=!0,Lf(t)}function Br(){if(!ju&&pr!==null){ju=!0;var t=0,r=Me;try{var o=pr;for(Me=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}pr=null,Wa=!1}catch(h){throw pr!==null&&(pr=pr.slice(t+1)),Ji(di,Br),h}finally{Me=r,ju=!1}}return null}var Es=[],ws=0,Ha=null,qa=0,mn=[],gn=0,Ii=null,mr=1,gr="";function Si(t,r){Es[ws++]=qa,Es[ws++]=Ha,Ha=t,qa=r}function Mf(t,r,o){mn[gn++]=mr,mn[gn++]=gr,mn[gn++]=Ii,Ii=t;var u=mr;t=gr;var h=32-zt(u)-1;u&=~(1<<h),o+=1;var p=32-zt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,mr=1<<32-zt(r)+h|o<<h|u,gr=p+t}else mr=1<<p|o<<h|u,gr=t}function zu(t){t.return!==null&&(Si(t,1),Mf(t,1,0))}function $u(t){for(;t===Ha;)Ha=Es[--ws],Es[ws]=null,qa=Es[--ws],Es[ws]=null;for(;t===Ii;)Ii=mn[--gn],mn[gn]=null,gr=mn[--gn],mn[gn]=null,mr=mn[--gn],mn[gn]=null}var an=null,ln=null,tt=!1,On=null;function Ff(t,r){var o=En(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Bf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,an=t,ln=Lr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,an=t,ln=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ii!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=En(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,an=t,ln=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(tt){var r=ln;if(r){var o=r;if(!Bf(t,r)){if(Wu(t))throw Error(n(418));r=Lr(o.nextSibling);var u=an;r&&Bf(t,r)?Ff(u,o):(t.flags=t.flags&-4097|2,tt=!1,an=t)}}else{if(Wu(t))throw Error(n(418));t.flags=t.flags&-4097|2,tt=!1,an=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Qa(t){if(t!==an)return!1;if(!tt)return Uf(t),tt=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Mu(t.type,t.memoizedProps)),r&&(r=ln)){if(Wu(t))throw bf(),Error(n(418));for(;r;)Ff(t,r),r=Lr(r.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){ln=Lr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}ln=null}}else ln=an?Lr(t.stateNode.nextSibling):null;return!0}function bf(){for(var t=ln;t;)t=Lr(t.nextSibling)}function Ts(){ln=an=null,tt=!1}function qu(t){On===null?On=[t]:On.push(t)}var by=ke.ReactCurrentBatchConfig;function ko(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var T=h.refs;y===null?delete T[p]:T[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ka(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function jf(t){var r=t._init;return r(t._payload)}function zf(t){function r(M,P){if(t){var F=M.deletions;F===null?(M.deletions=[P],M.flags|=16):F.push(P)}}function o(M,P){if(!t)return null;for(;P!==null;)r(M,P),P=P.sibling;return null}function u(M,P){for(M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function h(M,P){return M=qr(M,P),M.index=0,M.sibling=null,M}function p(M,P,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<P?(M.flags|=2,P):F):(M.flags|=2,P)):(M.flags|=1048576,P)}function y(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,P,F,X){return P===null||P.tag!==6?(P=Fc(F,M.mode,X),P.return=M,P):(P=h(P,F),P.return=M,P)}function R(M,P,F,X){var he=F.type;return he===V?Q(M,P,F.props.children,X,F.key):P!==null&&(P.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Fe&&jf(he)===P.type)?(X=h(P,F.props),X.ref=ko(M,P,F),X.return=M,X):(X=_l(F.type,F.key,F.props,null,M.mode,X),X.ref=ko(M,P,F),X.return=M,X)}function b(M,P,F,X){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Bc(F,M.mode,X),P.return=M,P):(P=h(P,F.children||[]),P.return=M,P)}function Q(M,P,F,X,he){return P===null||P.tag!==7?(P=xi(F,M.mode,X,he),P.return=M,P):(P=h(P,F),P.return=M,P)}function G(M,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Fc(""+P,M.mode,F),P.return=M,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case rt:return F=_l(P.type,P.key,P.props,null,M.mode,F),F.ref=ko(M,null,P),F.return=M,F;case Le:return P=Bc(P,M.mode,F),P.return=M,P;case Fe:var X=P._init;return G(M,X(P._payload),F)}if(In(P)||de(P))return P=xi(P,M.mode,F,null),P.return=M,P;Ka(M,P)}return null}function q(M,P,F,X){var he=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return he!==null?null:T(M,P,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case rt:return F.key===he?R(M,P,F,X):null;case Le:return F.key===he?b(M,P,F,X):null;case Fe:return he=F._init,q(M,P,he(F._payload),X)}if(In(F)||de(F))return he!==null?null:Q(M,P,F,X,null);Ka(M,F)}return null}function oe(M,P,F,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return M=M.get(F)||null,T(P,M,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case rt:return M=M.get(X.key===null?F:X.key)||null,R(P,M,X,he);case Le:return M=M.get(X.key===null?F:X.key)||null,b(P,M,X,he);case Fe:var me=X._init;return oe(M,P,F,me(X._payload),he)}if(In(X)||de(X))return M=M.get(F)||null,Q(P,M,X,he,null);Ka(P,X)}return null}function ue(M,P,F,X){for(var he=null,me=null,ge=P,Te=P=0,Ct=null;ge!==null&&Te<F.length;Te++){ge.index>Te?(Ct=ge,ge=null):Ct=ge.sibling;var $e=q(M,ge,F[Te],X);if($e===null){ge===null&&(ge=Ct);break}t&&ge&&$e.alternate===null&&r(M,ge),P=p($e,P,Te),me===null?he=$e:me.sibling=$e,me=$e,ge=Ct}if(Te===F.length)return o(M,ge),tt&&Si(M,Te),he;if(ge===null){for(;Te<F.length;Te++)ge=G(M,F[Te],X),ge!==null&&(P=p(ge,P,Te),me===null?he=ge:me.sibling=ge,me=ge);return tt&&Si(M,Te),he}for(ge=u(M,ge);Te<F.length;Te++)Ct=oe(ge,M,Te,F[Te],X),Ct!==null&&(t&&Ct.alternate!==null&&ge.delete(Ct.key===null?Te:Ct.key),P=p(Ct,P,Te),me===null?he=Ct:me.sibling=Ct,me=Ct);return t&&ge.forEach(function(Qr){return r(M,Qr)}),tt&&Si(M,Te),he}function ce(M,P,F,X){var he=de(F);if(typeof he!="function")throw Error(n(150));if(F=he.call(F),F==null)throw Error(n(151));for(var me=he=null,ge=P,Te=P=0,Ct=null,$e=F.next();ge!==null&&!$e.done;Te++,$e=F.next()){ge.index>Te?(Ct=ge,ge=null):Ct=ge.sibling;var Qr=q(M,ge,$e.value,X);if(Qr===null){ge===null&&(ge=Ct);break}t&&ge&&Qr.alternate===null&&r(M,ge),P=p(Qr,P,Te),me===null?he=Qr:me.sibling=Qr,me=Qr,ge=Ct}if($e.done)return o(M,ge),tt&&Si(M,Te),he;if(ge===null){for(;!$e.done;Te++,$e=F.next())$e=G(M,$e.value,X),$e!==null&&(P=p($e,P,Te),me===null?he=$e:me.sibling=$e,me=$e);return tt&&Si(M,Te),he}for(ge=u(M,ge);!$e.done;Te++,$e=F.next())$e=oe(ge,M,Te,$e.value,X),$e!==null&&(t&&$e.alternate!==null&&ge.delete($e.key===null?Te:$e.key),P=p($e,P,Te),me===null?he=$e:me.sibling=$e,me=$e);return t&&ge.forEach(function(v_){return r(M,v_)}),tt&&Si(M,Te),he}function ct(M,P,F,X){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case rt:e:{for(var he=F.key,me=P;me!==null;){if(me.key===he){if(he=F.type,he===V){if(me.tag===7){o(M,me.sibling),P=h(me,F.props.children),P.return=M,M=P;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Fe&&jf(he)===me.type){o(M,me.sibling),P=h(me,F.props),P.ref=ko(M,me,F),P.return=M,M=P;break e}o(M,me);break}else r(M,me);me=me.sibling}F.type===V?(P=xi(F.props.children,M.mode,X,F.key),P.return=M,M=P):(X=_l(F.type,F.key,F.props,null,M.mode,X),X.ref=ko(M,P,F),X.return=M,M=X)}return y(M);case Le:e:{for(me=F.key;P!==null;){if(P.key===me)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(M,P.sibling),P=h(P,F.children||[]),P.return=M,M=P;break e}else{o(M,P);break}else r(M,P);P=P.sibling}P=Bc(F,M.mode,X),P.return=M,M=P}return y(M);case Fe:return me=F._init,ct(M,P,me(F._payload),X)}if(In(F))return ue(M,P,F,X);if(de(F))return ce(M,P,F,X);Ka(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(M,P.sibling),P=h(P,F),P.return=M,M=P):(o(M,P),P=Fc(F,M.mode,X),P.return=M,M=P),y(M)):o(M,P)}return ct}var Is=zf(!0),$f=zf(!1),Ga=Mr(null),Xa=null,Ss=null,Qu=null;function Ku(){Qu=Ss=Xa=null}function Gu(t){var r=Ga.current;Je(Ga),t._currentValue=r}function Xu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function As(t,r){Xa=t,Qu=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Yt=!0),t.firstContext=null)}function yn(t){var r=t._currentValue;if(Qu!==t)if(t={context:t,memoizedValue:r,next:null},Ss===null){if(Xa===null)throw Error(n(308));Ss=t,Xa.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return r}var Ai=null;function Yu(t){Ai===null?Ai=[t]:Ai.push(t)}function Wf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Yu(r)):(o.next=h.next,h.next=o),r.interleaved=o,yr(t,u)}function yr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function Ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function br(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(ze&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,yr(t,o)}return h=u.interleaved,h===null?(r.next=r,Yu(u)):(r.next=h.next,h.next=r),u.interleaved=r,yr(t,o)}function Ya(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,kr(t,o)}}function qf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Ja(t,r,o,u){var h=t.updateQueue;Ur=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,b=R.next;R.next=null,y===null?p=b:y.next=b,y=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==y&&(T===null?Q.firstBaseUpdate=b:T.next=b,Q.lastBaseUpdate=R))}if(p!==null){var G=h.baseState;y=0,Q=b=R=null,T=p;do{var q=T.lane,oe=T.eventTime;if((u&q)===q){Q!==null&&(Q=Q.next={eventTime:oe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ue=t,ce=T;switch(q=r,oe=o,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){G=ue.call(oe,G,q);break e}G=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,q=typeof ue=="function"?ue.call(oe,G,q):ue,q==null)break e;G=se({},G,q);break e;case 2:Ur=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else oe={eventTime:oe,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(b=Q=oe,R=G):Q=Q.next=oe,y|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(Q===null&&(R=G),h.baseState=R,h.firstBaseUpdate=b,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Pi|=y,t.lanes=y,t.memoizedState=G}}function Qf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Vo={},Gn=Mr(Vo),No=Mr(Vo),xo=Mr(Vo);function Ci(t){if(t===Vo)throw Error(n(174));return t}function Zu(t,r){switch(Xe(xo,r),Xe(No,t),Xe(Gn,Vo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:gt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=gt(r,t)}Je(Gn),Xe(Gn,r)}function Cs(){Je(Gn),Je(No),Je(xo)}function Kf(t){Ci(xo.current);var r=Ci(Gn.current),o=gt(r,t.type);r!==o&&(Xe(No,t),Xe(Gn,o))}function ec(t){No.current===t&&(Je(Gn),Je(No))}var it=Mr(0);function Za(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var tc=[];function nc(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var el=ke.ReactCurrentDispatcher,rc=ke.ReactCurrentBatchConfig,Ri=0,st=null,_t=null,St=null,tl=!1,Do=!1,Oo=0,jy=0;function Mt(){throw Error(n(321))}function ic(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Dn(t[o],r[o]))return!1;return!0}function sc(t,r,o,u,h,p){if(Ri=p,st=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,el.current=t===null||t.memoizedState===null?Hy:qy,t=o(u,h),Do){p=0;do{if(Do=!1,Oo=0,25<=p)throw Error(n(301));p+=1,St=_t=null,r.updateQueue=null,el.current=Qy,t=o(u,h)}while(Do)}if(el.current=il,r=_t!==null&&_t.next!==null,Ri=0,St=_t=st=null,tl=!1,r)throw Error(n(300));return t}function oc(){var t=Oo!==0;return Oo=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?st.memoizedState=St=t:St=St.next=t,St}function _n(){if(_t===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var r=St===null?st.memoizedState:St.next;if(r!==null)St=r,_t=t;else{if(t===null)throw Error(n(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?st.memoizedState=St=t:St=St.next=t}return St}function Lo(t,r){return typeof r=="function"?r(t):r}function ac(t){var r=_n(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=_t,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=y=null,R=null,b=p;do{var Q=b.lane;if((Ri&Q)===Q)R!==null&&(R=R.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),u=b.hasEagerState?b.eagerState:t(u,b.action);else{var G={lane:Q,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};R===null?(T=R=G,y=u):R=R.next=G,st.lanes|=Q,Pi|=Q}b=b.next}while(b!==null&&b!==p);R===null?y=u:R.next=T,Dn(u,r.memoizedState)||(Yt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,st.lanes|=p,Pi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function lc(t){var r=_n(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Dn(p,r.memoizedState)||(Yt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Gf(){}function Xf(t,r){var o=st,u=_n(),h=r(),p=!Dn(u.memoizedState,h);if(p&&(u.memoizedState=h,Yt=!0),u=u.queue,uc(Zf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||St!==null&&St.memoizedState.tag&1){if(o.flags|=2048,Mo(9,Jf.bind(null,o,u,h,r),void 0,null),At===null)throw Error(n(349));(Ri&30)!==0||Yf(o,r,h)}return h}function Yf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Jf(t,r,o,u){r.value=o,r.getSnapshot=u,ed(r)&&td(t)}function Zf(t,r,o){return o(function(){ed(r)&&td(t)})}function ed(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Dn(t,o)}catch{return!0}}function td(t){var r=yr(t,1);r!==null&&Bn(r,t,1,-1)}function nd(t){var r=Xn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},r.queue=t,t=t.dispatch=Wy.bind(null,st,t),[r.memoizedState,t]}function Mo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function rd(){return _n().memoizedState}function nl(t,r,o,u){var h=Xn();st.flags|=t,h.memoizedState=Mo(1|r,o,void 0,u===void 0?null:u)}function rl(t,r,o,u){var h=_n();u=u===void 0?null:u;var p=void 0;if(_t!==null){var y=_t.memoizedState;if(p=y.destroy,u!==null&&ic(u,y.deps)){h.memoizedState=Mo(r,o,p,u);return}}st.flags|=t,h.memoizedState=Mo(1|r,o,p,u)}function id(t,r){return nl(8390656,8,t,r)}function uc(t,r){return rl(2048,8,t,r)}function sd(t,r){return rl(4,2,t,r)}function od(t,r){return rl(4,4,t,r)}function ad(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ld(t,r,o){return o=o!=null?o.concat([t]):null,rl(4,4,ad.bind(null,r,t),o)}function cc(){}function ud(t,r){var o=_n();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function cd(t,r){var o=_n();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function hd(t,r,o){return(Ri&21)===0?(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=o):(Dn(o,r)||(o=gi(),st.lanes|=o,Pi|=o,t.baseState=!0),r)}function zy(t,r){var o=Me;Me=o!==0&&4>o?o:4,t(!0);var u=rc.transition;rc.transition={};try{t(!1),r()}finally{Me=o,rc.transition=u}}function fd(){return _n().memoizedState}function $y(t,r,o){var u=Wr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},dd(t))pd(r,o);else if(o=Wf(t,r,o,u),o!==null){var h=Ht();Bn(o,t,u,h),md(o,r,u)}}function Wy(t,r,o){var u=Wr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(dd(t))pd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,T=p(y,o);if(h.hasEagerState=!0,h.eagerState=T,Dn(T,y)){var R=r.interleaved;R===null?(h.next=h,Yu(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Wf(t,r,h,u),o!==null&&(h=Ht(),Bn(o,t,u,h),md(o,r,u))}}function dd(t){var r=t.alternate;return t===st||r!==null&&r===st}function pd(t,r){Do=tl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function md(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,kr(t,o)}}var il={readContext:yn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Hy={readContext:yn,useCallback:function(t,r){return Xn().memoizedState=[t,r===void 0?null:r],t},useContext:yn,useEffect:id,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,nl(4194308,4,ad.bind(null,r,t),o)},useLayoutEffect:function(t,r){return nl(4194308,4,t,r)},useInsertionEffect:function(t,r){return nl(4,2,t,r)},useMemo:function(t,r){var o=Xn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Xn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=$y.bind(null,st,t),[u.memoizedState,t]},useRef:function(t){var r=Xn();return t={current:t},r.memoizedState=t},useState:nd,useDebugValue:cc,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=nd(!1),r=t[0];return t=zy.bind(null,t[1]),Xn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=st,h=Xn();if(tt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),At===null)throw Error(n(349));(Ri&30)!==0||Yf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,id(Zf.bind(null,u,p,t),[t]),u.flags|=2048,Mo(9,Jf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Xn(),r=At.identifierPrefix;if(tt){var o=gr,u=mr;o=(u&~(1<<32-zt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Oo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=jy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},qy={readContext:yn,useCallback:ud,useContext:yn,useEffect:uc,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:ac,useRef:rd,useState:function(){return ac(Lo)},useDebugValue:cc,useDeferredValue:function(t){var r=_n();return hd(r,_t.memoizedState,t)},useTransition:function(){var t=ac(Lo)[0],r=_n().memoizedState;return[t,r]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:fd,unstable_isNewReconciler:!1},Qy={readContext:yn,useCallback:ud,useContext:yn,useEffect:uc,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:lc,useRef:rd,useState:function(){return lc(Lo)},useDebugValue:cc,useDeferredValue:function(t){var r=_n();return _t===null?r.memoizedState=t:hd(r,_t.memoizedState,t)},useTransition:function(){var t=lc(Lo)[0],r=_n().memoizedState;return[t,r]},useMutableSource:Gf,useSyncExternalStore:Xf,useId:fd,unstable_isNewReconciler:!1};function Ln(t,r){if(t&&t.defaultProps){r=se({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function hc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:se({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var sl={isMounted:function(t){return(t=t._reactInternals)?Cn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Ht(),h=Wr(t),p=_r(u,h);p.payload=r,o!=null&&(p.callback=o),r=br(t,p,h),r!==null&&(Bn(r,t,h,u),Ya(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Ht(),h=Wr(t),p=_r(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=br(t,p,h),r!==null&&(Bn(r,t,h,u),Ya(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Ht(),u=Wr(t),h=_r(o,u);h.tag=2,r!=null&&(h.callback=r),r=br(t,h,u),r!==null&&(Bn(r,t,u,o),Ya(r,t,u))}};function gd(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!To(o,u)||!To(h,p):!0}function yd(t,r,o){var u=!1,h=Fr,p=r.contextType;return typeof p=="object"&&p!==null?p=yn(p):(h=Xt(r)?Ti:Lt.current,u=r.contextTypes,p=(u=u!=null)?vs(t,h):Fr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=sl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function _d(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&sl.enqueueReplaceState(r,r.state,null)}function fc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Ju(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=yn(p):(p=Xt(r)?Ti:Lt.current,h.context=vs(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(hc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&sl.enqueueReplaceState(h,h.state,null),Ja(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,r){try{var o="",u=r;do o+=Re(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function dc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function pc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Ky=typeof WeakMap=="function"?WeakMap:Map;function vd(t,r,o){o=_r(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){fl||(fl=!0,kc=u),pc(t,r)},o}function Ed(t,r,o){o=_r(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){pc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){pc(t,r),typeof u!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function wd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Ky;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=l_.bind(null,t,r,o),r.then(t,t))}function Td(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Id(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=_r(-1,1),r.tag=2,br(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Gy=ke.ReactCurrentOwner,Yt=!1;function Wt(t,r,o,u){r.child=t===null?$f(r,null,o,u):Is(r,t.child,o,u)}function Sd(t,r,o,u,h){o=o.render;var p=r.ref;return As(r,h),u=sc(t,r,o,u,p,h),o=oc(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(tt&&o&&zu(r),r.flags|=1,Wt(t,r,u,h),r.child)}function Ad(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Mc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Cd(t,r,p,u,h)):(t=_l(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:To,o(y,u)&&t.ref===r.ref)return vr(t,r,h)}return r.flags|=1,t=qr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Cd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(To(p,u)&&t.ref===r.ref)if(Yt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Yt=!0);else return r.lanes=t.lanes,vr(t,r,h)}return mc(t,r,o,u,h)}function Rd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ks,un),un|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Xe(ks,un),un|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Xe(ks,un),un|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,Xe(ks,un),un|=u;return Wt(t,r,h,o),r.child}function Pd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function mc(t,r,o,u,h){var p=Xt(o)?Ti:Lt.current;return p=vs(r,p),As(r,h),o=sc(t,r,o,u,p,h),u=oc(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,vr(t,r,h)):(tt&&u&&zu(r),r.flags|=1,Wt(t,r,o,h),r.child)}function kd(t,r,o,u,h){if(Xt(o)){var p=!0;$a(r)}else p=!1;if(As(r,h),r.stateNode===null)al(t,r),yd(r,o,u),fc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,T=r.memoizedProps;y.props=T;var R=y.context,b=o.contextType;typeof b=="object"&&b!==null?b=yn(b):(b=Xt(o)?Ti:Lt.current,b=vs(r,b));var Q=o.getDerivedStateFromProps,G=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function";G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==u||R!==b)&&_d(r,y,u,b),Ur=!1;var q=r.memoizedState;y.state=q,Ja(r,u,y,h),R=r.memoizedState,T!==u||q!==R||Gt.current||Ur?(typeof Q=="function"&&(hc(r,o,Q,u),R=r.memoizedState),(T=Ur||gd(r,o,T,u,q,R,b))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),y.props=u,y.state=R,y.context=b,u=T):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Hf(t,r),T=r.memoizedProps,b=r.type===r.elementType?T:Ln(r.type,T),y.props=b,G=r.pendingProps,q=y.context,R=o.contextType,typeof R=="object"&&R!==null?R=yn(R):(R=Xt(o)?Ti:Lt.current,R=vs(r,R));var oe=o.getDerivedStateFromProps;(Q=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==G||q!==R)&&_d(r,y,u,R),Ur=!1,q=r.memoizedState,y.state=q,Ja(r,u,y,h);var ue=r.memoizedState;T!==G||q!==ue||Gt.current||Ur?(typeof oe=="function"&&(hc(r,o,oe,u),ue=r.memoizedState),(b=Ur||gd(r,o,b,u,q,ue,R)||!1)?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ue,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ue,R)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),y.props=u,y.state=ue,y.context=R,u=b):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return gc(t,r,o,u,p,h)}function gc(t,r,o,u,h,p){Pd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Of(r,o,!1),vr(t,r,p);u=r.stateNode,Gy.current=r;var T=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=Is(r,t.child,null,p),r.child=Is(r,null,T,p)):Wt(t,r,T,p),r.memoizedState=u.state,h&&Of(r,o,!0),r.child}function Vd(t){var r=t.stateNode;r.pendingContext?xf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&xf(t,r.context,!1),Zu(t,r.containerInfo)}function Nd(t,r,o,u,h){return Ts(),qu(h),r.flags|=256,Wt(t,r,o,u),r.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function xd(t,r,o){var u=r.pendingProps,h=it.current,p=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Xe(it,h&1),t===null)return Hu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=vl(y,u,0,null),t=xi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=_c(o),r.memoizedState=yc,t):vc(r,y));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return Xy(t,r,y,u,T,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,T=h.sibling;var R={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=qr(h,R),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=qr(T,p):(p=xi(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?_c(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=yc,u}return p=t.child,t=p.sibling,u=qr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function vc(t,r){return r=vl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ol(t,r,o,u){return u!==null&&qu(u),Is(r,t.child,null,o),t=vc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Xy(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=dc(Error(n(422))),ol(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=vl({mode:"visible",children:u.children},h,0,null),p=xi(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&Is(r,t.child,null,y),r.child.memoizedState=_c(y),r.memoizedState=yc,p);if((r.mode&1)===0)return ol(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=dc(p,u,void 0),ol(t,r,y,u)}if(T=(y&t.childLanes)!==0,Yt||T){if(u=At,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,yr(t,h),Bn(u,t,h,-1))}return Lc(),u=dc(Error(n(421))),ol(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=u_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,ln=Lr(h.nextSibling),an=r,tt=!0,On=null,t!==null&&(mn[gn++]=mr,mn[gn++]=gr,mn[gn++]=Ii,mr=t.id,gr=t.overflow,Ii=r),r=vc(r,u.children),r.flags|=4096,r)}function Dd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Xu(t.return,r,o)}function Ec(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Od(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Wt(t,r,u.children,o),u=it.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,o,r);else if(t.tag===19)Dd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Xe(it,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Za(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Ec(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Za(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Ec(r,!0,o,null,p);break;case"together":Ec(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function al(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function vr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Pi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=qr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=qr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Yy(t,r,o){switch(r.tag){case 3:Vd(r),Ts();break;case 5:Kf(r);break;case 1:Xt(r.type)&&$a(r);break;case 4:Zu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Xe(Ga,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Xe(it,it.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?xd(t,r,o):(Xe(it,it.current&1),t=vr(t,r,o),t!==null?t.sibling:null);Xe(it,it.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Od(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Xe(it,it.current),u)break;return null;case 22:case 23:return r.lanes=0,Rd(t,r,o)}return vr(t,r,o)}var Ld,wc,Md,Fd;Ld=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},wc=function(){},Md=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ci(Gn.current);var p=null;switch(o){case"input":h=Ne(t,h),u=Ne(t,u),p=[];break;case"select":h=se({},h,{value:void 0}),u=se({},u,{value:void 0}),p=[];break;case"textarea":h=Xs(t,h),u=Xs(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ba)}no(o,u);var y;o=null;for(b in h)if(!u.hasOwnProperty(b)&&h.hasOwnProperty(b)&&h[b]!=null)if(b==="style"){var T=h[b];for(y in T)T.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(a.hasOwnProperty(b)?p||(p=[]):(p=p||[]).push(b,null));for(b in u){var R=u[b];if(T=h!=null?h[b]:void 0,u.hasOwnProperty(b)&&R!==T&&(R!=null||T!=null))if(b==="style")if(T){for(y in T)!T.hasOwnProperty(y)||R&&R.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in R)R.hasOwnProperty(y)&&T[y]!==R[y]&&(o||(o={}),o[y]=R[y])}else o||(p||(p=[]),p.push(b,o)),o=R;else b==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(b,R)):b==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(b,""+R):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(a.hasOwnProperty(b)?(R!=null&&b==="onScroll"&&Ye("scroll",t),p||T===R||(p=[])):(p=p||[]).push(b,R))}o&&(p=p||[]).push("style",o);var b=p;(r.updateQueue=b)&&(r.flags|=4)}},Fd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Fo(t,r){if(!tt)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ft(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Jy(t,r,o){var u=r.pendingProps;switch($u(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Xt(r.type)&&za(),Ft(r),null;case 3:return u=r.stateNode,Cs(),Je(Gt),Je(Lt),nc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Qa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,On!==null&&(xc(On),On=null))),wc(t,r),Ft(r),null;case 5:ec(r);var h=Ci(xo.current);if(o=r.type,t!==null&&r.stateNode!=null)Md(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ft(r),null}if(t=Ci(Gn.current),Qa(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Kn]=r,u[Ro]=p,t=(r.mode&1)!==0,o){case"dialog":Ye("cancel",u),Ye("close",u);break;case"iframe":case"object":case"embed":Ye("load",u);break;case"video":case"audio":for(h=0;h<So.length;h++)Ye(So[h],u);break;case"source":Ye("error",u);break;case"img":case"image":case"link":Ye("error",u),Ye("load",u);break;case"details":Ye("toggle",u);break;case"input":Ke(u,p),Ye("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ye("invalid",u);break;case"textarea":$i(u,p),Ye("invalid",u)}no(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var T=p[y];y==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(y)&&T!=null&&y==="onScroll"&&Ye("scroll",u)}switch(o){case"input":ne(u),qt(u,p,!0);break;case"textarea":ne(u),Ys(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ba)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[Kn]=r,t[Ro]=u,Ld(t,r,!1,!1),r.stateNode=t;e:{switch(y=ro(o,u),o){case"dialog":Ye("cancel",t),Ye("close",t),h=u;break;case"iframe":case"object":case"embed":Ye("load",t),h=u;break;case"video":case"audio":for(h=0;h<So.length;h++)Ye(So[h],t);h=u;break;case"source":Ye("error",t),h=u;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),h=u;break;case"details":Ye("toggle",t),h=u;break;case"input":Ke(t,u),h=Ne(t,u),Ye("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=se({},u,{value:void 0}),Ye("invalid",t);break;case"textarea":$i(t,u),h=Xs(t,u),Ye("invalid",t);break;default:h=u}no(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?eo(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Js(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&Sr(t,R):typeof R=="number"&&Sr(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&Ye("scroll",t):R!=null&&we(t,p,R,y))}switch(o){case"input":ne(t),qt(t,u,!1);break;case"textarea":ne(t),Ys(t);break;case"option":u.value!=null&&t.setAttribute("value",""+B(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?sr(t,!!u.multiple,p,!1):u.defaultValue!=null&&sr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ba)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ft(r),null;case 6:if(t&&r.stateNode!=null)Fd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ci(xo.current),Ci(Gn.current),Qa(r)){if(u=r.stateNode,o=r.memoizedProps,u[Kn]=r,(p=u.nodeValue!==o)&&(t=an,t!==null))switch(t.tag){case 3:Ua(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Kn]=r,r.stateNode=u}return Ft(r),null;case 13:if(Je(it),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&ln!==null&&(r.mode&1)!==0&&(r.flags&128)===0)bf(),Ts(),r.flags|=98560,p=!1;else if(p=Qa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Kn]=r}else Ts(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),p=!1}else On!==null&&(xc(On),On=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(it.current&1)!==0?vt===0&&(vt=3):Lc())),r.updateQueue!==null&&(r.flags|=4),Ft(r),null);case 4:return Cs(),wc(t,r),t===null&&Ao(r.stateNode.containerInfo),Ft(r),null;case 10:return Gu(r.type._context),Ft(r),null;case 17:return Xt(r.type)&&za(),Ft(r),null;case 19:if(Je(it),p=r.memoizedState,p===null)return Ft(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Fo(p,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=Za(t),y!==null){for(r.flags|=128,Fo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Xe(it,it.current&1|2),r.child}t=t.sibling}p.tail!==null&&Ge()>Vs&&(r.flags|=128,u=!0,Fo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Za(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Fo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!tt)return Ft(r),null}else 2*Ge()-p.renderingStartTime>Vs&&o!==1073741824&&(r.flags|=128,u=!0,Fo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ge(),r.sibling=null,o=it.current,Xe(it,u?o&1|2:o&1),r):(Ft(r),null);case 22:case 23:return Oc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(un&1073741824)!==0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Zy(t,r){switch($u(r),r.tag){case 1:return Xt(r.type)&&za(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Cs(),Je(Gt),Je(Lt),nc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return ec(r),null;case 13:if(Je(it),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ts()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Je(it),null;case 4:return Cs(),null;case 10:return Gu(r.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var ll=!1,Bt=!1,e_=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ps(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){at(t,r,u)}else o.current=null}function Tc(t,r,o){try{o()}catch(u){at(t,r,u)}}var Bd=!1;function t_(t,r){if(Ou=xr,t=gf(),Cu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,T=-1,R=-1,b=0,Q=0,G=t,q=null;t:for(;;){for(var oe;G!==o||h!==0&&G.nodeType!==3||(T=y+h),G!==p||u!==0&&G.nodeType!==3||(R=y+u),G.nodeType===3&&(y+=G.nodeValue.length),(oe=G.firstChild)!==null;)q=G,G=oe;for(;;){if(G===t)break t;if(q===o&&++b===h&&(T=y),q===p&&++Q===u&&(R=y),(oe=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=oe}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lu={focusedElem:t,selectionRange:o},xr=!1,le=r;le!==null;)if(r=le,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,le=t;else for(;le!==null;){r=le;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ct=ue.memoizedState,M=r.stateNode,P=M.getSnapshotBeforeUpdate(r.elementType===r.type?ce:Ln(r.type,ce),ct);M.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){at(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,le=t;break}le=r.return}return ue=Bd,Bd=!1,ue}function Bo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Tc(r,o,p)}h=h.next}while(h!==u)}}function ul(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Ic(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Ud(t){var r=t.alternate;r!==null&&(t.alternate=null,Ud(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Kn],delete r[Ro],delete r[Uu],delete r[Fy],delete r[By])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bd(t){return t.tag===5||t.tag===3||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ba));else if(u!==4&&(t=t.child,t!==null))for(Sc(t,r,o),t=t.sibling;t!==null;)Sc(t,r,o),t=t.sibling}function Ac(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Ac(t,r,o),t=t.sibling;t!==null;)Ac(t,r,o),t=t.sibling}var Vt=null,Mn=!1;function jr(t,r,o){for(o=o.child;o!==null;)zd(t,r,o),o=o.sibling}function zd(t,r,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(pi,o)}catch{}switch(o.tag){case 5:Bt||Ps(o,r);case 6:var u=Vt,h=Mn;Vt=null,jr(t,r,o),Vt=u,Mn=h,Vt!==null&&(Mn?(t=Vt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Vt.removeChild(o.stateNode));break;case 18:Vt!==null&&(Mn?(t=Vt,o=o.stateNode,t.nodeType===8?Bu(t.parentNode,o):t.nodeType===1&&Bu(t,o),Nn(t)):Bu(Vt,o.stateNode));break;case 4:u=Vt,h=Mn,Vt=o.stateNode.containerInfo,Mn=!0,jr(t,r,o),Vt=u,Mn=h;break;case 0:case 11:case 14:case 15:if(!Bt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&Tc(o,r,y),h=h.next}while(h!==u)}jr(t,r,o);break;case 1:if(!Bt&&(Ps(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){at(o,r,T)}jr(t,r,o);break;case 21:jr(t,r,o);break;case 22:o.mode&1?(Bt=(u=Bt)||o.memoizedState!==null,jr(t,r,o),Bt=u):jr(t,r,o);break;default:jr(t,r,o)}}function $d(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new e_),r.forEach(function(u){var h=c_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Fn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,T=y;e:for(;T!==null;){switch(T.tag){case 5:Vt=T.stateNode,Mn=!1;break e;case 3:Vt=T.stateNode.containerInfo,Mn=!0;break e;case 4:Vt=T.stateNode.containerInfo,Mn=!0;break e}T=T.return}if(Vt===null)throw Error(n(160));zd(p,y,h),Vt=null,Mn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(b){at(h,r,b)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wd(r,t),r=r.sibling}function Wd(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(r,t),Yn(t),u&4){try{Bo(3,t,t.return),ul(3,t)}catch(ce){at(t,t.return,ce)}try{Bo(5,t,t.return)}catch(ce){at(t,t.return,ce)}}break;case 1:Fn(r,t),Yn(t),u&512&&o!==null&&Ps(o,o.return);break;case 5:if(Fn(r,t),Yn(t),u&512&&o!==null&&Ps(o,o.return),t.flags&32){var h=t.stateNode;try{Sr(h,"")}catch(ce){at(t,t.return,ce)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&cn(h,p),ro(T,y);var b=ro(T,p);for(y=0;y<R.length;y+=2){var Q=R[y],G=R[y+1];Q==="style"?eo(h,G):Q==="dangerouslySetInnerHTML"?Js(h,G):Q==="children"?Sr(h,G):we(h,Q,G,b)}switch(T){case"input":Tn(h,p);break;case"textarea":Wi(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?sr(h,!!p.multiple,oe,!1):q!==!!p.multiple&&(p.defaultValue!=null?sr(h,!!p.multiple,p.defaultValue,!0):sr(h,!!p.multiple,p.multiple?[]:"",!1))}h[Ro]=p}catch(ce){at(t,t.return,ce)}}break;case 6:if(Fn(r,t),Yn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ce){at(t,t.return,ce)}}break;case 3:if(Fn(r,t),Yn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Nn(r.containerInfo)}catch(ce){at(t,t.return,ce)}break;case 4:Fn(r,t),Yn(t);break;case 13:Fn(r,t),Yn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Pc=Ge())),u&4&&$d(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Bt=(b=Bt)||Q,Fn(r,t),Bt=b):Fn(r,t),Yn(t),u&8192){if(b=t.memoizedState!==null,(t.stateNode.isHidden=b)&&!Q&&(t.mode&1)!==0)for(le=t,Q=t.child;Q!==null;){for(G=le=Q;le!==null;){switch(q=le,oe=q.child,q.tag){case 0:case 11:case 14:case 15:Bo(4,q,q.return);break;case 1:Ps(q,q.return);var ue=q.stateNode;if(typeof ue.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(ce){at(u,o,ce)}}break;case 5:Ps(q,q.return);break;case 22:if(q.memoizedState!==null){Qd(G);continue}}oe!==null?(oe.return=q,le=oe):Qd(G)}Q=Q.sibling}e:for(Q=null,G=t;;){if(G.tag===5){if(Q===null){Q=G;try{h=G.stateNode,b?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=G.stateNode,R=G.memoizedProps.style,y=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Zs("display",y))}catch(ce){at(t,t.return,ce)}}}else if(G.tag===6){if(Q===null)try{G.stateNode.nodeValue=b?"":G.memoizedProps}catch(ce){at(t,t.return,ce)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;Q===G&&(Q=null),G=G.return}Q===G&&(Q=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Fn(r,t),Yn(t),u&4&&$d(t);break;case 21:break;default:Fn(r,t),Yn(t)}}function Yn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(bd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Sr(h,""),u.flags&=-33);var p=jd(t);Ac(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,T=jd(t);Sc(t,T,y);break;default:throw Error(n(161))}}catch(R){at(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function n_(t,r,o){le=t,Hd(t)}function Hd(t,r,o){for(var u=(t.mode&1)!==0;le!==null;){var h=le,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||ll;if(!y){var T=h.alternate,R=T!==null&&T.memoizedState!==null||Bt;T=ll;var b=Bt;if(ll=y,(Bt=R)&&!b)for(le=h;le!==null;)y=le,R=y.child,y.tag===22&&y.memoizedState!==null?Kd(h):R!==null?(R.return=y,le=R):Kd(h);for(;p!==null;)le=p,Hd(p),p=p.sibling;le=h,ll=T,Bt=b}qd(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,le=p):qd(t)}}function qd(t){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Bt||ul(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Bt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Ln(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Qf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Qf(r,y,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var b=r.alternate;if(b!==null){var Q=b.memoizedState;if(Q!==null){var G=Q.dehydrated;G!==null&&Nn(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bt||r.flags&512&&Ic(r)}catch(q){at(r,r.return,q)}}if(r===t){le=null;break}if(o=r.sibling,o!==null){o.return=r.return,le=o;break}le=r.return}}function Qd(t){for(;le!==null;){var r=le;if(r===t){le=null;break}var o=r.sibling;if(o!==null){o.return=r.return,le=o;break}le=r.return}}function Kd(t){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{ul(4,r)}catch(R){at(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){at(r,h,R)}}var p=r.return;try{Ic(r)}catch(R){at(r,p,R)}break;case 5:var y=r.return;try{Ic(r)}catch(R){at(r,y,R)}}}catch(R){at(r,r.return,R)}if(r===t){le=null;break}var T=r.sibling;if(T!==null){T.return=r.return,le=T;break}le=r.return}}var r_=Math.ceil,cl=ke.ReactCurrentDispatcher,Cc=ke.ReactCurrentOwner,vn=ke.ReactCurrentBatchConfig,ze=0,At=null,dt=null,Nt=0,un=0,ks=Mr(0),vt=0,Uo=null,Pi=0,hl=0,Rc=0,bo=null,Jt=null,Pc=0,Vs=1/0,Er=null,fl=!1,kc=null,zr=null,dl=!1,$r=null,pl=0,jo=0,Vc=null,ml=-1,gl=0;function Ht(){return(ze&6)!==0?Ge():ml!==-1?ml:ml=Ge()}function Wr(t){return(t.mode&1)===0?1:(ze&2)!==0&&Nt!==0?Nt&-Nt:by.transition!==null?(gl===0&&(gl=gi()),gl):(t=Me,t!==0||(t=window.event,t=t===void 0?16:mo(t.type)),t)}function Bn(t,r,o,u){if(50<jo)throw jo=0,Vc=null,Error(n(185));Pr(t,o,u),((ze&2)===0||t!==At)&&(t===At&&((ze&2)===0&&(hl|=o),vt===4&&Hr(t,Nt)),Zt(t,u),o===1&&ze===0&&(r.mode&1)===0&&(Vs=Ge()+500,Wa&&Br()))}function Zt(t,r){var o=t.callbackNode;lr(t,r);var u=mi(t,t===At?Nt:0);if(u===0)o!==null&&uo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&uo(o),r===1)t.tag===0?Uy(Xd.bind(null,t)):Lf(Xd.bind(null,t)),Ly(function(){(ze&6)===0&&Br()}),o=null;else{switch(Vr(u)){case 1:o=di;break;case 4:o=Ar;break;case 16:o=fn;break;case 536870912:o=ga;break;default:o=fn}o=ip(o,Gd.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Gd(t,r){if(ml=-1,gl=0,(ze&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Ns()&&t.callbackNode!==o)return null;var u=mi(t,t===At?Nt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=yl(t,u);else{r=u;var h=ze;ze|=2;var p=Jd();(At!==t||Nt!==r)&&(Er=null,Vs=Ge()+500,Vi(t,r));do try{o_();break}catch(T){Yd(t,T)}while(!0);Ku(),cl.current=p,ze=h,dt!==null?r=0:(At=null,Nt=0,r=vt)}if(r!==0){if(r===2&&(h=rn(t),h!==0&&(u=h,r=Nc(t,h))),r===1)throw o=Uo,Vi(t,0),Hr(t,u),Zt(t,Ge()),o;if(r===6)Hr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!i_(h)&&(r=yl(t,u),r===2&&(p=rn(t),p!==0&&(u=p,r=Nc(t,p))),r===1))throw o=Uo,Vi(t,0),Hr(t,u),Zt(t,Ge()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ni(t,Jt,Er);break;case 3:if(Hr(t,u),(u&130023424)===u&&(r=Pc+500-Ge(),10<r)){if(mi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Ht(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Fu(Ni.bind(null,t,Jt,Er),r);break}Ni(t,Jt,Er);break;case 4:if(Hr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-zt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=Ge()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*r_(u/1960))-u,10<u){t.timeoutHandle=Fu(Ni.bind(null,t,Jt,Er),u);break}Ni(t,Jt,Er);break;case 5:Ni(t,Jt,Er);break;default:throw Error(n(329))}}}return Zt(t,Ge()),t.callbackNode===o?Gd.bind(null,t):null}function Nc(t,r){var o=bo;return t.current.memoizedState.isDehydrated&&(Vi(t,r).flags|=256),t=yl(t,r),t!==2&&(r=Jt,Jt=o,r!==null&&xc(r)),t}function xc(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function i_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Dn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(t,r){for(r&=~Rc,r&=~hl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-zt(r),u=1<<o;t[o]=-1,r&=~u}}function Xd(t){if((ze&6)!==0)throw Error(n(327));Ns();var r=mi(t,0);if((r&1)===0)return Zt(t,Ge()),null;var o=yl(t,r);if(t.tag!==0&&o===2){var u=rn(t);u!==0&&(r=u,o=Nc(t,u))}if(o===1)throw o=Uo,Vi(t,0),Hr(t,r),Zt(t,Ge()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ni(t,Jt,Er),Zt(t,Ge()),null}function Dc(t,r){var o=ze;ze|=1;try{return t(r)}finally{ze=o,ze===0&&(Vs=Ge()+500,Wa&&Br())}}function ki(t){$r!==null&&$r.tag===0&&(ze&6)===0&&Ns();var r=ze;ze|=1;var o=vn.transition,u=Me;try{if(vn.transition=null,Me=1,t)return t()}finally{Me=u,vn.transition=o,ze=r,(ze&6)===0&&Br()}}function Oc(){un=ks.current,Je(ks)}function Vi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Oy(o)),dt!==null)for(o=dt.return;o!==null;){var u=o;switch($u(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&za();break;case 3:Cs(),Je(Gt),Je(Lt),nc();break;case 5:ec(u);break;case 4:Cs();break;case 13:Je(it);break;case 19:Je(it);break;case 10:Gu(u.type._context);break;case 22:case 23:Oc()}o=o.return}if(At=t,dt=t=qr(t.current,null),Nt=un=r,vt=0,Uo=null,Rc=hl=Pi=0,Jt=bo=null,Ai!==null){for(r=0;r<Ai.length;r++)if(o=Ai[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Ai=null}return t}function Yd(t,r){do{var o=dt;try{if(Ku(),el.current=il,tl){for(var u=st.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}tl=!1}if(Ri=0,St=_t=st=null,Do=!1,Oo=0,Cc.current=null,o===null||o.return===null){vt=1,Uo=r,dt=null;break}e:{var p=t,y=o.return,T=o,R=r;if(r=Nt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var b=R,Q=T,G=Q.tag;if((Q.mode&1)===0&&(G===0||G===11||G===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var oe=Td(y);if(oe!==null){oe.flags&=-257,Id(oe,y,T,p,r),oe.mode&1&&wd(p,b,r),r=oe,R=b;var ue=r.updateQueue;if(ue===null){var ce=new Set;ce.add(R),r.updateQueue=ce}else ue.add(R);break e}else{if((r&1)===0){wd(p,b,r),Lc();break e}R=Error(n(426))}}else if(tt&&T.mode&1){var ct=Td(y);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Id(ct,y,T,p,r),qu(Rs(R,T));break e}}p=R=Rs(R,T),vt!==4&&(vt=2),bo===null?bo=[p]:bo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=vd(p,R,r);qf(p,M);break e;case 1:T=R;var P=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(zr===null||!zr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=Ed(p,T,r);qf(p,X);break e}}p=p.return}while(p!==null)}ep(o)}catch(he){r=he,dt===o&&o!==null&&(dt=o=o.return);continue}break}while(!0)}function Jd(){var t=cl.current;return cl.current=il,t===null?il:t}function Lc(){(vt===0||vt===3||vt===2)&&(vt=4),At===null||(Pi&268435455)===0&&(hl&268435455)===0||Hr(At,Nt)}function yl(t,r){var o=ze;ze|=2;var u=Jd();(At!==t||Nt!==r)&&(Er=null,Vi(t,r));do try{s_();break}catch(h){Yd(t,h)}while(!0);if(Ku(),ze=o,cl.current=u,dt!==null)throw Error(n(261));return At=null,Nt=0,vt}function s_(){for(;dt!==null;)Zd(dt)}function o_(){for(;dt!==null&&!pa();)Zd(dt)}function Zd(t){var r=rp(t.alternate,t,un);t.memoizedProps=t.pendingProps,r===null?ep(t):dt=r,Cc.current=null}function ep(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Jy(o,r,un),o!==null){dt=o;return}}else{if(o=Zy(o,r),o!==null){o.flags&=32767,dt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,dt=null;return}}if(r=r.sibling,r!==null){dt=r;return}dt=r=t}while(r!==null);vt===0&&(vt=5)}function Ni(t,r,o){var u=Me,h=vn.transition;try{vn.transition=null,Me=1,a_(t,r,o,u)}finally{vn.transition=h,Me=u}return null}function a_(t,r,o,u){do Ns();while($r!==null);if((ze&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Qe(t,p),t===At&&(dt=At=null,Nt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||dl||(dl=!0,ip(fn,function(){return Ns(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=vn.transition,vn.transition=null;var y=Me;Me=1;var T=ze;ze|=4,Cc.current=null,t_(t,o),Wd(o,t),Ry(Lu),xr=!!Ou,Lu=Ou=null,t.current=o,n_(o),_u(),ze=T,Me=y,vn.transition=p}else t.current=o;if(dl&&(dl=!1,$r=t,pl=h),p=t.pendingLanes,p===0&&(zr=null),ya(o.stateNode),Zt(t,Ge()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(fl)throw fl=!1,t=kc,kc=null,t;return(pl&1)!==0&&t.tag!==0&&Ns(),p=t.pendingLanes,(p&1)!==0?t===Vc?jo++:(jo=0,Vc=t):jo=0,Br(),null}function Ns(){if($r!==null){var t=Vr(pl),r=vn.transition,o=Me;try{if(vn.transition=null,Me=16>t?16:t,$r===null)var u=!1;else{if(t=$r,$r=null,pl=0,(ze&6)!==0)throw Error(n(331));var h=ze;for(ze|=4,le=t.current;le!==null;){var p=le,y=p.child;if((le.flags&16)!==0){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var b=T[R];for(le=b;le!==null;){var Q=le;switch(Q.tag){case 0:case 11:case 15:Bo(8,Q,p)}var G=Q.child;if(G!==null)G.return=Q,le=G;else for(;le!==null;){Q=le;var q=Q.sibling,oe=Q.return;if(Ud(Q),Q===b){le=null;break}if(q!==null){q.return=oe,le=q;break}le=oe}}}var ue=p.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ct=ce.sibling;ce.sibling=null,ce=ct}while(ce!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,le=y;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Bo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,le=M;break e}le=p.return}}var P=t.current;for(le=P;le!==null;){y=le;var F=y.child;if((y.subtreeFlags&2064)!==0&&F!==null)F.return=y,le=F;else e:for(y=P;le!==null;){if(T=le,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ul(9,T)}}catch(he){at(T,T.return,he)}if(T===y){le=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,le=X;break e}le=T.return}}if(ze=h,Br(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(pi,t)}catch{}u=!0}return u}finally{Me=o,vn.transition=r}}return!1}function tp(t,r,o){r=Rs(o,r),r=vd(t,r,1),t=br(t,r,1),r=Ht(),t!==null&&(Pr(t,1,r),Zt(t,r))}function at(t,r,o){if(t.tag===3)tp(t,t,o);else for(;r!==null;){if(r.tag===3){tp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(zr===null||!zr.has(u))){t=Rs(o,t),t=Ed(r,t,1),r=br(r,t,1),t=Ht(),r!==null&&(Pr(r,1,t),Zt(r,t));break}}r=r.return}}function l_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Ht(),t.pingedLanes|=t.suspendedLanes&o,At===t&&(Nt&o)===o&&(vt===4||vt===3&&(Nt&130023424)===Nt&&500>Ge()-Pc?Vi(t,0):Rc|=o),Zt(t,r)}function np(t,r){r===0&&((t.mode&1)===0?r=1:(r=es,es<<=1,(es&130023424)===0&&(es=4194304)));var o=Ht();t=yr(t,r),t!==null&&(Pr(t,r,o),Zt(t,o))}function u_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),np(t,o)}function c_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),np(t,o)}var rp;rp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Gt.current)Yt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Yt=!1,Yy(t,r,o);Yt=(t.flags&131072)!==0}else Yt=!1,tt&&(r.flags&1048576)!==0&&Mf(r,qa,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;al(t,r),t=r.pendingProps;var h=vs(r,Lt.current);As(r,o),h=sc(null,r,u,t,h,o);var p=oc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Xt(u)?(p=!0,$a(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ju(r),h.updater=sl,r.stateNode=h,h._reactInternals=r,fc(r,u,t,o),r=gc(null,r,u,!0,p,o)):(r.tag=0,tt&&p&&zu(r),Wt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(al(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=f_(u),t=Ln(u,t),h){case 0:r=mc(null,r,u,t,o);break e;case 1:r=kd(null,r,u,t,o);break e;case 11:r=Sd(null,r,u,t,o);break e;case 14:r=Ad(null,r,u,Ln(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Ln(u,h),mc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Ln(u,h),kd(t,r,u,h,o);case 3:e:{if(Vd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Hf(t,r),Ja(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Rs(Error(n(423)),r),r=Nd(t,r,u,o,h);break e}else if(u!==h){h=Rs(Error(n(424)),r),r=Nd(t,r,u,o,h);break e}else for(ln=Lr(r.stateNode.containerInfo.firstChild),an=r,tt=!0,On=null,o=$f(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ts(),u===h){r=vr(t,r,o);break e}Wt(t,r,u,o)}r=r.child}return r;case 5:return Kf(r),t===null&&Hu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Mu(u,h)?y=null:p!==null&&Mu(u,p)&&(r.flags|=32),Pd(t,r),Wt(t,r,y,o),r.child;case 6:return t===null&&Hu(r),null;case 13:return xd(t,r,o);case 4:return Zu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Is(r,null,u,o):Wt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Ln(u,h),Sd(t,r,u,h,o);case 7:return Wt(t,r,r.pendingProps,o),r.child;case 8:return Wt(t,r,r.pendingProps.children,o),r.child;case 12:return Wt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,Xe(Ga,u._currentValue),u._currentValue=y,p!==null)if(Dn(p.value,y)){if(p.children===h.children&&!Gt.current){r=vr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){y=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=_r(-1,o&-o),R.tag=2;var b=p.updateQueue;if(b!==null){b=b.shared;var Q=b.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),b.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Xu(p.return,o,r),T.lanes|=o;break}R=R.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,T=y.alternate,T!==null&&(T.lanes|=o),Xu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Wt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,As(r,o),h=yn(h),u=u(h),r.flags|=1,Wt(t,r,u,o),r.child;case 14:return u=r.type,h=Ln(u,r.pendingProps),h=Ln(u.type,h),Ad(t,r,u,h,o);case 15:return Cd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Ln(u,h),al(t,r),r.tag=1,Xt(u)?(t=!0,$a(r)):t=!1,As(r,o),yd(r,u,h),fc(r,u,h,o),gc(null,r,u,!0,t,o);case 19:return Od(t,r,o);case 22:return Rd(t,r,o)}throw Error(n(156,r.tag))};function ip(t,r){return Ji(t,r)}function h_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,r,o,u){return new h_(t,r,o,u)}function Mc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f_(t){if(typeof t=="function")return Mc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===lt)return 14}return 2}function qr(t,r){var o=t.alternate;return o===null?(o=En(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function _l(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")Mc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case V:return xi(o.children,h,p,r);case w:y=8,h|=8;break;case A:return t=En(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case I:return t=En(13,o,r,h),t.elementType=I,t.lanes=p,t;case Ze:return t=En(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case Ve:return vl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:y=10;break e;case N:y=9;break e;case D:y=11;break e;case lt:y=14;break e;case Fe:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=En(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function xi(t,r,o,u){return t=En(7,t,u,r),t.lanes=o,t}function vl(t,r,o,u){return t=En(22,t,u,r),t.elementType=Ve,t.lanes=o,t.stateNode={isHidden:!1},t}function Fc(t,r,o){return t=En(6,t,null,r),t.lanes=o,t}function Bc(t,r,o){return r=En(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function d_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Uc(t,r,o,u,h,p,y,T,R){return t=new d_(t,r,o,T,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=En(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ju(p),t}function p_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function sp(t){if(!t)return Fr;t=t._reactInternals;e:{if(Cn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Xt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Xt(o))return Df(t,o,r)}return r}function op(t,r,o,u,h,p,y,T,R){return t=Uc(o,u,!0,t,h,p,y,T,R),t.context=sp(null),o=t.current,u=Ht(),h=Wr(o),p=_r(u,h),p.callback=r??null,br(o,p,h),t.current.lanes=h,Pr(t,h,u),Zt(t,u),t}function El(t,r,o,u){var h=r.current,p=Ht(),y=Wr(h);return o=sp(o),r.context===null?r.context=o:r.pendingContext=o,r=_r(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=br(h,r,y),t!==null&&(Bn(t,h,y,p),Ya(t,h,y)),y}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ap(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function bc(t,r){ap(t,r),(t=t.alternate)&&ap(t,r)}function m_(){return null}var lp=typeof reportError=="function"?reportError:function(t){console.error(t)};function jc(t){this._internalRoot=t}Tl.prototype.render=jc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));El(t,r,null,null)},Tl.prototype.unmount=jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ki(function(){El(null,t,null,null)}),r[dr]=null}};function Tl(t){this._internalRoot=t}Tl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ta();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Wn.length&&r!==0&&r<Wn[o].priority;o++);Wn.splice(o,0,t),o===0&&Aa(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function up(){}function g_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var b=wl(y);p.call(b)}}var y=op(r,u,t,0,null,!1,!1,"",up);return t._reactRootContainer=y,t[dr]=y.current,Ao(t.nodeType===8?t.parentNode:t),ki(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var b=wl(R);T.call(b)}}var R=Uc(t,0,!1,null,null,!1,!1,"",up);return t._reactRootContainer=R,t[dr]=R.current,Ao(t.nodeType===8?t.parentNode:t),ki(function(){El(r,R,o,u)}),R}function Sl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var T=h;h=function(){var R=wl(y);T.call(R)}}El(r,y,t,h)}else y=g_(o,r,t,h,u);return wl(y)}Ea=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Cr(r.pendingLanes);o!==0&&(kr(r,o|1),Zt(r,Ge()),(ze&6)===0&&(Vs=Ge()+500,Br()))}break;case 13:ki(function(){var u=yr(t,1);if(u!==null){var h=Ht();Bn(u,t,1,h)}}),bc(t,1)}},ts=function(t){if(t.tag===13){var r=yr(t,134217728);if(r!==null){var o=Ht();Bn(r,t,134217728,o)}bc(t,134217728)}},wa=function(t){if(t.tag===13){var r=Wr(t),o=yr(t,r);if(o!==null){var u=Ht();Bn(o,t,r,u)}bc(t,r)}},Ta=function(){return Me},Ia=function(t,r){var o=Me;try{return Me=t,r()}finally{Me=o}},qi=function(t,r,o){switch(r){case"input":if(Tn(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=ja(u);if(!h)throw Error(n(90));re(u),Tn(u,h)}}}break;case"textarea":Wi(t,o);break;case"select":r=o.value,r!=null&&sr(t,!!o.multiple,r,!1)}},ui=Dc,so=ki;var y_={usingClientEntryPoint:!1,Events:[Po,ys,ja,zn,io,Dc]},zo={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},__={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lo(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||m_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{pi=Al.inject(__),nn=Al}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y_,en.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(r))throw Error(n(200));return p_(t,r,null,o)},en.createRoot=function(t,r){if(!zc(t))throw Error(n(299));var o=!1,u="",h=lp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Uc(t,1,!1,null,null,o,!1,u,h),t[dr]=r.current,Ao(t.nodeType===8?t.parentNode:t),new jc(r)},en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=lo(r),t=t===null?null:t.stateNode,t},en.flushSync=function(t){return ki(t)},en.hydrate=function(t,r,o){if(!Il(r))throw Error(n(200));return Sl(null,t,r,!0,o)},en.hydrateRoot=function(t,r,o){if(!zc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=lp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=op(r,null,t,1,o??null,h,!1,p,y),t[dr]=r.current,Ao(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Tl(r)},en.render=function(t,r,o){if(!Il(r))throw Error(n(200));return Sl(null,t,r,!1,o)},en.unmountComponentAtNode=function(t){if(!Il(t))throw Error(n(40));return t._reactRootContainer?(ki(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1},en.unstable_batchedUpdates=Dc,en.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Il(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Sl(t,r,o,!1,u)},en.version="18.3.1-next-f1338f8080-20240426",en}var yp;function R_(){if(yp)return Hc.exports;yp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hc.exports=C_(),Hc.exports}var _p;function P_(){if(_p)return Cl;_p=1;var i=R_();return Cl.createRoot=i.createRoot,Cl.hydrateRoot=i.hydrateRoot,Cl}var k_=P_();const V_=Pm(k_),N_=()=>{};var vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},x_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],g=i[n++],_=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Vm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,g=f?i[a+1]:0,_=a+2<i.length,v=_?i[a+2]:0,S=c>>2,k=(c&3)<<4|g>>4;let x=(g&15)<<2|v>>6,$=v&63;_||($=64,f||(x=64)),s.push(n[S],n[k],n[x],n[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(km(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):x_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],g=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const k=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||g==null||v==null||k==null)throw new D_;const x=c<<2|g>>4;if(s.push(x),v!==64){const $=g<<4&240|v>>2;if(s.push($),k!==64){const J=v<<6&192|k;s.push(J)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class D_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O_=function(i){const e=km(i);return Vm.encodeByteArray(e,!0)},bl=function(i){return O_(i).replace(/\./g,"")},L_=function(i){try{return Vm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=()=>M_().__FIREBASE_DEFAULTS__,B_=()=>{if(typeof process>"u"||typeof vp>"u")return;const i=vp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},U_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&L_(i[1]);return e&&JSON.parse(e)},Ah=()=>{try{return N_()||F_()||B_()||U_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},b_=i=>{var e,n;return(n=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},j_=i=>{const e=b_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Nm=()=>{var i;return(i=Ah())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(i){return i.endsWith(".cloudworkstations.dev")}async function $_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[bl(JSON.stringify(n)),bl(JSON.stringify(f)),""].join(".")}const Qo={};function H_(){const i={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?i.emulator.push(e):i.prod.push(e);return i}function q_(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ep=!1;function Q_(i,e){if(typeof window>"u"||typeof document>"u"||!Ch(window.location.host)||Qo[i]===e||Qo[i]||Ep)return;Qo[i]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=H_().prod.length>0;function f(){const x=document.getElementById(s);x&&x.remove()}function g(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function _(x,$){x.setAttribute("width","24"),x.setAttribute("id",$),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Ep=!0,f()},x}function S(x,$){x.setAttribute("id",$),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function k(){const x=q_(s),$=n("text"),J=document.getElementById($)||document.createElement("span"),Y=n("learnmore"),j=document.getElementById(Y)||document.createElement("a"),Ae=n("preprendIcon"),ve=document.getElementById(Ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const we=x.element;g(we),S(j,Y);const ke=v();_(ve,Ae),we.append(ve,J,j,ke),document.body.appendChild(we)}c?(J.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G_(){var i;const e=(i=Ah())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X_(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y_(){try{return typeof indexedDB=="object"}catch{return!1}}function J_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="FirebaseError";class Hs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Z_,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xm.prototype.create)}}class xm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?ev(c,s):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new Hs(a,g,s)}}function ev(i,e){return i.replace(tv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tv=/\{\$([^}]+)}/g;function jl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(wp(c)&&wp(f)){if(!jl(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function wp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(i){return i&&i._delegate?i._delegate:i}class Zo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new z_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iv(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rv(i){return i===Oi?void 0:i}function iv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(be||(be={}));const ov={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},av=be.INFO,lv={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},uv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=lv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=av,this._logHandler=uv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ov[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const cv=(i,e)=>e.some(n=>i instanceof n);let Tp,Ip;function hv(){return Tp||(Tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fv(){return Ip||(Ip=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Om=new WeakMap,rh=new WeakMap,Lm=new WeakMap,Kc=new WeakMap,Rh=new WeakMap;function dv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Gr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Om.set(n,i)}).catch(()=>{}),Rh.set(e,i),e}function pv(i){if(rh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});rh.set(i,e)}let ih={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Lm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mv(i){ih=i(ih)}function gv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Gc(this),e,...n);return Lm.set(s,e.sort?e.sort():[e]),Gr(s)}:fv().includes(i)?function(...e){return i.apply(Gc(this),e),Gr(Om.get(this))}:function(...e){return Gr(i.apply(Gc(this),e))}}function yv(i){return typeof i=="function"?gv(i):(i instanceof IDBTransaction&&pv(i),cv(i,hv())?new Proxy(i,ih):i)}function Gr(i){if(i instanceof IDBRequest)return dv(i);if(Kc.has(i))return Kc.get(i);const e=yv(i);return e!==i&&(Kc.set(i,e),Rh.set(e,i)),e}const Gc=i=>Rh.get(i);function _v(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),g=Gr(f);return s&&f.addEventListener("upgradeneeded",_=>{s(Gr(f.result),_.oldVersion,_.newVersion,Gr(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),a&&_.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const vv=["get","getKey","getAll","getAllKeys","count"],Ev=["put","add","delete","clear"],Xc=new Map;function Sp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Ev.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||vv.includes(n)))return;const c=async function(f,...g){const _=this.transaction(f,a?"readwrite":"readonly");let v=_.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),a&&_.done]))[0]};return Xc.set(e,c),c}mv(i=>({...i,get:(e,n,s)=>Sp(e,n)||i.get(e,n,s),has:(e,n)=>!!Sp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Tv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sh="@firebase/app",Ap="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Dm("@firebase/app"),Iv="@firebase/app-compat",Sv="@firebase/analytics-compat",Av="@firebase/analytics",Cv="@firebase/app-check-compat",Rv="@firebase/app-check",Pv="@firebase/auth",kv="@firebase/auth-compat",Vv="@firebase/database",Nv="@firebase/data-connect",xv="@firebase/database-compat",Dv="@firebase/functions",Ov="@firebase/functions-compat",Lv="@firebase/installations",Mv="@firebase/installations-compat",Fv="@firebase/messaging",Bv="@firebase/messaging-compat",Uv="@firebase/performance",bv="@firebase/performance-compat",jv="@firebase/remote-config",zv="@firebase/remote-config-compat",$v="@firebase/storage",Wv="@firebase/storage-compat",Hv="@firebase/firestore",qv="@firebase/ai",Qv="@firebase/firestore-compat",Kv="firebase",Gv="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="[DEFAULT]",Xv={[sh]:"fire-core",[Iv]:"fire-core-compat",[Av]:"fire-analytics",[Sv]:"fire-analytics-compat",[Rv]:"fire-app-check",[Cv]:"fire-app-check-compat",[Pv]:"fire-auth",[kv]:"fire-auth-compat",[Vv]:"fire-rtdb",[Nv]:"fire-data-connect",[xv]:"fire-rtdb-compat",[Dv]:"fire-fn",[Ov]:"fire-fn-compat",[Lv]:"fire-iid",[Mv]:"fire-iid-compat",[Fv]:"fire-fcm",[Bv]:"fire-fcm-compat",[Uv]:"fire-perf",[bv]:"fire-perf-compat",[jv]:"fire-rc",[zv]:"fire-rc-compat",[$v]:"fire-gcs",[Wv]:"fire-gcs-compat",[Hv]:"fire-fst",[Qv]:"fire-fst-compat",[qv]:"fire-vertex","fire-js":"fire-js",[Kv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Map,Yv=new Map,ah=new Map;function Cp(i,e){try{i.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $l(i){const e=i.name;if(ah.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;ah.set(e,i);for(const n of zl.values())Cp(n,i);for(const n of Yv.values())Cp(n,i);return!0}function Jv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Zv(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new xm("app","Firebase",e0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=Gv;function Mm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:oh,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=Nm()),!n)throw Xr.create("no-options");const c=zl.get(a);if(c){if(jl(n,c.options)&&jl(s,c.config))return c;throw Xr.create("duplicate-app",{appName:a})}const f=new sv(a);for(const _ of ah.values())f.addComponent(_);const g=new t0(n,s,f);return zl.set(a,g),g}function r0(i=oh){const e=zl.get(i);if(!e&&i===oh&&Nm())return Mm();if(!e)throw Xr.create("no-app",{appName:i});return e}function Ms(i,e,n){var s;let a=(s=Xv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(g.join(" "));return}$l(new Zo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebase-heartbeat-database",s0=1,ea="firebase-heartbeat-store";let Yc=null;function Fm(){return Yc||(Yc=_v(i0,s0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(i=>{throw Xr.create("idb-open",{originalErrorMessage:i.message})})),Yc}async function o0(i){try{const n=(await Fm()).transaction(ea),s=await n.objectStore(ea).get(Bm(i));return await n.done,s}catch(e){if(e instanceof Hs)wr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function Rp(i,e){try{const s=(await Fm()).transaction(ea,"readwrite");await s.objectStore(ea).put(e,Bm(i)),await s.done}catch(n){if(n instanceof Hs)wr.warn(n.message);else{const s=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(s.message)}}}function Bm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=1024,l0=30;class u0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Pp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>l0){const f=f0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){wr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pp(),{heartbeatsToSend:s,unsentEntries:a}=c0(this._heartbeatsCache.heartbeats),c=bl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function Pp(){return new Date().toISOString().substring(0,10)}function c0(i,e=a0){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),kp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),kp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class h0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y_()?J_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Rp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Rp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function kp(i){return bl(JSON.stringify({version:2,heartbeats:i})).length}function f0(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(i){$l(new Zo("platform-logger",e=>new wv(e),"PRIVATE")),$l(new Zo("heartbeat",e=>new u0(e),"PRIVATE")),Ms(sh,Ap,i),Ms(sh,Ap,"esm2017"),Ms("fire-js","")}d0("");var p0="firebase",m0="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(p0,m0,"app");var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,Um;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,w){function A(){}A.prototype=w.prototype,V.D=w.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(C,N,D){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return w.prototype[N].apply(C,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)C[N]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(N=0;16>N;++N)C[N]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=V.g[0],A=V.g[1],N=V.g[2];var D=V.g[3],I=w+(D^A&(N^D))+C[0]+3614090360&4294967295;w=A+(I<<7&4294967295|I>>>25),I=D+(N^w&(A^N))+C[1]+3905402710&4294967295,D=w+(I<<12&4294967295|I>>>20),I=N+(A^D&(w^A))+C[2]+606105819&4294967295,N=D+(I<<17&4294967295|I>>>15),I=A+(w^N&(D^w))+C[3]+3250441966&4294967295,A=N+(I<<22&4294967295|I>>>10),I=w+(D^A&(N^D))+C[4]+4118548399&4294967295,w=A+(I<<7&4294967295|I>>>25),I=D+(N^w&(A^N))+C[5]+1200080426&4294967295,D=w+(I<<12&4294967295|I>>>20),I=N+(A^D&(w^A))+C[6]+2821735955&4294967295,N=D+(I<<17&4294967295|I>>>15),I=A+(w^N&(D^w))+C[7]+4249261313&4294967295,A=N+(I<<22&4294967295|I>>>10),I=w+(D^A&(N^D))+C[8]+1770035416&4294967295,w=A+(I<<7&4294967295|I>>>25),I=D+(N^w&(A^N))+C[9]+2336552879&4294967295,D=w+(I<<12&4294967295|I>>>20),I=N+(A^D&(w^A))+C[10]+4294925233&4294967295,N=D+(I<<17&4294967295|I>>>15),I=A+(w^N&(D^w))+C[11]+2304563134&4294967295,A=N+(I<<22&4294967295|I>>>10),I=w+(D^A&(N^D))+C[12]+1804603682&4294967295,w=A+(I<<7&4294967295|I>>>25),I=D+(N^w&(A^N))+C[13]+4254626195&4294967295,D=w+(I<<12&4294967295|I>>>20),I=N+(A^D&(w^A))+C[14]+2792965006&4294967295,N=D+(I<<17&4294967295|I>>>15),I=A+(w^N&(D^w))+C[15]+1236535329&4294967295,A=N+(I<<22&4294967295|I>>>10),I=w+(N^D&(A^N))+C[1]+4129170786&4294967295,w=A+(I<<5&4294967295|I>>>27),I=D+(A^N&(w^A))+C[6]+3225465664&4294967295,D=w+(I<<9&4294967295|I>>>23),I=N+(w^A&(D^w))+C[11]+643717713&4294967295,N=D+(I<<14&4294967295|I>>>18),I=A+(D^w&(N^D))+C[0]+3921069994&4294967295,A=N+(I<<20&4294967295|I>>>12),I=w+(N^D&(A^N))+C[5]+3593408605&4294967295,w=A+(I<<5&4294967295|I>>>27),I=D+(A^N&(w^A))+C[10]+38016083&4294967295,D=w+(I<<9&4294967295|I>>>23),I=N+(w^A&(D^w))+C[15]+3634488961&4294967295,N=D+(I<<14&4294967295|I>>>18),I=A+(D^w&(N^D))+C[4]+3889429448&4294967295,A=N+(I<<20&4294967295|I>>>12),I=w+(N^D&(A^N))+C[9]+568446438&4294967295,w=A+(I<<5&4294967295|I>>>27),I=D+(A^N&(w^A))+C[14]+3275163606&4294967295,D=w+(I<<9&4294967295|I>>>23),I=N+(w^A&(D^w))+C[3]+4107603335&4294967295,N=D+(I<<14&4294967295|I>>>18),I=A+(D^w&(N^D))+C[8]+1163531501&4294967295,A=N+(I<<20&4294967295|I>>>12),I=w+(N^D&(A^N))+C[13]+2850285829&4294967295,w=A+(I<<5&4294967295|I>>>27),I=D+(A^N&(w^A))+C[2]+4243563512&4294967295,D=w+(I<<9&4294967295|I>>>23),I=N+(w^A&(D^w))+C[7]+1735328473&4294967295,N=D+(I<<14&4294967295|I>>>18),I=A+(D^w&(N^D))+C[12]+2368359562&4294967295,A=N+(I<<20&4294967295|I>>>12),I=w+(A^N^D)+C[5]+4294588738&4294967295,w=A+(I<<4&4294967295|I>>>28),I=D+(w^A^N)+C[8]+2272392833&4294967295,D=w+(I<<11&4294967295|I>>>21),I=N+(D^w^A)+C[11]+1839030562&4294967295,N=D+(I<<16&4294967295|I>>>16),I=A+(N^D^w)+C[14]+4259657740&4294967295,A=N+(I<<23&4294967295|I>>>9),I=w+(A^N^D)+C[1]+2763975236&4294967295,w=A+(I<<4&4294967295|I>>>28),I=D+(w^A^N)+C[4]+1272893353&4294967295,D=w+(I<<11&4294967295|I>>>21),I=N+(D^w^A)+C[7]+4139469664&4294967295,N=D+(I<<16&4294967295|I>>>16),I=A+(N^D^w)+C[10]+3200236656&4294967295,A=N+(I<<23&4294967295|I>>>9),I=w+(A^N^D)+C[13]+681279174&4294967295,w=A+(I<<4&4294967295|I>>>28),I=D+(w^A^N)+C[0]+3936430074&4294967295,D=w+(I<<11&4294967295|I>>>21),I=N+(D^w^A)+C[3]+3572445317&4294967295,N=D+(I<<16&4294967295|I>>>16),I=A+(N^D^w)+C[6]+76029189&4294967295,A=N+(I<<23&4294967295|I>>>9),I=w+(A^N^D)+C[9]+3654602809&4294967295,w=A+(I<<4&4294967295|I>>>28),I=D+(w^A^N)+C[12]+3873151461&4294967295,D=w+(I<<11&4294967295|I>>>21),I=N+(D^w^A)+C[15]+530742520&4294967295,N=D+(I<<16&4294967295|I>>>16),I=A+(N^D^w)+C[2]+3299628645&4294967295,A=N+(I<<23&4294967295|I>>>9),I=w+(N^(A|~D))+C[0]+4096336452&4294967295,w=A+(I<<6&4294967295|I>>>26),I=D+(A^(w|~N))+C[7]+1126891415&4294967295,D=w+(I<<10&4294967295|I>>>22),I=N+(w^(D|~A))+C[14]+2878612391&4294967295,N=D+(I<<15&4294967295|I>>>17),I=A+(D^(N|~w))+C[5]+4237533241&4294967295,A=N+(I<<21&4294967295|I>>>11),I=w+(N^(A|~D))+C[12]+1700485571&4294967295,w=A+(I<<6&4294967295|I>>>26),I=D+(A^(w|~N))+C[3]+2399980690&4294967295,D=w+(I<<10&4294967295|I>>>22),I=N+(w^(D|~A))+C[10]+4293915773&4294967295,N=D+(I<<15&4294967295|I>>>17),I=A+(D^(N|~w))+C[1]+2240044497&4294967295,A=N+(I<<21&4294967295|I>>>11),I=w+(N^(A|~D))+C[8]+1873313359&4294967295,w=A+(I<<6&4294967295|I>>>26),I=D+(A^(w|~N))+C[15]+4264355552&4294967295,D=w+(I<<10&4294967295|I>>>22),I=N+(w^(D|~A))+C[6]+2734768916&4294967295,N=D+(I<<15&4294967295|I>>>17),I=A+(D^(N|~w))+C[13]+1309151649&4294967295,A=N+(I<<21&4294967295|I>>>11),I=w+(N^(A|~D))+C[4]+4149444226&4294967295,w=A+(I<<6&4294967295|I>>>26),I=D+(A^(w|~N))+C[11]+3174756917&4294967295,D=w+(I<<10&4294967295|I>>>22),I=N+(w^(D|~A))+C[2]+718787259&4294967295,N=D+(I<<15&4294967295|I>>>17),I=A+(D^(N|~w))+C[9]+3951481745&4294967295,V.g[0]=V.g[0]+w&4294967295,V.g[1]=V.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,V.g[2]=V.g[2]+N&4294967295,V.g[3]=V.g[3]+D&4294967295}s.prototype.u=function(V,w){w===void 0&&(w=V.length);for(var A=w-this.blockSize,C=this.B,N=this.h,D=0;D<w;){if(N==0)for(;D<=A;)a(this,V,D),D+=this.blockSize;if(typeof V=="string"){for(;D<w;)if(C[N++]=V.charCodeAt(D++),N==this.blockSize){a(this,C),N=0;break}}else for(;D<w;)if(C[N++]=V[D++],N==this.blockSize){a(this,C),N=0;break}}this.h=N,this.o+=w},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var w=1;w<V.length-8;++w)V[w]=0;var A=8*this.o;for(w=V.length-8;w<V.length;++w)V[w]=A&255,A/=256;for(this.u(V),V=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)V[A++]=this.g[w]>>>C&255;return V};function c(V,w){var A=g;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=w(V)}function f(V,w){this.h=w;for(var A=[],C=!0,N=V.length-1;0<=N;N--){var D=V[N]|0;C&&D==w||(A[N]=D,C=!1)}this.g=A}var g={};function _(V){return-128<=V&&128>V?c(V,function(w){return new f([w|0],0>w?-1:0)}):new f([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return k;if(0>V)return j(v(-V));for(var w=[],A=1,C=0;V>=A;C++)w[C]=V/A|0,A*=4294967296;return new f(w,0)}function S(V,w){if(V.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(V.charAt(0)=="-")return j(S(V.substring(1),w));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(w,8)),C=k,N=0;N<V.length;N+=8){var D=Math.min(8,V.length-N),I=parseInt(V.substring(N,N+D),w);8>D?(D=v(Math.pow(w,D)),C=C.j(D).add(v(I))):(C=C.j(A),C=C.add(v(I)))}return C}var k=_(0),x=_(1),$=_(16777216);i=f.prototype,i.m=function(){if(Y(this))return-j(this).m();for(var V=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);V+=(0<=C?C:4294967296+C)*w,w*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(J(this))return"0";if(Y(this))return"-"+j(this).toString(V);for(var w=v(Math.pow(V,6)),A=this,C="";;){var N=ke(A,w).g;A=Ae(A,N.j(w));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=N,J(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function J(V){if(V.h!=0)return!1;for(var w=0;w<V.g.length;w++)if(V.g[w]!=0)return!1;return!0}function Y(V){return V.h==-1}i.l=function(V){return V=Ae(this,V),Y(V)?-1:J(V)?0:1};function j(V){for(var w=V.g.length,A=[],C=0;C<w;C++)A[C]=~V.g[C];return new f(A,~V.h).add(x)}i.abs=function(){return Y(this)?j(this):this},i.add=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0,N=0;N<=w;N++){var D=C+(this.i(N)&65535)+(V.i(N)&65535),I=(D>>>16)+(this.i(N)>>>16)+(V.i(N)>>>16);C=I>>>16,D&=65535,I&=65535,A[N]=I<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Ae(V,w){return V.add(j(w))}i.j=function(V){if(J(this)||J(V))return k;if(Y(this))return Y(V)?j(this).j(j(V)):j(j(this).j(V));if(Y(V))return j(this.j(j(V)));if(0>this.l($)&&0>V.l($))return v(this.m()*V.m());for(var w=this.g.length+V.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<V.g.length;N++){var D=this.i(C)>>>16,I=this.i(C)&65535,Ze=V.i(N)>>>16,lt=V.i(N)&65535;A[2*C+2*N]+=I*lt,ve(A,2*C+2*N),A[2*C+2*N+1]+=D*lt,ve(A,2*C+2*N+1),A[2*C+2*N+1]+=I*Ze,ve(A,2*C+2*N+1),A[2*C+2*N+2]+=D*Ze,ve(A,2*C+2*N+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new f(A,0)};function ve(V,w){for(;(V[w]&65535)!=V[w];)V[w+1]+=V[w]>>>16,V[w]&=65535,w++}function we(V,w){this.g=V,this.h=w}function ke(V,w){if(J(w))throw Error("division by zero");if(J(V))return new we(k,k);if(Y(V))return w=ke(j(V),w),new we(j(w.g),j(w.h));if(Y(w))return w=ke(V,j(w)),new we(j(w.g),w.h);if(30<V.g.length){if(Y(V)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var A=x,C=w;0>=C.l(V);)A=rt(A),C=rt(C);var N=Le(A,1),D=Le(C,1);for(C=Le(C,2),A=Le(A,2);!J(C);){var I=D.add(C);0>=I.l(V)&&(N=N.add(A),D=I),C=Le(C,1),A=Le(A,1)}return w=Ae(V,N.j(w)),new we(N,w)}for(N=k;0<=V.l(w);){for(A=Math.max(1,Math.floor(V.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=v(A),I=D.j(w);Y(I)||0<I.l(V);)A-=C,D=v(A),I=D.j(w);J(D)&&(D=x),N=N.add(D),V=Ae(V,I)}return new we(N,V)}i.A=function(V){return ke(this,V).h},i.and=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&V.i(C);return new f(A,this.h&V.h)},i.or=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|V.i(C);return new f(A,this.h|V.h)},i.xor=function(V){for(var w=Math.max(this.g.length,V.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^V.i(C);return new f(A,this.h^V.h)};function rt(V){for(var w=V.g.length+1,A=[],C=0;C<w;C++)A[C]=V.i(C)<<1|V.i(C-1)>>>31;return new f(A,V.h)}function Le(V,w){var A=w>>5;w%=32;for(var C=V.g.length-A,N=[],D=0;D<C;D++)N[D]=0<w?V.i(D+A)>>>w|V.i(D+A+1)<<32-w:V.i(D+A);return new f(N,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Um=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=S,Yr=f}).apply(typeof Vp<"u"?Vp:typeof self<"u"?self:typeof window<"u"?window:{});var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bm,Wo,jm,Ol,lh,zm,$m,Wm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var m=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in m))break e;m=m[L]}l=l[l.length-1],E=m[l],d=d(E),d!=E&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var m=0,E=!1,L={next:function(){if(!E&&m<l.length){var z=m++;return{value:d(z,l[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function _(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function S(l,d,m){return l.call.apply(l.bind,arguments)}function k(l,d,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function x(l,d,m){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:k,x.apply(null,arguments)}function $(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function J(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,L,z){for(var ee=Array(arguments.length-2),He=2;He<arguments.length;He++)ee[He-2]=arguments[He];return d.prototype[L].apply(E,ee)}}function Y(l){const d=l.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=l[E];return m}return[]}function j(l,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(_(E)){const L=l.length||0,z=E.length||0;l.length=L+z;for(let ee=0;ee<z;ee++)l[L+ee]=E[ee]}else l.push(E)}}class Ae{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ve(l){return/^[\s\xa0]*$/.test(l)}function we(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function ke(l){return ke[" "](l),l}ke[" "]=function(){};var rt=we().indexOf("Gecko")!=-1&&!(we().toLowerCase().indexOf("webkit")!=-1&&we().indexOf("Edge")==-1)&&!(we().indexOf("Trident")!=-1||we().indexOf("MSIE")!=-1)&&we().indexOf("Edge")==-1;function Le(l,d,m){for(const E in l)d.call(m,l[E],E,l)}function V(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function w(l){const d={};for(const m in l)d[m]=l[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,d){let m,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(m in E)l[m]=E[m];for(let z=0;z<A.length;z++)m=A[z],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function N(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function D(l){g.setTimeout(()=>{throw l},0)}function I(){var l=de;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,m){const E=lt.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var lt=new Ae(()=>new Fe,l=>l.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,te=!1,de=new Ze,se=()=>{const l=g.Promise.resolve(void 0);Ve=()=>{l.then(O)}};var O=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(m){D(m)}var d=lt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}te=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return l}();function Re(l,d){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(rt){e:{try{ke(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:De[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Re.aa.h.call(this)}}J(Re,fe);var De={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),B=0;function U(l,d,m,E,L){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=L,this.key=++B,this.da=this.fa=!1}function Z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ne(l){this.src=l,this.g={},this.h=0}ne.prototype.add=function(l,d,m,E,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var ee=_e(l,d,E,L);return-1<ee?(d=l[ee],m||(d.fa=!1)):(d=new U(d,this.src,z,!!E,L),d.fa=m,l.push(d)),d};function re(l,d){var m=d.type;if(m in l.g){var E=l.g[m],L=Array.prototype.indexOf.call(E,d,void 0),z;(z=0<=L)&&Array.prototype.splice.call(E,L,1),z&&(Z(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function _e(l,d,m,E){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==d&&z.capture==!!m&&z.ha==E)return L}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),Ke={};function cn(l,d,m,E,L){if(Array.isArray(d)){for(var z=0;z<d.length;z++)cn(l,d[z],m,E,L);return null}return m=Ys(m),l&&l[je]?l.K(d,m,v(E)?!!E.capture:!1,L):Tn(l,d,m,!1,E,L)}function Tn(l,d,m,E,L,z){if(!d)throw Error("Invalid event type");var ee=v(L)?!!L.capture:!!L,He=$i(l);if(He||(l[Ne]=He=new ne(l)),m=He.add(d,m,E,ee,z),m.proxy)return m;if(E=qt(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)Ce||(L=ee),L===void 0&&(L=!1),l.addEventListener(d.toString(),E,L);else if(l.attachEvent)l.attachEvent(sr(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function qt(){function l(m){return d.call(l.src,l.listener,m)}const d=Xs;return l}function ir(l,d,m,E,L){if(Array.isArray(d))for(var z=0;z<d.length;z++)ir(l,d[z],m,E,L);else E=v(E)?!!E.capture:!!E,m=Ys(m),l&&l[je]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],m=_e(z,m,E,L),-1<m&&(Z(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=$i(l))&&(d=l.g[d.toString()],l=-1,d&&(l=_e(d,m,E,L)),(m=-1<l?d[l]:null)&&In(m))}function In(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[je])re(d.i,l);else{var m=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(m,E,l.capture):d.detachEvent?d.detachEvent(sr(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=$i(d))?(re(m,l),m.h==0&&(m.src=null,d[Ne]=null)):Z(l)}}}function sr(l){return l in Ke?Ke[l]:Ke[l]="on"+l}function Xs(l,d){if(l.da)l=!0;else{d=new Re(d,this);var m=l.listener,E=l.ha||l.src;l.fa&&In(l),l=m.call(E,d)}return l}function $i(l){return l=l[Ne],l instanceof ne?l:null}var Wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ys(l){return typeof l=="function"?l:(l[Wi]||(l[Wi]=function(d){return l.handleEvent(d)}),l[Wi])}function mt(){W.call(this),this.i=new ne(this),this.M=this,this.F=null}J(mt,W),mt.prototype[je]=!0,mt.prototype.removeEventListener=function(l,d,m,E){ir(this,l,d,m,E)};function gt(l,d){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new fe(d,l);else if(d instanceof fe)d.target=d.target||l;else{var L=d;d=new fe(E,l),C(d,L)}if(L=!0,m)for(var z=m.length-1;0<=z;z--){var ee=d.g=m[z];L=or(ee,E,!0,d)&&L}if(ee=d.g=l,L=or(ee,E,!0,d)&&L,L=or(ee,E,!1,d)&&L,m)for(z=0;z<m.length;z++)ee=d.g=m[z],L=or(ee,E,!1,d)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],E=0;E<m.length;E++)Z(m[E]);delete l.g[d],l.h--}}this.F=null},mt.prototype.K=function(l,d,m,E){return this.i.add(String(l),d,!1,m,E)},mt.prototype.L=function(l,d,m,E){return this.i.add(String(l),d,!0,m,E)};function or(l,d,m,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,z=0;z<d.length;++z){var ee=d[z];if(ee&&!ee.da&&ee.capture==m){var He=ee.listener,yt=ee.ha||ee.src;ee.fa&&re(l.i,ee),L=He.call(yt,E)!==!1&&L}}return L&&!E.defaultPrevented}function Js(l,d,m){if(typeof l=="function")m&&(l=x(l,m));else if(l&&typeof l.handleEvent=="function")l=x(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(l,d||0)}function Sr(l){l.g=Js(()=>{l.g=null,l.i&&(l.i=!1,Sr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class oi extends W{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(l){W.call(this),this.h=l,this.g={}}J(ai,W);var Zs=[];function eo(l){Le(l.g,function(d,m){this.g.hasOwnProperty(m)&&In(d)},l),l.g={}}ai.prototype.N=function(){ai.aa.N.call(this),eo(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=g.JSON.stringify,no=g.JSON.parse,ro=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function li(){}li.prototype.h=null;function Hi(l){return l.h||(l.h=l.i())}function qi(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){fe.call(this,"d")}J(jn,fe);function Qi(){fe.call(this,"c")}J(Qi,fe);var zn={},io=null;function ui(){return io=io||new mt}zn.La="serverreachability";function so(l){fe.call(this,zn.La,l)}J(so,fe);function ar(l){const d=ui();gt(d,new so(d))}zn.STAT_EVENT="statevent";function oo(l,d){fe.call(this,zn.STAT_EVENT,l),this.stat=d}J(oo,fe);function ut(l){const d=ui();gt(d,new oo(d,l))}zn.Ma="timingevent";function Ki(l,d){fe.call(this,zn.Ma,l),this.size=d}J(Ki,fe);function Sn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},d)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function hi(l,d,m,E,L,z){l.info(function(){if(l.g)if(z)for(var ee="",He=z.split("&"),yt=0;yt<He.length;yt++){var Be=He[yt].split("=");if(1<Be.length){var It=Be[0];Be=Be[1];var ft=It.split("_");ee=2<=ft.length&&ft[1]=="type"?ee+(It+"="+Be+"&"):ee+(It+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+d+`
`+m+`
`+ee})}function Gi(l,d,m,E,L,z,ee){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+d+`
`+m+`
`+z+" "+ee})}function An(l,d,m,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+yu(l,m)+(E?" "+E:"")})}function ao(l,d){l.info(function(){return"TIMEOUT: "+d})}ci.prototype.info=function(){};function yu(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<L.length;ee++)L[ee]=""}}}}return to(m)}catch{return d}}var Xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cn;function fi(){}J(fi,li),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},Cn=new fi;function Rn(l,d,m,E){this.j=l,this.i=d,this.l=m,this.R=E||1,this.U=new ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new da}function da(){this.i=null,this.g="",this.h=!1}var lo={},Yi={};function Ji(l,d,m){l.L=1,l.v=kr(rn(d)),l.m=m,l.P=!0,uo(l,null)}function uo(l,d){l.F=Date.now(),Ge(l),l.A=rn(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Nr(m.i,"t",E),l.C=0,m=l.j.J,l.h=new da,l.g=Na(l.j,m?d:null,!l.m),0<l.O&&(l.M=new oi(x(l.Y,l,l.g),l.O)),d=l.U,m=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Zs[0]=L.toString()),L=Zs);for(var z=0;z<L.length;z++){var ee=cn(m,L[z],E||d.handleEvent,!1,d.h||d);if(!ee)break;d.g[ee.key]=ee}d=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ar(),hi(l.i,l.u,l.A,l.l,l.R,l.m)}Rn.prototype.ca=function(l){l=l.target;const d=this.M;d&&Kt(l)==3?d.j():this.Y(l)},Rn.prototype.Y=function(l){try{if(l==this.g)e:{const ft=Kt(this.g);var d=this.g.Ba();const pn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||go(this.g)))){this.J||ft!=4||d==7||(d==8||0>=pn?ar(3):ar(2)),di(this);var m=this.g.Z();this.X=m;t:if(pa(this)){var E=go(this.g);l="";var L=E.length,z=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ar(this);var ee="";break t}this.h.i=new g.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(z&&d==L-1)});E.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=m==200,Gi(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var He,yt=this.g;if((He=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ve(He)){var Be=He;break t}}Be=null}if(m=Be)An(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,m);else{this.o=!1,this.s=3,ut(12),fn(this),Ar(this);break e}}if(this.P){m=!0;let on;for(;!this.J&&this.C<ee.length;)if(on=_u(this,ee),on==Yi){ft==4&&(this.s=4,ut(14),m=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(on==lo){this.s=4,ut(15),An(this.i,this.l,ee,"[Invalid Chunk]"),m=!1;break}else An(this.i,this.l,on,null),co(this,on);if(pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||ee.length!=0||this.h.h||(this.s=1,ut(16),m=!1),this.o=this.o&&m,!m)An(this.i,this.l,ee,"[Invalid Chunked Response]"),fn(this),Ar(this);else if(0<ee.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),_o(It),It.M=!0,ut(11))}}else An(this.i,this.l,ee,null),co(this,ee);ft==4&&fn(this),this.o&&!this.J&&(ft==4?us(this.j,this):(this.o=!1,Ge(this)))}else is(this.g),m==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),fn(this),Ar(this)}}}catch{}finally{}};function pa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _u(l,d){var m=l.C,E=d.indexOf(`
`,m);return E==-1?Yi:(m=Number(d.substring(m,E)),isNaN(m)?lo:(E+=1,E+m>d.length?Yi:(d=d.slice(E,E+m),l.C=E+m,d)))}Rn.prototype.cancel=function(){this.J=!0,fn(this)};function Ge(l){l.S=Date.now()+l.I,ma(l,l.I)}function ma(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Sn(x(l.ba,l),d)}function di(l){l.B&&(g.clearTimeout(l.B),l.B=null)}Rn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ao(this.i,this.A),this.L!=2&&(ar(),ut(17)),fn(this),this.s=2,Ar(this)):ma(this,this.S-l)};function Ar(l){l.j.G==0||l.J||us(l.j,l)}function fn(l){di(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,eo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function co(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||zt(m.h,l))){if(!l.K&&zt(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)ls(m),xn(m);else break e;as(m),ut(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Sn(x(m.Za,m),6e3));if(1>=ya(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else fr(m,11)}else if((l.K||m.g==l)&&ls(m),!ve(d))for(L=m.Da.g.parse(d),d=0;d<L.length;d++){let Be=L[d];if(m.T=Be[0],Be=Be[1],m.G==2)if(Be[0]=="c"){m.K=Be[1],m.ia=Be[2];const It=Be[3];It!=null&&(m.la=It,m.j.info("VER="+m.la));const ft=Be[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const pn=Be[5];pn!=null&&typeof pn=="number"&&0<pn&&(E=1.5*pn,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const on=l.g;if(on){const Ei=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var z=E.h;z.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ho(z,z.h),z.h=null))}if(E.D){const hs=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;hs&&(E.ya=hs,Qe(E.I,E.D,hs))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var ee=l;if(E.qa=Va(E,E.J?E.ia:null,E.W),ee.K){_a(E.h,ee);var He=ee,yt=E.L;yt&&(He.I=yt),He.B&&(di(He),Ge(He)),E.g=ee}else vi(E);0<m.i.length&&qn(m)}else Be[0]!="stop"&&Be[0]!="close"||fr(m,7);else m.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?fr(m,7):kt(m):Be[0]!="noop"&&m.l&&m.l.ta(Be),m.v=0)}}ar(4)}catch{}}var ga=class{constructor(l,d){this.g=l,this.map=d}};function pi(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ya(l){return l.h?1:l.g?l.g.size:0}function zt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ho(l,d){l.g?l.g.add(d):l.h=d}function _a(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}pi.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function va(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return Y(l.i)}function Zi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(_(l)){for(var d=[],m=l.length,E=0;E<m;E++)d.push(l[E]);return d}d=[],m=0;for(E in l)d[m++]=l[E];return d}function es(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(_(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const E in l)d[m++]=E;return d}}}function Cr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(_(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=es(l),E=Zi(l),L=E.length,z=0;z<L;z++)d.call(void 0,E[z],m&&m[z],l)}var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vu(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),L=null;if(0<=E){var z=l[m].substring(0,E);L=l[m].substring(E+1)}else z=l[m];d(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function lr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof lr){this.h=l.h,gi(this,l.j),this.o=l.o,this.g=l.g,Rr(this,l.s),this.l=l.l;var d=l.i,m=new $n;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Pr(this,m),this.m=l.m}else l&&(d=String(l).match(mi))?(this.h=!1,gi(this,d[1]||"",!0),this.o=Me(d[2]||""),this.g=Me(d[3]||"",!0),Rr(this,d[4]),this.l=Me(d[5]||"",!0),Pr(this,d[6]||"",!0),this.m=Me(d[7]||"")):(this.h=!1,this.i=new $n(null,this.h))}lr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Vr(d,ts,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Vr(d,ts,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Vr(m,m.charAt(0)=="/"?Ta:wa,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Vr(m,fo)),l.join("")};function rn(l){return new lr(l)}function gi(l,d,m){l.j=m?Me(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Rr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Pr(l,d,m){d instanceof $n?(l.i=d,Wn(l.i,l.h)):(m||(d=Vr(d,Ia)),l.i=new $n(d,l.h))}function Qe(l,d,m){l.i.set(d,m)}function kr(l){return Qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Me(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vr(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,Ea),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ea(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ts=/[#\/\?@]/g,wa=/[#\?:]/g,Ta=/[#\?]/g,Ia=/[#\?@]/g,fo=/#/g;function $n(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Pt(l){l.g||(l.g=new Map,l.h=0,l.i&&vu(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=$n.prototype,i.add=function(l,d){Pt(this),this.i=null,l=dn(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function Pn(l,d){Pt(l),d=dn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function kn(l,d){return Pt(l),d=dn(l,d),l.g.has(d)}i.forEach=function(l,d){Pt(this),this.g.forEach(function(m,E){m.forEach(function(L){l.call(d,L,E,this)},this)},this)},i.na=function(){Pt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const L=l[E];for(let z=0;z<L.length;z++)m.push(d[E])}return m},i.V=function(l){Pt(this);let d=[];if(typeof l=="string")kn(this,l)&&(d=d.concat(this.g.get(dn(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},i.set=function(l,d){return Pt(this),this.i=null,l=dn(this,l),kn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Nr(l,d,m){Pn(l,d),0<m.length&&(l.i=null,l.g.set(dn(l,d),Y(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const z=encodeURIComponent(String(E)),ee=this.V(E);for(E=0;E<ee.length;E++){var L=z;ee[E]!==""&&(L+="="+encodeURIComponent(String(ee[E]))),l.push(L)}}return this.i=l.join("&")};function dn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Wn(l,d){d&&!l.j&&(Pt(l),l.i=null,l.g.forEach(function(m,E){var L=E.toLowerCase();E!=L&&(Pn(this,E),Nr(this,L,m))},l)),l.j=d}function Eu(l,d){const m=new ci;if(g.Image){const E=new Image;E.onload=$(Qt,m,"TestLoadImage: loaded",!0,d,E),E.onerror=$(Qt,m,"TestLoadImage: error",!1,d,E),E.onabort=$(Qt,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=$(Qt,m,"TestLoadImage: timeout",!1,d,E),g.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function Sa(l,d){const m=new ci,E=new AbortController,L=setTimeout(()=>{E.abort(),Qt(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(z=>{clearTimeout(L),z.ok?Qt(m,"TestPingServer: ok",!0,d):Qt(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Qt(m,"TestPingServer: error",!1,d)})}function Qt(l,d,m,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(m)}catch{}}function wu(){this.g=new ro}function Aa(l,d,m){const E=m||"";try{Cr(l,function(L,z){let ee=L;v(L)&&(ee=to(L)),d.push(E+z+"="+encodeURIComponent(ee))})}catch(L){throw d.push(E+"type="+encodeURIComponent("_badmap")),L}}function ur(l){this.l=l.Ub||null,this.j=l.eb||!1}J(ur,li),ur.prototype.g=function(){return new yi(this.l,this.j)},ur.prototype.i=function(l){return function(){return l}}({});function yi(l,d){mt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(yi,mt),i=yi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Nn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ca(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ca(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Vn(this):Nn(this),this.readyState==3&&Ca(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Vn(this))},i.Qa=function(l){this.g&&(this.response=l,Vn(this))},i.ga=function(){this.g&&Vn(this)};function Vn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Nn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Nn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function cr(l){let d="";return Le(l,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function xr(l,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=cr(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Qe(l,d,m))}function et(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(et,mt);var Tu=/^https?$/i,po=["POST","PUT"];i=et.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cn.g(),this.v=this.o?Hi(this.o):Hi(Cn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){_i(this,z);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)m.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())m.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),L=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(po,d,void 0))||E||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of m)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rs(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){_i(this,z)}};function _i(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,ns(l),sn(l)}function ns(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),sn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),et.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?mo(this):this.bb())},i.bb=function(){mo(this)};function mo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||Kt(l)!=4||l.Z()!=2)){if(l.u&&Kt(l)==4)Js(l.Ea,0,l);else if(gt(l,"readystatechange"),Kt(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=ee===0){var L=String(l.D).match(mi)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),E=!Tu.test(L?L.toLowerCase():"")}m=E}if(m)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var z=2<Kt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",ns(l)}}finally{sn(l)}}}}function sn(l,d){if(l.g){rs(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||gt(l,"ready");try{m.onreadystatechange=E}catch{}}}function rs(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Kt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),no(d)}};function go(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function is(l){const d={};l=(l.g&&2<=Kt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ve(l[E]))continue;var m=N(l[E]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=d[L]||[];d[L]=z,z.push(m)}V(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function yo(l){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hn("baseRetryDelayMs",5e3,l),this.cb=Hn("retryDelaySeedMs",1e4,l),this.Wa=Hn("forwardChannelMaxRetries",2,l),this.wa=Hn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(l&&l.concurrentRequestLimit),this.Da=new wu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=yo.prototype,i.la=8,i.G=1,i.connect=function(l,d,m,E){ut(0),this.W=l,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=Va(this,null,this.W),qn(this)};function kt(l){if(ss(l),l.G==3){var d=l.U++,m=rn(l.I);if(Qe(m,"SID",l.K),Qe(m,"RID",d),Qe(m,"TYPE","terminate"),hr(l,m),d=new Rn(l,l.j,d),d.L=2,d.v=kr(rn(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=Na(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ge(d)}ka(l)}function xn(l){l.g&&(_o(l),l.g.cancel(),l.g=null)}function ss(l){xn(l),l.u&&(g.clearTimeout(l.u),l.u=null),ls(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function qn(l){if(!nn(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ve||se(),te||(Ve(),te=!0),de.add(d,l),l.B=0}}function Iu(l,d){return ya(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Sn(x(l.Ga,l,d),Pa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Rn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=w(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Dr(this,L,d),m=rn(this.I),Qe(m,"RID",l),Qe(m,"CVER",22),this.D&&Qe(m,"X-HTTP-Session-Id",this.D),hr(this,m),z&&(this.O?d="headers="+encodeURIComponent(String(cr(z)))+"&"+d:this.m&&xr(m,this.m,z)),ho(this.h,L),this.Ua&&Qe(m,"TYPE","init"),this.P?(Qe(m,"$req",d),Qe(m,"SID","null"),L.T=!0,Ji(L,m,null)):Ji(L,m,d),this.G=2}}else this.G==3&&(l?os(this,l):this.i.length==0||nn(this.h)||os(this))};function os(l,d){var m;d?m=d.l:m=l.U++;const E=rn(l.I);Qe(E,"SID",l.K),Qe(E,"RID",m),Qe(E,"AID",l.T),hr(l,E),l.m&&l.o&&xr(E,l.m,l.o),m=new Rn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Dr(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ho(l.h,m),Ji(m,E,d)}function hr(l,d){l.H&&Le(l.H,function(m,E){Qe(d,E,m)}),l.l&&Cr({},function(m,E){Qe(d,E,m)})}function Dr(l,d,m){m=Math.min(l.i.length,m);var E=l.l?x(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const ee=["count="+m];z==-1?0<m?(z=L[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let He=!0;for(let yt=0;yt<m;yt++){let Be=L[yt].g;const It=L[yt].map;if(Be-=z,0>Be)z=Math.max(0,L[yt].g-100),He=!1;else try{Aa(It,ee,"req"+Be+"_")}catch{E&&E(It)}}if(He){E=ee.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,E}function vi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ve||se(),te||(Ve(),te=!0),de.add(d,l),l.v=0}}function as(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Sn(x(l.Fa,l),Pa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Sn(x(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),xn(this),Ra(this))};function _o(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Ra(l){l.g=new Rn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=rn(l.qa);Qe(d,"RID","rpc"),Qe(d,"SID",l.K),Qe(d,"AID",l.T),Qe(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Qe(d,"TO",l.ja),Qe(d,"TYPE","xmlhttp"),hr(l,d),l.m&&l.o&&xr(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=kr(rn(d)),m.m=null,m.P=!0,uo(m,l)}i.Za=function(){this.C!=null&&(this.C=null,xn(this),as(this),ut(19))};function ls(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function us(l,d){var m=null;if(l.g==d){ls(l),_o(l),l.g=null;var E=2}else if(zt(l.h,d))m=d.D,_a(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;E=ui(),gt(E,new Ki(E,m)),qn(l)}else vi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(E==1&&Iu(l,d)||E==2&&as(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),L){case 1:fr(l,5);break;case 4:fr(l,10);break;case 3:fr(l,6);break;default:fr(l,2)}}}function Pa(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function fr(l,d){if(l.j.info("Error code "+d),d==2){var m=x(l.fb,l),E=l.Xa;const L=!E;E=new lr(E||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||gi(E,"https"),kr(E),L?Eu(E.toString(),m):Sa(E.toString(),m)}else ut(2);l.G=0,l.l&&l.l.sa(d),ka(l),ss(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function ka(l){if(l.G=0,l.ka=[],l.l){const d=va(l.h);(d.length!=0||l.i.length!=0)&&(j(l.ka,d),j(l.ka,l.i),l.h.i.length=0,Y(l.i),l.i.length=0),l.l.ra()}}function Va(l,d,m){var E=m instanceof lr?rn(m):new lr(m);if(E.g!="")d&&(E.g=d+"."+E.g),Rr(E,E.s);else{var L=g.location;E=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var z=new lr(null);E&&gi(z,E),d&&(z.g=d),L&&Rr(z,L),m&&(z.l=m),E=z}return m=l.D,d=l.ya,m&&d&&Qe(E,m,d),Qe(E,"VER",l.la),hr(l,E),E}function Na(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new et(new ur({eb:m})):new et(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function vo(){}i=vo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function cs(){}cs.prototype.g=function(l,d){return new $t(l,d)};function $t(l,d){mt.call(this),this.g=new yo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ve(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ve(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Qn(this)}J($t,mt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){kt(this.g)},$t.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=to(l),l=m);d.i.push(new ga(d.Ya++,l)),d.G==3&&qn(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,kt(this.g),delete this.g,$t.aa.N.call(this)};function xa(l){jn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}J(xa,jn);function Da(){Qi.call(this),this.status=1}J(Da,Qi);function Qn(l){this.g=l}J(Qn,vo),Qn.prototype.ua=function(){gt(this.g,"a")},Qn.prototype.ta=function(l){gt(this.g,new xa(l))},Qn.prototype.sa=function(l){gt(this.g,new Da)},Qn.prototype.ra=function(){gt(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Wm=function(){return new cs},$m=function(){return ui()},zm=zn,lh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,Ol=Xi,fa.COMPLETE="complete",jm=fa,qi.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Wo=qi,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,bm=et}).apply(typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{});const Np="@firebase/firestore",xp="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Dm("@firebase/firestore");function xs(){return Fi.logLevel}function ae(i,...e){if(Fi.logLevel<=be.DEBUG){const n=e.map(Ph);Fi.debug(`Firestore (${qs}): ${i}`,...n)}}function Tr(i,...e){if(Fi.logLevel<=be.ERROR){const n=e.map(Ph);Fi.error(`Firestore (${qs}): ${i}`,...n)}}function Bs(i,...e){if(Fi.logLevel<=be.WARN){const n=e.map(Ph);Fi.warn(`Firestore (${qs}): ${i}`,...n)}}function Ph(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Hm(i,s,n)}function Hm(i,e,n){let s=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Tr(s),new Error(s)}function We(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||Hm(e,a,s)}function Se(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class y0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _0{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let s=this.i;const a=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const _=c;e.enqueueRetryable(async()=>{await _.promise,await a(this.currentUser)})},g=_=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(_=>g(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new qm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class v0{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E0{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new v0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const s=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=T0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Pe(i,e){return i<e?-1:i>e?1:0}function uh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return Pe(s,a);{const c=Qm(),f=I0(c.encode(Op(i,n)),c.encode(Op(e,n)));return f!==0?f:Pe(s,a)}}n+=s>65535?2:1}return Pe(i.length,e.length)}function Op(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function I0(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Pe(i[n],e[n]);return Pe(i.length,e.length)}function Us(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=-62135596800,Mp=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Mp);return new wt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lp)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mp}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Lp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new wt(0,0))}static max(){return new Ie(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="__name__";class Jn{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Jn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Jn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Pe(e.length,n.length)}static compareSegments(e,n){const s=Jn.isNumericId(e),a=Jn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Jn.extractNumericId(e).compare(Jn.extractNumericId(n)):uh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}}class nt extends Jn{construct(e,n,s){return new nt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const S0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Jn{construct(e,n,s){return new Dt(e,n,s)}static isValidIdentifier(e){return S0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fp}static keyField(){return new Dt([Fp])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new pe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new pe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[a+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new pe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(s+=g,a++):(c(),a++)}if(c(),f)throw new pe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function A0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(s===1e9?new wt(n+1,0):new wt(n,s));return new ei(a,ye.empty(),e)}function C0(i){return new ei(i.readTime,i.key,ta)}class ei{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ei(Ie.min(),ye.empty(),ta)}static max(){return new ei(Ie.max(),ye.empty(),ta)}}function R0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(i.documentKey,e.documentKey),n!==0?n:Pe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==P0)throw i;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let a=0,c=0,f=!1;e.forEach(g=>{++a,g.next(()=>{++c,f&&c===a&&n()},_=>s(_))}),f=!0,c===a&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(a=>a?H.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new H((s,a)=>{const c=e.length,f=new Array(c);let g=0;for(let _=0;_<c;_++){const v=_;n(e[v]).next(S=>{f[v]=S,++g,g===c&&s(f)},S=>a(S))}})}static doWhile(e,n){return new H((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function V0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=-1;function ru(i){return i==null}function Wl(i){return i===0&&1/i==-1/0}function N0(i){return typeof i=="number"&&Number.isInteger(i)&&!Wl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="";function x0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Bp(e)),e=D0(i.get(n),e);return Bp(e)}function D0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case Gm:n+="";break;default:n+=c}}return n}function Bp(i){return i+Gm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ui(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Xm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pl(this.root,e,this.comparator,!0)}}class Pl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??xt.RED,this.left=a??xt.EMPTY,this.right=c??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new xt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return xt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bp(this.data.getIterator())}getIteratorFrom(e){return new bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class bp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Un([])}unionWith(e){let n=new Tt(Dt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ym("Invalid base64 string: "+c):c}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const O0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(i){if(We(!!i,39018),typeof i=="string"){let e=0;const n=O0.exec(i);if(We(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(i.seconds),nanos:ht(i.nanos)}}function ht(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ni(i){return typeof i=="string"?Ot.fromBase64String(i):Ot.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="server_timestamp",Zm="__type__",eg="__previous_value__",tg="__local_write_time__";function Vh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zm])===null||n===void 0?void 0:n.stringValue)===Jm}function iu(i){const e=i.mapValue.fields[eg];return Vh(e)?iu(e):e}function na(i){const e=ti(i.mapValue.fields[tg].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,s,a,c,f,g,_,v,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=S}}const Hl="(default)";class ra{constructor(e,n){this.projectId=e,this.database=n||Hl}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database===Hl}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="__type__",M0="__max__",kl={mapValue:{}},rg="__vector__",ql="value";function ri(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vh(i)?4:B0(i)?9007199254740991:F0(i)?10:11:Ee(28295,{value:i})}function nr(i,e){if(i===e)return!0;const n=ri(i);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return na(i).isEqual(na(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ti(a.timestampValue),g=ti(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return ni(a.bytesValue).isEqual(ni(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return ht(a.geoPointValue.latitude)===ht(c.geoPointValue.latitude)&&ht(a.geoPointValue.longitude)===ht(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return ht(a.integerValue)===ht(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=ht(a.doubleValue),g=ht(c.doubleValue);return f===g?Wl(f)===Wl(g):isNaN(f)&&isNaN(g)}return!1}(i,e);case 9:return Us(i.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},g=c.mapValue.fields||{};if(Up(f)!==Up(g))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(g[_]===void 0||!nr(f[_],g[_])))return!1;return!0}(i,e);default:return Ee(52216,{left:i})}}function ia(i,e){return(i.values||[]).find(n=>nr(n,e))!==void 0}function bs(i,e){if(i===e)return 0;const n=ri(i),s=ri(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return function(c,f){const g=ht(c.integerValue||c.doubleValue),_=ht(f.integerValue||f.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(i,e);case 3:return jp(i.timestampValue,e.timestampValue);case 4:return jp(na(i),na(e));case 5:return uh(i.stringValue,e.stringValue);case 6:return function(c,f){const g=ni(c),_=ni(f);return g.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const g=c.split("/"),_=f.split("/");for(let v=0;v<g.length&&v<_.length;v++){const S=Pe(g[v],_[v]);if(S!==0)return S}return Pe(g.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const g=Pe(ht(c.latitude),ht(f.latitude));return g!==0?g:Pe(ht(c.longitude),ht(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return zp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var g,_,v,S;const k=c.fields||{},x=f.fields||{},$=(g=k[ql])===null||g===void 0?void 0:g.arrayValue,J=(_=x[ql])===null||_===void 0?void 0:_.arrayValue,Y=Pe(((v=$==null?void 0:$.values)===null||v===void 0?void 0:v.length)||0,((S=J==null?void 0:J.values)===null||S===void 0?void 0:S.length)||0);return Y!==0?Y:zp($,J)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===kl.mapValue&&f===kl.mapValue)return 0;if(c===kl.mapValue)return 1;if(f===kl.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),v=f.fields||{},S=Object.keys(v);_.sort(),S.sort();for(let k=0;k<_.length&&k<S.length;++k){const x=uh(_[k],S[k]);if(x!==0)return x;const $=bs(g[_[k]],v[S[k]]);if($!==0)return $}return Pe(_.length,S.length)}(i.mapValue,e.mapValue);default:throw Ee(23264,{Pe:n})}}function jp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const n=ti(i),s=ti(e),a=Pe(n.seconds,s.seconds);return a!==0?a:Pe(n.nanos,s.nanos)}function zp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=bs(n[a],s[a]);if(c)return c}return Pe(n.length,s.length)}function js(i){return ch(i)}function ch(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ti(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ni(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ye.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=ch(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${ch(n.fields[f])}`;return a+"}"}(i.mapValue):Ee(61005,{value:i})}function Ll(i){switch(ri(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=iu(i);return e?16+Ll(e):16;case 5:return 2*i.stringValue.length;case 6:return ni(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Ll(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Ui(s.fields,(c,f)=>{a+=c.length+Ll(f)}),a}(i.mapValue);default:throw Ee(13486,{value:i})}}function hh(i){return!!i&&"integerValue"in i}function Nh(i){return!!i&&"arrayValue"in i}function $p(i){return!!i&&"nullValue"in i}function Wp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ml(i){return!!i&&"mapValue"in i}function F0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ng])===null||n===void 0?void 0:n.stringValue)===rg}function Ko(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ui(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ko(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(i.arrayValue.values[n]);return e}return Object.assign({},i)}function B0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===M0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=Dt.emptyPath(),s={},a=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,s,a),s={},a=[],n=g.popLast()}f?s[g.lastSegment()]=Ko(f):a.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Ml(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Ui(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new wn(Ko(this.value))}}function ig(i){const e=[];return Ui(i.fields,(n,s)=>{const a=new Dt([n]);if(Ml(s)){const c=ig(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,s,a,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new jt(e,0,Ie.min(),Ie.min(),Ie.min(),wn.empty(),0)}static newFoundDocument(e,n,s,a){return new jt(e,1,n,Ie.min(),s,a,0)}static newNoDocument(e,n){return new jt(e,2,n,Ie.min(),Ie.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ie.min(),Ie.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.position=e,this.inclusive=n}}function Hp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=ye.comparator(ye.fromName(f.referenceValue),n.key):s=bs(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function qp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!nr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function U0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{}class Et extends sg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new j0(e,n,s):n==="array-contains"?new W0(e,s):n==="in"?new H0(e,s):n==="not-in"?new q0(e,s):n==="array-contains-any"?new Q0(e,s):new Et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new z0(e,s):new $0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bs(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends sg{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new rr(e,n)}matches(e){return og(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function og(i){return i.op==="and"}function ag(i){return b0(i)&&og(i)}function b0(i){for(const e of i.filters)if(e instanceof rr)return!1;return!0}function fh(i){if(i instanceof Et)return i.field.canonicalString()+i.op.toString()+js(i.value);if(ag(i))return i.filters.map(e=>fh(e)).join(",");{const e=i.filters.map(n=>fh(n)).join(",");return`${i.op}(${e})`}}function lg(i,e){return i instanceof Et?function(s,a){return a instanceof Et&&s.op===a.op&&s.field.isEqual(a.field)&&nr(s.value,a.value)}(i,e):i instanceof rr?function(s,a){return a instanceof rr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,g)=>c&&lg(f,a.filters[g]),!0):!1}(i,e):void Ee(19439)}function ug(i){return i instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`}(i):i instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(ug).join(" ,")+"}"}(i):"Filter"}class j0 extends Et{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class z0 extends Et{constructor(e,n){super(e,"in",n),this.keys=cg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $0 extends Et{constructor(e,n){super(e,"not-in",n),this.keys=cg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ye.fromName(s.referenceValue))}class W0 extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nh(n)&&ia(n.arrayValue,this.value)}}class H0 extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class q0 extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ia(this.value.arrayValue,n)}}class Q0 extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ia(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n=null,s=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.Ie=null}}function Qp(i,e=null,n=[],s=[],a=null,c=null,f=null){return new K0(i,e,n,s,a,c,f)}function xh(i){const e=Se(i);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>fh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>js(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>js(s)).join(",")),e.Ie=n}return e.Ie}function Dh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!U0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!lg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!qp(i.startAt,e.startAt)&&qp(i.endAt,e.endAt)}function dh(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n=null,s=[],a=[],c=null,f="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=_,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function G0(i,e,n,s,a,c,f,g){return new su(i,e,n,s,a,c,f,g)}function hg(i){return new su(i)}function Kp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X0(i){return i.collectionGroup!==null}function Go(i){const e=Se(i);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Tt(Dt.comparator);return f.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Kl(c,s))}),n.has(Dt.keyField().canonicalString())||e.Ee.push(new Kl(Dt.keyField(),s))}return e.Ee}function Zn(i){const e=Se(i);return e.de||(e.de=Y0(e,Go(i))),e.de}function Y0(i,e){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Kl(a.field,c)});const n=i.endAt?new Ql(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ql(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ph(i,e,n){return new su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function ou(i,e){return Dh(Zn(i),Zn(e))&&i.limitType===e.limitType}function fg(i){return`${xh(Zn(i))}|lt:${i.limitType}`}function Ds(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>ug(a)).join(", ")}]`),ru(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>js(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>js(a)).join(",")),`Target(${s})`}(Zn(i))}; limitType=${i.limitType})`}function au(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ye.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Go(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,g,_){const v=Hp(f,g,_);return f.inclusive?v<=0:v<0}(s.startAt,Go(s),a)||s.endAt&&!function(f,g,_){const v=Hp(f,g,_);return f.inclusive?v>=0:v>0}(s.endAt,Go(s),a))}(i,e)}function J0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function dg(i){return(e,n)=>{let s=!1;for(const a of Go(i)){const c=Z0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function Z0(i,e,n){const s=i.field.isKeyField()?ye.comparator(e.key,n.key):function(c,f,g){const _=f.data.field(c),v=g.data.field(c);return _!==null&&v!==null?bs(_,v):Ee(42886)}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Xm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new ot(ye.comparator);function Ir(){return eE}const pg=new ot(ye.comparator);function Ho(...i){let e=pg;for(const n of i)e=e.insert(n.key,n);return e}function mg(i){let e=pg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Mi(){return Xo()}function gg(){return Xo()}function Xo(){return new bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const tE=new ot(ye.comparator),nE=new Tt(ye.comparator);function Oe(...i){let e=nE;for(const n of i)e=e.add(n);return e}const rE=new Tt(Pe);function iE(){return rE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function yg(i){return{integerValue:""+i}}function sE(i,e){return N0(e)?yg(e):Oh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this._=void 0}}function oE(i,e,n){return i instanceof Gl?function(a,c){const f={fields:{[Zm]:{stringValue:Jm},[tg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Vh(c)&&(c=iu(c)),c&&(f.fields[eg]=c),{mapValue:f}}(n,e):i instanceof sa?vg(i,e):i instanceof oa?Eg(i,e):function(a,c){const f=_g(a,c),g=Gp(f)+Gp(a.Re);return hh(f)&&hh(a.Re)?yg(g):Oh(a.serializer,g)}(i,e)}function aE(i,e,n){return i instanceof sa?vg(i,e):i instanceof oa?Eg(i,e):n}function _g(i,e){return i instanceof Xl?function(s){return hh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Gl extends lu{}class sa extends lu{constructor(e){super(),this.elements=e}}function vg(i,e){const n=wg(e);for(const s of i.elements)n.some(a=>nr(a,s))||n.push(s);return{arrayValue:{values:n}}}class oa extends lu{constructor(e){super(),this.elements=e}}function Eg(i,e){let n=wg(e);for(const s of i.elements)n=n.filter(a=>!nr(a,s));return{arrayValue:{values:n}}}class Xl extends lu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Gp(i){return ht(i.integerValue||i.doubleValue)}function wg(i){return Nh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function lE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof sa&&a instanceof sa||s instanceof oa&&a instanceof oa?Us(s.elements,a.elements,nr):s instanceof Xl&&a instanceof Xl?nr(s.Re,a.Re):s instanceof Gl&&a instanceof Gl}(i.transform,e.transform)}class uE{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class uu{}function Tg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Lh(i.key,er.none()):new la(i.key,i.data,er.none());{const n=i.data,s=wn.empty();let a=new Tt(Dt.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new ji(i.key,s,new Un(a.toArray()),er.none())}}function cE(i,e,n){i instanceof la?function(a,c,f){const g=a.value.clone(),_=Yp(a.fieldTransforms,c,f.transformResults);g.setAll(_),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):i instanceof ji?function(a,c,f){if(!Fl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Yp(a.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(Ig(a)),_.setAll(g),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Yo(i,e,n,s){return i instanceof la?function(c,f,g,_){if(!Fl(c.precondition,f))return g;const v=c.value.clone(),S=Jp(c.fieldTransforms,_,f);return v.setAll(S),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof ji?function(c,f,g,_){if(!Fl(c.precondition,f))return g;const v=Jp(c.fieldTransforms,_,f),S=f.data;return S.setAll(Ig(c)),S.setAll(v),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(k=>k.field))}(i,e,n,s):function(c,f,g){return Fl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(i,e,n)}function hE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=_g(s.transform,a||null);c!=null&&(n===null&&(n=wn.empty()),n.set(s.field,c))}return n||null}function Xp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Us(s,a,(c,f)=>lE(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class la extends uu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ji extends uu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ig(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Yp(i,e,n){const s=new Map;We(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,g=e.data.field(c.field);s.set(c.field,aE(f,g,n[a]))}return s}function Jp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,oE(c,f,e))}return s}class Lh extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fE extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&cE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=gg();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const _=Tg(f,g);_!==null&&s.set(a.key,_),f.isValidDocument()||f.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,s)=>Xp(n,s))&&Us(this.baseMutations,e.baseMutations,(n,s)=>Xp(n,s))}}class Mh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){We(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return tE}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Mh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ue;function gE(i){switch(i){case K.OK:return Ee(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ee(15467,{code:i})}}function Sg(i){if(i===void 0)return Tr("GRPC error has no .code"),K.UNKNOWN;switch(i){case pt.OK:return K.OK;case pt.CANCELLED:return K.CANCELLED;case pt.UNKNOWN:return K.UNKNOWN;case pt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case pt.INTERNAL:return K.INTERNAL;case pt.UNAVAILABLE:return K.UNAVAILABLE;case pt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case pt.NOT_FOUND:return K.NOT_FOUND;case pt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case pt.ABORTED:return K.ABORTED;case pt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case pt.DATA_LOSS:return K.DATA_LOSS;default:return Ee(39323,{code:i})}}(Ue=pt||(pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Yr([4294967295,4294967295],0);function Zp(i){const e=Qm().encode(i),n=new Um;return n.update(e),new Uint8Array(n.digest())}function em(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yr([n,s],0),new Yr([a,c],0)]}class Fh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(s<0)throw new qo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Yr.fromNumber(this.pe)}we(e,n,s){let a=e.add(n.multiply(Yr.fromNumber(s)));return a.compare(yE)===1&&(a=new Yr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Zp(e),[s,a]=em(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);if(!this.be(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Fh(c,a,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=Zp(e),[s,a]=em(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new cu(Ie.min(),a,new ot(Pe),Ir(),Oe())}}class ua{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ua(s,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,s,a){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=a}}class Ag{constructor(e,n){this.targetId=e,this.Ce=n}}class Cg{constructor(e,n,s=Ot.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class tm{constructor(){this.Fe=0,this.Me=nm(),this.xe=Ot.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Oe(),n=Oe(),s=Oe();return this.Me.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ee(38017,{changeType:c})}}),new ua(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=nm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,We(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class _E{constructor(e){this.ze=e,this.je=new Map,this.He=Ir(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new ot(Pe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,s=e.Ce.count,a=this._t(n);if(a){const c=a.target;if(dh(c))if(s===0){const f=new ye(c.path);this.tt(n,f,jt.newNoDocument(f,Ie.min()))}else We(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const g=this.ct(e),_=g?this.lt(g,e,f):1;if(_!==0){this.st(n);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=ni(s).toUint8Array()}catch(_){if(_ instanceof Ym)return Bs("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new Fh(f,a,c)}catch(_){return Bs(_ instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,c,null),a++)}),a}It(e){const n=new Map;this.je.forEach((c,f)=>{const g=this._t(f);if(g){if(c.current&&dh(g.target)){const _=new ye(g.target.path);this.Et(_).has(f)||this.dt(f,_)||this.tt(f,_,jt.newNoDocument(_,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=Oe();this.Ye.forEach((c,f)=>{let g=!0;f.forEachWhile(_=>{const v=this._t(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const a=new cu(e,n,this.Ze,this.He,s);return this.He=Ir(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new ot(Pe),a}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new tm,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Tt(Pe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Tt(Pe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new tm),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vl(){return new ot(ye.comparator)}function nm(){return new ot(ye.comparator)}const vE={asc:"ASCENDING",desc:"DESCENDING"},EE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wE={and:"AND",or:"OR"};class TE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(i,e){return i.useProto3Json||ru(e)?e:{value:e}}function Yl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function IE(i,e){return Yl(i,e.toTimestamp())}function tr(i){return We(!!i,49232),Ie.fromTimestamp(function(n){const s=ti(n);return new wt(s.seconds,s.nanos)}(i))}function Bh(i,e){return gh(i,e).canonicalString()}function gh(i,e){const n=function(a){return new nt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Pg(i){const e=nt.fromString(i);return We(Dg(e),10190,{key:e.toString()}),e}function yh(i,e){return Bh(i.databaseId,e.path)}function Jc(i,e){const n=Pg(e);if(n.get(1)!==i.databaseId.projectId)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ye(Vg(n))}function kg(i,e){return Bh(i.databaseId,e)}function SE(i){const e=Pg(i);return e.length===4?nt.emptyPath():Vg(e)}function _h(i){return new nt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Vg(i){return We(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function rm(i,e,n){return{name:yh(i,e),fields:n.value.mapValue.fields}}function AE(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,S){return v.useProto3Json?(We(S===void 0||typeof S=="string",58123),Ot.fromBase64String(S||"")):(We(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ot.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(v){const S=v.code===void 0?K.UNKNOWN:Sg(v.code);return new pe(S,v.message||"")}(f);n=new Cg(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Jc(i,s.document.name),c=tr(s.document.updateTime),f=s.document.createTime?tr(s.document.createTime):Ie.min(),g=new wn({mapValue:{fields:s.document.fields}}),_=jt.newFoundDocument(a,c,f,g),v=s.targetIds||[],S=s.removedTargetIds||[];n=new Bl(v,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Jc(i,s.document),c=s.readTime?tr(s.readTime):Ie.min(),f=jt.newNoDocument(a,c),g=s.removedTargetIds||[];n=new Bl([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Jc(i,s.document),c=s.removedTargetIds||[];n=new Bl([],c,a,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new mE(a,c),g=s.targetId;n=new Ag(g,f)}}return n}function CE(i,e){let n;if(e instanceof la)n={update:rm(i,e.key,e.value)};else if(e instanceof Lh)n={delete:yh(i,e.key)};else if(e instanceof ji)n={update:rm(i,e.key,e.data),updateMask:LE(e.fieldMask)};else{if(!(e instanceof fE))return Ee(16599,{ft:e.type});n={verify:yh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const g=f.transform;if(g instanceof Gl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof sa)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof oa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Xl)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Ee(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:IE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)}(i,e.precondition)),n}function RE(i,e){return i&&i.length>0?(We(e!==void 0,14353),i.map(n=>function(a,c){let f=a.updateTime?tr(a.updateTime):tr(c);return f.isEqual(Ie.min())&&(f=tr(c)),new uE(f,a.transformResults||[])}(n,e))):[]}function PE(i,e){return{documents:[kg(i,e.path)]}}function kE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=kg(i,a);const c=function(v){if(v.length!==0)return xg(rr.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(S=>function(x){return{field:Os(x.field),direction:xE(x.dir)}}(S))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=mh(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:n,parent:a}}function VE(i){let e=SE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){We(s===1,65062);const S=n.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=function(k){const x=Ng(k);return x instanceof rr&&ag(x)?x.getFilters():[x]}(n.where));let f=[];n.orderBy&&(f=function(k){return k.map(x=>function(J){return new Kl(Ls(J.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(J.direction))}(x))}(n.orderBy));let g=null;n.limit&&(g=function(k){let x;return x=typeof k=="object"?k.value:k,ru(x)?null:x}(n.limit));let _=null;n.startAt&&(_=function(k){const x=!!k.before,$=k.values||[];return new Ql($,x)}(n.startAt));let v=null;return n.endAt&&(v=function(k){const x=!k.before,$=k.values||[];return new Ql($,x)}(n.endAt)),G0(e,a,f,c,g,"F",_,v)}function NE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ng(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ls(n.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ls(n.unaryFilter.field);return Et.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ls(n.unaryFilter.field);return Et.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ls(n.unaryFilter.field);return Et.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(i):i.fieldFilter!==void 0?function(n){return Et.create(Ls(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(s=>Ng(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(i):Ee(30097,{filter:i})}function xE(i){return vE[i]}function DE(i){return EE[i]}function OE(i){return wE[i]}function Os(i){return{fieldPath:i.canonicalString()}}function Ls(i){return Dt.fromServerFormat(i.fieldPath)}function xg(i){return i instanceof Et?function(n){if(n.op==="=="){if(Wp(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if($p(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wp(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if($p(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:DE(n.op),value:n.value}}}(i):i instanceof rr?function(n){const s=n.getFilters().map(a=>xg(a));return s.length===1?s[0]:{compositeFilter:{op:OE(n.op),filters:s}}}(i):Ee(54877,{filter:i})}function LE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,s,a,c=Ie.min(),f=Ie.min(),g=Ot.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.wt=e}}function FE(i){const e=VE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.Cn=new UE}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(ei.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class UE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Tt(nt.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Tt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Og=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(Og,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new zs(0)}static lr(){return new zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="LruGarbageCollector",bE=1048576;function om([i,e],[n,s]){const a=Pe(i,n);return a===0?Pe(e,s):a}class jE{constructor(e){this.Er=e,this.buffer=new Tt(om),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();om(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ae(sm,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?ae(sm,"Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.mr(3e5)})}}class $E{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return H.resolve(nu.le);const s=new jE(n);return this.gr.forEachTarget(e,a=>s.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>s.Rr(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(im)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),im):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,a,c,f,g,_,v;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,f=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(s=k,g=Date.now(),this.removeTargets(e,s,n))).next(k=>(c=k,_=Date.now(),this.removeOrphanedDocuments(e,s))).next(k=>(v=Date.now(),xs()<=be.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${k} documents in `+(v-_)+`ms
Total Duration: ${v-S}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}function WE(i,e){return new $E(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.changes=new bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Yo(s.mutation,a,Un.empty(),wt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Oe()){const a=Mi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=Ho();return c.forEach((g,_)=>{f=f.insert(g,_.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Oe()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,a){let c=Ir();const f=Xo(),g=function(){return Xo()}();return n.forEach((_,v)=>{const S=s.get(v.key);a.has(v.key)&&(S===void 0||S.mutation instanceof ji)?c=c.insert(v.key,v):S!==void 0?(f.set(v.key,S.mutation.getFieldMask()),Yo(S.mutation,v,S.mutation.getFieldMask(),wt.now())):f.set(v.key,Un.empty())}),this.recalculateAndSaveOverlays(e,c).next(_=>(_.forEach((v,S)=>f.set(v,S)),n.forEach((v,S)=>{var k;return g.set(v,new qE(S,(k=f.get(v))!==null&&k!==void 0?k:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Xo();let a=new ot((f,g)=>f-g),c=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(_=>{const v=n.get(_);if(v===null)return;let S=s.get(_)||Un.empty();S=g.applyToLocalView(v,S),s.set(_,S);const k=(a.get(g.batchId)||Oe()).add(_);a=a.insert(g.batchId,k)})}).next(()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),v=_.key,S=_.value,k=gg();S.forEach(x=>{if(!c.has(x)){const $=Tg(n.get(x),s.get(x));$!==null&&k.set(x,$),c=c.add(x)}}),f.push(this.documentOverlayCache.saveOverlays(e,v,k))}return H.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return ye.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):H.resolve(Mi());let g=ta,_=c;return f.next(v=>H.forEach(v,(S,k)=>(g<k.largestBatchId&&(g=k.largestBatchId),c.get(S)?H.resolve():this.remoteDocumentCache.getEntry(e,S).next(x=>{_=_.insert(S,x)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,_,v,Oe())).next(S=>({batchId:g,changes:mg(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(s=>{let a=Ho();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Ho();return this.indexManager.getCollectionParents(e,c).next(g=>H.forEach(g,_=>{const v=function(k,x){return new su(x,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(S=>{S.forEach((k,x)=>{f=f.insert(k,x)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((_,v)=>{const S=v.getKey();f.get(S)===null&&(f=f.insert(S,jt.newInvalidDocument(S)))});let g=Ho();return f.forEach((_,v)=>{const S=c.get(_);S!==void 0&&Yo(S.mutation,v,Un.empty(),wt.now()),au(n,v)&&(g=g.insert(_,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return H.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:tr(a.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:FE(a.bundledQuery),readTime:tr(a.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.overlays=new ot(ye.comparator),this.Qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Mi();return H.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.St(e,n,c)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Qr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const a=Mi(),c=n.length+1,f=new ye(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const _=g.getNext().value,v=_.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&_.largestBatchId>s&&a.set(_.getKey(),_)}return H.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new ot((v,S)=>v-S);const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let S=c.get(v.largestBatchId);S===null&&(S=Mi(),c=c.insert(v.largestBatchId,S)),S.set(v.getKey(),v)}}const g=Mi(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,S)=>g.set(v,S)),!(g.size()>=a)););return H.resolve(g)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Qr.get(a.largestBatchId).delete(s.key);this.Qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new pE(n,s));let c=this.Qr.get(n);c===void 0&&(c=Oe(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.$r=new Tt(Rt.Ur),this.Kr=new Tt(Rt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Rt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ye(new nt([])),s=new Rt(n,e),a=new Rt(n,e+1),c=[];return this.Kr.forEachInRange([s,a],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ye(new nt([])),s=new Rt(n,e),a=new Rt(n,e+1);let c=Oe();return this.Kr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new Rt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ye.comparator(e.key,n.key)||Pe(e.Zr,n.Zr)}static Wr(e,n){return Pe(e.Zr,n.Zr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Tt(Rt.Ur)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new dE(c,n,s,a);this.mutationQueue.push(f);for(const g of a)this.Xr=this.Xr.add(new Rt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return H.resolve(f)}lookupMutationBatch(e,n){return H.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ti(s),c=a<0?0:a;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?kh:this.nr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),a=new Rt(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,a],f=>{const g=this.ei(f.Zr);c.push(g)}),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Tt(Pe);return n.forEach(a=>{const c=new Rt(a,0),f=new Rt(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],g=>{s=s.add(g.Zr)})}),H.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ye.isDocumentKey(c)||(c=c.child(""));const f=new Rt(new ye(c),0);let g=new Tt(Pe);return this.Xr.forEachWhile(_=>{const v=_.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(g=g.add(_.Zr)),!0)},f),H.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const a=this.ei(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){We(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return H.forEach(n.mutations,a=>{const c=new Rt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Rt(n,0),a=this.Xr.firstAfterOrEqual(s);return H.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.ii=e,this.docs=function(){return new ot(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let s=Ir();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():jt.newInvalidDocument(a))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Ir();const f=n.path,g=new ye(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:v,value:{document:S}}=_.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||R0(C0(S),s)<=0||(a.has(S.key)||au(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,n,s,a){Ee(9500)}si(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new ZE(this)}getSize(e){return H.resolve(this.size)}}class ZE extends HE{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.persistence=e,this.oi=new bi(n=>xh(n),Dh),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this._i=0,this.ai=new Uh,this.targetCount=0,this.ui=zs.cr()}forEachTarget(e,n){return this.oi.forEach((s,a)=>n(a)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),H.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new zs(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Tr(n),H.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),H.waitFor(c).next(()=>a)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),H.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n){this.ci={},this.overlays={},this.li=new nu(0),this.hi=!1,this.hi=!0,this.Pi=new XE,this.referenceDelegate=e(this),this.Ti=new ew(this),this.indexManager=new BE,this.remoteDocumentCache=function(a){return new JE(a)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new ME(n),this.Ei=new KE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new YE(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ae("MemoryPersistence","Starting transaction:",e);const a=new tw(this.li.next());return this.referenceDelegate.di(),s(a).next(c=>this.referenceDelegate.Ai(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ri(e,n){return H.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class tw extends k0{constructor(e){super(),this.currentSequenceNumber=e}}class bh{constructor(e){this.persistence=e,this.Vi=new Uh,this.mi=null}static fi(e){return new bh(e)}get gi(){if(this.mi)return this.mi;throw Ee(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.gi,s=>{const a=ye.fromPath(s);return this.pi(e,a).next(c=>{c||n.removeEntry(a,Ie.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return H.or([()=>H.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Jl{constructor(e,n){this.persistence=e,this.yi=new bi(s=>x0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=WE(this,n)}static fi(e,n){return new Jl(e,n)}di(){}Ai(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return H.forEach(this.yi,(s,a)=>this.Dr(e,s,a).next(c=>c?H.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.si(e,f=>this.Dr(e,f,n).next(g=>{g||(s++,c.removeEntry(f,Ie.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),H.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ll(e.data.value)),n}Dr(e,n,s){return H.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return H.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.ds=s,this.As=a}static Rs(e,n){let s=Oe(),a=Oe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new jh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return X_()?8:V0(K_())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new nw;return this.Ss(e,n,f).next(g=>{if(c.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>c.result)}Ds(e,n,s,a){return s.documentReadCount<this.gs?(xs()<=be.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),H.resolve()):(xs()<=be.DEBUG&&ae("QueryEngine","Query:",Ds(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ps*a?(xs()<=be.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):H.resolve())}ws(e,n){if(Kp(n))return H.resolve(null);let s=Zn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=ph(n,null,"F"),s=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Oe(...c);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(_=>{const v=this.vs(n,g);return this.Cs(n,v,f,_.readTime)?this.ws(e,ph(n,null,"F")):this.Fs(e,v,n,_)}))})))}bs(e,n,s,a){return Kp(n)||a.isEqual(Ie.min())?H.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,a)?H.resolve(null):(xs()<=be.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ds(n)),this.Fs(e,f,n,A0(a,ta)).next(g=>g))})}vs(e,n){let s=new Tt(dg(e));return n.forEach((a,c)=>{au(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return xs()<=be.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.ys.getDocumentsMatchingQuery(e,n,ei.min(),s)}Fs(e,n,s,a){return this.ys.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="LocalStore",iw=3e8;class sw{constructor(e,n,s,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new ot(Pe),this.Os=new bi(c=>xh(c),Dh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ow(i,e,n,s){return new sw(i,e,n,s)}async function Mg(i,e){const n=Se(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let _=Oe();for(const v of a){f.push(v.batchId);for(const S of v.mutations)_=_.add(S.key)}for(const v of c){g.push(v.batchId);for(const S of v.mutations)_=_.add(S.key)}return n.localDocuments.getDocuments(s,_).next(v=>({ks:v,removedBatchIds:f,addedBatchIds:g}))})})}function aw(i,e){const n=Se(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,_,v,S){const k=v.batch,x=k.keys();let $=H.resolve();return x.forEach(J=>{$=$.next(()=>S.getEntry(_,J)).next(Y=>{const j=v.docVersions.get(J);We(j!==null,48541),Y.version.compareTo(j)<0&&(k.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),S.addEntry(Y)))})}),$.next(()=>g.mutationQueue.removeMutationBatch(_,k))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let _=Oe();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(_=_.add(g.batch.mutations[v].key));return _}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Fg(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function lw(i,e){const n=Se(i),s=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const g=[];e.targetChanges.forEach((S,k)=>{const x=a.get(k);if(!x)return;g.push(n.Ti.removeMatchingKeys(c,S.removedDocuments,k).next(()=>n.Ti.addMatchingKeys(c,S.addedDocuments,k)));let $=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?$=$.withResumeToken(Ot.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):S.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(S.resumeToken,s)),a=a.insert(k,$),function(Y,j,Ae){return Y.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=iw?!0:Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0}(x,$,S)&&g.push(n.Ti.updateTargetData(c,$))});let _=Ir(),v=Oe();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))}),g.push(uw(c,f,e.documentUpdates).next(S=>{_=S.qs,v=S.Qs})),!s.isEqual(Ie.min())){const S=n.Ti.getLastRemoteSnapshotVersion(c).next(k=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(S)}return H.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,v)).next(()=>_)}).then(c=>(n.xs=a,c))}function uw(i,e,n){let s=Oe(),a=Oe();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Ir();return n.forEach((g,_)=>{const v=c.get(g);_.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(g)),_.isNoDocument()&&_.version.isEqual(Ie.min())?(e.removeEntry(g,_.readTime),f=f.insert(g,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),f=f.insert(g,_)):ae(zh,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",_.version)}),{qs:f,Qs:a}})}function cw(i,e){const n=Se(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=kh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hw(i,e){const n=Se(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Ti.getTargetData(s,e).next(c=>c?(a=c,H.resolve(a)):n.Ti.allocateTargetId(s).next(f=>(a=new Kr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.xs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function vh(i,e,n){const s=Se(i),a=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!Ks(f))throw f;ae(zh,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(a.target)}function am(i,e,n){const s=Se(i);let a=Ie.min(),c=Oe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(_,v,S){const k=Se(_),x=k.Os.get(S);return x!==void 0?H.resolve(k.xs.get(x)):k.Ti.getTargetData(v,S)}(s,f,Zn(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,g.targetId).next(_=>{c=_})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?a:Ie.min(),n?c:Oe())).next(g=>(fw(s,J0(e),g),{documents:g,$s:c})))}function fw(i,e,n){let s=i.Ns.get(e)||Ie.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Ns.set(e,s)}class lm{constructor(){this.activeTargetIds=iE()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dw{constructor(){this.xo=new lm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new lm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="ConnectivityMonitor";class cm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ae(um,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ae(um,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl=null;function Eh(){return Nl===null?Nl=function(){return 268435456+Math.round(2147483648*Math.random())}():Nl++,"0x"+Nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="RestConnection",mw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gw{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${a}`,this.Go=this.databaseId.database===Hl?`project_id=${s}`:`project_id=${s}&database_id=${a}`}zo(e,n,s,a,c){const f=Eh(),g=this.jo(e,n.toUriEncodedString());ae(Zc,`Sending RPC '${e}' ${f}:`,g,s);const _={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(_,a,c);const{host:v}=new URL(g),S=Ch(v);return this.Jo(e,g,_,s,S).then(k=>(ae(Zc,`Received RPC '${e}' ${f}: `,k),k),k=>{throw Bs(Zc,`RPC '${e}' ${f} failed with error: `,k,"url: ",g,"request:",s),k})}Yo(e,n,s,a,c,f){return this.zo(e,n,s,a,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}jo(e,n){const s=mw[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class _w extends gw{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Eh();return new Promise((g,_)=>{const v=new bm;v.setWithCredentials(!0),v.listenOnce(jm.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ol.NO_ERROR:const k=v.getResponseJson();ae(Ut,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(k)),g(k);break;case Ol.TIMEOUT:ae(Ut,`RPC '${e}' ${f} timed out`),_(new pe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const x=v.getStatus();if(ae(Ut,`RPC '${e}' ${f} failed with status:`,x,"response text:",v.getResponseText()),x>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const J=$==null?void 0:$.error;if(J&&J.status&&J.message){const Y=function(Ae){const ve=Ae.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ve)>=0?ve:K.UNKNOWN}(J.status);_(new pe(Y,J.message))}else _(new pe(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new pe(K.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{h_:e,streamId:f,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{ae(Ut,`RPC '${e}' ${f} completed.`)}});const S=JSON.stringify(a);ae(Ut,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",S,s,15)})}I_(e,n,s){const a=Eh(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Wm(),g=$m(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Ho(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const S=c.join("");ae(Ut,`Creating RPC '${e}' stream ${a}: ${S}`,_);const k=f.createWebChannel(S,_);this.E_(k);let x=!1,$=!1;const J=new yw({Zo:j=>{$?ae(Ut,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(x||(ae(Ut,`Opening RPC '${e}' stream ${a} transport.`),k.open(),x=!0),ae(Ut,`RPC '${e}' stream ${a} sending:`,j),k.send(j))},Xo:()=>k.close()}),Y=(j,Ae,ve)=>{j.listen(Ae,we=>{try{ve(we)}catch(ke){setTimeout(()=>{throw ke},0)}})};return Y(k,Wo.EventType.OPEN,()=>{$||(ae(Ut,`RPC '${e}' stream ${a} transport opened.`),J.__())}),Y(k,Wo.EventType.CLOSE,()=>{$||($=!0,ae(Ut,`RPC '${e}' stream ${a} transport closed`),J.u_(),this.d_(k))}),Y(k,Wo.EventType.ERROR,j=>{$||($=!0,Bs(Ut,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),J.u_(new pe(K.UNAVAILABLE,"The operation could not be completed")))}),Y(k,Wo.EventType.MESSAGE,j=>{var Ae;if(!$){const ve=j.data[0];We(!!ve,16349);const we=ve,ke=(we==null?void 0:we.error)||((Ae=we[0])===null||Ae===void 0?void 0:Ae.error);if(ke){ae(Ut,`RPC '${e}' stream ${a} received error:`,ke);const rt=ke.status;let Le=function(A){const C=pt[A];if(C!==void 0)return Sg(C)}(rt),V=ke.message;Le===void 0&&(Le=K.INTERNAL,V="Unknown error status: "+rt+" with message "+ke.message),$=!0,J.u_(new pe(Le,V)),k.close()}else ae(Ut,`RPC '${e}' stream ${a} received:`,ve),J.c_(ve)}}),Y(g,zm.STAT_EVENT,j=>{j.stat===lh.PROXY?ae(Ut,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===lh.NOPROXY&&ae(Ut,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{J.a_()},0),J}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(i){return new TE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=a,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-s);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="PersistentStream";class Ug{constructor(e,n,s,a,c,f,g,_){this.xi=e,this.S_=s,this.D_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Bg(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.v_===n&&this.z_(s,a)},s=>{e(()=>{const a=new pe(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(a)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{s(()=>this.j_(a))}),this.stream.onMessage(a=>{s(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ae(hm,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ae(hm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vw extends Ug{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=AE(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ie.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?tr(f.readTime):Ie.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=_h(this.serializer),n.addTarget=function(c,f){let g;const _=f.target;if(g=dh(_)?{documents:PE(c,_)}:{query:kE(c,_).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Rg(c,f.resumeToken);const v=mh(c,f.expectedCount);v!==null&&(g.expectedCount=v)}else if(f.snapshotVersion.compareTo(Ie.min())>0){g.readTime=Yl(c,f.snapshotVersion.toTimestamp());const v=mh(c,f.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const s=NE(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=_h(this.serializer),n.removeTarget=e,this.Q_(n)}}class Ew extends Ug{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=RE(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=_h(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>CE(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Tw extends ww{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,gh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(K.UNKNOWN,c.toString())})}Yo(e,n,s,a,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,gh(n,s),a,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(K.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Iw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Tr(n),this.ua=!1):ae("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class Sw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{zi(this)&&(ae(Bi,"Restarting streams for network reachability change."),await async function(_){const v=Se(_);v.da.add(4),await ca(v),v.Va.set("Unknown"),v.da.delete(4),await fu(v)}(this))})}),this.Va=new Iw(s,a)}}async function fu(i){if(zi(i))for(const e of i.Aa)await e(!0)}async function ca(i){for(const e of i.Aa)await e(!1)}function bg(i,e){const n=Se(i);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),qh(n)?Hh(n):Gs(n).N_()&&Wh(n,e))}function $h(i,e){const n=Se(i),s=Gs(n);n.Ea.delete(e),s.N_()&&jg(n,e),n.Ea.size===0&&(s.N_()?s.k_():zi(n)&&n.Va.set("Unknown"))}function Wh(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gs(i).Z_(e)}function jg(i,e){i.ma.Ke(e),Gs(i).X_(e)}function Hh(i){i.ma=new _E({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Gs(i).start(),i.Va.ca()}function qh(i){return zi(i)&&!Gs(i).O_()&&i.Ea.size>0}function zi(i){return Se(i).da.size===0}function zg(i){i.ma=void 0}async function Aw(i){i.Va.set("Online")}async function Cw(i){i.Ea.forEach((e,n)=>{Wh(i,e)})}async function Rw(i,e){zg(i),qh(i)?(i.Va.Pa(e),Hh(i)):i.Va.set("Unknown")}async function Pw(i,e,n){if(i.Va.set("Online"),e instanceof Cg&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const g of c.targetIds)a.Ea.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ea.delete(g),a.ma.removeTarget(g))}(i,e)}catch(s){ae(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zl(i,s)}else if(e instanceof Bl?i.ma.Xe(e):e instanceof Ag?i.ma.ot(e):i.ma.nt(e),!n.isEqual(Ie.min()))try{const s=await Fg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const g=c.ma.It(f);return g.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.Ea.get(v);S&&c.Ea.set(v,S.withResumeToken(_.resumeToken,f))}}),g.targetMismatches.forEach((_,v)=>{const S=c.Ea.get(_);if(!S)return;c.Ea.set(_,S.withResumeToken(Ot.EMPTY_BYTE_STRING,S.snapshotVersion)),jg(c,_);const k=new Kr(S.target,_,v,S.sequenceNumber);Wh(c,k)}),c.remoteSyncer.applyRemoteEvent(g)}(i,n)}catch(s){ae(Bi,"Failed to raise snapshot:",s),await Zl(i,s)}}async function Zl(i,e,n){if(!Ks(e))throw e;i.da.add(1),await ca(i),i.Va.set("Offline"),n||(n=()=>Fg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ae(Bi,"Retrying IndexedDB access"),await n(),i.da.delete(1),await fu(i)})}function $g(i,e){return e().catch(n=>Zl(i,n,e))}async function du(i){const e=Se(i),n=ii(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:kh;for(;kw(e);)try{const a=await cw(e.localStore,s);if(a===null){e.Ia.length===0&&n.k_();break}s=a.batchId,Vw(e,a)}catch(a){await Zl(e,a)}Wg(e)&&Hg(e)}function kw(i){return zi(i)&&i.Ia.length<10}function Vw(i,e){i.Ia.push(e);const n=ii(i);n.N_()&&n.ea&&n.ta(e.mutations)}function Wg(i){return zi(i)&&!ii(i).O_()&&i.Ia.length>0}function Hg(i){ii(i).start()}async function Nw(i){ii(i).ia()}async function xw(i){const e=ii(i);for(const n of i.Ia)e.ta(n.mutations)}async function Dw(i,e,n){const s=i.Ia.shift(),a=Mh.from(s,e,n);await $g(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await du(i)}async function Ow(i,e){e&&ii(i).ea&&await async function(s,a){if(function(f){return gE(f)&&f!==K.ABORTED}(a.code)){const c=s.Ia.shift();ii(s).L_(),await $g(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await du(s)}}(i,e),Wg(i)&&Hg(i)}async function fm(i,e){const n=Se(i);n.asyncQueue.verifyOperationInProgress(),ae(Bi,"RemoteStore received new credentials");const s=zi(n);n.da.add(3),await ca(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await fu(n)}async function Lw(i,e){const n=Se(i);e?(n.da.delete(2),await fu(n)):e||(n.da.add(2),await ca(n),n.Va.set("Unknown"))}function Gs(i){return i.fa||(i.fa=function(n,s,a){const c=Se(n);return c.oa(),new vw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:Aw.bind(null,i),n_:Cw.bind(null,i),i_:Rw.bind(null,i),Y_:Pw.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),qh(i)?Hh(i):i.Va.set("Unknown")):(await i.fa.stop(),zg(i))})),i.fa}function ii(i){return i.ga||(i.ga=function(n,s,a){const c=Se(n);return c.oa(),new Ew(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Nw.bind(null,i),i_:Ow.bind(null,i),na:xw.bind(null,i),ra:Dw.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await du(i)):(await i.ga.stop(),i.Ia.length>0&&(ae(Bi,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,g=new Qh(e,n,f,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(i,e){if(Tr("AsyncQueue",`${e}: ${i}`),Ks(i))return new pe(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{static emptySet(e){return new Fs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Ho(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.pa=new ot(ye.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ee(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class $s{constructor(e,n,s,a,c,f,g,_,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new $s(e,n,Fs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Fw{constructor(){this.queries=pm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Se(n),c=a.queries;a.queries=pm(),c.forEach((f,g)=>{for(const _ of g.Sa)_.onError(s)})})(this,new pe(K.ABORTED,"Firestore shutting down"))}}function pm(){return new bi(i=>fg(i),ou)}async function Bw(i,e){const n=Se(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Da()&&e.va()&&(s=2):(c=new Mw,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(a,!0);break;case 1:c.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=Kh(f,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&Gh(n)}async function Uw(i,e){const n=Se(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.va()?0:1:!c.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bw(i,e){const n=Se(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Ma(a)&&(s=!0);f.ba=a}}s&&Gh(n)}function jw(i,e,n){const s=Se(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function Gh(i){i.Ca.forEach(e=>{e.next()})}var wh,mm;(mm=wh||(wh={})).xa="default",mm.Cache="cache";class zw{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new $s(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.key=e}}class Qg{constructor(e){this.key=e}}class $w{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.Za=dg(e),this.Xa=new Fs(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new dm,a=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const _=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((S,k)=>{const x=a.get(S),$=au(this.query,k)?k:null,J=!!x&&this.mutatedKeys.has(x.key),Y=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let j=!1;x&&$?x.data.isEqual($.data)?J!==Y&&(s.track({type:3,doc:$}),j=!0):this.ru(x,$)||(s.track({type:2,doc:$}),j=!0,(_&&this.Za($,_)>0||v&&this.Za($,v)<0)&&(g=!0)):!x&&$?(s.track({type:0,doc:$}),j=!0):x&&!$&&(s.track({type:1,doc:x}),j=!0,(_||v)&&(g=!0)),j&&($?(f=f.add($),c=Y?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Xa:f,nu:s,Cs:g,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((S,k)=>function($,J){const Y=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:j})}};return Y($)-Y(J)}(S.type,k.type)||this.Za(S.doc,k.doc)),this.iu(s),a=a!=null&&a;const g=n&&!a?this.su():[],_=this.Ya.size===0&&this.current&&!a?1:0,v=_!==this.Ja;return this.Ja=_,f.length!==0||v?{snapshot:new $s(this.query,e.Xa,c,f,e.mutatedKeys,_===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new dm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new Qg(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new qg(s))}),n}au(e){this.Ha=e.$s,this.Ya=Oe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return $s.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Xh="SyncEngine";class Ww{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Hw{constructor(e){this.key=e,this.cu=!1}}class qw{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new bi(g=>fg(g),ou),this.Pu=new Map,this.Tu=new Set,this.Iu=new ot(ye.comparator),this.Eu=new Map,this.du=new Uh,this.Au={},this.Ru=new Map,this.Vu=zs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Qw(i,e,n=!0){const s=Zg(i);let a;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.uu()):a=await Kg(s,e,n,!0),a}async function Kw(i,e){const n=Zg(i);await Kg(n,e,!0,!1)}async function Kg(i,e,n,s){const a=await hw(i.localStore,Zn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await Gw(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&bg(i.remoteStore,a),g}async function Gw(i,e,n,s,a){i.fu=(k,x,$)=>async function(Y,j,Ae,ve){let we=j.view.tu(Ae);we.Cs&&(we=await am(Y.localStore,j.query,!1).then(({documents:V})=>j.view.tu(V,we)));const ke=ve&&ve.targetChanges.get(j.targetId),rt=ve&&ve.targetMismatches.get(j.targetId)!=null,Le=j.view.applyChanges(we,Y.isPrimaryClient,ke,rt);return ym(Y,j.targetId,Le.ou),Le.snapshot}(i,k,x,$);const c=await am(i.localStore,e,!0),f=new $w(e,c.$s),g=f.tu(c.documents),_=ua.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(g,i.isPrimaryClient,_);ym(i,n,v.ou);const S=new Ww(e,n,f);return i.hu.set(e,S),i.Pu.has(n)?i.Pu.get(n).push(e):i.Pu.set(n,[e]),v.snapshot}async function Xw(i,e,n){const s=Se(i),a=s.hu.get(e),c=s.Pu.get(a.targetId);if(c.length>1)return s.Pu.set(a.targetId,c.filter(f=>!ou(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await vh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&$h(s.remoteStore,a.targetId),Th(s,a.targetId)}).catch(Qs)):(Th(s,a.targetId),await vh(s.localStore,a.targetId,!0))}async function Yw(i,e){const n=Se(i),s=n.hu.get(e),a=n.Pu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$h(n.remoteStore,s.targetId))}async function Jw(i,e,n){const s=s1(i);try{const a=await function(f,g){const _=Se(f),v=wt.now(),S=g.reduce(($,J)=>$.add(J.key),Oe());let k,x;return _.persistence.runTransaction("Locally write mutations","readwrite",$=>{let J=Ir(),Y=Oe();return _.Bs.getEntries($,S).next(j=>{J=j,J.forEach((Ae,ve)=>{ve.isValidDocument()||(Y=Y.add(Ae))})}).next(()=>_.localDocuments.getOverlayedDocuments($,J)).next(j=>{k=j;const Ae=[];for(const ve of g){const we=hE(ve,k.get(ve.key).overlayedDocument);we!=null&&Ae.push(new ji(ve.key,we,ig(we.value.mapValue),er.exists(!0)))}return _.mutationQueue.addMutationBatch($,v,Ae,g)}).next(j=>{x=j;const Ae=j.applyToLocalDocumentSet(k,Y);return _.documentOverlayCache.saveOverlays($,j.batchId,Ae)})}).then(()=>({batchId:x.batchId,changes:mg(k)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,g,_){let v=f.Au[f.currentUser.toKey()];v||(v=new ot(Pe)),v=v.insert(g,_),f.Au[f.currentUser.toKey()]=v}(s,a.batchId,n),await ha(s,a.changes),await du(s.remoteStore)}catch(a){const c=Kh(a,"Failed to persist write");n.reject(c)}}async function Gg(i,e){const n=Se(i);try{const s=await lw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Eu.get(c);f&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.cu=!0:a.modifiedDocuments.size>0?We(f.cu,14607):a.removedDocuments.size>0&&(We(f.cu,42227),f.cu=!1))}),await ha(n,s,e)}catch(s){await Qs(s)}}function gm(i,e,n){const s=Se(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.hu.forEach((c,f)=>{const g=f.view.Fa(e);g.snapshot&&a.push(g.snapshot)}),function(f,g){const _=Se(f);_.onlineState=g;let v=!1;_.queries.forEach((S,k)=>{for(const x of k.Sa)x.Fa(g)&&(v=!0)}),v&&Gh(_)}(s.eventManager,e),a.length&&s.lu.Y_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Zw(i,e,n){const s=Se(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new ot(ye.comparator);f=f.insert(c,jt.newNoDocument(c,Ie.min()));const g=Oe().add(c),_=new cu(Ie.min(),new Map,new ot(Pe),f,g);await Gg(s,_),s.Iu=s.Iu.remove(c),s.Eu.delete(e),Yh(s)}else await vh(s.localStore,e,!1).then(()=>Th(s,e,n)).catch(Qs)}async function e1(i,e){const n=Se(i),s=e.batch.batchId;try{const a=await aw(n.localStore,e);Yg(n,s,null),Xg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ha(n,a)}catch(a){await Qs(a)}}async function t1(i,e,n){const s=Se(i);try{const a=await function(f,g){const _=Se(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let S;return _.mutationQueue.lookupMutationBatch(v,g).next(k=>(We(k!==null,37113),S=k.keys(),_.mutationQueue.removeMutationBatch(v,k))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,S,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,S)).next(()=>_.localDocuments.getDocuments(v,S))})}(s.localStore,e);Yg(s,e,n),Xg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ha(s,a)}catch(a){await Qs(a)}}function Xg(i,e){(i.Ru.get(e)||[]).forEach(n=>{n.resolve()}),i.Ru.delete(e)}function Yg(i,e,n){const s=Se(i);let a=s.Au[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Au[s.currentUser.toKey()]=a}}function Th(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Pu.get(e))i.hu.delete(s),n&&i.lu.gu(s,n);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(s=>{i.du.containsKey(s)||Jg(i,s)})}function Jg(i,e){i.Tu.delete(e.path.canonicalString());const n=i.Iu.get(e);n!==null&&($h(i.remoteStore,n),i.Iu=i.Iu.remove(e),i.Eu.delete(n),Yh(i))}function ym(i,e,n){for(const s of n)s instanceof qg?(i.du.addReference(s.key,e),n1(i,s)):s instanceof Qg?(ae(Xh,"Document no longer in limbo: "+s.key),i.du.removeReference(s.key,e),i.du.containsKey(s.key)||Jg(i,s.key)):Ee(19791,{pu:s})}function n1(i,e){const n=e.key,s=n.path.canonicalString();i.Iu.get(n)||i.Tu.has(s)||(ae(Xh,"New document in limbo: "+n),i.Tu.add(s),Yh(i))}function Yh(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const n=new ye(nt.fromString(e)),s=i.Vu.next();i.Eu.set(s,new Hw(n)),i.Iu=i.Iu.insert(n,s),bg(i.remoteStore,new Kr(Zn(hg(n.path)),s,"TargetPurposeLimboResolution",nu.le))}}async function ha(i,e,n){const s=Se(i),a=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((g,_)=>{f.push(s.fu(_,e,n).then(v=>{var S;if((v||n)&&s.isPrimaryClient){const k=v?!v.fromCache:(S=n==null?void 0:n.targetChanges.get(_.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(_.targetId,k?"current":"not-current")}if(v){a.push(v);const k=jh.Rs(_.targetId,v);c.push(k)}}))}),await Promise.all(f),s.lu.Y_(a),await async function(_,v){const S=Se(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>H.forEach(v,x=>H.forEach(x.ds,$=>S.persistence.referenceDelegate.addReference(k,x.targetId,$)).next(()=>H.forEach(x.As,$=>S.persistence.referenceDelegate.removeReference(k,x.targetId,$)))))}catch(k){if(!Ks(k))throw k;ae(zh,"Failed to update sequence numbers: "+k)}for(const k of v){const x=k.targetId;if(!k.fromCache){const $=S.xs.get(x),J=$.snapshotVersion,Y=$.withLastLimboFreeSnapshotVersion(J);S.xs=S.xs.insert(x,Y)}}}(s.localStore,c))}async function r1(i,e){const n=Se(i);if(!n.currentUser.isEqual(e)){ae(Xh,"User change. New user:",e.toKey());const s=await Mg(n.localStore,e);n.currentUser=e,function(c,f){c.Ru.forEach(g=>{g.forEach(_=>{_.reject(new pe(K.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ha(n,s.ks)}}function i1(i,e){const n=Se(i),s=n.Eu.get(e);if(s&&s.cu)return Oe().add(s.key);{let a=Oe();const c=n.Pu.get(e);if(!c)return a;for(const f of c){const g=n.hu.get(f);a=a.unionWith(g.view.eu)}return a}}function Zg(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zw.bind(null,e),e.lu.Y_=bw.bind(null,e.eventManager),e.lu.gu=jw.bind(null,e.eventManager),e}function s1(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t1.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return ow(this.persistence,new rw,e.initialUser,this.serializer)}Su(e){return new Lg(bh.fi,this.serializer)}bu(e){return new dw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class o1 extends eu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){We(this.persistence.referenceDelegate instanceof Jl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zE(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Lg(s=>Jl.fi(s,n),this.serializer)}}class Ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=r1.bind(null,this.syncEngine),await Lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Fw}()}createDatastore(e){const n=hu(e.databaseInfo.databaseId),s=function(c){return new _w(c)}(e.databaseInfo);return function(c,f,g,_){return new Tw(c,f,g,_)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,g){return new Sw(s,a,c,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>gm(this.syncEngine,n,0),function(){return cm.C()?new cm:new pw}())}createSyncEngine(e,n){return function(a,c,f,g,_,v,S){const k=new qw(a,c,f,g,_,v);return S&&(k.mu=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=Se(a);ae(Bi,"RemoteStore shutting down."),c.da.add(5),await ca(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ih.provider={build:()=>new Ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="FirestoreClient";class l1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=bt.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{ae(si,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ae(si,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function th(i,e){i.asyncQueue.verifyOperationInProgress(),ae(si,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Mg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function _m(i,e){i.asyncQueue.verifyOperationInProgress();const n=await u1(i);ae(si,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>fm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>fm(e.remoteStore,a)),i._onlineComponents=e}async function u1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ae(si,"Using user provided OfflineComponentProvider");try{await th(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await th(i,new eu)}}else ae(si,"Using default OfflineComponentProvider"),await th(i,new o1(void 0));return i._offlineComponents}async function ey(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ae(si,"Using user provided OnlineComponentProvider"),await _m(i,i._uninitializedComponentsProvider._online)):(ae(si,"Using default OnlineComponentProvider"),await _m(i,new Ih))),i._onlineComponents}function c1(i){return ey(i).then(e=>e.syncEngine)}async function h1(i){const e=await ey(i),n=e.eventManager;return n.onListen=Qw.bind(null,e.syncEngine),n.onUnlisten=Xw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yw.bind(null,e.syncEngine),n}function f1(i,e,n={}){const s=new Jr;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,g,_,v){const S=new a1({next:x=>{S.xu(),f.enqueueAndForget(()=>Uw(c,k)),x.fromCache&&_.source==="server"?v.reject(new pe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),k=new zw(g,S,{includeMetadataChanges:!0,Qa:!0});return Bw(c,k)}(await h1(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(i,e,n){if(!n)throw new pe(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function d1(i,e,n,s){if(e===!0&&s===!0)throw new pe(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Em(i){if(!ye.isDocumentKey(i))throw new pe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wm(i){if(ye.isDocumentKey(i))throw new pe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee(12329,{type:typeof i})}function aa(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jh(i);throw new pe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="firestore.googleapis.com",Tm=!0;class Im{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ry,this.ssl=Tm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Tm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Og;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bE)throw new pe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ty((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Im({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Im(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new g0;switch(s.type){case"firstParty":return new E0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=vm.get(n);s&&(ae("ComponentProvider","Removing Datastore"),vm.delete(n),s.terminate())}(this),Promise.resolve()}}function p1(i,e,n,s={}){var a;i=aa(i,pu);const c=Ch(e),f=i._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),_=`${e}:${n}`;c&&($_(`https://${_}`),Q_("Firestore",!0)),f.host!==ry&&f.host!==_&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},f),{host:_,ssl:c,emulatorOptions:s});if(!jl(v,g)&&(i._setSettings(v),s.mockUserToken)){let S,k;if(typeof s.mockUserToken=="string")S=s.mockUserToken,k=bt.MOCK_USER;else{S=W_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new pe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new bt(x)}i._authCredentials=new y0(new qm(S,k))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class bn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class Zr extends mu{constructor(e,n,s){super(e,n,hg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new ye(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Sm(i,e,...n){if(i=Jo(i),ny("collection","path",e),i instanceof pu){const s=nt.fromString(e,...n);return wm(s),new Zr(i,null,s)}{if(!(i instanceof bn||i instanceof Zr))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(nt.fromString(e,...n));return wm(s),new Zr(i.firestore,null,s)}}function iy(i,e,...n){if(i=Jo(i),arguments.length===1&&(e=Km.newId()),ny("doc","path",e),i instanceof pu){const s=nt.fromString(e,...n);return Em(s),new bn(i,null,new ye(s))}{if(!(i instanceof bn||i instanceof Zr))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(nt.fromString(e,...n));return Em(s),new bn(i.firestore,i instanceof Zr?i.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="AsyncQueue";class Cm{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Bg(this,"async_queue_retry"),this.rc=()=>{const s=eh();s&&ae(Am,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Jr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ks(e))throw e;ae(Am,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Tr("INTERNAL UNHANDLED ERROR: ",Rm(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Qh.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(a),a}oc(){this.Xu&&Ee(47125,{cc:Rm(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Rm(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class gu extends pu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Cm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cm(e),this._firestoreClient=void 0,await e}}}function m1(i,e){const n=typeof i=="object"?i:r0(),s=typeof i=="string"?i:Hl,a=Jv(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=j_("firestore");c&&p1(a,...c)}return a}function sy(i){if(i._terminated)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||g1(i),i._firestoreClient}function g1(i){var e,n,s;const a=i._freezeSettings(),c=function(g,_,v,S){return new L0(g,_,v,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,ty(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new l1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ws(Ot.fromBase64String(e))}catch(n){throw new pe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ws(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=/^__.*__$/;class _1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new la(e,this.data,n,this.fieldTransforms)}}function ay(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ic:i})}}class nf{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Vc(e),a}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:s,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ay(this.Ic)&&y1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class v1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||hu(e)}bc(e,n,s,a=!1){return new nf({Ic:e,methodName:n,wc:s,path:Dt.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function E1(i){const e=i._freezeSettings(),n=hu(i._databaseId);return new v1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function w1(i,e,n,s,a,c={}){const f=i.bc(c.merge||c.mergeFields?2:0,e,n,a);hy("Data must be an object, but it was:",f,s);const g=uy(s,f);let _,v;if(c.merge)_=new Un(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const k of c.mergeFields){const x=T1(e,k,n);if(!f.contains(x))throw new pe(K.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);S1(S,x)||S.push(x)}_=new Un(S),v=f.fieldTransforms.filter(k=>_.covers(k.field))}else _=null,v=f.fieldTransforms;return new _1(new wn(g),_,v)}function ly(i,e){if(cy(i=Jo(i)))return hy("Unsupported field value:",e,i),uy(i,e);if(i instanceof oy)return function(s,a){if(!ay(a.Ic))throw a.gc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const g of s){let _=ly(g,a.fc(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=Jo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=wt.fromDate(s);return{timestampValue:Yl(a.serializer,c)}}if(s instanceof wt){const c=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yl(a.serializer,c)}}if(s instanceof ef)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ws)return{bytesValue:Rg(a.serializer,s._byteString)};if(s instanceof bn){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof tf)return function(f,g){return{mapValue:{fields:{[ng]:{stringValue:rg},[ql]:{arrayValue:{values:f.toArray().map(v=>{if(typeof v!="number")throw g.gc("VectorValues must only contain numeric values.");return Oh(g.serializer,v)})}}}}}}(s,a);throw a.gc(`Unsupported field value: ${Jh(s)}`)}(i,e)}function uy(i,e){const n={};return Xm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(i,(s,a)=>{const c=ly(a,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function cy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof wt||i instanceof ef||i instanceof Ws||i instanceof bn||i instanceof oy||i instanceof tf)}function hy(i,e,n){if(!cy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Jh(n);throw s==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+s)}}function T1(i,e,n){if((e=Jo(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return fy(i,e);throw tu("Field path arguments must be of type string or ",i,!1,void 0,n)}const I1=new RegExp("[~\\*/\\[\\]]");function fy(i,e,n){if(e.search(I1)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Zh(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function tu(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${s}`),f&&(_+=` in document ${a}`),_+=")"),new pe(K.INVALID_ARGUMENT,g+i+_)}function S1(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(py("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A1 extends dy{data(){return super.data()}}function py(i,e){return typeof e=="string"?fy(i,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R1{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ui(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n[ql].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>ht(f.doubleValue));return new tf(c)}convertGeoPoint(e){return new ef(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=iu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=ti(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nt.fromString(e);We(Dg(s),9688,{name:e});const a=new ra(s.get(1),s.get(3)),c=new ye(s.popFirst(5));return a.isEqual(n)||Tr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k1 extends dy{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(py("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ul extends k1{data(e={}){return super.data(e)}}class V1{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new xl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ul(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(g=>{const _=new Ul(a._firestore,a._userDataWriter,g.doc.key,g.doc,new xl(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const _=new Ul(a._firestore,a._userDataWriter,g.doc.key,g.doc,new xl(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,S=-1;return g.type!==0&&(v=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),S=f.indexOf(g.doc.key)),{type:N1(g.type),doc:_,oldIndex:v,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function N1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:i})}}class x1 extends R1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function D1(i){i=aa(i,mu);const e=aa(i.firestore,gu),n=sy(e),s=new x1(e);return C1(i._query),f1(n,i._query).then(a=>new V1(e,s,i,a))}function O1(i){return my(aa(i.firestore,gu),[new Lh(i._key,er.none())])}function L1(i,e){const n=aa(i.firestore,gu),s=iy(i),a=P1(i.converter,e);return my(n,[w1(E1(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,er.exists(!1))]).then(()=>s)}function my(i,e){return function(s,a){const c=new Jr;return s.asyncQueue.enqueueAndForget(async()=>Jw(await c1(s),a,c)),c.promise}(sy(i),e)}(function(e,n=!0){(function(a){qs=a})(n0),$l(new Zo("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new gu(new _0(s.getProvider("auth-internal")),new w0(f,s.getProvider("app-check-internal")),function(v,S){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(v.options.projectId,S)}(f,a),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Ms(Np,xp,e),Ms(Np,xp,"esm2017")})();const M1={apiKey:"AIzaSyBQkuO6ltmJ8cfJI9B3Wct7QE6Kh0nvl44",authDomain:"chocolate-batch-calculator.firebaseapp.com",projectId:"chocolate-batch-calculator",storageBucket:"chocolate-batch-calculator.firebasestorage.app",messagingSenderId:"Y1084846149691",appId:"1:1084846149691:web:dc94e0c74818edb9e70c1e",measurementId:"G-6HVVMECN6R"},F1=Mm(M1),nh=m1(F1);function gy(...i){return i.filter(Boolean).join(" ")}const B1=({className:i,...e})=>ie.jsx("div",{className:gy("rounded-lg border bg-white p-4 shadow-sm",i),...e}),U1=({className:i,...e})=>ie.jsx("div",{className:gy("p-4",i),...e}),Di=({className:i,...e})=>ie.jsx("input",{className:`border rounded-md p-2 ${i}`,...e}),Dl=({children:i,className:e,...n})=>ie.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white rounded-md ${e}`,...n,children:i}),Li=i=>i?"opacity-50 bg-gray-100":"border-2 border-blue-300 bg-blue-50 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",b1=i=>i?"font-semibold text-blue-700 bg-blue-50 rounded-md py-1 px-2 border border-blue-300":"",j1=(i,e)=>{const n=Li(i),s=parseFloat(e);return!isNaN(s)&&s>100?`${n} border-red-500 bg-red-50 text-red-700`:n};function z1(){const[i,e]=qe.useState(""),[n,s]=qe.useState(""),[a,c]=qe.useState(""),[f,g]=qe.useState(0),[_,v]=qe.useState(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),[S,k]=qe.useState([]),[x,$]=qe.useState(!1),[J,Y]=qe.useState(null),[j,Ae]=qe.useState(!1),[ve,we]=qe.useState(!1),[ke,rt]=qe.useState(null),[Le,V]=qe.useState(!1),[w,A]=qe.useState({index:null,field:null}),[C,N]=qe.useState(0),[D,I]=qe.useState("g"),[Ze,lt]=qe.useState({}),Fe=B=>parseFloat(B).toFixed(2),Ve=()=>a.trim()!==""&&(j||i>0)&&n>0,te=B=>{if(!B||isNaN(parseFloat(B)))return"";const U=parseFloat(B);return D==="lbs"?(U/453.59237).toFixed(2):parseFloat(U).toFixed(2)},de=B=>{if(!B||isNaN(parseFloat(B)))return"";const U=parseFloat(B);return D==="lbs"?(U*453.59237).toString():U.toString()},se=B=>{if(!B||isNaN(parseFloat(B)))return"N/A";const U=parseFloat(B);return D==="lbs"?`${(U/453.59237).toFixed(2)} lbs`:`${U.toFixed(2)} g`},O=(B,U,Z)=>{if(!j&&B===C&&U!=="name")return;const ne=[..._];if(Z===""){ne[B][U]=Z,v(ne);return}if(A({index:B,field:U}),ne[B][U]=Z,U==="name"){v(ne);return}if(U==="weightPerBar"&&Z!==""?ne[B].staticField="weightPerBar":U==="percentage"&&Z!==""?ne[B].staticField="percentage":U==="totalWeight"&&Z!==""&&(ne[B].staticField="totalWeight"),(U==="weightPerBar"||U==="percentage")&&!isNaN(parseFloat(Z))){const re=parseFloat(Z);if(U==="weightPerBar"&&ne[B].staticField==="weightPerBar"){const _e=re*i;ne[B].totalWeight=Fe(_e);const Ne=f>0?_e/f*100:0;ne[B].percentage=Fe(Ne)}else if(U==="percentage"&&ne[B].staticField==="percentage"){const _e=re/100*f;ne[B].totalWeight=Fe(_e);const Ne=i>0?_e/i:0;ne[B].weightPerBar=Fe(Ne)}}if(U==="totalWeight"&&!isNaN(parseFloat(Z))){const re=parseFloat(Z);if(A({index:B,field:U}),ne[B].totalWeight=Z,ne[B].staticField="totalWeight",j){if(ne[B].staticField="totalWeight",g(_e=>(parseFloat(_[B].totalWeight),_.reduce((Ke,cn,Tn)=>Tn!==B?Ke+(parseFloat(cn.totalWeight)||0):Ke,0)+re)),i>0){const _e=re/i;ne[B].weightPerBar=Fe(_e)}}else{if(ne[B].staticField="totalWeight",i>0){const _e=re/i;ne[B].weightPerBar=Fe(_e)}if(f>0){const _e=re/f*100;ne[B].percentage=Fe(_e)}}}else ne[B].totalWeight=Z;v(ne),setTimeout(()=>{A({index:null,field:null}),V(re=>!re)},300)},W=B=>{if(B===C)return;const U={..._[C]};({..._[B]});const Z=[..._];U.weightPerBar&&U.percentage&&(Z[C]={...U,staticField:"weightPerBar"}),N(B),v(Z)},fe=()=>{e(""),s(""),c(""),g(0),v(Array(5).fill().map(()=>({name:"",weightPerBar:"",percentage:"",totalWeight:"",staticField:"weightPerBar"}))),Ae(!1),we(!1),rt(null),N(0)},Ce=async()=>{if(!a){alert("Please enter a batch name before saving.");return}$(!0),Y(null);const B={batchName:a,numBars:i,barWeight:n,totalBatchWeight:f,ingredients:_,createdAt:new Date().toISOString()};try{const U=await L1(Sm(nh,"batches"),B);B.id=U.id,k(Z=>[...Z,B]),alert("Batch saved successfully!")}catch(U){console.error("Error saving batch:",U),Y("Failed to save batch"),alert("Failed to save batch. Please try again.")}finally{$(!1)}},Re=B=>{B&&(c(B.batchName),e(B.numBars),s(B.barWeight),g(B.totalBatchWeight),v(B.ingredients))},De=async B=>{if(window.confirm("Are you sure you want to delete this batch?")){$(!0),Y(null);try{const U=iy(nh,"batches",B);await O1(U),k(Z=>Z.filter(ne=>ne.id!==B)),alert("Batch deleted successfully!")}catch(U){console.error("Error deleting batch:",U),Y("Failed to delete batch"),alert("Failed to delete batch. Please try again.")}finally{$(!1)}}};qe.useEffect(()=>{(async()=>{$(!0),Y(null);try{const U=Sm(nh,"batches"),ne=(await D1(U)).docs.map(re=>({id:re.id,...re.data()}));k(ne)}catch(U){console.error("Error fetching batches:",U),Y("Failed to load saved batches")}finally{$(!1)}})()},[]),qe.useEffect(()=>{if(j&&f>0&&n>0){const B=f/n,U=Math.abs(B-Math.round(B))<.01?Math.round(B):Math.floor(B);!isNaN(U)&&U!==i&&e(U)}},[Le,j,f,n,i]),qe.useEffect(()=>{if(!j&&i>0&&n>0){const B=parseFloat(i)*parseFloat(n),U=Math.round(B);!isNaN(U)&&U!==f&&g(U)}},[i,n,j,f]),qe.useEffect(()=>{if(!j&&i>0&&n>0){if(w.index!==null)return;const B=parseFloat(i)*parseFloat(n);let U=0,Z=0;_.forEach((re,_e)=>{if(_e!==C){if(re.staticField==="weightPerBar"&&re.weightPerBar){const Ke=(parseFloat(re.weightPerBar)||0)*i;Ke>0&&(U+=Ke/B*100,Z+=Ke)}else if(re.staticField==="percentage"&&re.percentage){const Ne=parseFloat(re.percentage)||0;Ne>0&&(U+=Ne,Z+=Ne/100*B)}else if(re.staticField==="totalWeight"&&re.totalWeight){const Ne=parseFloat(re.totalWeight)||0;Ne>0&&(U+=Ne/B*100,Z+=Ne)}}});const ne=_.map((re,_e)=>{if(_e===C){const qt=Math.max(0,100-U),ir=Math.max(0,B-Z),In=i>0?ir/i:0;return{...re,percentage:Fe(qt),totalWeight:Fe(ir),weightPerBar:Fe(In)}}if(!(re.weightPerBar!==""&&!isNaN(parseFloat(re.weightPerBar))||re.percentage!==""&&!isNaN(parseFloat(re.percentage))||re.totalWeight!==""&&!isNaN(parseFloat(re.totalWeight))))return re;const Ke=parseFloat(re.percentage)||0,cn=parseFloat(re.weightPerBar)||0,Tn=parseFloat(re.totalWeight)||0;if(Ke>0&&re.staticField==="percentage"){const qt=Ke/100*B;return{...re,totalWeight:isNaN(qt)?"0":qt.toFixed(2),weightPerBar:i>0?(qt/i).toFixed(2):"0"}}if(cn>0&&re.staticField==="weightPerBar"){const qt=cn*i;return{...re,totalWeight:isNaN(qt)?"0":qt.toFixed(2),percentage:B>0?(qt/B*100).toFixed(2):"0"}}return Tn>0&&re.staticField==="totalWeight"?{...re,percentage:B>0?(Tn/B*100).toFixed(2):"0",weightPerBar:i>0?(Tn/i).toFixed(2):"0"}:re});JSON.stringify(ne)!==JSON.stringify(_)&&v(ne)}},[i,n,j,f,_,w,C]),qe.useEffect(()=>{if(j&&f>0){if(w.index!==null)return;v(B=>{const U=[...B];return U.forEach((Z,ne)=>{if(ne>0&&Z.staticField==="percentage"&&Z.percentage){const _e=(parseFloat(Z.percentage)||0)/100*f;if(_e>0&&(U[ne].totalWeight=Fe(_e),i>0)){const Ne=_e/i;U[ne].weightPerBar=Fe(Ne)}}}),U})}},[j,f,i,w]),qe.useEffect(()=>{j&&v(B=>{const U=[...B],ne=100-U.slice(1).reduce((_e,Ne)=>_e+(parseFloat(Ne.percentage)||0),0),re=ne>0?ne.toFixed(2):"0";return U[0].percentage!==re?(U[0].percentage=re,U):B})},[j,_]),qe.useEffect(()=>{j&&f>0&&i>0&&v(B=>{const U=[...B];let Z=!1;return U.forEach((ne,re)=>{if(w.index===re)return;const _e=parseFloat(ne.totalWeight)||0;if(re===0||ne.staticField==="percentage"){const Ne=_e>0?(_e/i).toFixed(2):"0";Ne!==ne.weightPerBar&&(U[re].weightPerBar=Ne,Z=!0)}}),Z?U:B})},[j,f,i,w]);const je=B=>{const U=B.target.checked;if(Ae(U),U){we(!1),console.log("Switching to auto mode, bar weight:",n);const Z=parseFloat(n);if(Z>0){const ne=Z;console.log("Setting initial batch weight to:",ne),g(ne),e(1),v(re=>{const _e=[...re];return _e[0]={..._e[0],totalWeight:Z.toString(),percentage:"100",weightPerBar:Z.toString(),staticField:"totalWeight"},_e})}else g(0),e(0),v(ne=>{const re=[...ne];return re[0]={...re[0],totalWeight:"",percentage:"100",weightPerBar:"",staticField:"totalWeight"},re})}else e(""),i>0&&n>0&&g(i*n)};return qe.useEffect(()=>{if(j&&!w.index){const B=_.reduce((U,Z)=>{const ne=parseFloat(Z.totalWeight)||0;return U+ne},0);Math.abs(B-parseFloat(f))>.01&&g(B.toFixed(2))}},[j,_,w]),qe.useEffect(()=>{if(j){const B=_.reduce((U,Z)=>U+(parseFloat(Z.percentage)||0),0);B>100&&console.warn("Total percentage exceeds 100%:",B)}},[j,_]),qe.useEffect(()=>{if(j&&parseFloat(f)>0){if(w.index!==null)return;v(B=>{const U=[...B];let Z=!1;return U.forEach((ne,re)=>{if(ne.staticField==="percentage"){const _e=parseFloat(ne.percentage)||0;if(_e>0){const Ne=_e/100*f,Ke=Fe(Ne);if(Ke!==ne.totalWeight){if(U[re].totalWeight=Ke,i>0){const cn=Ne/i;U[re].weightPerBar=Fe(cn)}Z=!0}}}}),Z?U:B})}},[j,f,i,w]),qe.useEffect(()=>{if(j&&f>0){if(w.index!==null&&w.field==="totalWeight")return;v(B=>{const U=[...B];let Z=!1;return U.forEach((ne,re)=>{if(ne.staticField!=="percentage"){const _e=parseFloat(ne.totalWeight)||0;if(_e>0){const Ne=_e/f*100,Ke=Fe(Ne);Ke!==ne.percentage&&(U[re].percentage=Ke,Z=!0)}}}),Z?U:B})}},[j,f,w]),qe.useEffect(()=>{A({index:null,field:null}),lt({})},[D]),ie.jsxs("div",{className:"p-6 max-w-lg mx-auto",children:[ie.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Chocolate Batch Calculator"}),ie.jsx(B1,{children:ie.jsxs(U1,{className:"p-4 space-y-6",children:[ie.jsxs("div",{className:"border-2 border-gray-300 rounded-md p-4 bg-gray-50",children:[ie.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Batch Settings"}),ie.jsxs("div",{className:"flex flex-col space-y-2 mb-3",children:[ie.jsx("div",{className:"flex items-center justify-between",children:ie.jsxs("label",{className:"block font-bold",children:["Batch Name ",ie.jsx("span",{className:"text-red-500",children:"*"})]})}),ie.jsx(Di,{type:"text",placeholder:"Batch Name",value:a,onChange:B=>c(B.target.value),required:!0,className:Li(!1)})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-1",children:[ie.jsxs("label",{className:"block font-bold",children:["Number of Bars ",j?null:ie.jsx("span",{className:"text-red-500",children:"*"})]}),ie.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[ie.jsx("input",{type:"checkbox",checked:j,onChange:je}),ie.jsx("span",{children:"Auto-calc"})]})]}),ie.jsx(Di,{type:"number",placeholder:"Number of Bars",value:i,onChange:B=>{e(B.target.value),we(!0)},required:!j,disabled:j,className:Li(j)})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsxs("label",{className:"block font-bold",children:["Weight of Individual Bar (g) ",ie.jsx("span",{className:"text-red-500",children:"*"})]}),ie.jsx(Di,{type:"number",placeholder:"Bar Weight (g)",value:n,onChange:B=>s(B.target.value),required:!0,className:Li(!1)})]}),ie.jsxs("div",{className:"mb-3",children:[ie.jsx("label",{className:"block font-bold mb-1",children:"Weight Unit"}),ie.jsxs("div",{className:"flex border rounded overflow-hidden",children:[ie.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${D==="g"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>I("g"),type:"button",children:"Grams (g)"}),ie.jsx("button",{className:`flex-1 py-2 px-4 focus:outline-none ${D==="lbs"?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>I("lbs"),type:"button",children:"Pounds (lbs)"})]})]}),ie.jsx("div",{className:"font-bold mt-3 text-center",children:parseFloat(f)>0?`Total Batch Weight: ${se(f)}`:"Total Weight: N/A"})]}),ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ingredients"}),ie.jsx("ul",{className:"space-y-4",children:_.map((B,U)=>ie.jsxs("li",{className:"flex flex-col space-y-2",children:[U>0&&ie.jsx("hr",{className:"border-gray-300 my-2"}),ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("label",{className:"block font-bold",children:["Ingredient #",U+1]}),j&&U===0?ie.jsx("span",{className:"text-sm text-gray-500 italic",children:"Base ingredient"}):null,!j&&ie.jsxs("label",{className:`flex items-center space-x-2 ${b1(U===C)}`,children:[ie.jsx("input",{type:"radio",name:"autoPercentageIngredient",checked:C===U,onChange:()=>W(U),disabled:!Ve()}),ie.jsx("span",{className:"text-sm",children:"Auto-calc"})]})]}),ie.jsx(Di,{type:"text",placeholder:"Name",value:B.name,onChange:Z=>O(U,"name",Z.target.value),disabled:!Ve(),className:Li(!Ve())}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Percentage (%)",B.staticField==="percentage"&&B.percentage&&!(!j&&U===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"}),!isNaN(parseFloat(B.percentage))&&parseFloat(B.percentage)>100&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-red-600",children:"(exceeds 100%)"})]}),ie.jsx(Di,{type:"number",placeholder:"Percentage (%)",value:B.percentage,onChange:Z=>O(U,"percentage",Z.target.value),onFocus:()=>A({index:U,field:"percentage"}),disabled:!Ve()||j&&U===0||!j&&U===C,className:j1(!Ve()||j&&U===0||!j&&U===C,B.percentage)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Weight/Bar (g)",B.staticField==="weightPerBar"&&B.weightPerBar&&!(!j&&U===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),ie.jsx(Di,{type:"number",inputMode:"decimal",step:"any",placeholder:"Weight per bar (g)",value:B.weightPerBar??"",onChange:Z=>O(U,"weightPerBar",Z.target.value),onFocus:()=>A({index:U,field:"weightPerBar"}),disabled:!Ve()||j&&U===0||!j&&U===C,className:Li(!Ve()||j&&U===0||!j&&U===C)})]}),ie.jsxs("div",{children:[ie.jsxs("label",{className:"block font-bold",children:["Total Weight (",D,")",B.staticField==="totalWeight"&&!(!j&&U===C)&&ie.jsx("span",{className:"ml-2 text-xs font-normal text-green-600",children:"(used for calculation)"})]}),ie.jsx(Di,{type:"text",inputMode:"decimal",placeholder:`Total Weight (${D})`,value:w.index===U&&w.field==="totalWeight"?Ze[U]||"":te(B.totalWeight),onChange:Z=>{const ne=Z.target.value;lt(_e=>({..._e,[U]:ne})),A({index:U,field:"totalWeight"});const re=[..._];if(re[U].staticField="totalWeight",D==="g")O(U,"totalWeight",ne);else if(D==="lbs"&&ne&&!isNaN(parseFloat(ne))){const _e=de(ne);if(re[U].totalWeight=_e,i>0){const Ke=parseFloat(_e)/i;re[U].weightPerBar=Fe(Ke)}if(f>0){const Ke=parseFloat(_e)/f*100;re[U].percentage=Fe(Ke)}v(re),V(Ne=>!Ne)}else v(re)},onBlur:()=>{if(D==="lbs"){const Z=Ze[U];if(Z!==void 0&&Z!==""&&!isNaN(parseFloat(Z))){const ne=de(Z);O(U,"totalWeight",ne)}else(Z===""||isNaN(parseFloat(Z)))&&O(U,"totalWeight","")}setTimeout(()=>{w.index===U&&w.field==="totalWeight"&&A({index:null,field:null})},100)},onFocus:()=>{A({index:U,field:"totalWeight"}),D==="lbs"&&B.totalWeight?lt(ne=>({...ne,[U]:te(B.totalWeight)})):lt(ne=>({...ne,[U]:B.totalWeight||""}));const Z=[..._];Z[U].staticField="totalWeight",v(Z)},disabled:!Ve()||!j&&U===C,className:Li(!Ve()||!j&&U===C)})]})]},U))})]}),ie.jsxs("div",{className:"flex space-x-4 mt-4",children:[ie.jsx(Dl,{onClick:()=>Ce(),disabled:x,children:x?"Saving...":"Save Batch"}),ie.jsx(Dl,{onClick:()=>fe(),variant:"secondary",disabled:x,children:"Reset Batch"})]}),ie.jsxs("div",{className:"mt-6",children:[ie.jsx("h2",{className:"text-lg font-semibold",children:"Saved Batches"}),J&&ie.jsx("p",{className:"text-red-500",children:J}),x&&ie.jsx("p",{children:"Loading batches..."}),!x&&S.length>0?ie.jsx("ul",{className:"space-y-2",children:S.map(B=>ie.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[ie.jsx("span",{children:B.batchName}),ie.jsxs("div",{className:"flex space-x-2",children:[ie.jsx(Dl,{onClick:()=>Re(B),variant:"secondary",size:"sm",children:"Restore"}),ie.jsx(Dl,{onClick:()=>De(B.id),variant:"destructive",size:"sm",children:"Delete"})]})]},B.id))}):!x&&ie.jsx("p",{children:"No saved batches yet."})]})]})})]})}V_.createRoot(document.getElementById("root")).render(ie.jsx(I_.StrictMode,{children:ie.jsx(z1,{})}));
